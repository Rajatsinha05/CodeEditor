const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/@monaco-editor-BRJW5S16.js","assets/state-local-BBNhjlcY.js","assets/react-jFCOF4Hn.js","assets/cookie-BUjw_IJ9.js"])))=>i.map(i=>d[i]);
import{W as E,r as c,j as e}from"./react-jFCOF4Hn.js";import{c as jn}from"./react-dom-DImmD9hB.js";import{F as bn,a as yn,b as Cn,c as vn,d as Ps,e as Sn,f as wn,g as Us,h as kn,i as An,M as In,j as Mn,k as Os,l as Tn,m as zn,n as Ns,o as Qs,p as En,q as Ws,r as Fn,s as Rn,t as Bn,u as $n,B as Dn,v as Ln,w as Pn,x as Un,y as ws,z as xs,A as On,C as _s,D as Nn,E as qs,G as Ys,H as Hs,I as Qn,J as Wn,K as _n,L as qn,N as Yn,O as Hn,P as ks,Q as Vn,R as Gn,S as Kn,T as Xn,U as Vs,V as Jn,W as Zn,X as Gs,Y as As,Z as er,_ as Ks,$ as tr,a0 as sr,a1 as nr,a2 as Xs,a3 as rr,a4 as or,a5 as ar,a6 as lr,a7 as ir,a8 as dr,a9 as cr,aa as ur,ab as hr,ac as gr,ad as pr,ae as mr}from"./react-icons-BJzcTtjg.js";import{u as se,a as W,s as Yt,P as xr}from"./react-redux-CjqDrOXl.js";import{c as Se,a as F,b as fr}from"./@reduxjs-iuNvR3hY.js";import{a as de}from"./js-cookie-Cz0CWeBA.js";import{a as jr}from"./axios-DXsv3KKR.js";import{j as fs}from"./jwt-decode-VWaDGczM.js";import{u as ce,M as Ae,a as ue,b as Ie,c as he,d as xe,e as ge,F as L,f as Q,I as X,g as Is,B as R,h as Fe,i as Ye,j as js,k as Me,l as p,m as b,n as _,o as ae,H as O,T as K,p as Ue,q as Oe,r as m,s as Ne,t as le,D as rt,v as ot,V as N,C as br,w as $e,S as ee,L as yr,x as D,y as Re,z as ke,A as ve,E as Cr,G as vr,J as Sr,K as Js,N as wr,O as kr,W as Ar,P as bs,Q as Zs,R as Ir,U as Mr,X as Tr,Y as Ee,Z as Le,_ as en,$ as tn,a0 as sn,a1 as Ut,a2 as ye,a3 as nn,a4 as Ce,a5 as zr,a6 as Er,a7 as He,a8 as Fr,a9 as Ve,aa as rn,ab as at,ac as Rr,ad as Br,ae as $r,af as Dr,ag as on,ah as Lr,ai as Pr,aj as Ur}from"./@chakra-ui-BYtPD8hZ.js";import{u as we,a as Or,N as be,L as an,b as Qe,c as Ms,R as Nr,d as me,B as Qr}from"./react-router-ophhXK_4.js";import{u as Wr}from"./ulid-i5KY_LTS.js";import{R as _r}from"./react-quill-D7oTSmtw.js";import"./dompurify-Biz7l87P.js";import{k as We}from"./@emotion-Bh8AgKZt.js";import{_ as qr,m as Yr}from"./monaco-editor-CwXsF3KI.js";import{D as Hr}from"./react-draggable-CkRcjnVC.js";import{n as Vr}from"./face-api.js-CtcETjdL.js";import{S as Ot}from"./react-select-Cg1TMCPD.js";import{B as Gr}from"./react-chartjs-2-Dq-jdpd6.js";import{C as Kr,g as Xr,L as Jr,B as Zr,p as eo,h as to,j as so}from"./chart.js-DEe_QZFj.js";import{p as no}from"./chartjs-plugin-datalabels-BSxbraCG.js";import{r as ro,u as dt,w as oo}from"./xlsx-uoQkVabA.js";import{d as re,a as ln}from"./dayjs-C2y6QNkI.js";import{l as ao}from"./lodash-B_5ojVO7.js";import{m as lo}from"./framer-motion-CgCMseqK.js";import{c as io}from"./redux-DITMfSWq.js";import"./cookie-BUjw_IJ9.js";import"./scheduler-CzFDRTuY.js";import"./use-sync-external-store-Dz6rZ9rA.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./lodash.mergewith-DbJdMb3_.js";import"./color2k-BSHHkqKj.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-Bva1P4M7.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-Jy3W84U5.js";import"./react-style-singleton-C4WTM5Kk.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-BJSt_dHL.js";import"./use-callback-ref-DHdZXJdn.js";import"./react-focus-lock-Ccz9hPaQ.js";import"./@babel-DMUs59Q8.js";import"./focus-lock-CAkr-jOZ.js";import"./react-clientside-effect-xH5Uzvd3.js";import"./@popperjs-BQBsAJpH.js";import"./react-fast-compare-DgLjJOcR.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./stylis-YPZU7XtI.js";import"./prop-types-BKNjMPK8.js";import"./@floating-ui-RYOEkms0.js";import"./use-isomorphic-layout-effect-DwWn6In7.js";import"./memoize-one-BdPwpGay.js";import"./@kurkle-D8fDXNIl.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}})();const co="http://localhost:8090",I=jr.create({baseURL:co});I.interceptors.request.use(n=>{const t=de.get("token"),s=n.url.includes("/users/login")||n.url.includes("/users/signup");return t&&!s&&(n.headers.Authorization=`Bearer ${t}`),n},n=>Promise.reject(n));const ys=n=>{if(!n||typeof n!="string")return{};const t={},s=/\b(\w+)=([^,]+)(?=,|$)/g;let r;for(;(r=s.exec(n))!==null;){const o=r[1].trim();let a=r[2].trim().replace(/\)$/,"");a.startsWith("'")&&a.endsWith("'")&&(a=a.slice(1,-1)),o==="role"&&a.endsWith("}")&&(a=a.slice(0,-1)),t[o]=a==="null"?null:a}return t},Te=(n,t,s)=>F(n,async(r,{rejectWithValue:o})=>{var a;try{const l=await t(r);return s?s(l.data):l.data}catch(l){return o(((a=l.response)==null?void 0:a.data)||"An error occurred.")}}),Ht=Te("api/getUsers",()=>I.get("/users")),Ge=Te("api/login",n=>I.post("/users/login",n),n=>{const{token:t,user:s}=n;return de.set("token",t,{expires:7}),de.set("userToken",s,{expires:7}),{...n,user:ys(fs(s).sub)}}),De=Te("api/getStudents",()=>I.get("/students")),Vt=Te("api/getStudentById",n=>I.get(`/students/${n}`)),Ke=Te("api/createStudent",n=>I.post("/students",{...n})),ct=Te("api/updateStudent",({id:n,studentData:t})=>I.put(`/students/${n}`,t)),ut=Te("api/deleteStudent",n=>I.delete(`/students/${n}`)),Gt=Te("api/createStudentsFromFile",n=>I.post("/students/upload",n,{headers:{"Content-Type":"multipart/form-data"}})),Kt=Te("api/createUser",n=>I.post("/users/signup",{...n})),uo={loading:!1,user:de.get("userToken")?ys(fs(de.get("userToken")).sub):null,students:[],student:{},users:[],isLogin:!!de.get("token"),token:de.get("token")||null,error:null},dn=Se({name:"api",initialState:uo,reducers:{logout:n=>{de.remove("userToken"),de.remove("token"),n.user=null,n.isLogin=!1,n.token=null}},extraReducers:n=>{const t=o=>{o.loading=!0,o.error=null},s=(o,a)=>{o.loading=!1,o.error=a.payload},r=(o,a,l)=>{o[l]=a.payload,o.loading=!1};n.addCase(Ge.pending,t).addCase(Ge.fulfilled,(o,a)=>{o.user=a.payload.user,o.token=a.payload.token,o.isLogin=!0,o.loading=!1}).addCase(Ge.rejected,s).addCase(Ht.pending,t).addCase(Ht.fulfilled,(o,a)=>r(o,a,"users")).addCase(Ht.rejected,s).addCase(De.pending,t).addCase(De.fulfilled,(o,a)=>r(o,a,"students")).addCase(De.rejected,s).addCase(Vt.pending,t).addCase(Vt.fulfilled,(o,a)=>r(o,a,"student")).addCase(Vt.rejected,s).addCase(Ke.pending,t).addCase(Ke.fulfilled,(o,a)=>{o.students.push(a.payload),o.loading=!1}).addCase(Ke.rejected,s).addCase(ct.pending,t).addCase(ct.fulfilled,(o,a)=>{const l=a.payload,u=o.students.findIndex(d=>d.id===l.id);u!==-1&&(o.students[u]=l),o.loading=!1}).addCase(ct.rejected,s).addCase(ut.pending,t).addCase(ut.fulfilled,(o,a)=>{o.students=o.students.filter(l=>l.id!==a.payload.id),o.loading=!1}).addCase(ut.rejected,s).addCase(Gt.pending,t).addCase(Gt.fulfilled,r).addCase(Gt.rejected,s).addCase(Kt.pending,t).addCase(Kt.fulfilled,r).addCase(Kt.rejected,s)}}),{logout:ho}=dn.actions,go=dn.reducer,B=(n,t,s="info",r=3e3)=>{n({description:t,status:s,duration:r,isClosable:!0,position:"top",containerStyle:{maxWidth:"240px",padding:"5px"}})},po=({isOpen:n,onClose:t})=>{const s=se(),[r,o]=c.useState({email:"",password:""}),[a,l]=c.useState({email:"",password:""}),u=ce(),{isLogin:d,loginError:h}=W(x=>x.data),g=we(),i=x=>{const{name:j,value:y}=x.target;o(v=>({...v,[j]:y})),l(v=>({...v,[j]:""}))},f=async x=>{x.preventDefault();const j={};let y=!0;if(r.email||(j.email="Email is required",y=!1),r.password||(j.password="Password is required",y=!1),!y){l(j);return}try{const v=await s(Ge(r)).unwrap();B(u,"Login successful","success"),o({email:"",password:""}),g("/")}catch(v){B(u,v||"An error occurred during login","error")}};return c.useEffect(()=>{d&&(o({email:"",password:""}),g("/"))},[d,g,t]),e.jsxs(Ae,{isOpen:n,onClose:t,size:"md",children:[e.jsx(ue,{}),e.jsxs(Ie,{children:[e.jsx(he,{textAlign:"center",children:"Login"}),e.jsx(xe,{}),e.jsx(ge,{children:e.jsxs("form",{onSubmit:f,children:[e.jsxs(L,{mb:4,isInvalid:!!a.email,children:[e.jsx(Q,{children:"Email"}),e.jsx(X,{type:"email",name:"email",value:r.email,onChange:i,placeholder:"Enter your email"}),e.jsx(Is,{children:a.email})]}),e.jsxs(L,{mb:4,isInvalid:!!a.password,children:[e.jsx(Q,{children:"Password"}),e.jsx(X,{type:"password",name:"password",value:r.password,onChange:i,placeholder:"Enter your password"}),e.jsx(Is,{children:a.password})]}),e.jsx(R,{type:"submit",colorScheme:"blue",w:"100%",children:"Login"})]})}),e.jsx(Fe,{justifyContent:"center",children:e.jsx(R,{variant:"ghost",onClick:t,children:"Cancel"})})]})]})},cn=E.memo(po),mo=()=>{const{colorMode:n,toggleColorMode:t}=Ye(),s="1.5rem",[r,o]=c.useState(!1),{isLogin:a,user:l}=W(k=>k.data),u=js({base:!0,md:!1}),{isOpen:d,onOpen:h,onClose:g}=Me(),i=se();Or(),c.useEffect(()=>{a||h()},[a,h]);const f=()=>{i(ho())},x=()=>o(!0),j=()=>o(!1),y=p("#f44336","teal.400"),v=p("white","gray.200"),S=()=>e.jsxs(_,{justify:"space-around",align:"center",px:4,py:2,borderColor:"gray.300",children:[e.jsx(be,{to:"/",className:({isActive:C})=>C?"nav-link active":"nav-link",children:e.jsxs(_,{direction:"column",align:"center",justify:"center",mx:3,px:2,py:1,borderRadius:"md",transition:"all 0.3s",children:[e.jsx(ae,{icon:e.jsx(wn,{size:20}),"aria-label":"Home",variant:"ghost",_hover:{color:y},mb:1}),e.jsx(m,{fontSize:"xs",fontWeight:"medium",children:"Home"})]})}),e.jsx(be,{to:"/problems",className:({isActive:C})=>C?"nav-link active":"nav-link",children:e.jsxs(_,{direction:"column",align:"center",justify:"center",mx:3,px:2,py:1,borderRadius:"md",transition:"all 0.3s",children:[e.jsx(ae,{icon:e.jsx(Us,{size:20}),"aria-label":"Questions",variant:"ghost",_hover:{color:y},mb:1}),e.jsx(m,{fontSize:"xs",fontWeight:"medium",children:"Questions"})]})}),a&&((l==null?void 0:l.role)==="ADMIN"||(l==null?void 0:l.role)==="SUPERADMIN")&&e.jsxs(e.Fragment,{children:[e.jsx(be,{to:"/admin/add-question",className:({isActive:C})=>C?"nav-link active":"nav-link",children:e.jsxs(_,{direction:"column",align:"center",justify:"center",mx:3,px:2,py:1,borderRadius:"md",transition:"all 0.3s",children:[e.jsx(ae,{icon:e.jsx(kn,{size:20}),"aria-label":"Add Question",variant:"ghost",_hover:{color:y},mb:1}),e.jsx(m,{fontSize:"xs",fontWeight:"medium",children:"Add Question"})]})}),e.jsx(be,{to:"/admin/create-batch",className:({isActive:C})=>C?"nav-link active":"nav-link",children:e.jsxs(_,{direction:"column",align:"center",justify:"center",mx:3,px:2,py:1,borderRadius:"md",transition:"all 0.3s",children:[e.jsx(ae,{icon:e.jsx(An,{size:20}),"aria-label":"Create Batch",variant:"ghost",_hover:{color:y},mb:1}),e.jsx(m,{fontSize:"xs",fontWeight:"medium",children:"Create Batch"})]})})]})]});return e.jsxs(b,{position:"relative",zIndex:"10",bg:p("gray.50","gray.900"),boxShadow:"sm",pb:3,px:4,pt:2,children:[e.jsxs(_,{h:16,alignItems:"center",justifyContent:"space-between",children:[u?e.jsx(ae,{icon:e.jsx(bn,{size:s}),"aria-label":"Open Drawer",onClick:x,variant:"ghost",_hover:{color:y,bg:v},transition:"all 0.3s"}):e.jsx(O,{spacing:4,children:S()}),e.jsxs(_,{alignItems:"center",children:[e.jsx(K,{label:`${n==="light"?"Dark Mode":"Light Mode"}`,placement:"bottom",children:e.jsx(ae,{icon:n==="light"?e.jsx(yn,{size:s}):e.jsx(Cn,{size:s}),onClick:t,"aria-label":"Toggle Color Mode",variant:"ghost",_hover:{color:y},transition:"all 0.3s"})}),a?e.jsxs(e.Fragment,{children:[e.jsxs(Ue,{children:[e.jsx(Oe,{as:R,ml:4,variant:"ghost",colorScheme:"teal",children:e.jsxs(m,{fontWeight:"bold",children:["Hello, ",l.name]})}),e.jsx(Ne,{children:e.jsxs(le,{onClick:f,children:[e.jsx(vn,{style:{marginRight:"8px"}})," Log Out"]})})]}),e.jsx(be,{to:"/profile",className:({isActive:k})=>k?"nav-link active":"nav-link",children:e.jsx(K,{label:"Profile",placement:"bottom",children:e.jsx(ae,{icon:e.jsx(Ps,{size:s}),"aria-label":"Profile",ml:4,variant:"ghost",_hover:{color:y},transition:"all 0.3s"})})})]}):e.jsx(R,{ml:4,variant:"solid",colorScheme:"teal",leftIcon:e.jsx(Sn,{size:s}),onClick:h,children:"Login"})]})]}),e.jsxs(rt,{placement:"left",onClose:j,isOpen:r,children:[e.jsx(ue,{}),e.jsxs(ot,{children:[e.jsx(xe,{}),e.jsx(he,{children:"Menu"}),e.jsx(ge,{children:e.jsxs(N,{spacing:4,children:[e.jsx(be,{to:"/",className:({isActive:k})=>k?"nav-link active":"nav-link",onClick:j,children:"Home"}),e.jsx(be,{to:"/problems",className:({isActive:k})=>k?"nav-link active":"nav-link",onClick:j,children:"Problems"}),a&&e.jsxs(e.Fragment,{children:[e.jsx(be,{to:"/profile",className:({isActive:k})=>k?"nav-link active":"nav-link",onClick:j,children:"Profile"}),(l==null?void 0:l.role)==="ADMIN"||(l==null?void 0:l.role)==="SUPERADMIN"?e.jsxs(e.Fragment,{children:[e.jsx(be,{to:"/admin/add-question",className:({isActive:k})=>k?"nav-link active":"nav-link",onClick:j,children:"Add Question"}),e.jsx(be,{to:"/admin/create-batch",className:({isActive:k})=>k?"nav-link active":"nav-link",onClick:j,children:"Create Batch"})]}):null]}),!a&&e.jsx(be,{to:"/login",className:({isActive:k})=>k?"nav-link active":"nav-link",onClick:j,children:"Login"})]})})]})]}),!a&&e.jsx(cn,{isOpen:d,onClose:g})]})},xo=E.memo(mo),fo=()=>Wr(),ht=F("questions/postQuestion",async(n,{rejectWithValue:t})=>{var s;try{const r=await I.post("/questions",{...n,id:fo()});return console.log("response.data: ",r.data),r.data}catch(r){return console.log("error: ",r),t(((s=r.response)==null?void 0:s.data)||"An error occurred while posting the question.")}}),gt=F("questions/getQuestionById",async(n,{rejectWithValue:t})=>{var s;try{return(await I.get(`/questions/${n}`)).data}catch(r){return t(((s=r.response)==null?void 0:s.data)||"An error occurred while fetching the question.")}}),Xe=F("questions/fetchQuestions",async(n,{rejectWithValue:t})=>{var s;try{return(await I.get("/questions")).data}catch(r){return t(((s=r.response)==null?void 0:s.data)||"An error occurred while fetching questions.")}}),Xt=F("questions/solvedQuestions",async({questionId:n,studentId:t},{rejectWithValue:s})=>{var r;try{return(await I.put(`/students/${t}/solve/${n}`)).data}catch(o){return s(((r=o.response)==null?void 0:r.data)||"An error occurred while updating solved questions.")}});F("api/getsolvedQuestions",async({studentId:n},{rejectWithValue:t})=>{var s;try{return(await I.get(`/students/${n}/solved-questions`)).data}catch(r){return t(((s=r.response)==null?void 0:s.data)||"An error occurred while fetching solved questions.")}});const pt=F("questions/updateQuestion",async({questionId:n,data:t},{rejectWithValue:s})=>{var r;try{return(await I.put(`/questions/${n}`,t)).data}catch(o){return s(((r=o.response)==null?void 0:r.data)||"An error occurred while updating the question.")}}),mt=F("questions/deleteQuestion",async(n,{rejectWithValue:t})=>{var s;try{return await I.delete(`/questions/${n}`),n}catch(r){return t(((s=r.response)==null?void 0:s.data)||"An error occurred while deleting the question.")}}),jo=({examples:n,newExample:t,setExamples:s,setNewExample:r,toast:o})=>{const a=()=>{if(t.input.trim()===""||t.output.trim()===""||t.explanation.trim()===""){o({title:"Error",description:"All example fields must be filled out.",status:"error",duration:3e3,isClosable:!0});return}s([...n,t]),r({input:"",output:"",explanation:""})},l=u=>{s(n.filter((d,h)=>h!==u))};return e.jsxs(L,{mb:4,children:[e.jsx(Q,{children:"Examples"}),n.map((u,d)=>e.jsxs(b,{border:"1px solid #CBD5E0",borderRadius:"md",p:4,mb:4,position:"relative",children:[e.jsx(ae,{"aria-label":"Close",icon:e.jsx(br,{}),variant:"ghost",colorScheme:"red",onClick:()=>l(d),position:"absolute",top:1,right:1}),e.jsxs(Q,{mb:2,children:["Example ",d+1]}),e.jsx(L,{mb:2,children:e.jsx(X,{name:`input${d}`,value:u.input,onChange:h=>{const g=[...n];g[d].input=h.target.value,s(g)},placeholder:"Input"})}),e.jsx(L,{mb:2,children:e.jsx($e,{name:`output${d}`,value:u.output,onChange:h=>{const g=[...n];g[d].output=h.target.value,s(g)},placeholder:"Output",style:{minHeight:"100px",resize:"none"}})}),e.jsx(L,{mb:2,children:e.jsx($e,{name:`explanation${d}`,value:u.explanation,onChange:h=>{const g=[...n];g[d].explanation=h.target.value,s(g)},placeholder:"Explanation",style:{minHeight:"100px",resize:"none"}})})]},d)),e.jsx(Q,{children:"Add New Example"}),e.jsx(L,{mb:2,children:e.jsx(X,{name:"newInput",value:t.input,onChange:u=>r({...t,input:u.target.value}),placeholder:"Input"})}),e.jsx(L,{mb:2,children:e.jsx($e,{name:"newOutput",value:t.output,onChange:u=>r({...t,output:u.target.value}),placeholder:"Output",style:{minHeight:"100px",resize:"none"}})}),e.jsx(L,{mb:2,children:e.jsx($e,{name:"newExplanation",value:t.explanation,onChange:u=>r({...t,explanation:u.target.value}),placeholder:"Explanation",style:{minHeight:"100px",resize:"none"}})}),e.jsx(R,{type:"button",colorScheme:"teal",onClick:a,children:"Add Example"})]})},bo=E.memo(jo),yo=n=>{const t={};return n.title.trim()||(t.title=!0),n.description.trim()||(t.description=!0),n.difficultLevel.trim()||(t.difficultLevel=!0),n.input.trim()||(t.input=!0),n.expectedOutput.trim()||(t.expectedOutput=!0),n.tag.trim()||(t.tag=!0),t},un=()=>[{value:"array",label:"Array"},{value:"linked-list",label:"Linked List"},{value:"stack",label:"Stack"},{value:"queue",label:"Queue"},{value:"tree",label:"Tree"},{value:"graph",label:"Graph"},{value:"hashing",label:"Hashing"},{value:"dynamic-programming",label:"Dynamic Programming"},{value:"greedy",label:"Greedy"},{value:"recursion",label:"Recursion"},{value:"sorting",label:"Sorting"},{value:"searching",label:"Searching"},{value:"two-pointer",label:"Two Pointer"},{value:"sliding-window",label:"Sliding Window"},{value:"bit-manipulation",label:"Bit Manipulation"},{value:"divide-and-conquer",label:"Divide and Conquer"},{value:"backtracking",label:"Backtracking"},{value:"mathematics",label:"Mathematics"},{value:"number-theory",label:"Number Theory"},{value:"graph-traversal",label:"Graph Traversal (BFS/DFS)"},{value:"minimum-spanning-tree",label:"Minimum Spanning Tree"},{value:"shortest-path",label:"Shortest Path"},{value:"binary-search",label:"Binary Search"},{value:"heap",label:"Heap"},{value:"trie",label:"Trie"},{value:"floyd-warshall",label:"Floyd-Warshall Algorithm"},{value:"bellman-ford",label:"Bellman-Ford Algorithm"},{value:"kmp",label:"KMP String Matching Algorithm"},{value:"dp-on-trees",label:"Dynamic Programming on Trees"},{value:"tree-traversal",label:"Tree Traversal (Pre/In/Post Order)"},{value:"prime-numbers",label:"Prime Numbers (Sieve of Eratosthenes)"},{value:"recursion-vs-iteration",label:"Recursion vs Iteration"},{value:"memoization",label:"Memoization"},{value:"knapsack",label:"Knapsack Problem"},{value:"game-theory",label:"Game Theory"},{value:"geometry",label:"Computational Geometry"},{value:"probability",label:"Probability & Combinatorics"},{value:"conditionals",label:"Conditionals (If/Else)"},{value:"loops",label:"Loops (For/While)"},{value:"functions",label:"Functions"},{value:"variables",label:"Variables"},{value:"pointers",label:"Pointers"},{value:"object-oriented",label:"Object-Oriented Programming"},{value:"functional-programming",label:"Functional Programming"},{value:"complexity-analysis",label:"Complexity Analysis (Big O)"}],Co=({isOpen:n,onClose:t,initialData:s,isEditing:r})=>{const o=se(),a=ce(),{user:l}=W(q=>q.data),u=c.useMemo(()=>un(),[]),d=c.useMemo(()=>({title:(s==null?void 0:s.title)||"",description:(s==null?void 0:s.description)||"",difficultLevel:(s==null?void 0:s.difficultLevel)||"",input:(s==null?void 0:s.input)||"",expectedOutput:(s==null?void 0:s.expectedOutput)||"",tag:(s==null?void 0:s.tag)||"",userId:l==null?void 0:l.id}),[s,l==null?void 0:l.id]),[h,g]=c.useState(d),[i,f]=c.useState([]),[x,j]=c.useState({input:"",output:"",explanation:""}),[y,v]=c.useState({}),S={description:c.useRef(null),input:c.useRef(null),expectedOutput:c.useRef(null)},k=c.useCallback(q=>{const{name:H,value:M}=q.target;g(z=>({...z,[H]:M})),v(z=>({...z,[H]:!1}))},[]),C=c.useCallback(q=>{const{value:H}=q.target;g(M=>({...M,tag:H})),v(M=>({...M,tag:!1}))},[]);c.useEffect(()=>{const q=H=>{H.current&&(H.current.style.height="auto",H.current.style.height=H.current.scrollHeight+"px")};q(S.description),q(S.input),q(S.expectedOutput)},[h]),c.useEffect(()=>{g(q=>({...q,title:(s==null?void 0:s.title)||"",description:(s==null?void 0:s.description)||"",difficultLevel:(s==null?void 0:s.difficultLevel)||"",constraintValue:(s==null?void 0:s.constraintValue)||"",input:(s==null?void 0:s.input)||"",expectedOutput:(s==null?void 0:s.expectedOutput)||"",tag:(s==null?void 0:s.tag)||"",userId:l==null?void 0:l.id}))},[s,l==null?void 0:l.id]),c.useEffect(()=>{s!=null&&s.examples&&f(s.examples)},[s]);const Y=c.useCallback(async q=>{q.preventDefault(),(x.input.trim()!==""||x.output.trim()!==""||x.explanation.trim()!=="")&&(f(M=>[...M,x]),j({input:"",output:"",explanation:""}));const H=yo(h);if(Object.keys(H).length>0){v(H),B(a,`Failed to ${r?"Update":"Add"} Question`,"error"),console.log("formData",h);return}try{r?await o(pt({questionId:s.id,data:{...h,examples:i}})).unwrap():await o(ht({...h,user:{id:l.id},examples:i})).unwrap(),g(d),f([]),B(a,`Question ${r?"Updated":"Added"}`,"success"),t&&t()}catch{B(a,`Failed to ${r?"Update":"Add"} Question`,"error")}},[o,h,i,d,a,l==null?void 0:l.id,r,s==null?void 0:s.id,t]),te=p("white","gray.800"),$=p("gray.900","gray.100"),J=p("teal.700","teal.300"),G=p("gray.100","gray.700");return e.jsx(b,{p:6,bg:te,borderRadius:"lg",boxShadow:"xl",children:e.jsxs("form",{onSubmit:Y,children:[e.jsxs(L,{mb:4,isInvalid:y.title,children:[e.jsx(Q,{color:J,children:"Title"}),e.jsx(X,{type:"text",name:"title",value:h.title,onChange:k,bg:G,color:$})]}),e.jsxs(L,{mb:4,isInvalid:y==null?void 0:y.description,children:[e.jsx(Q,{color:J,children:"Description"}),e.jsx(_r,{value:h.description,onChange:q=>k({target:{name:"description",value:q}}),theme:"snow",style:{backgroundColor:G,color:$,border:"1px solid",borderColor:p("gray.300","gray.600"),borderRadius:"5px",minHeight:"150px"}})]}),e.jsxs(L,{mb:4,isInvalid:y.difficultLevel,children:[e.jsx(Q,{color:J,children:"Difficulty Level"}),e.jsxs(ee,{name:"difficultLevel",value:h.difficultLevel,onChange:k,bg:G,color:$,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"EASY",children:"EASY"}),e.jsx("option",{value:"MEDIUM",children:"MEDIUM"}),e.jsx("option",{value:"HARD",children:"HARD"})]})]}),e.jsxs(L,{mb:4,isInvalid:y.input,children:[e.jsx(Q,{color:J,children:"Input"}),e.jsx($e,{name:"input",value:h.input,onChange:k,ref:S.input,style:{minHeight:"100px",resize:"none"},bg:G,color:$})]}),e.jsxs(L,{mb:4,isInvalid:y.expectedOutput,children:[e.jsx(Q,{color:J,children:"Expected Output"}),e.jsx($e,{name:"expectedOutput",value:h.expectedOutput,onChange:k,ref:S.expectedOutput,style:{minHeight:"100px",resize:"none"},bg:G,color:$})]}),e.jsxs(L,{mb:4,isInvalid:y.tag,children:[e.jsx(Q,{color:J,children:"Tag (Select a Topic)"}),e.jsxs(ee,{name:"tag",value:h.tag,onChange:C,bg:G,color:$,children:[e.jsx("option",{value:"",children:"Select a topic"}),u.map(q=>e.jsx("option",{value:q.value,children:q.label},q.value))]})]}),e.jsx(bo,{examples:i,newExample:x,setExamples:f,setNewExample:j,toast:a}),e.jsx(R,{type:"submit",colorScheme:"teal",mt:4,children:r?"Update":"Submit"})]})})},hn=E.memo(Co),vo=({question:n,currentUserId:t,currentUserRole:s})=>{const r=se(),{isOpen:o,onOpen:a,onClose:l}=Me(),u=s==="SUPERADMIN"||s==="ADMIN",d=i=>{i.preventDefault(),r(mt(n.id))},h=i=>{i.preventDefault(),a()},g=i=>{i.preventDefault()};return e.jsxs(e.Fragment,{children:[e.jsx(yr,{borderRadius:"md",backgroundColor:"rgba(0, 0, 0, 0.03)",children:e.jsxs(_,{p:4,alignItems:"center",justifyContent:"space-between",children:[e.jsx(an,{to:`/problem/${n.id}`,style:{textDecoration:"none",display:"block",flexGrow:1},children:e.jsxs(b,{children:[e.jsx(m,{children:n.title}),e.jsx(m,{mt:2,color:"gray.500",children:n.difficulty})]})}),e.jsxs(Ue,{children:[e.jsx(Oe,{as:ae,icon:e.jsx(In,{}),"aria-label":"Actions",variant:"ghost"}),e.jsxs(Ne,{children:[e.jsx(le,{icon:e.jsx(Mn,{}),onClick:g,children:"Bookmark"}),u&&e.jsxs(e.Fragment,{children:[e.jsx(le,{icon:e.jsx(Os,{}),onClick:h,children:"Edit"}),e.jsx(le,{icon:e.jsx(Tn,{}),onClick:d,color:"red.500",children:"Delete"})]})]})]})]})}),e.jsxs(Ae,{isOpen:o,onClose:l,size:"xl",children:[e.jsx(ue,{}),e.jsxs(Ie,{children:[e.jsx(he,{children:"Edit Question"}),e.jsx(xe,{}),e.jsx(ge,{children:e.jsx(hn,{isOpen:o,onClose:l,initialData:n,isEditing:!0})})]})]})]})},So=E.memo(vo),wo=()=>{const n=We`
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  `,t=p("blue.600","yellow.300");return e.jsx(b,{p:4,textAlign:"center",h:"100vh",children:e.jsxs(N,{spacing:8,justify:"center",align:"center",h:"100%",children:[e.jsx(m,{fontSize:"3xl",fontWeight:"bold",color:t,children:"Preparing Your Coding Adventure..."}),e.jsxs(N,{spacing:4,children:[e.jsx(D,{as:zn,boxSize:12,color:"purple.400",css:{animation:`${n} 1.5s ease-in-out infinite`}}),e.jsx(Re,{thickness:"6px",speed:"1s",emptyColor:"gray.200",color:"teal.500",size:"xl"}),e.jsx(D,{as:Ns,boxSize:12,color:"orange.400",css:{animation:`${n} 2s ease-in-out infinite`}}),e.jsx(D,{as:Qs,boxSize:12,color:"pink.400",css:{animation:`${n} 2.5s ease-in-out infinite`}})]}),e.jsx(m,{fontSize:"lg",color:p("gray.600","gray.400"),children:'"Great code starts with great patience!"'})]})})},ko=()=>{var S,k;const n=se();Ye();const[t,s]=c.useState(!0),[r,o]=c.useState(""),[a,l]=c.useState(""),[u,d]=c.useState(!1),h=W(C=>C.data),g=W(C=>C.question),i=(S=h==null?void 0:h.user)==null?void 0:S.id,f=(k=h==null?void 0:h.user)==null?void 0:k.role;c.useEffect(()=>{g.questions.length===0&&n(Xe());const C=setTimeout(()=>s(!1),500);return()=>clearTimeout(C)},[n]);const x=C=>o(C.target.value),j=C=>l(C.target.value),y=()=>{o(""),l("")},v=g.questions.filter(C=>{var $;const Y=r===""||(($=C.tag)==null?void 0:$.toLowerCase().includes(r.toLowerCase())),te=a===""||C.difficulty===a;return Y&&te});return t||h.loading||g.loading?e.jsx(wo,{}):e.jsx(b,{p:6,bg:p("gray.50","gray.900"),minH:"100vh",color:p("gray.800","gray.200"),children:e.jsxs(N,{spacing:6,align:"stretch",children:[e.jsxs(O,{justifyContent:"space-between",children:[e.jsx(ke,{size:"md",children:"Question Set"}),e.jsx(O,{children:e.jsx(ae,{icon:e.jsx(En,{}),"aria-label":"Open Filters",colorScheme:"teal",size:"md",onClick:()=>d(!0),_hover:{bg:p("teal.200","teal.600")}})})]}),e.jsxs(rt,{isOpen:u,placement:"right",onClose:()=>d(!1),children:[e.jsx(ue,{}),e.jsxs(ot,{children:[e.jsx(xe,{}),e.jsx(he,{children:"Filter Problems"}),e.jsx(ge,{children:e.jsxs(N,{spacing:6,align:"stretch",children:[e.jsx(ee,{placeholder:"Filter by Topic",onChange:x,value:r,bg:p("gray.50","gray.700"),color:p("gray.700","gray.300"),width:"100%",_hover:{borderColor:p("teal.400","teal.600")},children:un().map(C=>e.jsx("option",{value:C.value,children:C.label},C.value))}),e.jsx(ee,{placeholder:"Filter by Difficulty",onChange:j,value:a,bg:p("gray.50","gray.700"),color:p("gray.700","gray.300"),width:"100%",_hover:{borderColor:p("teal.400","teal.600")},children:["Easy","Medium","Hard"].map(C=>e.jsx("option",{value:C,children:C},C))}),e.jsx(R,{colorScheme:"teal",onClick:y,width:"100%",children:"Clear Filters"})]})})]})]}),e.jsx(ve,{}),e.jsx(Cr,{spacing:4,children:v.map((C,Y)=>e.jsx(So,{question:C,currentUserId:i,currentUserRole:f},Y))}),v.length===0&&e.jsx(b,{textAlign:"center",mt:6,children:e.jsx(m,{children:"No Question found for the selected filters."})})]})})},Ao=E.memo(ko),Io=()=>e.jsx("div",{children:"Signup"}),Mo=E.memo(Io),Nt={javascript:`'use strict';

process.stdin.resume();
process.stdin.setEncoding('utf-8');

let inputString = '';
let currentLine = 0;

process.stdin.on('data', inputStdin => {
    inputString += inputStdin;
});

process.stdin.on('end', _ => {
    inputString = inputString.trim()
.split('\\n')
.map(string => {
        return string.replace(/\\s+/g, " ").trim();
    });
    main();
});

function readLine() {
    return inputString[currentLine++];
}

function solve() {
    // Write the logic to solve each test case here
}

function main() {
    const tc = parseInt(readLine(), 10);
    while (tc-- > 0) {
        solve();
    }
}
`,typescript:`
type Params = {
	name: string;
}

function Main(data: Params) {
	console.log("Hello, " + data.name + "!");
}

Main({ name: "Test" });
`,python:`
def Main(name):
	print("Hello, " + name + "!")

Main("Test")
`,java:`import java.util.Scanner;

public class Main {

    public static void solve() {
        // Write the logic to solve each test case here
    }

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int tc = scanner.nextInt();
        
        while (tc-- > 0) {
            solve();
        }
        
        scanner.close();
    }
}
`,csharp:`using System;

namespace Main
{
	class Hello { 
		static void Main(string[] args) {
			Console.WriteLine("Hello World in C#");
		}
	}
}
`,php:`<?php

$name = 'Test';
echo $name;
`,c:`#include <stdio.h>

void solve() {
    // Write the logic to solve each test case here
}

int main() {
    int tc;
    scanf("%d", &tc);
    
    while (tc-- > 0) {
        solve();
    }
    
    return 0;
}
`,cpp:`#include <iostream>
using namespace std;

void solve() {
    // Write the logic to solve each test case here
}

int main() {
    int tc;
    cin >> tc;
    
    while (tc-- > 0) {
        solve();
    }
    
    return 0;
}
`},To=({videoBoxSize:n})=>{const t=ce(),s=c.useRef(null),[r,o]=c.useState(!0),a=c.useRef(!1),l=async()=>{await Vr.ssdMobilenetv1.loadFromUri("/models")};return c.useEffect(()=>((async()=>{try{const d=await navigator.mediaDevices.getUserMedia({video:!0});s.current.srcObject=d,await l(),o(!0),a.current=!1}catch{o(!1),a.current||(B(t,"Failed to access the camera.","error"),a.current=!0)}})(),()=>{var d;(d=s.current)!=null&&d.srcObject&&s.current.srcObject.getTracks().forEach(h=>h.stop())}),[t]),e.jsxs(e.Fragment,{children:[!r&&e.jsxs(O,{color:"red.500",mb:4,children:[e.jsx(D,{as:vr,boxSize:6}),e.jsx(m,{children:"Please Turn on your Camera....."})]}),r&&e.jsx(Hr,{children:e.jsx(b,{position:"absolute",top:"20px",right:"20px",bg:"gray.800",p:1,children:e.jsx("video",{ref:s,autoPlay:!0,style:{width:n||"100px",height:n||"100px",borderRadius:"8px"}})})})]})},zo=E.memo(To),_e=(n,t)=>{var s;return t(((s=n.response)==null?void 0:s.data)||"An error occurred")},xt=F("contests/createContest",async(n,{rejectWithValue:t})=>{try{return(await I.post("/contests/contestcreate",{...n})).data}catch(s){return _e(s,t)}}),ft=F("contests/fetchContests",async(n,{rejectWithValue:t})=>{try{return(await I.get("/contests")).data}catch(s){return _e(s,t)}}),jt=F("contests/fetchContestsByBatchId",async(n,{rejectWithValue:t})=>{try{return(await I.get(`/contests/batch/${n}`)).data}catch(s){return _e(s,t)}}),Jt=F("contests/fetchContestsByStudent",async(n,{rejectWithValue:t})=>{try{return(await I.get(`/contests/student/${n}`)).data}catch(s){return _e(s,t)}}),Je=F("contests/getContestById",async(n,{rejectWithValue:t})=>{try{return(await I.get(`/contests/${n}`)).data}catch(s){return _e(s,t)}}),Zt=F("contests/updateContest",async({contestId:n,updatedData:t},{rejectWithValue:s})=>{try{return(await I.put(`/contests/${n}`,t)).data}catch(r){return _e(r,s)}}),bt=F("contests/deleteContest",async(n,{rejectWithValue:t})=>{try{return await I.delete(`/contests/${n}`),n}catch(s){return _e(s,t)}}),Eo={contests:[],contest:null,loading:!1,error:null,isFetched:!1},Fo=Se({name:"contests",initialState:Eo,reducers:{},extraReducers:n=>{n.addCase(xt.pending,t=>{t.loading=!0,t.error=null}).addCase(xt.fulfilled,(t,s)=>{t.contests.push(s.payload),t.loading=!1}).addCase(xt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(ft.pending,t=>{t.loading=!0,t.error=null,t.isFetched=!1}).addCase(ft.fulfilled,(t,s)=>{t.contests=s.payload,t.loading=!1,t.isFetched=!0}).addCase(ft.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(jt.pending,t=>{t.loading=!0,t.error=null,t.isFetched=!1}).addCase(jt.fulfilled,(t,s)=>{t.contests=s.payload,t.loading=!1,t.isFetched=!0}).addCase(jt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(Jt.pending,t=>{t.loading=!0,t.error=null}).addCase(Jt.fulfilled,(t,s)=>{t.contests=s.payload,t.loading=!1,t.isFetched=!0}).addCase(Jt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(Je.pending,t=>{t.loading=!0,t.error=null}).addCase(Je.fulfilled,(t,s)=>{t.contest=s.payload,t.loading=!1}).addCase(Je.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(Zt.pending,t=>{t.loading=!0,t.error=null}).addCase(Zt.fulfilled,(t,s)=>{const r=t.contests.findIndex(o=>o.id===s.payload.id);r!==-1&&(t.contests[r]=s.payload),t.loading=!1}).addCase(Zt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(bt.pending,t=>{t.loading=!0,t.error=null}).addCase(bt.fulfilled,(t,s)=>{t.contests=t.contests.filter(r=>r.id!==s.payload),t.loading=!1}).addCase(bt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload})}}),Ro=Fo.reducer,Bo=({question:n})=>{var v;const t=p("gray.50","gray.800"),s=p("white","gray.900"),r=p("gray.300","gray.600"),o=p("gray.800","gray.200"),{contests:a}=W(S=>S.contest),l=we(),u=se(),{questionId:d,contestId:h,attemptId:g}=Qe();c.useEffect(()=>{h&&a.length===0&&u(ft())},[u,h,a.length]);const i=h?a.find(S=>S.id==h):null,f=(i==null?void 0:i.contestQuestions)||[],x=f.findIndex(S=>S.questionId==d);f[x];const j=()=>{if(x>0){const S=f[x-1].questionId;l(`/contests/${h}/questions/${S}/attempts/${g}`)}},y=()=>{if(x<f.length-1){const S=f[x+1].questionId;l(`/contests/${h}/questions/${S}/attempts/${g}`)}};return e.jsx(b,{p:6,borderRadius:"md",shadow:"base",border:`1px solid ${r}`,bg:t,_hover:{transform:"scale(1.01)",shadow:"lg"},transition:"all 0.3s ease",children:e.jsxs(N,{align:"stretch",spacing:6,children:[h&&e.jsxs(O,{justify:"space-between",children:[e.jsx(ae,{"aria-label":"Previous Question",icon:e.jsx(Sr,{}),onClick:j,size:"md",colorScheme:"teal",variant:"outline",isDisabled:x<=0}),e.jsx(ae,{"aria-label":"Next Question",icon:e.jsx(Js,{}),onClick:y,size:"md",colorScheme:"teal",variant:"outline",isDisabled:x>=f.length-1})]}),e.jsxs(_,{justify:"space-between",align:"center",pb:3,borderBottom:`1px solid ${r}`,children:[e.jsx(m,{fontSize:"2xl",fontWeight:"bold",color:o,children:(n==null?void 0:n.title)||"Problem Title"}),e.jsx(wr,{size:"md",colorScheme:(n==null?void 0:n.difficultLevel)==="EASY"?"green":(n==null?void 0:n.difficultLevel)==="MEDIUM"?"yellow":"red",children:(n==null?void 0:n.difficultLevel)||"N/A"})]}),e.jsxs(b,{children:[e.jsx(m,{fontSize:"lg",fontWeight:"medium",color:o,children:"Description:"}),e.jsx(b,{mt:2,color:o,dangerouslySetInnerHTML:{__html:(n==null?void 0:n.description)||"Problem description goes here..."}})]}),e.jsxs(b,{bg:s,p:4,borderRadius:"md",shadow:"sm",border:`1px solid ${r}`,children:[e.jsx(m,{fontWeight:"bold",mb:2,color:o,children:"Input:"}),e.jsx(m,{children:(n==null?void 0:n.input)||"Input format is not provided."})]}),e.jsxs(b,{bg:s,p:4,borderRadius:"md",shadow:"sm",border:`1px solid ${r}`,children:[e.jsx(m,{fontWeight:"bold",mb:2,color:o,children:"Expected Output:"}),n!=null&&n.expectedOutput?e.jsx(m,{as:"pre",whiteSpace:"pre-wrap",children:n.expectedOutput}):e.jsx(m,{children:"Output format is not provided."})]}),((v=n==null?void 0:n.examples)==null?void 0:v.length)>0?e.jsxs(b,{children:[e.jsx(m,{fontWeight:"bold",mb:2,color:o,children:"Examples:"}),e.jsx(N,{align:"stretch",spacing:4,children:n.examples.map((S,k)=>e.jsxs(b,{bg:s,p:4,borderRadius:"md",shadow:"sm",border:`1px solid ${r}`,children:[e.jsxs(m,{children:[e.jsx("strong",{children:"Input:"})," ",S.input||"N/A"]}),e.jsx(ve,{my:2,borderColor:r}),e.jsxs(m,{children:[e.jsx("strong",{children:"Output:"})," ",S.output||"N/A"]}),e.jsx(ve,{my:2,borderColor:r}),e.jsxs(m,{children:[e.jsx("strong",{children:"Explanation:"})," ",S.explanation||"N/A"]})]},k))})]}):e.jsx(b,{bg:s,p:4,borderRadius:"md",shadow:"sm",border:`1px solid ${r}`,children:e.jsx(m,{fontWeight:"semibold",color:"red.500",children:"No examples are available for this problem."})})]})})},$o=E.memo(Bo),Do=({endTime:n})=>{const[t,s]=c.useState("");return c.useEffect(()=>{if(n){const o=setInterval(()=>{const a=new Date(n).getTime(),l=new Date().getTime(),u=a-l;if(u<=0){s("Contest Ended");return}const d=Math.floor(u/(1e3*60*60)%24),h=Math.floor(u/(1e3*60)%60),g=Math.floor(u/1e3%60);s(`${d>0?`${d}h `:""}${h}m ${g}s`)},1e3);return()=>clearInterval(o)}},[n]),e.jsxs(O,{spacing:2,children:[e.jsx(Ws,{color:"teal"}),e.jsx(m,{children:t})]})},Lo=E.memo(Do),Ts=async(n,t,s)=>{try{return(await I.post("/submit",{language:n,code:t,inputData:s})).data}catch(r){throw r}},zs=async n=>{var t;try{return(await I.get(`/result/${n}`)).data}catch(s){throw console.error("Error fetching result: ",((t=s.response)==null?void 0:t.data)||s.message),s}},yt=F("solvedQuestions/fetchByContestStudentAndQuestion",async({contestId:n,studentId:t,questionId:s},{rejectWithValue:r})=>{console.log(" contestId, studentId, questionId: ",n,t,s);try{return(await I.get(`/api/solved-questions/contest/${n}/student/${t}/question/${s}`)).data}catch(o){return r(o||"An error occurred while fetching solved questions by contest ID, student ID, and question ID.")}}),es=F("solvedQuestions/saveOrUpdate",async(n,{rejectWithValue:t})=>{var s;try{return(await I.post("/api/solved-questions/save-or-update",n)).data}catch(r){return t(((s=r.response)==null?void 0:s.data)||"An error occurred while saving/updating the solved question.")}}),Ct=F("solvedQuestions/create",async(n,{rejectWithValue:t})=>{try{return(await I.post("/api/solved-questions/create",n)).data}catch(s){return t(s)}}),ts=F("solvedQuestions/updateMarks",async(n,{rejectWithValue:t})=>{var s;try{return(await I.put("/api/solved-questions/marks/update",n)).data}catch(r){return t(((s=r.response)==null?void 0:s.data)||"An error occurred while updating obtained marks.")}}),vt=F("solvedQuestions/fetchByContest",async(n,{rejectWithValue:t})=>{var s;try{return(await I.get(`/api/solved-questions/contest/${n}`)).data}catch(r){return t(((s=r.response)==null?void 0:s.data)||"An error occurred while fetching solved questions by contest ID.")}}),ss=F("solvedQuestions/fetchByStudentAndContest",async({studentId:n,contestId:t},{rejectWithValue:s})=>{try{return(await I.get(`/api/solved-questions/student/${n}/contest/${t}`)).data}catch(r){return s(r||"An error occurred while fetching solved questions by student and contest ID.")}}),ns=F("solvedQuestions/fetchById",async(n,{rejectWithValue:t})=>{var s;try{return(await I.get(`/api/solved-questions/${n}`)).data}catch(r){return t(((s=r.response)==null?void 0:s.data)||"An error occurred while fetching the solved question by ID.")}}),St=F("solvedQuestions/fetchTop20RankedStudents",async(n,{rejectWithValue:t})=>{var s;try{return(await I.get("/api/solved-questions/rankings/top-20")).data}catch(r){return t(((s=r.response)==null?void 0:s.data)||"An error occurred while fetching the top 20 ranked students.")}}),rs=F("solvedQuestions/deleteById",async(n,{rejectWithValue:t})=>{var s;try{const r=await I.delete(`/api/solved-questions/${n}`);return{solvedQuestionId:n,message:r.data}}catch(r){return t(((s=r.response)==null?void 0:s.data)||"An error occurred while deleting the solved question.")}}),Po={solvedQuestions:[],solvedQuestion:{},loading:!1,error:null,topRankedStudents:[]},Uo=Se({name:"solvedQuestions",initialState:Po,reducers:{},extraReducers:n=>{n.addCase(Ct.pending,t=>{t.loading=!0,t.error=null}).addCase(Ct.fulfilled,(t,s)=>{t.loading=!1,t.solvedQuestions.push(s.payload)}).addCase(Ct.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(yt.pending,t=>{t.loading=!0,t.error=null}).addCase(yt.fulfilled,(t,s)=>{t.solvedQuestions=s.payload,t.loading=!1}).addCase(yt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(es.pending,t=>{t.loading=!0,t.error=null}).addCase(es.fulfilled,(t,s)=>{t.loading=!1;const r=t.solvedQuestions.findIndex(o=>o.id===s.payload.id);r!==-1?t.solvedQuestions[r]=s.payload:t.solvedQuestions.push(s.payload)}).addCase(es.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(ts.pending,t=>{t.loading=!0,t.error=null}).addCase(ts.fulfilled,(t,s)=>{t.loading=!1;const r=t.solvedQuestions.findIndex(o=>o.id===s.payload.id);r!==-1&&(t.solvedQuestions[r].obtainedMarks=s.payload.obtainedMarks)}).addCase(ts.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(vt.pending,t=>{t.loading=!0,t.error=null}).addCase(vt.fulfilled,(t,s)=>{t.solvedQuestions=s.payload,t.loading=!1}).addCase(vt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(ss.pending,t=>{t.loading=!0,t.error=null}).addCase(ss.fulfilled,(t,s)=>{t.solvedQuestions=s.payload,t.loading=!1}).addCase(ss.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(ns.pending,t=>{t.loading=!0,t.error=null}).addCase(ns.fulfilled,(t,s)=>{t.solvedQuestion=s.payload,t.loading=!1}).addCase(ns.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(St.pending,t=>{t.loading=!0,t.error=null}).addCase(St.fulfilled,(t,s)=>{t.topRankedStudents=s.payload,t.loading=!1}).addCase(St.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(rs.pending,t=>{t.loading=!0,t.error=null}).addCase(rs.fulfilled,(t,s)=>{t.solvedQuestions=t.solvedQuestions.filter(r=>r.id!==s.payload.solvedQuestionId),t.loading=!1}).addCase(rs.rejected,(t,s)=>{t.loading=!1,t.error=s.payload})}}),Oo=Uo.reducer,lt=(n,t)=>{var s;return t(((s=n.response)==null?void 0:s.data)||"An error occurred")},os=F("questionSolved/fetchAll",async(n,{rejectWithValue:t})=>{try{return(await I.get("/api/v1/question-solved")).data}catch(s){return lt(s,t)}}),wt=F("questionSolved/fetchByStudentId",async(n,{rejectWithValue:t})=>{try{return(await I.get(`/api/v1/question-solved/student/${n}`)).data}catch(s){return lt(s,t)}}),kt=F("questionSolved/fetchByStudentIdAndQuestionId",async({studentId:n,questionId:t},{rejectWithValue:s})=>{try{return(await I.get(`/api/v1/question-solved/student/${n}/question/${t}`)).data}catch(r){return lt(r,s)}}),as=F("questionSolved/fetchByQuestionId",async(n,{rejectWithValue:t})=>{try{return(await I.get(`/api/v1/question-solved/question/${n}`)).data}catch(s){return lt(s,t)}}),At=F("questionSolved/save",async(n,{rejectWithValue:t})=>{try{return(await I.post("/api/v1/question-solved",n)).data}catch(s){return lt(s,t)}}),No={allRecords:[],studentRecords:[],questionRecords:[],combinedRecord:[],loading:!1,error:null,isFetched:!1},Qo=Se({name:"questionSolved",initialState:No,reducers:{},extraReducers:n=>{n.addCase(os.pending,t=>{t.loading=!0,t.error=null}).addCase(os.fulfilled,(t,s)=>{t.allRecords=s.payload,t.loading=!1,t.isFetched=!0}).addCase(os.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(wt.pending,t=>{t.loading=!0,t.error=null}).addCase(wt.fulfilled,(t,s)=>{t.studentRecords=s.payload,t.loading=!1}).addCase(wt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(as.pending,t=>{t.loading=!0,t.error=null}).addCase(as.fulfilled,(t,s)=>{t.questionRecords=s.payload,t.loading=!1}).addCase(as.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(kt.pending,t=>{t.loading=!0,t.error=null}).addCase(kt.fulfilled,(t,s)=>{t.combinedRecord=s.payload,t.loading=!1}).addCase(kt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(At.pending,t=>{t.loading=!0,t.error=null}).addCase(At.fulfilled,(t,s)=>{t.allRecords.push(s.payload),t.loading=!1}).addCase(At.rejected,(t,s)=>{t.loading=!1,t.error=s.payload})}}),Wo=Qo.reducer,It=F("contestAttempts/start",async({contestId:n,studentId:t},{rejectWithValue:s})=>{var r;try{return(await I.post("/contest-attempts/start",{contestId:n,studentId:t})).data}catch(o){return s(((r=o.response)==null?void 0:r.data)||"An error occurred while starting the contest attempt.")}}),Ze=F("contestAttempts/end",async({attemptId:n},{rejectWithValue:t})=>{var s;try{return(await I.post("/contest-attempts/end",null,{params:{attemptId:n}})).data}catch(r){return t(((s=r.response)==null?void 0:s.data)||"An error occurred while ending the contest attempt.")}}),ls=F("contestAttempts/fetchById",async(n,{rejectWithValue:t})=>{var s;try{return(await I.get(`/contest-attempts/${n}`)).data}catch(r){return t(((s=r.response)==null?void 0:s.data)||"An error occurred while fetching the contest attempt by ID.")}}),Mt=F("contestAttempts/fetchByContestId",async(n,{rejectWithValue:t})=>{var s;try{const r=await I.get(`/contest-attempts/by-contest/${n}`);return console.log("Fetch All Contest Attempts by Contest ID Response: ",r.data),r.data}catch(r){return t(((s=r.response)==null?void 0:s.data)||"An error occurred while fetching the contest attempts by contest ID.")}}),Tt=F("contestAttempts/fetchByStudentAndContest",async({studentId:n,contestId:t},{rejectWithValue:s})=>{var r;try{return(await I.get("/contest-attempts/by-student-and-contest",{params:{studentId:n,contestId:t}})).data}catch(o){return s(((r=o.response)==null?void 0:r.data)||"An error occurred while fetching contest attempts by student and contest.")}}),_o={contestAttempts:[],contestAttempt:{},loading:{start:!1,end:!1,fetch:!1,fetchAll:!1},error:{start:null,end:null,fetch:null,fetchAll:null}},qo=Se({name:"contestAttempts",initialState:_o,reducers:{},extraReducers:n=>{n.addCase(It.pending,t=>{t.loading.start=!0,t.error.start=null}).addCase(It.fulfilled,(t,s)=>{t.loading.start=!1,t.contestAttempts.push(s.payload)}).addCase(It.rejected,(t,s)=>{t.loading.start=!1,t.error.start=s.payload}).addCase(Ze.pending,t=>{t.loading.end=!0,t.error.end=null}).addCase(Ze.fulfilled,(t,s)=>{t.loading.end=!1;const r=t.contestAttempts.findIndex(o=>o.id===s.payload.id);r!==-1&&(t.contestAttempts[r]=s.payload)}).addCase(Ze.rejected,(t,s)=>{t.loading.end=!1,t.error.end=s.payload}).addCase(ls.pending,t=>{t.loading.fetch=!0,t.error.fetch=null}).addCase(ls.fulfilled,(t,s)=>{t.loading.fetch=!1,t.contestAttempt=s.payload}).addCase(ls.rejected,(t,s)=>{t.loading.fetch=!1,t.error.fetch=s.payload}).addCase(Mt.pending,t=>{t.loading.fetchAll=!0,t.error.fetchAll=null}).addCase(Mt.fulfilled,(t,s)=>{t.loading.fetchAll=!1,t.contestAttempts=s.payload}).addCase(Mt.rejected,(t,s)=>{t.loading.fetchAll=!1,t.error.fetchAll=s.payload}).addCase(Tt.pending,t=>{t.loading.fetchAll=!0,t.error.fetchAll=null}).addCase(Tt.fulfilled,(t,s)=>{t.loading.fetchAll=!1,t.contestAttempts=s.payload}).addCase(Tt.rejected,(t,s)=>{t.loading.fetchAll=!1,t.error.fetchAll=s.payload})}}),Yo=qo.reducer,Ho=({isDrawerOpen:n,toggleDrawer:t,isLoading:s,testResults:r})=>e.jsxs(rt,{placement:"right",onClose:t,isOpen:n,size:"md",children:[e.jsx(ue,{}),e.jsxs(ot,{bg:"gray.900",color:"gray.100",children:[e.jsx(xe,{}),e.jsx(he,{bg:"teal.500",color:"white",children:"Test Cases Result"}),e.jsx(ge,{children:s?e.jsx(_,{justify:"center",align:"center",h:"100%",children:e.jsx(Re,{size:"xl",color:"teal.500"})}):r.length>0?e.jsx(N,{spacing:4,align:"stretch",children:r.map((o,a)=>e.jsxs(b,{p:4,borderRadius:"md",bg:o.passed?"green.100":"red.100",display:"flex",alignItems:"center",children:[e.jsx(D,{as:o.passed?kr:Ar,color:o.passed?"green.500":"red.500",mr:4,boxSize:6}),e.jsxs(b,{children:[e.jsx(m,{fontWeight:"bold",color:"gray.800",children:o.passed?"Passed":"Failed"}),e.jsxs(m,{fontSize:"sm",color:"gray.600",children:["Expected: ",o.expected]}),e.jsxs(m,{fontSize:"sm",color:"gray.600",children:["Got: ",o.output]})]})]},a))}):e.jsx(m,{children:"No test results available."})})]})]}),gn=E.memo(Ho),Vo=({editorRef:n,language:t,inputData:s="",expectedOutput:r="",type:o})=>{const a=ce(),l=se(),[u,d]=c.useState(!1),{questionId:h,contestId:g,attemptId:i}=Qe(),{user:f,contest:x,solvedQuestions:j}=W(U=>({user:U.data.user,contest:U.contest.contest,solvedQuestions:U.solved.solvedQuestions})),y=f==null?void 0:f.id;c.useEffect(()=>{g&&!x&&l(Je(g))},[g,x,l]),c.useEffect(()=>{y&&g&&u&&l(Tt({studentId:y,contestId:g}))},[y,g,l]);const v=()=>{if(!i){console.error("Attempt ID is missing."),B(a,"Unable to end the contest. Attempt ID is missing.","error");return}console.log("Attempting to end contest with attemptId:",i),l(Ze({attemptId:i})).unwrap().then(U=>{console.log("Contest ended successfully:",U),B(a,"Submitted Successfully","success")}).catch(U=>{console.error("Error ending contest:",U),B(a,U||"Failed to end the contest.","error")})},[S,k]=c.useState(null),[C,Y]=c.useState(""),[te,$]=c.useState(!1),[J,G]=c.useState(!1),[q,H]=c.useState([]),[M,z]=c.useState(!1),V=c.useCallback(U=>{Y(U.target.value)},[]),w=c.useCallback(U=>{U.key==="Enter"&&(U.preventDefault(),Y(ne=>`${ne}
`))},[]),A=c.useCallback(async()=>{var ne;if(!(n!=null&&n.current)){B(a,"Editor is not ready. Please wait.","warning");return}const U=n.current.getValue();if(!U.trim()){B(a,"Enter code to run.","warning");return}$(!0),G(!1),k(null);try{if(C.length==0){B(a,"Enter number of test case to run.","warning");return}else{const P=await Ts(t,U,C.trim()),pe=await zs(P.requestId),T=((ne=pe.output)==null?void 0:ne.split(`
`).filter(ie=>ie.trim()!==""))||[];k(T),G(!!pe.stderr),pe.stderr&&B(a,pe.stderr,"error",6e3)}}catch(P){B(a,P.message||"Execution failed","error",6e3)}finally{$(!1)}},[n,t,C,a]),Z=c.useCallback(async()=>{var T;if(!(n!=null&&n.current)){B(a,"Editor is not ready. Please wait.","warning");return}const U=n.current.getValue();if(!U.trim()){B(a,"Enter code to submit.","warning");return}if(!h||!y){B(a,"Invalid question or user information.","error");return}const ne=new Date,P=new Date(x==null?void 0:x.startTime),pe=new Date(x==null?void 0:x.endTime);if(ne<P||ne>pe){B(a,"Contest not active.","error");return}$(!0),G(!1),H([]),k(null);try{const ie=await Ts(t,U,s.trim()),je=await zs(ie.requestId),it=((T=je.output)==null?void 0:T.split(`
`).filter(fe=>fe.trim()!==""))||[];k(it);const Wt=r.split(`
`).filter(fe=>fe.trim()!==""),Cs=Math.max(it.length,Wt.length),vs=Array.from({length:Cs},(fe,Be)=>({output:it[Be]||"null",expected:Wt[Be]||"null",passed:it[Be]===Wt[Be]}));H(vs);const _t=vs.filter(fe=>fe.passed).length/Cs*100;let fn={questionId:h,studentId:y,executionTime:je.executionTime,memoryUsage:je.memoryUsed,language:t,code:U,testCase:_t===100?"PASSED":"FAILED"};if(l(At(fn)),g){const fe=x==null?void 0:x.contestQuestions.find(qt=>qt.questionId==h),Be=(fe==null?void 0:fe.marks)||0,Ss=Math.round(_t/100*Be);try{g&&(await l(Ct({questionId:h,contestId:g,studentId:y,obtainedMarks:Ss,contestQuestionId:fe==null?void 0:fe.contestQuestionId,language:t,code:U,testCase:_t===100?"PASSED":"FAILED"})).unwrap(),B(a,`You have obtained ${Ss} out of ${Be} marks.`,"success",6e3))}catch(qt){B(a,qt||"Something went wrong while saving the submission.","error",6e3)}G(!!je.stderr)}}catch(ie){B(a,ie||"Unable to submit code","error",6e3)}finally{$(!1),z(!0)}},[n,t,s,r,h,x,g,y,j,l,a]),oe=c.useCallback(()=>{z(U=>!U)},[]);return e.jsxs(b,{w:"100%",h:"fit-content",p:4,children:[e.jsx(m,{mb:2,fontSize:"lg",children:"Output"}),e.jsx(b,{h:"fit-content",p:4,bg:J?"red.50":"gray.800",color:J?"red.400":"gray.100",border:"1px solid",borderRadius:"md",borderColor:J?"red.500":"gray.700",children:S&&S.length>0?S.map((U,ne)=>e.jsx(m,{children:U},ne)):e.jsx(m,{children:'Click "Run Code" to see the output here'})}),e.jsx(X,{placeholder:"Enter input here...",value:C,onChange:V,onKeyDown:w,mt:4,mb:4,bg:"gray.700",color:"gray.100",borderColor:"gray.600"}),e.jsx(O,{spacing:4,mt:6,w:"100%",children:e.jsxs(_,{justifyContent:{base:"center",md:"space-between"},align:"center",w:"100%",flexDirection:{base:"column",md:"row"},children:[e.jsxs(O,{spacing:4,mb:{base:4,md:0},justifyContent:{base:"center",md:"flex-start"},children:[e.jsx(R,{variant:"solid",colorScheme:"teal",size:"lg",isLoading:te,onClick:A,_hover:{bg:"teal.500",shadow:"lg"},shadow:"md",transition:"all 0.3s",children:"Run Code"}),e.jsx(R,{variant:"outline",colorScheme:"teal",size:"lg",isLoading:te,onClick:Z,border:"2px",borderColor:"teal.400",_hover:{bg:"teal.600",color:"white",shadow:"lg"},shadow:"md",transition:"all 0.3s",children:"Submit"})]}),g&&e.jsx(R,{variant:"outline",colorScheme:"teal",size:"lg",isLoading:te,px:8,onClick:v,border:"2px",borderColor:"teal.400",_hover:{bg:"teal.600",color:"white",shadow:"lg"},shadow:"md",transition:"all 0.3s",children:"Submit Contest"})]})}),e.jsx(gn,{isDrawerOpen:M,toggleDrawer:oe,isLoading:!1,testResults:q})]})},Go=E.memo(Vo),Ko=({isOpen:n,onClose:t,preferences:s,setPreferences:r,theme:o,setTheme:a,fontSize:l,setFontSize:u,layout:d,setLayout:h,onLanguageChange:g})=>e.jsxs(Ae,{isOpen:n,onClose:t,isCentered:!0,size:"lg",children:[e.jsx(ue,{}),e.jsxs(Ie,{bg:p("white","gray.800"),borderRadius:"md",children:[e.jsx(he,{textAlign:"center",fontSize:"2xl",fontWeight:"bold",children:"Editor Settings"}),e.jsx(xe,{}),e.jsx(ge,{children:e.jsxs(N,{spacing:6,children:[e.jsx(Xo,{language:s.language,setLanguage:g}),e.jsx(Jo,{theme:o,setTheme:a}),e.jsx(Zo,{fontSize:l,setFontSize:u}),e.jsx(ea,{layout:d,setLayout:h}),e.jsx(ta,{showSnippets:s.showSnippets,showLineNumbers:s.showLineNumbers,toggleFeature:i=>r(f=>({...f,[i]:!f[i]}))})]})}),e.jsx(Fe,{children:e.jsx(R,{colorScheme:"teal",size:"lg",w:"full",onClick:t,children:"Save Settings"})})]})]}),Xo=({language:n,setLanguage:t})=>e.jsxs(b,{children:[e.jsx(m,{fontWeight:"semibold",mb:2,children:"Programming Language"}),e.jsxs(ee,{value:n,onChange:s=>t(s.target.value),bg:p("gray.100","gray.700"),color:p("gray.800","white"),borderColor:p("gray.300","gray.600"),_hover:{borderColor:"teal.500"},children:[e.jsx("option",{value:"java",children:"Java"}),e.jsx("option",{value:"javascript",children:"JavaScript"}),e.jsx("option",{value:"python",children:"Python"}),e.jsx("option",{value:"c",children:"C"}),e.jsx("option",{value:"cpp",children:"C++"})]})]}),Jo=({theme:n,setTheme:t})=>e.jsxs(b,{children:[e.jsx(m,{fontWeight:"semibold",mb:2,children:"Editor Theme"}),e.jsxs(ee,{value:n,onChange:s=>t(s.target.value),bg:p("gray.100","gray.700"),color:p("gray.800","white"),borderColor:p("gray.300","gray.600"),_hover:{borderColor:"teal.500"},children:[e.jsx("option",{value:"vs-dark",children:"Dark Theme"}),e.jsx("option",{value:"vs-light",children:"Light Theme"}),e.jsx("option",{value:"high-contrast",children:"High Contrast"}),e.jsx("option",{value:"monokai",children:"Monokai"})]})]}),Zo=({fontSize:n,setFontSize:t})=>e.jsxs(b,{children:[e.jsx(m,{fontWeight:"semibold",mb:2,children:"Font Size"}),e.jsxs(ee,{value:n,onChange:s=>t(parseInt(s.target.value)),bg:p("gray.100","gray.700"),color:p("gray.800","white"),borderColor:p("gray.300","gray.600"),_hover:{borderColor:"teal.500"},children:[e.jsx("option",{value:12,children:"12px"}),e.jsx("option",{value:14,children:"14px"}),e.jsx("option",{value:16,children:"16px"}),e.jsx("option",{value:18,children:"18px"}),e.jsx("option",{value:20,children:"20px"})]})]}),ea=({layout:n,setLayout:t})=>e.jsxs(b,{children:[e.jsx(m,{fontWeight:"semibold",mb:2,children:"Editor Layout"}),e.jsxs(ee,{value:n,onChange:s=>t(s.target.value),bg:p("gray.100","gray.700"),color:p("gray.800","white"),borderColor:p("gray.300","gray.600"),_hover:{borderColor:"teal.500"},children:[e.jsx("option",{value:"single",children:"Single View"}),e.jsx("option",{value:"split",children:"Split View"})]})]}),ta=({showSnippets:n,showLineNumbers:t,toggleFeature:s})=>e.jsxs(b,{children:[e.jsx(m,{fontWeight:"semibold",mb:2,children:"Additional Features"}),e.jsxs(O,{spacing:4,children:[e.jsx(R,{size:"sm",colorScheme:"teal",variant:n?"solid":"outline",onClick:()=>s("showSnippets"),_hover:{shadow:"md"},transition:"all 0.3s",children:n?"Disable Snippets":"Enable Snippets"}),e.jsx(R,{size:"sm",colorScheme:"teal",variant:t?"solid":"outline",onClick:()=>s("showLineNumbers"),_hover:{shadow:"md"},transition:"all 0.3s",children:t?"Hide Line Numbers":"Show Line Numbers"})]})]}),sa=E.memo(Ko),na=()=>{const[n,t]=c.useState(0),[s,r]=c.useState(0),o=c.useRef(null);return c.useEffect(()=>{const a=()=>{if(document.hidden)r(l=>l+1),o.current=Date.now();else if(o.current){const l=Math.floor((Date.now()-o.current)/1e3);t(u=>u+l),o.current=null}};return document.addEventListener("visibilitychange",a),()=>{if(document.removeEventListener("visibilitychange",a),document.hidden&&o.current){const l=Math.floor((Date.now()-o.current)/1e3);t(u=>u+l)}}},[]),{inactiveTime:n,tabChangeCount:s}},ra=E.lazy(()=>qr(()=>import("./@monaco-editor-BRJW5S16.js"),__vite__mapDeps([0,1,2,3]))),oa=({theme:n,fontSize:t,value:s,setTheme:r,setFontSize:o,setValue:a,onMount:l,testResults:u,isLoading:d,isDrawerOpen:h,toggleDrawer:g,editorRef:i,data:f,question:x})=>{var U,ne;const[j,y]=c.useState(!1),[v,S]=c.useState("single"),[k,C]=c.useState({showSnippets:!0,showLineNumbers:!0,language:"java"});c.useRef(null);const Y=p("gray.50","gray.700"),te=p("white","gray.800"),$=p("gray.300","gray.600"),{combinedRecord:J}=W(P=>P.questionSolved),{questionId:G,contestId:q}=Qe(),H=se(),{user:M}=W(P=>P.user),z=c.useMemo(()=>M==null?void 0:M.id,[M]);c.useEffect(()=>{z&&G&&H(q?yt({contestId:q,studentId:z,questionId:G}):kt({studentId:z,questionId:G}))},[H,z,G,q]),c.useEffect(()=>{const P=localStorage.getItem("defaultLanguage")||"java";C(pe=>({...pe,language:P})),a(Nt[P]||"")},[a]);const{solvedQuestions:V}=W(P=>P.solved),w=c.useCallback(P=>{C(pe=>({...pe,language:P})),a(Nt[P]||""),localStorage.setItem("defaultLanguage",P)},[a]),A=c.useCallback(P=>{C(pe=>({...pe,language:P.language})),a(P.code)},[C,a]),{inactiveTime:Z,tabChangeCount:oe}=na();return e.jsxs(b,{flex:1,p:4,bg:Y,borderRadius:"md",shadow:"lg",width:"100%",children:[e.jsxs(N,{spacing:6,align:"stretch",width:"100%",children:[e.jsxs(bs,{direction:"row",justifyContent:"space-between",align:"center",children:[((U=f==null?void 0:f.contest)==null?void 0:U.endTime)&&e.jsx(Lo,{endTime:(ne=f==null?void 0:f.contest)==null?void 0:ne.endTime}),e.jsxs(O,{spacing:4,align:"center",children:[e.jsxs(O,{spacing:2,align:"center",children:[e.jsx(D,{as:Fn,color:"blue.500",w:4,h:4}),e.jsxs(m,{fontSize:"sm",children:["Inactive Time: ",Z,"s"]})]}),e.jsxs(O,{spacing:2,align:"center",children:[e.jsx(D,{as:Rn,color:"green.500",w:4,h:4}),e.jsxs(m,{fontSize:"sm",children:["Tab Changes: ",oe]})]}),(J.length>0||V.length>0)&&e.jsxs(Ue,{children:[e.jsx(Oe,{as:R,leftIcon:e.jsx(Bn,{}),variant:"ghost",size:"md",_hover:{bg:p("gray.200","gray.600")}}),e.jsxs(Ne,{children:[V.length>0&&V.map(P=>e.jsx(le,{onClick:()=>A(P),children:e.jsxs(m,{fontSize:"sm",children:[new Date(P.solvedAt).toLocaleString()," -"," ",P.testCase==="PASSED"?e.jsx(m,{as:"span",color:"green.500",children:"Passed"}):e.jsx(m,{as:"span",color:"red.500",children:"Failed"})," ","- Marks: ",P.obtainedMarks,"/",P.questionMark]})},P.id)),J.map(P=>e.jsx(le,{onClick:()=>A(P),children:e.jsxs(m,{fontSize:"sm",children:[new Date(P.solvedAt).toLocaleString()," -"," ",P.testCase==="PASSED"?e.jsx(m,{as:"span",color:"green.500",children:"Passed"}):e.jsx(m,{as:"span",color:"red.500",children:"Failed"})]})},P.id))]})]})]}),e.jsx(ae,{icon:e.jsx($n,{}),"aria-label":"Settings",variant:"ghost",size:"lg",onClick:()=>y(!0),_hover:{bg:p("gray.200","gray.600")}})]}),e.jsx(b,{position:"relative",borderRadius:"lg",border:`1px solid ${$}`,bg:p("white","gray.900"),shadow:"md",width:"100%",height:"70vh",children:e.jsx(ra,{options:{minimap:{enabled:k.showSnippets},fontSize:t,wordWrap:"on",lineNumbers:k.showLineNumbers?"on":"off"},height:"100%",width:"100%",theme:n,language:k.language,onMount:l,value:s,onChange:P=>a(P)})}),e.jsx(b,{borderRadius:"lg",p:4,border:`1px solid ${$}`,bg:te,shadow:"lg",transition:"all 0.3s",_hover:{shadow:"xl"},children:e.jsx(Go,{editorRef:i,language:k.language,inputData:x==null?void 0:x.input,expectedOutput:x==null?void 0:x.expectedOutput})}),e.jsx(gn,{isLoading:d,isDrawerOpen:h,toggleDrawer:g,testResults:u})]}),e.jsx(sa,{isOpen:j,onClose:()=>y(!1),preferences:k,setPreferences:C,theme:n,setTheme:r,fontSize:t,setFontSize:o,layout:v,setLayout:S,onLanguageChange:w})]})},aa=E.memo(oa),la=({problemId:n})=>{const t=c.useRef(),[s,r]=c.useState(Nt.java),[o,a]=c.useState("java"),[l,u]=c.useState("vs-dark"),[d,h]=c.useState(14),[g,i]=c.useState(40),{user:f}=W(z=>z.user),[x,j]=c.useState([]),[y,v]=c.useState(!1),[S,k]=c.useState(!1),C=ce(),Y=se(),{data:te}=W(z=>z.test)||{},{question:$}=W(z=>z.question);p("gray.100","gray.800");const J=p("blackAlpha.800","whiteAlpha.900"),G=c.useMemo(()=>!$||$.id!==n,[$,n]);c.useEffect(()=>{G&&Y(gt(n))},[Y,n,G]);const q=(z,V)=>{t.current=z,z.focus(),!(f.role==="SUPERADMIN"||f.role==="ADMIN"||f.email==="test@gmail.com")&&(z.addCommand(V.KeyMod.CtrlCmd|V.KeyCode.KeyC,()=>{B(C,"Copy Disabled","warning")}),z.addCommand(V.KeyMod.CtrlCmd|V.KeyCode.KeyV,()=>{B(C,"Paste Disabled","warning")}))},H=()=>v(!y),M=z=>{const V=z.clientX,w=g,A=oe=>{const U=oe.clientX-V,ne=Math.max(10,Math.min(90,w+U/window.innerWidth*100));i(ne)},Z=()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",Z)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",Z)};return e.jsxs(b,{p:6,bgGradient:p("linear(to-r, gray.100, gray.200)","linear(to-r, gray.700, gray.800)"),color:J,height:"100vh",overflow:"hidden",display:"flex",flexDirection:"column",children:[e.jsx(zo,{}),e.jsxs(_,{height:"calc(100% - 50px)",overflow:"hidden",direction:{base:"column",md:"row"},gap:{base:4,md:0},position:"relative",children:[e.jsx(b,{flex:`0 0 ${g}%`,height:{base:"40vh",md:"100%"},overflowY:"auto",minW:"10%",maxW:"90%",borderRight:{base:"none",md:`1px solid ${J}`},shadow:"md",borderRadius:"lg",p:4,bg:p("white","gray.900"),children:e.jsx($o,{question:$})}),e.jsx(b,{width:"10px",cursor:"ew-resize",bg:p("gray.200","gray.700"),position:"absolute",top:"0",bottom:"0",left:`${g}%`,zIndex:2,onMouseDown:M,display:"flex",alignItems:"center",justifyContent:"center",_hover:{bg:p("gray.300","gray.600")},children:e.jsx(Dn,{size:20,color:p("gray.500","white")})}),e.jsx(b,{flex:`0 0 ${100-g}%`,overflowY:"auto",borderRadius:"lg",shadow:"md",bg:p("white","gray.900"),children:e.jsx(aa,{language:o,theme:l,fontSize:d,value:s,setLanguage:a,setTheme:u,setFontSize:h,setValue:r,onMount:q,testResults:x,isLoading:S,isDrawerOpen:y,toggleDrawer:H,editorRef:t,monaco:Yr,data:te,question:$})})]})]})},ia=E.memo(la),da=()=>{const{questionId:n}=Qe();return e.jsx(b,{minH:"100vh",bg:"#0f0a19",color:"gray.500",children:e.jsx(ia,{problemId:n})})},Es=E.memo(da),qe=(n,t)=>{var s;return t(((s=n.response)==null?void 0:s.data)||"An error occurred")},zt=F("batch/fetchAllActive",async(n,{rejectWithValue:t})=>{try{return(await I.get("/api/v1/batches")).data}catch(s){return qe(s,t)}}),et=F("batch/fetchById",async(n,{rejectWithValue:t})=>{try{return(await I.get(`/api/v1/batches/${n}`)).data}catch(s){return qe(s,t)}}),Et=F("batch/save",async(n,{rejectWithValue:t})=>{try{return(await I.post("/api/v1/batches",n)).data}catch(s){return qe(s,t)}}),Ft=F("batch/update",async({id:n,batchDTO:t},{rejectWithValue:s})=>{try{return(await I.put(`/api/v1/batches/${n}`,t)).data}catch(r){return qe(r,s)}}),is=F("batch/delete",async(n,{rejectWithValue:t})=>{try{return(await I.delete(`/api/v1/batches/${n}`)).data}catch(s){return qe(s,t)}}),Rt=F("batch/fetchByUserId",async(n,{rejectWithValue:t})=>{try{return(await I.get(`/api/v1/batches/user/${n}`)).data}catch(s){return qe(s,t)}}),Bt=F("batch/fetchByStudentId",async(n,{rejectWithValue:t})=>{try{return(await I.get(`/api/v1/batches/student/${n}`)).data}catch(s){return qe(s,t)}}),ca={allActiveBatches:[],selectedBatch:null,loading:!1,error:null,isFetched:!1},ua=Se({name:"batch",initialState:ca,reducers:{},extraReducers:n=>{n.addCase(zt.pending,t=>{t.loading=!0,t.error=null}).addCase(zt.fulfilled,(t,s)=>{t.allActiveBatches=s.payload,t.loading=!1,t.isFetched=!0}).addCase(zt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(et.pending,t=>{t.loading=!0,t.error=null}).addCase(et.fulfilled,(t,s)=>{t.selectedBatch=s.payload,t.loading=!1}).addCase(et.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(Et.pending,t=>{t.loading=!0,t.error=null}).addCase(Et.fulfilled,(t,s)=>{t.allActiveBatches.push(s.payload),t.loading=!1}).addCase(Et.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(Ft.pending,t=>{t.loading=!0,t.error=null}).addCase(Ft.fulfilled,(t,s)=>{t.allActiveBatches=t.allActiveBatches.map(r=>r.id===s.payload.id?s.payload:r),t.loading=!1}).addCase(Ft.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(is.pending,t=>{t.loading=!0,t.error=null}).addCase(is.fulfilled,(t,s)=>{t.allActiveBatches=t.allActiveBatches.filter(r=>r.id!==s.payload.id),t.loading=!1}).addCase(is.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(Rt.pending,t=>{t.loading=!0,t.error=null}).addCase(Rt.fulfilled,(t,s)=>{t.allActiveBatches=s.payload,t.loading=!1,t.isFetched=!0}).addCase(Rt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(Bt.pending,t=>{t.loading=!0,t.error=null}).addCase(Bt.fulfilled,(t,s)=>{t.allActiveBatches=s.payload,t.loading=!1,t.isFetched=!0}).addCase(Bt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload})}}),ha=ua.reducer,Fs=({onCreate:n,initialData:t={},onClose:s,isEditing:r})=>{const{user:o}=W(A=>A.data),{questions:a}=W(A=>A.question),l=ce(),{colorMode:u}=Ye(),d=Zs(),h=se(),{batchId:g}=Qe();c.useEffect(()=>{h(et(g))},[]);const i=u==="dark",f=i?d.colors.gray[800]:d.colors.gray[100],x=i?d.colors.whiteAlpha[900]:d.colors.blackAlpha[900],j=i?d.colors.gray[700]:d.colors.gray[200],y=i?d.colors.whiteAlpha[300]:d.colors.blackAlpha[300],v=i?d.colors.gray[400]:d.colors.gray[600],S=i?d.colors.gray[700]:d.colors.gray[100],k=i?d.colors.gray[600]:d.colors.gray[200],[C,Y]=c.useState({title:t.title||"",description:t.description||"",startTime:t.startTime||"",endTime:t.endTime||"",totalMarks:t.totalMarks||"",difficultyLevel:t.difficultyLevel||"",contestQuestions:t.contestQuestions||[],enrolledStudents:t.enrolledStudents||[]}),[te,$]=c.useState(!0);c.useEffect(()=>{var A;if(te){const Z=`Step into the ${C.title} contest—a ${((A=C.difficultyLevel)==null?void 0:A.toLowerCase())||"dynamic"}-level challenge designed to push your limits and sharpen your skills. Whether you're a seasoned expert or eager to learn, this contest offers a chance to showcase your knowledge and achieve greatness. Best of luck!`;Y(oe=>({...oe,description:Z}))}},[C.title,C.difficultyLevel,te]);const J=A=>{Y({...C,description:A.target.value}),$(!1)};c.useEffect(()=>{h(Xe())},[h]);const G=A=>{const{name:Z,value:oe}=A.target;Y({...C,[Z]:oe})},q=A=>{const Z=A.map(oe=>({questionId:oe.value,marks:0}));Y({...C,contestQuestions:Z})},H=(A,Z)=>{const oe=[...C.contestQuestions];oe[A].marks=parseInt(Z,10)||0,Y({...C,contestQuestions:oe})},M=A=>{Y({...C,difficultyLevel:A.value})},{selectedBatch:z}=W(A=>A.batch),V=async A=>{A.preventDefault();let Z=[];if(z==null||z.students.map(ne=>{Z.push(ne)}),C.contestQuestions.reduce((ne,P)=>ne+P.marks,0)!==parseInt(C.totalMarks,10)){B(l,"Total Marks Mismatch","error");return}if(!C.title||!C.contestQuestions.length){B(l,"Missing Information","warning");return}const U={...C,createdBy:o==null?void 0:o.id,enrolledStudents:Z,batchId:g};try{await h(xt(U)).unwrap(),B(l,"Contest Created","success"),s&&s()}catch(ne){B(l,ne,"error")}},w={control:A=>({...A,backgroundColor:f,color:x,borderColor:y}),option:(A,Z)=>({...A,backgroundColor:Z.isSelected?j:S,color:x,"&:hover":{backgroundColor:k}}),singleValue:A=>({...A,color:x}),menu:A=>({...A,backgroundColor:f,zIndex:9999}),placeholder:A=>({...A,color:v})};return e.jsx(b,{bg:f,p:4,rounded:"md",children:e.jsxs("form",{onSubmit:V,children:[e.jsxs(L,{id:"title",mt:4,children:[e.jsx(Q,{color:x,children:"Title"}),e.jsx(X,{type:"text",name:"title",value:C.title,onChange:G,bg:j,color:x,border:`1px solid ${y}`,_placeholder:{color:v}})]}),e.jsxs(L,{id:"description",mt:4,children:[e.jsx(Q,{color:x,children:"Description "}),e.jsx($e,{name:"description",value:C.description,onChange:J,bg:j,color:x,border:`1px solid ${y}`,_placeholder:{color:v}})]}),e.jsxs(L,{id:"startTime",mt:4,children:[e.jsx(Q,{color:x,children:"Start Time"}),e.jsx(X,{type:"datetime-local",name:"startTime",value:C.startTime,onChange:G,bg:j,color:x,border:`1px solid ${y}`,_placeholder:{color:v}})]}),e.jsxs(L,{id:"endTime",mt:4,children:[e.jsx(Q,{color:x,children:"End Time"}),e.jsx(X,{type:"datetime-local",name:"endTime",value:C.endTime,onChange:G,bg:j,color:x,border:`1px solid ${y}`,_placeholder:{color:v}})]}),e.jsxs(L,{id:"totalMarks",mt:4,children:[e.jsx(Q,{color:x,children:"Total Marks"}),e.jsx(X,{type:"number",name:"totalMarks",value:C.totalMarks,onChange:G,bg:j,color:x,border:`1px solid ${y}`,_placeholder:{color:v}})]}),e.jsxs(L,{id:"difficultyLevel",mt:4,children:[e.jsx(Q,{color:x,children:"Difficulty Level"}),e.jsx(Ot,{value:{value:C.difficultyLevel,label:C.difficultyLevel.charAt(0)+C.difficultyLevel.slice(1).toLowerCase()},onChange:M,options:[{value:"EASY",label:"Easy"},{value:"MEDIUM",label:"Medium"},{value:"HARD",label:"Hard"}],styles:w})]}),e.jsxs(L,{id:"selectedQuestions",mt:4,children:[e.jsx(Q,{color:x,children:"Select Questions"}),e.jsx(Ot,{options:a.map(A=>({value:A.id,label:A.title})),onChange:q,isMulti:!0,closeMenuOnSelect:!1,styles:w}),C.contestQuestions.map((A,Z)=>{var oe;return e.jsxs(b,{mt:2,children:[e.jsxs(Q,{color:x,children:['Marks for Question "',(oe=a.find(U=>U.id===A.questionId))==null?void 0:oe.title,'"']}),e.jsx(Ir,{min:0,value:A.marks,onChange:U=>H(Z,U),children:e.jsx(Mr,{bg:j,color:x,border:`1px solid ${y}`,_placeholder:{color:v}})})]},Z)})]}),e.jsx(R,{mt:4,colorScheme:"teal",type:"submit",children:"Create Contest"})]})})},ga=({groupedRecords:n})=>{const t=we();return e.jsx(Tr,{columns:{base:2,sm:3,md:4,lg:5},spacing:4,children:n.map(s=>e.jsx(b,{p:4,bg:"white",borderRadius:"md",border:"1px solid",borderColor:"teal.500",boxShadow:"md",height:"150px",width:"200px",transition:"transform 0.2s ease, box-shadow 0.2s ease",_hover:{transform:"scale(1.05)",boxShadow:"lg",bg:"teal.50"},_dark:{bg:"gray.700",borderColor:"teal.300",_hover:{bg:"gray.600",boxShadow:"dark-lg"}},children:e.jsxs(N,{spacing:2,align:"start",height:"100%",children:[e.jsx(m,{fontWeight:"semibold",fontSize:"sm",color:"teal.800",_dark:{color:"teal.200"},noOfLines:1,children:s.title}),e.jsxs(O,{spacing:2,children:[e.jsx(Ee,{colorScheme:s.difficultLevel==="HARD"?"red":s.difficultLevel==="MEDIUM"?"yellow":"green",fontSize:"xs",children:s.difficultLevel}),e.jsx(Ee,{colorScheme:s.passed?"green":"red",px:2,py:.5,borderRadius:"full",fontSize:"xs",children:s.passed?"PASSED":"FAILED"})]}),e.jsxs(m,{fontSize:"xs",color:"gray.600",fontWeight:"medium",_dark:{color:"gray.300"},noOfLines:1,children:["Tag:"," ",e.jsx(m,{as:"span",color:"teal.600",children:s.tag})]}),e.jsxs(O,{justify:"space-between",w:"full",mt:"auto",children:[e.jsxs(m,{fontSize:"xs",color:"gray.500",_dark:{color:"gray.400"},fontWeight:"medium",children:["Attempts: ",s.attempts]}),e.jsx(R,{size:"xs",colorScheme:"teal",variant:"solid",onClick:()=>t(`/problem/${s.questionId}`),_hover:{bg:"teal.600",color:"white"},borderRadius:"full",children:"View"})]})]})},s.questionId))})},pa=E.memo(ga);Kr.register(Xr,Jr,Zr,eo,to,so,no);const ma=({graphData:n,onBarClick:t})=>{const s=n&&n.labels&&n.labels.length>0&&n.datasets&&n.datasets.length>0,r=(o,a)=>{if(!a.length)return;a[0].datasetIndex;const l=a[0].index,u=n.labels[l],d=n.meta[l].questionId;t(d,u)};return e.jsx(b,{bg:"white",p:6,borderRadius:"lg",boxShadow:"xl",_dark:{bg:"gray.700",boxShadow:"dark-lg"},mt:10,children:s?e.jsx(Gr,{data:n,options:{responsive:!0,plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:o=>`${o.dataset.label}: ${o.raw}`,footer:o=>`Question: ${n.meta[o[0].dataIndex].title}`}},datalabels:{display:!0,color:"white",font:{weight:"bold"}}},scales:{x:{title:{display:!0,text:"Date",color:"#319795",font:{weight:"bold"}},grid:{display:!1},stacked:!1},y:{title:{display:!0,text:"Count",color:"#319795",font:{weight:"bold"}},grid:{color:"#E2E8F0"},beginAtZero:!0}},onClick:r}}):e.jsx(m,{fontSize:"lg",color:"gray.500",_dark:{color:"gray.300"},textAlign:"center",children:"No data available for the graph."})})},xa=E.memo(ma),fa=({student:n})=>{const t=se();c.useEffect(()=>{n&&n.id&&t(wt(n.id))},[t,n==null?void 0:n.id]);const{studentRecords:s}=W(a=>a.questionSolved),r=c.useMemo(()=>{if(!s||s.length===0)return[];const a=s.reduce((l,u)=>{const{questionId:d,title:h,tag:g,difficultLevel:i,testCase:f}=u;return l[d]||(l[d]={questionId:d,title:h,tag:g,difficultLevel:i,attempts:0,passed:!1}),l[d].attempts+=1,f==="PASSED"&&(l[d].passed=!0),l},{});return Object.values(a)},[s]),o=c.useMemo(()=>{if(!s||s.length===0)return null;const a={},l={};return s.forEach(u=>{const d=new Date(u.solvedAt).toLocaleDateString();a[d]||(a[d]=0),a[d]++,l[d]||(l[d]=new Set),l[d].add(u.questionId)}),{labels:Object.keys(a),datasets:[{label:"Total Attempts",data:Object.values(a),backgroundColor:"teal",borderColor:"teal",borderWidth:2,borderRadius:5},{label:"Unique Questions Solved",data:Object.keys(l).map(u=>l[u].size),backgroundColor:"orange",borderColor:"orange",borderWidth:2,borderRadius:5}]}},[s]);return e.jsx(b,{bg:"gray.50",py:{base:6,md:12},px:{base:4,md:8},borderRadius:"xl",boxShadow:"2xl",_dark:{bg:"gray.800",boxShadow:"dark-lg"},maxW:"1200px",mx:"auto",mt:6,children:e.jsx(N,{spacing:10,align:"stretch",children:s&&s.length>0?e.jsxs(e.Fragment,{children:[e.jsx(pa,{groupedRecords:r}),o?e.jsx(xa,{graphData:o}):e.jsx(m,{fontSize:"lg",color:"gray.500",_dark:{color:"gray.300"},textAlign:"center",children:"No graph data available."})]}):e.jsx(m,{mt:4,fontSize:"lg",color:"gray.500",_dark:{color:"gray.300"},textAlign:"center",children:"No solved questions yet."})})})},ja=E.memo(fa),ba=({isOpen:n,onClose:t,student:s})=>{const r=p("white","gray.700"),o=p("gray.700","gray.200"),a=p("teal.500","teal.300"),l=p("gray.100","gray.800");return e.jsxs(Ae,{isOpen:n,onClose:t,size:{base:"sm",md:"lg"},children:[e.jsx(ue,{}),e.jsxs(Ie,{bg:r,borderRadius:"lg",boxShadow:"2xl",children:[e.jsx(he,{textAlign:"center",color:a,fontSize:{base:"lg",md:"2xl"},children:"Student Details"}),e.jsx(xe,{}),e.jsx(ge,{py:6,children:e.jsxs(N,{spacing:{base:4,md:6},children:[e.jsx(Le,{size:{base:"xl",md:"2xl"},name:s.name,boxShadow:"lg"}),e.jsx(b,{w:"100%",bg:l,p:{base:4,md:6},borderRadius:"lg",boxShadow:"md",children:e.jsxs(N,{spacing:{base:3,md:4},align:"stretch",children:[e.jsxs(O,{spacing:3,children:[e.jsx(D,{as:Ln,boxSize:{base:4,md:5},color:a}),e.jsx(m,{fontWeight:"bold",color:o,fontSize:{base:"sm",md:"md"},children:s.name})]}),e.jsxs(O,{spacing:3,children:[e.jsx(D,{as:Pn,boxSize:{base:4,md:5},color:a}),e.jsx(m,{color:o,fontSize:{base:"sm",md:"md"},children:s.email})]}),e.jsxs(O,{spacing:3,children:[e.jsx(D,{as:Un,boxSize:{base:4,md:5},color:a}),e.jsxs(m,{color:o,fontSize:{base:"sm",md:"md"},children:["Grid: ",s.grid]})]}),e.jsxs(O,{spacing:3,children:[e.jsx(D,{as:ws,boxSize:{base:4,md:5},color:a}),e.jsxs(m,{color:o,fontSize:{base:"sm",md:"md"},children:["Course: ",s.course]})]}),e.jsxs(O,{spacing:3,children:[e.jsx(D,{as:ws,boxSize:{base:4,md:5},color:a}),e.jsxs(m,{color:o,fontSize:{base:"sm",md:"md"},children:["Branch Code: ",s.branchCode]})]})]})})]})})]})]})},ya=E.memo(ba),ds=F("students/fetchStudents",async(n,{rejectWithValue:t})=>{var s;try{return(await I.get("/students")).data}catch(r){return t(((s=r.response)==null?void 0:s.data)||"Failed to fetch students.")}}),$t=F("students/fetchStudentById",async(n,{rejectWithValue:t})=>{var s;try{return(await I.get(`/students/${n}`)).data}catch(r){return t(((s=r.response)==null?void 0:s.data)||`Failed to fetch student with ID: ${n}.`)}}),cs=F("students/createStudent",async(n,{rejectWithValue:t})=>{var s;try{const r={...n,id:generateLongIdFromUUID()};return(await I.post("/students",r)).data}catch(r){return t(((s=r.response)==null?void 0:s.data)||"Failed to create student.")}}),us=F("students/updateStudent",async({id:n,updates:t},{rejectWithValue:s})=>{var r;try{return(await I.put(`/students/${n}`,t)).data}catch(o){return s(((r=o.response)==null?void 0:r.data)||`Failed to update student with ID: ${n}.`)}}),hs=F("students/deleteStudent",async(n,{rejectWithValue:t})=>{var s;try{return await I.delete(`/students/${n}`),n}catch(r){return t(((s=r.response)==null?void 0:s.data)||`Failed to delete student with ID: ${n}.`)}}),Ca={students:[],student:null,loading:!1,error:null},va=Se({name:"students",initialState:Ca,reducers:{},extraReducers:n=>{n.addCase(ds.pending,t=>{t.loading=!0,t.error=null}).addCase(ds.fulfilled,(t,s)=>{t.students=s.payload,t.loading=!1}).addCase(ds.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase($t.pending,t=>{t.loading=!0,t.error=null}).addCase($t.fulfilled,(t,s)=>{t.student=s.payload,t.loading=!1}).addCase($t.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(cs.pending,t=>{t.loading=!0,t.error=null}).addCase(cs.fulfilled,(t,s)=>{t.students.push(s.payload),t.loading=!1}).addCase(cs.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(us.pending,t=>{t.loading=!0,t.error=null}).addCase(us.fulfilled,(t,s)=>{const r=t.students.findIndex(o=>o.id===s.payload.id);r!==-1&&(t.students[r]=s.payload),t.loading=!1}).addCase(us.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(hs.pending,t=>{t.loading=!0,t.error=null}).addCase(hs.fulfilled,(t,s)=>{t.students=t.students.filter(r=>r.id!==s.payload),t.loading=!1}).addCase(hs.rejected,(t,s)=>{t.loading=!1,t.error=s.payload})}}),Sa=va.reducer,wa=()=>{const n=se(),[t,s]=c.useState(!0),[r,o]=c.useState(null),{isOpen:a,onOpen:l,onClose:u}=Me();c.useEffect(()=>{n(St()).finally(()=>s(!1))},[n]);const{topRankedStudents:d}=W(j=>j.solved),h=p("gray.50","gray.900"),g=p("white","gray.700"),i=p("teal.500","teal.300"),f=We`
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  `;if(t)return e.jsxs(_,{justify:"center",align:"center",height:"100vh",bg:h,children:[e.jsx(Re,{size:"xl",thickness:"4px",color:i}),e.jsx(m,{ml:4,fontSize:"lg",color:i,children:"Loading Leaderboard..."})]});const x=async j=>{const y=await n($t(j.studentId));y!=null&&y.payload&&(o(y.payload),l())};return e.jsx(b,{bg:h,minH:"100vh",py:6,children:e.jsxs(b,{w:{base:"90vw",md:"70vw"},maxW:"800px",bg:g,p:6,borderRadius:"lg",boxShadow:"2xl",mx:"auto",children:[e.jsx(ke,{fontSize:{base:"2xl",md:"3xl"},mb:8,textAlign:"center",color:i,fontWeight:"bold",children:"🏆 Leaderboard 🏆"}),d.length===0?e.jsxs(_,{justify:"center",align:"center",flexDirection:"column",minH:"50vh",textAlign:"center",children:[e.jsx(D,{as:xs,boxSize:16,color:i,mb:4}),e.jsx(m,{fontSize:"xl",fontWeight:"bold",color:i,children:"No rankings yet, check back later!"}),e.jsx(m,{fontSize:"md",color:"gray.500",children:"Upcoming leaderboard will be displayed here."})]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{justify:"space-around",align:"center",mb:8,direction:{base:"column-reverse",md:"row"},textAlign:"center",children:[1,0,2].map((j,y)=>{var v,S,k;return e.jsxs(b,{textAlign:"center",w:{base:"90%",md:"30%"},p:4,borderRadius:"lg",bgGradient:j===0?"linear(to-b, red.400, red.300)":j===1?"linear(to-b, teal.500, teal.300)":"linear(to-b, orange.400, orange.300)",boxShadow:"xl",animation:`${f} ${3+y*.5}s infinite`,position:"relative",children:[e.jsxs(b,{position:"relative",display:"inline-block",children:[e.jsx(Le,{size:"2xl",bg:"gold",borderWidth:"4px",borderColor:"gold",cursor:"pointer",onClick:()=>x(d[j])}),e.jsx(b,{position:"absolute",bottom:"-10px",right:"-10px",bg:"white",borderRadius:"full",p:2,boxShadow:"lg",children:e.jsx(D,{as:j===0?On:j===1?_s:Nn,boxSize:6,color:j===0?"yellow.500":j===1?"teal.300":"orange.400"})})]}),((v=d[j])==null?void 0:v.studentName)&&e.jsx(K,{label:"Click for details",placement:"top",children:e.jsx(m,{fontWeight:"bold",fontSize:"lg",color:"white",cursor:"pointer",onClick:()=>x(d[j]),children:d[j].studentName})}),((S=d[j])==null?void 0:S.branchCode)&&e.jsx(m,{fontSize:"md",color:"white",children:d[j].branchCode}),((k=d[j])==null?void 0:k.totalScore)&&e.jsxs(m,{fontSize:"sm",color:"white",children:[d[j].totalScore," pts"]}),e.jsxs(Ee,{colorScheme:"yellow",mt:2,fontSize:"sm",px:3,py:1,borderRadius:"full",children:["Rank #",j+1]})]},j)})}),e.jsx(N,{spacing:4,align:"stretch",children:d.slice(3).map((j,y)=>e.jsxs(_,{bg:g,p:4,borderRadius:"md",boxShadow:"md",align:"center",justify:"space-between",_hover:{boxShadow:"lg",transform:"scale(1.03)",transition:"all 0.3s"},children:[e.jsxs(_,{align:"center",children:[e.jsx(K,{label:"Click for details",placement:"top",children:e.jsx(Le,{size:"lg",mr:4,name:j.studentName,cursor:"pointer",onClick:()=>x(j)})}),e.jsxs(b,{children:[e.jsx(K,{label:"Click for details",placement:"top",children:e.jsx(m,{fontWeight:"bold",fontSize:"lg",color:i,cursor:"pointer",onClick:()=>x(j),children:j.studentName})}),e.jsx(m,{fontSize:"sm",color:"gray.500",children:j.branchCode}),e.jsxs(m,{fontSize:"sm",color:"gray.500",children:[j.totalScore," pts"]})]})]}),e.jsxs(Ee,{colorScheme:"purple",fontSize:"sm",px:3,py:1,borderRadius:"full",children:["#",y+4]})]},j.id))})]}),r&&e.jsx(ya,{isOpen:a,onClose:u,student:r})]})})},ka=E.memo(wa),Pe=()=>["rw1","rw2","rw3","rw4","rw5","rw6","rw7","rw8","rw9","rw10","rw11","rw12","All branches"],nt=()=>["Full Stack Developer","Frontend Developer","Backend Developer","Android Developer","C Programming","C++ Programming","Data Science","DevOps","UI/UX Design","Project Management","Machine Learning","Artificial Intelligence","Cyber Security","Digital Marketing","Cloud Computing","Blockchain Development","Game Development","Software Testing","Embedded Systems","Web Development","Big Data Analytics","Networking and IT Support","Augmented Reality (AR) / Virtual Reality (VR)"],Aa=({branchCode:n})=>{const t=se(),s=ce(),{students:r}=W(w=>w.data),[o,a]=c.useState(""),[l,u]=c.useState(""),[d,h]=c.useState(""),[g,i]=c.useState("asc"),[f,x]=c.useState(!1),[j,y]=c.useState(null),[v,S]=c.useState(!1),k=p("gray.50","gray.800"),C=p("gray.900","gray.100"),Y=p("red.100","teal.600"),te=p("white","gray.700"),$=p("red","teal"),J=p("rgba(255, 0, 0, 0.05)","rgba(20, 20, 20, 0.5)");c.useEffect(()=>{t(De())},[t]);const G=r.filter(w=>n==="SUPERADMIN"?d?w.branchCode===d:!0:w.branchCode===n).filter(w=>w.name.toLowerCase().includes(o.toLowerCase())||w.email.toLowerCase().includes(o.toLowerCase())).filter(w=>l?w.course===l:!0).sort((w,A)=>g==="asc"?w.name.localeCompare(A.name):A.name.localeCompare(w.name)),q=()=>{i(w=>w==="asc"?"desc":"asc")},H=w=>{y(w),x(!0)},M=async w=>{try{await t(ut(w)).unwrap(),B(s,"Student deleted successfully.","success"),t(De())}catch{B(s,"Error deleting student.","error")}},z=async()=>{if(j){S(!0);try{await t(ct({id:j.id,studentData:j})).unwrap(),B(s,"Student updated successfully.","success"),x(!1),t(De())}catch{B(s,"Error updating student.","error")}finally{S(!1)}}},V=()=>{x(!1),y(null)};return e.jsxs(b,{p:5,borderWidth:"1px",borderRadius:"lg",bg:k,color:C,boxShadow:"lg",children:[e.jsx(m,{fontSize:"2xl",mb:4,fontWeight:"bold",children:"Students Management"}),e.jsxs(_,{mb:4,gap:4,alignItems:"center",children:[e.jsx(X,{placeholder:"Search by name or email",value:o,onChange:w=>a(w.target.value),width:"30%",bg:te,borderRadius:"md",boxShadow:"sm"}),e.jsx(ee,{placeholder:"Filter by course",value:l,onChange:w=>u(w.target.value),width:"20%",bg:te,borderRadius:"md",boxShadow:"sm",children:nt().map(w=>e.jsx("option",{value:w,children:w},w))}),n==="SUPERADMIN"&&e.jsx(ee,{placeholder:"Filter by branch",value:d,onChange:w=>h(w.target.value),width:"20%",bg:te,borderRadius:"md",boxShadow:"sm",children:Pe().map(w=>e.jsx("option",{value:w,children:w},w))})]}),e.jsx(en,{children:e.jsxs(tn,{variant:"striped",colorScheme:$,children:[e.jsx(sn,{children:e.jsxs(Ut,{children:[e.jsxs(ye,{onClick:q,cursor:"pointer",children:["Name ",g==="asc"?"↑":"↓"]}),e.jsx(ye,{children:"Email"}),e.jsx(ye,{children:"Course"}),e.jsx(ye,{children:"Branch Code"}),e.jsx(ye,{children:"Actions"})]})}),e.jsx(nn,{children:G.map((w,A)=>e.jsxs(Ut,{_hover:{bg:Y},bg:A%2===1?J:"transparent",children:[e.jsx(Ce,{children:w.name}),e.jsx(Ce,{children:w.email}),e.jsx(Ce,{children:w.course}),e.jsx(Ce,{children:w.branchCode}),e.jsx(Ce,{children:e.jsxs(Ue,{children:[e.jsx(Oe,{as:ae,"aria-label":"Options",icon:e.jsx(qs,{}),variant:"ghost"}),e.jsxs(Ne,{children:[e.jsxs(le,{onClick:()=>H(w),children:[e.jsx(Ys,{style:{marginRight:"8px"}})," Update"]}),e.jsxs(le,{onClick:()=>M(w.id),children:[e.jsx(Hs,{style:{marginRight:"8px"}})," Delete"]})]})]})})]},w.id))})]})}),f&&e.jsxs(Ae,{isOpen:f,onClose:V,children:[e.jsx(ue,{}),e.jsxs(Ie,{children:[e.jsx(he,{children:"Update Student"}),e.jsx(xe,{}),e.jsxs(ge,{children:[e.jsxs(L,{isRequired:!0,children:[e.jsx(Q,{children:"Name"}),e.jsx(X,{value:(j==null?void 0:j.name)||"",onChange:w=>y(A=>({...A,name:w.target.value}))})]}),e.jsxs(L,{mt:4,isRequired:!0,children:[e.jsx(Q,{children:"Email"}),e.jsx(X,{value:(j==null?void 0:j.email)||"",onChange:w=>y(A=>({...A,email:w.target.value}))})]}),e.jsxs(L,{mt:4,isRequired:!0,children:[e.jsx(Q,{children:"Course"}),e.jsx(ee,{value:(j==null?void 0:j.course)||"",onChange:w=>y(A=>({...A,course:w.target.value})),children:nt().map(w=>e.jsx("option",{value:w,children:w},w))})]}),e.jsxs(L,{mt:4,isRequired:!0,children:[e.jsx(Q,{children:"Branch Code"}),e.jsx(ee,{value:(j==null?void 0:j.branchCode)||"",onChange:w=>y(A=>({...A,branchCode:w.target.value})),children:Pe().map(w=>e.jsx("option",{value:w,children:w},w))})]})]}),e.jsxs(Fe,{children:[e.jsx(R,{colorScheme:"teal",onClick:z,isLoading:v,children:"Save"}),e.jsx(R,{variant:"ghost",onClick:V,ml:3,children:"Cancel"})]})]})]})]})},Ia=E.memo(Aa),Qt=(n,t)=>F(n,async(s,{rejectWithValue:r})=>{var o;try{return(await t(s)).data}catch(a){let l=`An error occurred in ${n}.`;return a.response?l=((o=a.response.data)==null?void 0:o.message)||a.response.data||l:a.request?l="No response from server. Please try again later.":l=a.message,r(l)}}),tt=Qt("user/fetchUsers",()=>I.get("/users")),Dt=Qt("user/createUser",n=>(n.role="ADMIN",I.post("/users/signup",n))),Lt=Qt("user/updateUser",({id:n,userData:t})=>I.put(`/users/${n}`,t)),Pt=Qt("user/deleteUser",n=>I.delete(`/users/${n}`)),Ma=({userData:n={},setUserData:t,isSubmitting:s,apiError:r})=>{const[o,a]=c.useState({}),l=g=>{const{name:i,value:f}=g.target;t(x=>({...x,[i]:f})),a(x=>({...x,[i]:""}))},u=p("gray.100","gray.800"),d=p("teal.700","teal.300"),h=g=>o[g]&&e.jsx(m,{color:"red.500",fontSize:"sm",children:o[g]});return e.jsx(b,{maxWidth:"500px",mx:"auto",p:4,children:e.jsxs(N,{spacing:4,width:"full",children:[r&&e.jsx(m,{color:"red.500",fontSize:"sm",mb:4,children:r}),e.jsxs(L,{isRequired:!0,isDisabled:s,children:[e.jsx(Q,{color:d,children:"User Name"}),e.jsx(X,{type:"text",name:"name",value:n.name||"",onChange:l,bg:u,isInvalid:!!o.name}),h("name")]}),e.jsxs(L,{isRequired:!0,isDisabled:s,children:[e.jsx(Q,{color:d,children:"User Email"}),e.jsx(X,{type:"email",name:"email",value:n.email||"",onChange:l,bg:u,isInvalid:!!o.email}),h("email")]}),e.jsxs(L,{isDisabled:s,children:[e.jsxs(Q,{color:d,children:["Password"," ",n.id?"(Leave blank to keep current)":"(min. 8 characters)"]}),e.jsx(X,{type:"password",name:"password",value:n.password||"",onChange:l,bg:u,placeholder:n.id?"********":"",isInvalid:!!o.password}),h("password")]}),e.jsxs(L,{isRequired:!0,isDisabled:s,children:[e.jsx(Q,{color:d,children:"Department (Course)"}),e.jsxs(ee,{name:"department",value:n.department||"",onChange:l,bg:u,isInvalid:!!o.department,children:[e.jsx("option",{value:"",children:"Select Department"}),nt().map(g=>e.jsx("option",{value:g,children:g},g))]}),h("department")]}),e.jsxs(L,{isRequired:!0,isDisabled:s,children:[e.jsx(Q,{color:d,children:"Branch Code"}),e.jsxs(ee,{name:"branchCode",value:n.branchCode||"",onChange:l,bg:u,isInvalid:!!o.branchCode,children:[e.jsx("option",{value:"",children:"Select Branch Code"}),Pe().map(g=>e.jsx("option",{value:g,children:g},g))]}),h("branchCode")]})]})})},Ta=E.memo(Ma),za=({isOpen:n,onClose:t,refreshUsers:s,userData:r,mode:o="Create"})=>{const[a,l]=c.useState(r||{}),[u,d]=c.useState(!1),[h,g]=c.useState(null),i=se(),f=ce(),x=p("white","gray.800"),j=p("teal.600","teal.400");c.useEffect(()=>{l(r||{}),g(null)},[r]);const y=async()=>{d(!0),g(null);try{o==="Create"?(await i(Dt(a)).unwrap(),f({title:"User created successfully.",status:"success",duration:3e3,isClosable:!0,position:"top"})):(await i(Lt({id:a.id,userData:a})).unwrap(),f({title:"User updated successfully.",status:"success",duration:3e3,isClosable:!0,position:"top"})),t(),s&&s()}catch(v){g(v||"An unexpected error occurred.")}finally{d(!1)}};return e.jsxs(Ae,{isOpen:n,onClose:t,size:"lg",children:[e.jsx(ue,{}),e.jsxs(Ie,{bg:x,children:[e.jsx(he,{color:j,children:o==="Create"?"Create User":"Update User"}),e.jsx(xe,{}),e.jsx(ge,{children:e.jsx(Ta,{userData:a,setUserData:l,isSubmitting:u,apiError:h})}),e.jsxs(Fe,{children:[e.jsx(R,{colorScheme:"teal",onClick:y,isLoading:u,loadingText:o==="Create"?"Creating":"Saving",children:o==="Create"?"Create":"Save Changes"}),e.jsx(R,{variant:"ghost",onClick:t,ml:3,disabled:u,children:"Cancel"})]})]})]})},pn=E.memo(za),Ea=E.memo(({branchCode:n})=>{const t=se(),s=we(),{users:r,user:o}=W(T=>T.user),a=W(T=>T.data.user),{isOpen:l,onOpen:u,onClose:d}=Me(),{isOpen:h,onOpen:g,onClose:i}=Me(),[f,x]=c.useState(null),[j,y]=c.useState(null),[v,S]=c.useState(""),[k,C]=c.useState(""),[Y,te]=c.useState(""),[$,J]=c.useState({key:"",order:""}),G=p("gray.50","gray.800"),q=p("gray.900","gray.100"),H=p("red.100","teal.600"),M=p("white","gray.700"),z=p("red","teal"),V=p("rgba(255, 0, 0, 0.05)","rgba(20, 20, 20, 0.5)"),w=js({base:!0,md:!1});c.useEffect(()=>{t(tt())},[t]);const A=c.useCallback(()=>{t(tt())},[t]),Z=c.useMemo(()=>(r||[]).filter(T=>n==="SUPERADMIN"||T.branchCode===n).filter(T=>{var ie,je;return((ie=T==null?void 0:T.name)==null?void 0:ie.toLowerCase().includes(v.toLowerCase()))||((je=T==null?void 0:T.email)==null?void 0:je.toLowerCase().includes(v.toLowerCase()))}).filter(T=>k?T.department===k:!0).filter(T=>n==="SUPERADMIN"&&Y?T.branchCode===Y:!0).sort((T,ie)=>$.key?$.order==="asc"?T[$.key]>ie[$.key]?1:-1:T[$.key]<ie[$.key]?1:-1:0),[r,n,v,k,Y,$.key,$.order]),oe=c.useCallback(T=>{J(ie=>({key:T,order:ie.order==="asc"?"desc":"asc"}))},[]),U=c.useCallback(()=>{t(Pt(f)).then(()=>{A(),d()})},[t,f,A,d]),ne=c.useCallback(T=>{x(T),u()},[u]),P=c.useCallback(T=>{y(T),g()},[g]),pe=c.useCallback(T=>{s(`/user/${T}`)},[s]);return e.jsxs(b,{p:5,maxWidth:"100%",borderWidth:"1px",borderRadius:"lg",bg:G,color:q,boxShadow:"lg",overflowX:"auto",children:[e.jsxs(_,{mb:4,gap:4,flexDirection:w?"column":"row",alignItems:w?"stretch":"center",children:[e.jsx(X,{placeholder:"Search by name or email",value:v,onChange:T=>S(T.target.value),width:w?"100%":"30%",bg:M,borderRadius:"md",boxShadow:"sm"}),e.jsx(ee,{placeholder:"Filter by department",value:k,onChange:T=>C(T.target.value),width:w?"100%":"20%",bg:M,borderRadius:"md",boxShadow:"sm",children:nt().map(T=>e.jsx("option",{value:T,children:T},T))}),n==="SUPERADMIN"&&e.jsx(ee,{placeholder:"Filter by branch",value:Y,onChange:T=>te(T.target.value),width:w?"100%":"20%",bg:M,borderRadius:"md",boxShadow:"sm",children:Pe().map(T=>e.jsx("option",{value:T,children:`Branch ${T.toUpperCase()}`},T))})]}),e.jsx(en,{children:e.jsxs(tn,{variant:"striped",colorScheme:z,children:[e.jsx(sn,{children:e.jsxs(Ut,{children:[e.jsxs(ye,{children:["Name",e.jsx(ae,{size:"xs",ml:2,onClick:()=>oe("name"),icon:$.key==="name"&&$.order==="asc"?e.jsx(Qn,{}):e.jsx(Wn,{}),variant:"ghost",colorScheme:z,_hover:{bg:H}})]}),e.jsx(ye,{children:"Email"}),e.jsx(ye,{children:"Department"}),e.jsx(ye,{children:"Branch Code"}),e.jsx(ye,{children:"Role"}),a.role==="SUPERADMIN"&&e.jsx(ye,{children:"Actions"})]})}),e.jsx(nn,{children:Z.map((T,ie)=>e.jsxs(Ut,{_hover:{bg:H},bg:ie%2===1?V:"transparent",children:[e.jsx(Ce,{onClick:()=>pe(T.id),_hover:{textDecoration:"underline",cursor:"pointer"},children:T.name}),e.jsx(Ce,{children:T.email}),e.jsx(Ce,{children:T.department}),e.jsx(Ce,{children:T.branchCode}),e.jsx(Ce,{children:T.role}),o.role==="SUPERADMIN"&&e.jsx(Ce,{children:e.jsxs(Ue,{children:[e.jsx(Oe,{as:ae,icon:e.jsx(qs,{}),variant:"outline","aria-label":"Options",_hover:{bg:H}}),e.jsxs(Ne,{children:[e.jsx(le,{icon:e.jsx(Ys,{}),onClick:je=>{je.stopPropagation(),P(T)},children:"Update"}),e.jsx(le,{icon:e.jsx(Hs,{}),color:"red.500",onClick:je=>{je.stopPropagation(),ne(T.id)},children:"Delete"})]})]})})]},T.id))})]})}),e.jsxs(Ae,{isOpen:l,onClose:d,isCentered:!0,children:[e.jsx(ue,{}),e.jsxs(Ie,{children:[e.jsx(he,{children:"Confirm Delete"}),e.jsx(ge,{children:"Are you sure you want to delete this user?"}),e.jsxs(Fe,{children:[e.jsx(R,{colorScheme:"red",mr:3,onClick:U,children:"Delete"}),e.jsx(R,{variant:"ghost",onClick:d,children:"Cancel"})]})]})]}),h&&e.jsx(pn,{isOpen:h,onClose:()=>{i(),y(null)},refreshUsers:A,userData:j,mode:"Update"})]})}),Fa=E.memo(Ea),Ra=({user:n})=>{if(!n||!n.role)return e.jsx(ke,{size:"lg",children:"Invalid User Data"});const t=n.role==="ADMIN",s=n.role==="SUPERADMIN";return e.jsxs(zr,{colorScheme:"blue",children:[e.jsxs(Er,{children:[e.jsx(He,{children:"Profile"}),e.jsx(He,{children:"Rankings"}),n.role==="STUDENT"&&e.jsx(He,{children:"Stats"}),(t||s)&&e.jsx(He,{children:"Students"}),(t||s)&&e.jsx(He,{children:"Users"})]}),e.jsxs(Fr,{children:[e.jsx(Ve,{children:e.jsxs(ke,{size:"lg",children:["Welcome, ",n.name||"User"]})}),e.jsx(Ve,{children:e.jsx(N,{spacing:4,children:e.jsx(ka,{})})}),n.role==="STUDENT"&&e.jsx(Ve,{children:e.jsxs(N,{spacing:4,children:[e.jsx(ke,{size:"md",children:"Your Stats"}),e.jsx(ja,{student:{...n}})]})}),(t||s)&&e.jsx(Ve,{children:e.jsxs(N,{spacing:4,children:[e.jsx(ke,{size:"md",children:"Students Management"}),e.jsx(Ia,{branchCode:t?n.branchCode:"SUPERADMIN"})]})}),(t||s)&&e.jsx(Ve,{children:e.jsxs(N,{spacing:4,children:[e.jsx(ke,{size:"md",children:"Users Management"}),e.jsx(Fa,{branchCode:t?n.branchCode:"SUPERADMIN"})]})})]})]})},Ba=E.memo(Ra),$a=({studentData:n,setStudentData:t})=>{const s=r=>{const{id:o,value:a}=r.target;t(l=>({...l,[o]:a}))};return e.jsxs(N,{spacing:4,width:"full",children:[e.jsxs(L,{id:"name",isRequired:!0,children:[e.jsx(Q,{children:"Student Name"}),e.jsx(b,{children:e.jsx(X,{type:"text",id:"name",value:n.name,onChange:s})})]}),e.jsxs(L,{id:"email",isRequired:!0,children:[e.jsx(Q,{children:"Student Email"}),e.jsx(b,{children:e.jsx(X,{type:"email",id:"email",value:n.email,onChange:s})})]}),e.jsxs(L,{id:"grid",isRequired:!0,children:[e.jsx(Q,{children:"Grid"}),e.jsx(b,{children:e.jsx(X,{type:"text",id:"grid",value:n.grid,onChange:s})})]}),e.jsxs(L,{id:"password",isRequired:!0,children:[e.jsx(Q,{children:"Password (min. 8 characters)"}),e.jsx(b,{children:e.jsx(X,{type:"password",id:"password",value:n.password,onChange:s})})]}),e.jsxs(L,{id:"course",isRequired:!0,children:[e.jsx(Q,{children:"Course"}),e.jsx(b,{children:e.jsxs(ee,{id:"course",value:n.course,onChange:s,children:[e.jsx("option",{value:"",children:"Select Course"}),nt().map((r,o)=>e.jsx("option",{value:r,children:r},o))]})})]}),e.jsxs(L,{id:"branchCode",isRequired:!0,children:[e.jsx(Q,{children:"Branch Code"}),e.jsx(b,{children:e.jsxs(ee,{id:"branchCode",value:n.branchCode,onChange:s,children:[e.jsx("option",{value:"",children:"Select Branch Code"}),Pe().map((r,o)=>e.jsx("option",{value:r,children:r},o))]})})]})]})},Da=E.memo($a),La=({setCreateButtonVisible:n,setUploadedData:t})=>{const s=ce(),r=a=>{const l=a.target.files[0];if(l){const u=new FileReader;u.onload=d=>{try{const h=d.target.result,g=ro(h,{type:"binary"}),i=g.SheetNames[0],f=g.Sheets[i],x=dt.sheet_to_json(f);if(x.length===0){s({title:"Validation Error",description:"The uploaded file is empty or not in the correct format.",status:"error",duration:3e3,isClosable:!0});return}n(!0),t(x),s({title:"File Uploaded",description:"Excel file has been successfully uploaded.",status:"success",duration:3e3,isClosable:!0})}catch{s({title:"File Error",description:"An error occurred while processing the Excel file.",status:"error",duration:3e3,isClosable:!0})}},u.readAsBinaryString(l)}},o=()=>{const a=[{name:"Name",email:"Email",grid:"Grid (4-digit number)",branchCode:"Branch Code (rw1-rw8)",password:"Password (min. 8 characters)",course:"Course (e.g., Full Stack Developer, Frontend Developer, etc.)"}],l=dt.json_to_sheet(a),u=dt.book_new();dt.book_append_sheet(u,l,"Template"),oo(u,"StudentUserTemplate.xlsx")};return e.jsxs(O,{spacing:4,width:"full",children:[e.jsx(K,{label:"Download Template File","aria-label":"Download Template Tooltip",children:e.jsx(R,{colorScheme:"teal",leftIcon:e.jsx(_n,{}),onClick:o,children:"Download Template"})}),e.jsx(K,{label:"Upload Excel File","aria-label":"Upload Excel Tooltip",children:e.jsxs(R,{colorScheme:"blue",leftIcon:e.jsx(qn,{}),children:[e.jsx(X,{type:"file",accept:".xlsx, .xls",onChange:r,position:"absolute",opacity:"0","aria-hidden":"true"}),"Upload File"]})})]})},Pa=E.memo(La),Ua=({isOpen:n,onClose:t})=>{const[s,r]=c.useState({name:"",email:"",grid:"",branchCode:"",password:"",course:""}),[o,a]=c.useState(!1),[l,u]=c.useState([]),d=se(),h=ce(),g=p("white","gray.800"),i=p("blue.600","blue.300"),f=p("gray.100","gray.700"),x=()=>s.name&&s.email&&s.grid&&s.branchCode&&s.password.length>=8&&s.course,j=async()=>{if(!x()){h({title:"Validation Error",description:"Please correct the highlighted fields.",status:"error",duration:3e3,isClosable:!0});return}try{await d(Ke(s)).unwrap(),h({title:"Student created successfully.",status:"success",duration:3e3,isClosable:!0}),t()}catch(v){v.response&&v.response.data.message.includes("email already exists")?h({title:"Duplicate Entry",description:"A student with the same email already exists. Please use a different email.",status:"error",duration:5e3,isClosable:!0}):h({title:"Error",description:"An error occurred while creating the student. Please try again.",status:"error",duration:3e3,isClosable:!0})}},y=async()=>{if(l.length===0){h({title:"No Data",description:"Please upload a valid Excel file before creating students.",status:"error",duration:3e3,isClosable:!0});return}try{const v=l.map(async S=>{try{await d(Ke(S)).unwrap()}catch(k){if(k.response&&k.response.data){const C=k.response.data.message;if(C&&(C.includes("email already exists")||C.includes("grid already exists")))h({title:`Duplicate Entry for ${S.email}`,description:`A student with the same email (${S.email}) or grid already exists. Skipping this entry.`,status:"warning",duration:5e3,isClosable:!0});else throw k}else throw k}});await Promise.all(v),h({title:"Bulk Upload Complete",description:"All valid students have been created successfully.",status:"success",duration:3e3,isClosable:!0}),t()}catch{h({title:"Error Creating Students",description:"An error occurred while creating the students. Please try again.",status:"error",duration:3e3,isClosable:!0})}};return e.jsxs(Ae,{isOpen:n,onClose:t,size:"2xl",children:[e.jsx(ue,{}),e.jsxs(Ie,{bg:g,children:[e.jsx(he,{color:i,textAlign:"center",children:"Create Student"}),e.jsx(xe,{}),e.jsx(ge,{children:e.jsxs(N,{spacing:6,align:"stretch",children:[e.jsx(b,{children:e.jsx(Pa,{setCreateButtonVisible:a,setUploadedData:u})}),e.jsx(ve,{}),e.jsxs(b,{children:[e.jsx(ke,{size:"md",mb:2,color:i,children:"Create Student Manually"}),e.jsx(ve,{mb:4}),e.jsx(Da,{studentData:s,setStudentData:r})]})]})}),e.jsx(Fe,{bg:f,children:e.jsxs(rn,{templateColumns:"repeat(3, 1fr)",gap:4,width:"full",children:[e.jsx(K,{label:"Create using Form","aria-label":"Create Form Tooltip",children:e.jsx(R,{colorScheme:"blue",leftIcon:e.jsx(Yn,{}),onClick:j,children:"Create Student"})}),o&&e.jsx(K,{label:"Create from Excel File","aria-label":"Create Excel Tooltip",children:e.jsx(R,{colorScheme:"green",leftIcon:e.jsx(Hn,{}),onClick:y,children:"Create from Excel"})}),e.jsx(R,{variant:"ghost",onClick:t,children:"Cancel"})]})})]})]})},Oa=E.memo(Ua),Na=({isAdmin:n,isSuperAdmin:t})=>{const s=p("gray.50","gray.900"),r=p("gray.800","white"),o=p("gray.200","gray.700"),a=p("red.50","teal.700"),l=p("red.500","teal.400"),{isOpen:u,onOpen:d,onClose:h}=Me(),[g,i]=c.useState(""),f=x=>{i(x),d()};return e.jsxs(e.Fragment,{children:[e.jsxs(b,{w:{base:"full",md:"60"},pos:"fixed",top:"0",left:"0",h:"full",bg:s,p:6,borderRight:"1px solid",borderColor:o,color:r,display:"flex",flexDirection:"column",justifyContent:"space-between",children:[e.jsxs(b,{children:[e.jsx(ke,{mb:6,fontSize:"xl",textAlign:"center",children:t?"Super Admin Dashboard":n?"Admin Dashboard":"User Dashboard"}),(t||n)&&e.jsx(m,{mb:6,textAlign:"center",fontSize:"sm",fontWeight:"bold",color:l,children:t?"Super Admin Role":"Admin Role"}),e.jsxs(N,{align:"stretch",spacing:4,children:[e.jsx(ze,{icon:Ps,label:"Profile",onClick:()=>console.log("Profile clicked"),hoverBg:a,iconColor:l}),t&&e.jsx(ze,{icon:ks,label:"Create User",onClick:()=>f("user"),hoverBg:a,iconColor:l}),n&&e.jsx(ze,{icon:Vn,label:"Create Student",onClick:()=>f("student"),hoverBg:a,iconColor:l}),(t||n)&&e.jsxs(e.Fragment,{children:[e.jsx(ze,{icon:Gn,label:"Manage Students",onClick:()=>console.log("Manage Students clicked"),hoverBg:a,iconColor:l}),e.jsx(ze,{icon:ks,label:"Manage Users",onClick:()=>console.log("Manage Users clicked"),hoverBg:a,iconColor:l})]}),e.jsx(ze,{icon:xs,label:"Rankings",onClick:()=>console.log("Rankings clicked"),hoverBg:a,iconColor:l}),e.jsx(ze,{icon:Kn,label:"Statistics",onClick:()=>console.log("Statistics clicked"),hoverBg:a,iconColor:l}),(t||n)&&e.jsx(ze,{icon:Xn,label:"Settings",onClick:()=>console.log("Settings clicked"),hoverBg:a,iconColor:l})]})]}),e.jsx(b,{children:e.jsxs(m,{fontSize:"xs",textAlign:"center",color:r,children:["© ",new Date().getFullYear()," Dashboard"]})})]}),g==="user"&&e.jsx(pn,{isOpen:u,onClose:h}),g==="student"&&e.jsx(Oa,{isOpen:u,onClose:h})]})},ze=({icon:n,label:t,onClick:s,hoverBg:r,iconColor:o})=>{const a=p("gray.800","white");return e.jsx(R,{variant:"ghost",w:"full",justifyContent:"flex-start",leftIcon:e.jsx(D,{as:n,boxSize:5,color:o}),color:a,_hover:{bg:r},onClick:s,children:t})},Qa=E.memo(Na),Wa=({isOpen:n,onClose:t,isAdmin:s,isSuperAdmin:r})=>e.jsxs(rt,{placement:"left",onClose:t,isOpen:n,children:[e.jsx(ue,{}),e.jsxs(ot,{children:[e.jsx(xe,{}),e.jsx(he,{children:"Dashboard"}),e.jsx(ge,{children:e.jsx(N,{align:"start",spacing:4,children:(s||r)&&e.jsxs(e.Fragment,{children:[e.jsx(R,{w:"full",colorScheme:"blue",onClick:t,children:"Create User"}),e.jsx(R,{w:"full",colorScheme:"blue",onClick:t,children:"Create Student"})]})})})]})]}),_a=E.memo(Wa),qa=()=>{const{isOpen:n,onOpen:t,onClose:s}=Me(),{user:r}=W(d=>d.data),o=(r==null?void 0:r.role)==="ADMIN"||(r==null?void 0:r.role)==="SUPERADMIN",a=(r==null?void 0:r.role)==="SUPERADMIN";r==null||r.role;const l=p("gray.50","gray.800"),u=p("gray.900","gray.100");return e.jsxs(_,{minH:"100vh",bg:l,children:[(o||a)&&e.jsx(Qa,{isAdmin:o,isSuperAdmin:a,onOpen:t}),e.jsxs(b,{flex:"1",ml:{base:0,md:o||a?"60":0},p:5,bg:l,color:u,children:[(o||a)&&e.jsx(_a,{isOpen:n,onClose:s,isAdmin:o,isSuperAdmin:a}),e.jsx(Ba,{user:r,isAdmin:o,isSuperAdmin:a})]})]})},Ya=E.memo(qa),gs=({children:n})=>{let{user:t,isLogin:s}=W(r=>r.data);return s?(t==null?void 0:t.role)==="ADMIN"||(t==null?void 0:t.role)==="SUPERADMIN"?n:e.jsx(Ms,{to:"/"}):e.jsx(Ms,{to:"/login"})},st=({roles:n,children:t})=>{let{role:s}=W(r=>r.user.user);return n.includes(s)?e.jsx(e.Fragment,{children:t}):null},Ha=({filter:n,setFilter:t,onCreateContest:s})=>e.jsxs(O,{justify:"space-between",mb:6,spacing:4,children:[e.jsxs(O,{spacing:4,children:[e.jsx(K,{label:"Active Contests","aria-label":"Active Contests",children:e.jsx(R,{leftIcon:e.jsx(Vs,{}),colorScheme:n==="active"?"teal":"gray",onClick:()=>t("active"),children:"Active"})}),e.jsx(K,{label:"Upcoming Contests","aria-label":"Upcoming Contests",children:e.jsx(R,{leftIcon:e.jsx(at,{}),colorScheme:n==="upcoming"?"yellow":"gray",onClick:()=>t("upcoming"),children:"Upcoming"})}),e.jsx(K,{label:"Past Contests","aria-label":"Past Contests",children:e.jsx(R,{leftIcon:e.jsx(Rr,{}),colorScheme:n==="past"?"red":"gray",onClick:()=>t("past"),children:"Past"})}),e.jsx(K,{label:"All Contests","aria-label":"All Contests",children:e.jsx(R,{leftIcon:e.jsx(Jn,{}),colorScheme:n==="all"?"blue":"gray",onClick:()=>t("all"),children:"All"})})]}),e.jsx(st,{roles:["ADMIN","SUPERADMIN"],children:e.jsx(K,{label:"Create Contest","aria-label":"Create Contest",children:e.jsx(ae,{icon:e.jsx(Zn,{}),colorScheme:"teal",onClick:s,"aria-label":"Create Contest"})})})]}),Va=E.memo(Ha),Ga=({contest:n,onStartClick:t})=>{c.useState(!1);const s=se(),r=we(),o=ce(),{user:a}=W(S=>S.user);Me();const l=re(),u=l.isAfter(re(n.startTime))&&l.isBefore(re(n.endTime)),d=l.isBefore(re(n.startTime)),h=l.isAfter(re(n.endTime)),g=u?"teal.500":d?"yellow.500":"red.500",i=p("white","gray.700"),f=p("gray.700","gray.100"),x=p("gray.200","gray.600"),j=async()=>{try{await s(bt(n.id)).unwrap(),B(o,"Contest deleted successfully.","success",3e3)}catch(S){B(o,S.message||"Failed to delete contest.","error",3e3)}},y=()=>{r(`/contest/${n.id}`)},v=S=>{S.preventDefault(),console.log("Edit clicked"),r(`/admin/update-contest/${n.id}`)};return e.jsxs(b,{borderWidth:"1px",borderColor:x,borderRadius:"md",p:6,bg:i,shadow:"md",position:"relative",_hover:{transform:"scale(1.02)",transition:"0.3s",cursor:"pointer"},children:[e.jsx(m,{fontSize:"xl",fontWeight:"bold",color:g,children:n.title}),e.jsx(m,{fontSize:"md",color:f,mt:2,children:n.description}),e.jsxs(bs,{mt:3,spacing:4,children:[e.jsxs(O,{children:[e.jsx(D,{as:at,color:"teal.500"}),e.jsxs(m,{fontSize:"sm",color:f,children:["Starts: ",re(n.startTime).format("YYYY-MM-DD hh:mm A")]})]}),e.jsxs(O,{children:[e.jsx(D,{as:Gs,color:"red.500"}),e.jsxs(m,{fontSize:"sm",color:f,children:["Ends: ",re(n.endTime).format("YYYY-MM-DD hh:mm A")]})]})]}),e.jsx(ve,{my:4,borderColor:x}),h?e.jsx(K,{label:"View Contest","aria-label":"View Contest",children:e.jsx(R,{mt:4,colorScheme:"blue",onClick:y,leftIcon:e.jsx(As,{}),children:"View Contest"})}):u?e.jsx(e.Fragment,{children:(a==null?void 0:a.role)==="SUPERADMIN"||(a==null?void 0:a.role)==="ADMIN"?e.jsx(K,{label:"View Contest","aria-label":"View Contest",children:e.jsx(R,{mt:4,colorScheme:"teal",onClick:y,leftIcon:e.jsx(As,{}),children:"View Contest"})}):e.jsx(K,{label:"Start Contest","aria-label":"Start Contest",children:e.jsx(R,{mt:4,colorScheme:"teal",onClick:()=>t(n),leftIcon:e.jsx(er,{}),children:"Start Contest"})})}):e.jsx(b,{mt:4,color:"yellow.500",fontWeight:"bold",children:e.jsx(m,{children:"Contest starts soon!"})}),e.jsxs(Ue,{children:[e.jsx(Oe,{as:ae,icon:e.jsx(Ks,{}),size:"sm",position:"absolute",top:"4px",right:"4px","aria-label":"More options"}),e.jsxs(Ne,{children:[((a==null?void 0:a.role)==="SUPERADMIN"||(a==null?void 0:a.role)==="ADMIN")&&e.jsxs(e.Fragment,{children:[e.jsx(le,{icon:e.jsx(Os,{}),onClick:v,children:"Edit"}),e.jsx(le,{icon:e.jsx(tr,{}),onClick:j,children:"Delete"})]}),e.jsx(le,{icon:e.jsx(sr,{}),onClick:()=>B(o,"Bookmark feature coming soon...","info"),children:"Bookmark"})]})]})]})},Ka=E.memo(Ga);re.extend(ln);const Xa=({contests:n,onStartContestClick:t})=>e.jsx(N,{spacing:4,align:"stretch",children:n.length>0?n.map(s=>e.jsx(Ka,{contest:s,onStartClick:t},s.id)):e.jsx(m,{color:p("gray.700","gray.100"),children:"No contests available for the selected filter."})}),Ja=E.memo(Xa),Za=({isOpen:n,onClose:t,contest:s,user:r})=>{const o=se(),a=we(),[l,u]=c.useState(!1),[d,h]=c.useState(null),[g,i]=c.useState(!1),f=async()=>{g||(u(!0),h(null),o(It({contestId:s.id,studentId:r.id})),a(`/contest/${s.id}`))};return e.jsxs(Ae,{isOpen:n,onClose:t,children:[e.jsx(ue,{}),e.jsxs(Ie,{children:[e.jsx(he,{children:e.jsxs(_,{alignItems:"center",children:[e.jsx(Le,{size:"sm",mr:3}),"Contest Details and Rules"]})}),e.jsx(xe,{}),e.jsxs(ge,{children:[e.jsx(m,{fontSize:"2xl",fontWeight:"bold",mb:2,children:s.title}),e.jsx(m,{fontSize:"md",children:s.description}),e.jsx(ve,{my:4}),e.jsxs(O,{mb:4,children:[e.jsx(D,{as:Br,w:5,h:5,color:"blue.500"}),e.jsx(m,{fontSize:"md",fontWeight:"semibold",children:"General Information:"})]}),e.jsxs(N,{align:"start",spacing:2,children:[e.jsxs(m,{fontSize:"sm",children:[e.jsx(D,{as:at,mr:2,color:"teal.500"})," Start Time:"," ",re(s.startTime).format("YYYY-MM-DD hh:mm A")]}),e.jsxs(m,{fontSize:"sm",children:[e.jsx(D,{as:Gs,mr:2,color:"red.500"})," End Time:"," ",re(s.endTime).format("YYYY-MM-DD hh:mm A")]}),e.jsxs(m,{fontSize:"sm",children:[e.jsx(D,{as:Vs,mr:2,color:"cyan.500"})," ","Participation: Open to all registered students"]})]}),e.jsx(ve,{my:4}),e.jsxs(O,{mb:2,children:[e.jsx(D,{as:nr,w:5,h:5,color:"orange.500"}),e.jsx(m,{fontSize:"md",fontWeight:"semibold",children:"Contest Rules:"})]}),e.jsxs(N,{align:"start",spacing:2,pl:6,children:[e.jsx(m,{fontSize:"sm",children:"1. Be respectful to other participants."}),e.jsx(m,{fontSize:"sm",children:"2. Do not engage in any form of cheating."}),e.jsx(m,{fontSize:"sm",children:"3. Complete the contest within the given time frame."}),e.jsx(m,{fontSize:"sm",children:"4. Do not close the browser during the contest."})]}),e.jsx(ve,{my:4}),e.jsx(m,{fontSize:"md",fontWeight:"bold",color:"teal.500",mt:4,children:"Good Luck!"}),d&&e.jsxs($r,{status:"error",mt:4,children:[e.jsx(Dr,{}),d]})]}),e.jsxs(Fe,{children:[e.jsx(R,{colorScheme:"teal",onClick:f,isDisabled:l||g,children:l?e.jsx(Re,{size:"sm"}):"Proceed"}),e.jsx(R,{variant:"ghost",onClick:t,ml:3,isDisabled:l||g,children:"Cancel"})]})]})]})},el=E.memo(Za),ps=We`
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-15px); }
`,tl=We`
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
`,sl=E.memo(()=>{const n=p("purple.600","yellow.300"),t=p("orange.400","teal.300");return e.jsxs(N,{spacing:10,p:10,justify:"center",align:"center",h:"100vh",children:[e.jsxs(b,{textAlign:"center",children:[e.jsx(m,{fontSize:"3xl",fontWeight:"extrabold",color:n,children:"The Countdown Begins!"}),e.jsx(m,{fontSize:"lg",color:n,mt:1,children:"Greatness is loading..."})]}),e.jsxs(O,{spacing:8,children:[e.jsx(D,{as:Ns,boxSize:16,color:t,animation:`${ps} 2s ease-in-out infinite`}),e.jsx(Re,{thickness:"8px",speed:"0.9s",emptyColor:"gray.200",color:"purple.500",size:"xl",animation:`${tl} 1.5s linear infinite`}),e.jsx(D,{as:Xs,boxSize:16,color:"red.400",animation:`${ps} 2.5s ease-in-out infinite`})]}),e.jsxs(N,{spacing:6,children:[e.jsx(D,{as:_s,boxSize:20,color:"yellow.500",animation:`${ps} 3s ease-in-out infinite`}),e.jsx(m,{fontSize:"xl",fontWeight:"bold",color:n,children:"Preparing your journey to victory..."})]})]})}),nl=E.memo(sl);re.extend(ln);const rl=()=>{const n=se(),t=we(),{isOpen:s,onOpen:r,onClose:o}=Me(),[a,l]=c.useState("active"),[u,d]=c.useState(null),[h,g]=c.useState(!0),i=W(S=>S.data.user,Yt),f=W(S=>S.contest.contests,Yt),x=W(S=>S.contest.isFetched,Yt),{batchId:j}=Qe();c.useEffect(()=>{n(et(j))},[]),c.useEffect(()=>{if(x)return;(()=>{n(jt(j))})()},[n,i==null?void 0:i.role,i==null?void 0:i.id,x]),c.useEffect(()=>{const S=setTimeout(()=>g(!1),1e3);return()=>clearTimeout(S)},[]);const y=c.useCallback(S=>{d(S),r()},[r]),v=c.useMemo(()=>{if(!f||f.length===0)return[];const S=re();return f.filter(k=>{switch(a){case"active":return S.isAfter(re(k.startTime))&&S.isBefore(re(k.endTime));case"upcoming":return S.isBefore(re(k.startTime));case"past":return S.isAfter(re(k.endTime));case"all":return!0;default:return!1}})},[f,a]);return h?e.jsx(nl,{}):e.jsxs(b,{p:8,maxW:"1000px",mx:"auto",bg:p("gray.50","gray.800"),borderRadius:"lg",shadow:"md",children:[e.jsx(Va,{filter:a,setFilter:l,onCreateContest:()=>t(`/admin/batch/${j}/create-contest`)}),e.jsx(Ja,{contests:v,onStartContestClick:y,user:i}),u&&e.jsx(el,{isOpen:s,onClose:o,contest:u,user:i,onProceed:()=>t(`/Contest/${u.id}`)})]})},ol=E.memo(rl),ms=We`
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
`,Rs=We`
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
`,al=()=>e.jsxs(N,{spacing:12,p:8,justify:"center",align:"center",h:"100vh",children:[e.jsxs(O,{spacing:8,children:[e.jsx(D,{as:Us,boxSize:12,color:"teal.400",animation:`${ms} 2s linear infinite`}),e.jsx(D,{as:rr,boxSize:12,color:"green.400",animation:`${Rs} 3s ease-in-out infinite`}),e.jsx(Re,{thickness:"6px",speed:"1s",emptyColor:"gray.300",color:"purple.600",size:"xl"}),e.jsx(D,{as:Qs,boxSize:12,color:"yellow.500",animation:`${ms} 2.5s linear infinite`})]}),e.jsxs(O,{spacing:6,children:[e.jsx(D,{as:Xs,boxSize:14,color:"red.500",animation:`${ms} 4s linear infinite`}),e.jsx(m,{fontSize:"2xl",fontWeight:"extrabold",color:"purple.700",textAlign:"center",children:"Gearing up for an epic coding journey..."}),e.jsx(D,{as:or,boxSize:14,color:"yellow.300",animation:`${Rs} 2s ease-in-out infinite`})]}),e.jsx(m,{fontSize:"lg",fontWeight:"medium",color:"gray.600",textAlign:"center",children:"Sit tight! Your adventure into solving problems and conquering challenges is almost ready!"})]}),ll=E.memo(al),il=({contest:n})=>{const[t,s]=c.useState(""),r=c.useCallback(()=>{if(!(n!=null&&n.endTime))return;const u=new Date(n.endTime).getTime(),d=new Date().getTime(),h=u-d;if(h<=0){s("Contest Ended");return}const g=Math.floor(h/(1e3*60*60*24)),i=Math.floor(h/(1e3*60*60)%24),f=Math.floor(h/(1e3*60)%60),x=Math.floor(h/1e3%60),j=`${g>0?`${g}d `:""}${i>0?`${i}h `:""}${f}m ${x}s`;s(y=>y===j?y:j)},[n==null?void 0:n.endTime]);c.useEffect(()=>{if(n!=null&&n.endTime){const u=setInterval(r,1e3);return()=>clearInterval(u)}},[n==null?void 0:n.endTime,r]);const o=p("white","gray.700"),a=p("teal.600","teal.300"),l=p("red.600","red.300");return e.jsx(b,{bg:o,p:4,borderRadius:"lg",shadow:"base",transition:"all 0.3s ease",_hover:{shadow:"md"},children:e.jsxs(_,{direction:{base:"column",md:"row"},justify:"space-between",align:"center",textAlign:{base:"center",md:"left"},children:[e.jsx(m,{fontSize:{base:"2xl",md:"3xl"},fontWeight:"bold",color:a,mb:{base:2,md:0},children:(n==null?void 0:n.title)||"Contest Title"}),e.jsxs(O,{spacing:3,children:[e.jsx(D,{as:Ws,boxSize:6,color:l}),e.jsx(m,{fontSize:{base:"md",md:"lg"},color:l,children:t})]})]})})},dl=E.memo(il),Bs=n=>{const t={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};return new Date(n).toLocaleString("en-US",t)},cl=({contest:n,user:t})=>{const s=new Date;new Date(n.endTime)<s;const r=(t==null?void 0:t.role)==="SUPERADMIN"||(t==null?void 0:t.role)==="ADMIN",o=p("gray.700","gray.300"),a=p("gray.600","gray.400"),l=p("gray.300","gray.600"),u=p("purple.100","purple.800");return e.jsxs(b,{p:6,borderRadius:"lg",shadow:"md",bg:p("white","gray.700"),transition:"all 0.3s ease",_hover:{shadow:"lg"},children:[(n==null?void 0:n.difficultyLevel)&&e.jsx(b,{mb:4,children:e.jsxs(Ee,{bg:u,color:"purple.500",fontSize:"0.9em",px:2,py:1,borderRadius:"md",shadow:"sm",children:["Difficulty: ",n.difficultyLevel]})}),(n==null?void 0:n.startTime)&&(n==null?void 0:n.endTime)&&e.jsxs(bs,{direction:{base:"column",md:"row"},spacing:4,align:"start",mb:6,children:[e.jsxs(O,{children:[e.jsx(D,{as:at,color:"purple.400"}),e.jsxs(m,{fontSize:"md",color:a,children:["Starts: ",Bs(n.startTime)]})]}),e.jsxs(O,{children:[e.jsx(D,{as:on,color:"red.400"}),e.jsxs(m,{fontSize:"md",color:a,children:["Ends: ",Bs(n.endTime)]})]})]}),(n==null?void 0:n.totalMarks)&&e.jsx(b,{mb:4,children:e.jsxs(m,{fontSize:"lg",fontWeight:"bold",color:o,children:["Total Marks: ",n.totalMarks]})}),(n==null?void 0:n.description)&&e.jsxs(b,{my:4,children:[e.jsx(m,{fontSize:"lg",fontWeight:"semibold",mb:2,color:o,children:"Description"}),e.jsx(m,{fontSize:"md",color:a,lineHeight:"1.6",children:n.description})]}),e.jsx(ve,{borderColor:l,my:4}),r&&e.jsx(b,{mt:6,children:e.jsx(m,{fontSize:"sm",color:a,children:"*Admin Actions Placeholder (e.g., Edit/Delete Contest)*"})})]})},ul=E.memo(cl),hl=({contest:n,solvedQuestions:t,user:s,colorMode:r,attemptId:o})=>{var g;const a=we(),l=c.useMemo(()=>t.reduce((i,f)=>(f.studentId.toString()===s.id.toString()&&(i[f.questionId]=f),i),{}),[t,s.id]),u=c.useCallback(i=>{a(`/contests/${n.id}/questions/${i}/attempts/${o}`)},[a,n.id,o]),d=i=>i==="solved"?"green.200":i==="partial"?"yellow.100":i==="failed"?"red.200":r==="light"?"white":"gray.700",h=i=>i==="solved"?"green.700":i==="partial"?"orange.700":i==="failed"?"red.700":r==="light"?"blue.600":"blue.300";return e.jsxs(b,{my:6,children:[e.jsx(m,{fontSize:"lg",fontWeight:"semibold",mb:4,color:r==="light"?"teal.600":"teal.300",children:"Questions"}),e.jsx(N,{spacing:4,align:"stretch",children:(g=n==null?void 0:n.contestQuestions)==null?void 0:g.map(i=>{const f=l[i.questionId];let x=null,j=0;return f&&(j=f.obtainedMarks,x=j===i.marks?"solved":j>0?"partial":"failed"),e.jsx(b,{p:4,bg:d(x),borderRadius:"md",shadow:"sm",_hover:{bg:r==="light"?"teal.50":"teal.900"},children:e.jsxs(O,{justify:"space-between",align:"center",children:[e.jsxs(m,{fontSize:"md",color:h(x),fontWeight:"medium",children:[i.title," (Total Marks: ",i.marks,")"]}),e.jsxs(O,{children:[x&&e.jsxs(Ee,{colorScheme:x==="solved"?"green":x==="partial"?"orange":"red",variant:"solid",px:2,children:["Marks Obtained: ",j," / ",i.marks]}),e.jsx(K,{label:"Attempt Question","aria-label":"Attempt Question",children:e.jsx(R,{size:"sm",colorScheme:"teal",variant:"ghost",onClick:()=>u(i.questionId),leftIcon:e.jsx(Js,{}),children:"Start"})})]})]})},i.questionId)})})]})},gl=E.memo(hl),pl=({studentRankings:n,contest:t,user:s})=>{const r=p("gray.50","gray.800"),o=p("white","gray.700"),a=p("gray.100","gray.600"),l=p("gray.900","gray.100");return e.jsxs(b,{my:6,bg:r,p:6,borderRadius:"lg",shadow:"base",overflow:"hidden",children:[e.jsx(m,{fontSize:"2xl",fontWeight:"bold",mb:6,textAlign:"center",bgGradient:"linear(to-r, teal.400, blue.400)",bgClip:"text",children:"Leaderboard"}),e.jsx(N,{spacing:4,align:"stretch",children:n.map((u,d)=>{const h=t.enrolledStudents.find(x=>x.id.toString()===u.studentId);if(!h)return null;const g=h.id.toString()===s.id.toString(),i=d<3,f={padding:"4",borderRadius:"md",border:i?"2px solid teal":`1px solid ${g?"blue.500":"transparent"}`,shadow:i?"lg":"sm"};return e.jsxs(_,{bg:o,...f,alignItems:"center",justifyContent:"space-between",transition:"all 0.2s ease",_hover:{bg:a,shadow:"md",transform:"scale(1.01)"},minH:"60px",children:[e.jsxs(O,{spacing:3,children:[e.jsx(Le,{name:h.name||"Anonymous",size:"sm"}),e.jsxs(N,{align:"start",spacing:0,children:[e.jsx(m,{fontSize:"sm",fontWeight:i?"bold":"medium",color:g?"blue.600":l,noOfLines:1,children:h.name||"Anonymous"}),e.jsxs(m,{fontSize:"xs",color:"gray.500",children:["Total Marks: ",u.totalMarks]})]})]}),e.jsxs(O,{spacing:3,children:[i&&e.jsx(K,{label:`Rank ${d+1}`,"aria-label":"Trophy Tooltip",children:e.jsx(D,{as:xs,color:"teal.400",w:5,h:5})}),e.jsxs(Ee,{fontSize:"xs",colorScheme:g?"blue":"teal",variant:i?"solid":"subtle",children:["Rank ",d+1]})]})]},u.studentId)})})]})},ml=E.memo(pl),xl=({contest:n})=>{var d;const t=p("white","gray.800"),s=p("gray.50","gray.700"),r=p("gray.800","gray.200"),o=p("blue.600","blue.300"),a=p("teal.600","teal.300"),l=p("teal.400","red.400"),u={padding:"4",borderRadius:"md",border:"2px solid teal"};return e.jsxs(b,{my:6,px:[4,6],py:6,border:`2px solid ${l}`,borderRadius:"lg",shadow:"md",transition:"all 0.3s ease",_hover:{shadow:"lg"},children:[e.jsx(m,{fontSize:["lg","xl"],fontWeight:"semibold",mb:6,color:a,textAlign:"center",borderBottom:`2px solid ${a}`,display:"inline-block",pb:1,children:"Enrolled Students"}),e.jsx(N,{spacing:4,align:"stretch",children:(d=n==null?void 0:n.enrolledStudents)==null?void 0:d.map(h=>e.jsxs(O,{p:4,bg:t,borderRadius:"md",shadow:"sm",_hover:{bg:s,transform:"scale(1.02)",boxShadow:"lg"},transition:"all 0.2s ease-in-out",justifyContent:"space-between",...u,children:[e.jsxs(_,{align:"center",gap:3,wrap:"wrap",children:[e.jsx(Le,{name:h.name,size:"sm"}),e.jsxs(b,{children:[e.jsx(m,{fontSize:"md",color:r,fontWeight:"medium",textTransform:"capitalize",children:h.name}),e.jsxs(O,{spacing:2,children:[e.jsx(D,{as:ar,color:o}),e.jsx(m,{fontSize:"sm",color:o,children:h.email})]})]})]}),h.role==="ADMIN"&&e.jsx(K,{label:"Admin Access","aria-label":"Admin Access",children:e.jsx(D,{as:lr,color:a,boxSize:5})})]},h.id))})]})},fl=E.memo(xl),jl=({contestAttempts:n})=>{const t=p("white","gray.800"),s=p("gray.50","gray.700"),r=p("gray.800","gray.200"),o=p("teal.600","teal.300"),a=p("teal.300","teal.600");return!n||n.length===0?e.jsx(m,{color:"gray.500",fontSize:"lg",textAlign:"center",mt:6,children:"No ongoing contest attempts."}):e.jsxs(b,{my:8,px:[4,6],maxWidth:"1000px",mx:"auto",children:[e.jsx(m,{fontSize:["lg","xl","2xl"],fontWeight:"bold",mb:6,textAlign:"center",color:o,borderBottom:`2px solid ${o}`,display:"inline-block",pb:1,children:"Ongoing Contest Attempts"}),e.jsx(N,{spacing:5,align:"stretch",children:n.map(l=>e.jsx(b,{p:5,bg:t,borderRadius:"lg",shadow:"lg",_hover:{bg:s,transform:"scale(1.03)",boxShadow:"xl"},transition:"all 0.3s ease-in-out",borderWidth:"1px",borderColor:a,children:e.jsxs(rn,{templateColumns:{base:"1fr",md:"150px 200px 200px 100px 80px"},gap:4,alignItems:"center",children:[e.jsxs(_,{align:"center",gap:3,overflow:"hidden",children:[e.jsx(Le,{name:l.username,size:"md"}),e.jsxs(b,{children:[e.jsx(m,{fontWeight:"bold",color:r,fontSize:"sm",textTransform:"capitalize",isTruncated:!0,children:l.username}),e.jsx(m,{fontSize:"xs",color:"gray.500",noOfLines:1,wordBreak:"break-all",children:l.email})]})]}),e.jsxs(_,{direction:"column",gap:2,overflow:"hidden",children:[e.jsxs(_,{align:"center",gap:2,children:[e.jsx(K,{label:"Start Time","aria-label":"Start Time Tooltip",children:e.jsx(D,{as:at,color:"teal.500",boxSize:4})}),e.jsx(m,{fontSize:"xs",color:r,isTruncated:!0,children:re(l.startTime).format("MMM D, YYYY - hh:mm A")})]}),e.jsxs(_,{align:"center",gap:2,children:[e.jsx(K,{label:"End Time","aria-label":"End Time Tooltip",children:e.jsx(D,{as:on,color:"red.500",boxSize:4})}),e.jsx(m,{fontSize:"xs",color:r,isTruncated:!0,children:l!=null&&l.endTime?re(l.endTime).format("MMM D, YYYY - hh:mm A"):"Ongoing"})]})]}),e.jsxs(_,{align:"center",justify:"center",gap:2,children:[e.jsx(K,{label:"Marks Obtained","aria-label":"Marks Tooltip",children:e.jsx(D,{as:ir,color:"yellow.500",boxSize:5})}),e.jsx(m,{fontSize:"sm",fontWeight:"bold",color:l.obtainedMarks!==null?"teal.600":"red.500",children:l.obtainedMarks!==null?`${l.obtainedMarks} / ${l.totalMarks}`:`0 / ${l.totalMarks}`})]}),e.jsx(_,{justify:"center",align:"center",children:l.endTime?e.jsx(K,{label:"Completed","aria-label":"Completed Tooltip",children:e.jsx(D,{as:dr,color:"green.500",boxSize:5})}):e.jsx(K,{label:"In Progress","aria-label":"In Progress Tooltip",children:e.jsx(D,{as:cr,color:"orange.400",boxSize:5})})})]})},l.id))})]})},bl=E.memo(jl),yl=()=>{const{id:n}=Qe(),t=se();we();const s=ce(),{colorMode:r}=Ye(),[o,a]=c.useState(!0),{solvedQuestions:l,contest:u,user:d,contestAttempts:h,loadingStates:g}=W(v=>({solvedQuestions:v.solved.solvedQuestions,contest:v.contest.contest,user:v.data.user,contestAttempts:v.contestAttempt.contestAttempts,loadingStates:{solvedLoading:v.solved.loading,contestLoading:v.contest.loading,attemptsLoading:v.contestAttempt.loading.fetchAll}}));console.log("user",d),c.useEffect(()=>{n&&(t(vt(n)),t(Je(n)),t(Mt(n)))},[t,n]),c.useEffect(()=>{const v=setTimeout(()=>a(!1),1500);return()=>clearTimeout(v)},[]);const i=c.useMemo(()=>{if(!l||l.length===0)return[];const v=ao.groupBy(l,"studentId");return Object.keys(v).map(S=>{var k;return{studentId:S,totalMarks:(k=v[S])==null?void 0:k.reduce((C,Y)=>C+Y.obtainedMarks,0)}}).sort((S,k)=>k.totalMarks-S.totalMarks)},[l]),f=c.useMemo(()=>h.find(v=>v.studentId===d.id),[h,d.id]),x=c.useMemo(()=>f==null?void 0:f.id,[f]),j=c.useCallback(()=>{if(!f){B(s,"No contest attempt found.","error");return}t(Ze({attemptId:x})).unwrap().then(()=>B(s,"Contest submitted successfully!","success")).catch(v=>B(s,v||"Failed to submit the contest. Please try again.","error"))},[t,f,x,s]);return c.useMemo(()=>o||g.contestLoading||g.attemptsLoading,[o,g])?e.jsx(ll,{}):e.jsxs(b,{p:8,maxW:"1000px",mx:"auto",bg:r==="light"?"gray.100":"gray.800",borderRadius:"lg",shadow:"lg",children:[e.jsx(dl,{contest:u,colorMode:r}),e.jsx(ul,{contest:u,colorMode:r}),e.jsx(gl,{contest:u,solvedQuestions:l,user:d,colorMode:r,attemptId:x}),e.jsx(ml,{studentRankings:i,contest:u,user:d,colorMode:r}),(d.role==="ADMIN"||d.role==="SUPERADMIN")&&e.jsxs(e.Fragment,{children:[e.jsx(bl,{contestAttempts:h}),e.jsx(fl,{contest:u,colorMode:r})]}),(f==null?void 0:f.endTime)==null&&e.jsx(R,{mt:4,colorScheme:"teal",onClick:j,children:"Submit Contest"})]})},Cl=E.memo(yl),$s=({children:n})=>{const{user:t,isLogin:s,loading:r}=W(a=>a.data),o=we();return c.useEffect(()=>{!r&&!s&&o("/login")},[r,s,o]),r?e.jsx(Lr,{height:"100vh",children:e.jsx(Re,{size:"xl"})}):s?n:null},Ds=We`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,vl=()=>{const n=p("white","gray.800"),t=p("gray.700","white"),s=p("green.500","green.400"),r=p("green.600","green.500"),o=p("blue.400","blue.300");return e.jsxs(_,{bg:n,color:t,height:"100vh",justify:"center",align:"center",direction:"column",px:4,textAlign:"center",position:"relative",overflow:"hidden",children:[e.jsx(b,{position:"absolute",top:"-100px",left:"-100px",width:"200px",height:"200px",bg:p("blue.100","blue.600"),borderRadius:"50%",zIndex:"-1",animation:`${Ds} 3s ease-in-out infinite`}),e.jsx(b,{position:"absolute",bottom:"-100px",right:"-100px",width:"150px",height:"150px",bg:p("green.100","green.600"),borderRadius:"50%",zIndex:"-1",animation:`${Ds} 3s ease-in-out infinite`}),e.jsx(m,{fontSize:{base:"6xl",md:"8xl"},fontWeight:"bold",mb:4,children:"404"}),e.jsx(lo.div,{animate:{rotate:[0,20,-20,0]},transition:{repeat:1/0,duration:1.5},style:{marginBottom:"24px"},children:e.jsx(ur,{size:80,color:o})}),e.jsx(m,{fontSize:{base:"xl",md:"2xl"},mb:2,children:"Uh-oh! You seem to be lost."}),e.jsx(m,{fontSize:{base:"sm",md:"md"},color:"gray.500",mb:6,children:"The page you're looking for doesn't exist. Maybe you took a wrong turn?"}),e.jsx(N,{children:e.jsx(R,{as:an,to:"/",bg:s,color:"white",_hover:{bg:r},size:"lg",shadow:"lg",transition:"all 0.3s ease-in-out",children:"Go Back to Safety"})})]})},mn=({batch:n=null,onSubmit:t})=>{const s=se(),r=ce(),{colorMode:o}=Ye(),a=Zs(),l=W(M=>M.data.user),{students:u}=W(M=>M.data),d=!!n,h=n?{batchNameInput:n.name.split("-")[1]||"",time:n.name.split("-")[2]||"",branchCode:n.branchCode,status:n.status,studentIds:n.studentIds||[]}:{batchNameInput:"",time:"",branchCode:(l==null?void 0:l.branchCode)||"All branches",status:"ACTIVE",studentIds:[]},[g,i]=c.useState(h),[f,x]=c.useState([]),[j,y]=c.useState(""),v=o==="dark",S=v?a.colors.gray[800]:a.colors.gray[100],k=v?a.colors.whiteAlpha[900]:a.colors.blackAlpha[900],C=v?a.colors.whiteAlpha[300]:a.colors.blackAlpha[300],Y=v?a.colors.teal[600]:a.colors.teal[400],te={control:M=>({...M,backgroundColor:S,color:k,borderColor:C}),option:(M,z)=>({...M,backgroundColor:z.isSelected?Y:S,color:z.isSelected?"white":k}),singleValue:M=>({...M,color:k}),menu:M=>({...M,backgroundColor:S,zIndex:9999})};c.useEffect(()=>{u.length===0&&s(De())},[s]),c.useEffect(()=>{u&&x(u.map(M=>({value:M.id,label:`${M.name} - ${M.grid} - ${M.course} - ${M.branchCode}`})))},[u]),c.useEffect(()=>{var A;const M=((A=l==null?void 0:l.name)==null?void 0:A.split(" ")[0])||"User",z=g.batchNameInput.trim(),V=g.time.trim(),w=`${M}-${z}-${V}`;y(w)},[g.batchNameInput,g.time,l]);const $=()=>{const M=[];for(let z=8;z<=20;z++){const V=`${z}:00`;M.push({value:V,label:V})}return M},J=M=>{const{name:z,value:V}=M.target;i(w=>({...w,[z]:V}))},G=M=>{i(z=>({...z,time:M.value}))},q=M=>{i(z=>({...z,studentIds:M.map(V=>V.value)}))},H=async M=>{if(M.preventDefault(),!g.batchNameInput||!g.time||g.studentIds.length===0){B(r,"Missing Information","warning");return}const z={id:(n==null?void 0:n.id)||void 0,name:j,branchCode:g.branchCode,status:g.status,studentIds:g.studentIds,createdById:l.id};if(t)t(z);else try{const V=await s(Et(z)).unwrap();B(r,"Batch Created Successfully","success"),setLastAddedBatch(V),i(h),y("")}catch{B(r,"Error creating batch","error")}};return e.jsx(b,{bg:S,p:[4,6],rounded:"lg",shadow:"lg",maxW:["95%","600px"],mx:"auto",color:k,children:e.jsx("form",{onSubmit:H,children:e.jsxs(N,{spacing:[3,4],align:"stretch",children:[e.jsxs(L,{id:"batchNameInput",isRequired:!0,children:[e.jsx(Q,{children:"Enter Batch Name"}),e.jsx(X,{type:"text",name:"batchNameInput",value:g.batchNameInput,onChange:J,placeholder:"Enter batch name",bg:S,color:k,border:`1px solid ${C}`})]}),e.jsxs(L,{id:"time",isRequired:!0,children:[e.jsx(Q,{children:"Select Batch Time"}),e.jsx(Ot,{options:$(),styles:te,onChange:G,value:$().find(M=>M.value===g.time),placeholder:"Select batch time"})]}),e.jsxs(L,{id:"students",isRequired:!0,children:[e.jsx(Q,{children:"Select Students"}),e.jsx(Ot,{options:f,isMulti:!0,closeMenuOnSelect:!1,styles:te,onChange:q,value:f.filter(M=>g.studentIds.includes(M.value)),placeholder:"Search and select students"})]}),e.jsxs(b,{bg:v?"gray.700":"gray.50",p:[2,3],rounded:"md",shadow:"inner",children:[e.jsx(m,{fontWeight:"bold",fontSize:["sm","md"],children:"Batch Name:"}),e.jsx(m,{fontSize:["sm","md"],children:g.batchNameInput.length>0?j:"Your batch name will appear here."})]}),e.jsx(R,{type:"submit",colorScheme:"teal",bg:Y,_hover:{bg:v?"teal.500":"teal.600"},color:"white",width:"full",children:d?"Update Batch":"Create Batch"})]})})})},xn=()=>["SUPERADMIN","ADMIN"],Ls=["January","February","March","April","May","June","July","August","September","October","November","December"],Sl=({filters:n,setFilters:t})=>{const[s,r]=c.useState(!1),o=js({base:!0,md:!1}),a=(i,f)=>{t(x=>({...x,[i]:f}))},l=new Date().getFullYear(),u=[l-2,l-1,l],d=p("red.400","teal.300"),h=p("red.600","teal.500"),g=()=>e.jsxs(_,{direction:"column",gap:4,align:"stretch",border:"1px solid",borderColor:d,_hover:{borderColor:h},p:4,rounded:"md",children:[e.jsx(st,{roles:["SUPERADMIN"],children:e.jsx(ee,{placeholder:"Filter by Branch",value:n.branch,onChange:i=>a("branch",i.target.value),children:Pe().map(i=>e.jsx("option",{value:i,children:i},i))})}),e.jsx(X,{placeholder:"Search by Batch Name",value:n.name,onChange:i=>a("name",i.target.value)}),e.jsx(ee,{placeholder:"Filter by Month",value:n.month,onChange:i=>a("month",i.target.value),children:Ls.map(i=>e.jsx("option",{value:i,children:i},i))}),e.jsx(ee,{placeholder:"Filter by Year",value:n.year,onChange:i=>a("year",i.target.value),children:u.map(i=>e.jsx("option",{value:i,children:i},i))})]});return e.jsx(st,{roles:xn(),children:o?e.jsxs(e.Fragment,{children:[e.jsx(ae,{"aria-label":"Filter",icon:e.jsx(hr,{}),onClick:()=>r(!0),variant:"outline",borderColor:d,_hover:{borderColor:h},m:4,p:2}),e.jsxs(rt,{isOpen:s,placement:"right",onClose:()=>r(!1),children:[e.jsx(ue,{}),e.jsxs(ot,{children:[e.jsx(xe,{}),e.jsx(he,{children:"All Filters"}),e.jsx(ge,{children:g()})]})]})]}):e.jsxs(_,{mb:8,gap:4,align:"center",wrap:"wrap",border:"1px solid",borderColor:d,_hover:{borderColor:h},p:4,rounded:"md",w:"100%",children:[e.jsx(st,{roles:["SUPERADMIN"],children:e.jsx(ee,{placeholder:"Filter by Branch",value:n.branch,onChange:i=>a("branch",i.target.value),maxW:"300px",children:Pe().map(i=>e.jsx("option",{value:i,children:i},i))})}),e.jsx(X,{placeholder:"Search by Batch Name",value:n.name,onChange:i=>a("name",i.target.value),maxW:"300px"}),e.jsx(ee,{placeholder:"Filter by Month",value:n.month,onChange:i=>a("month",i.target.value),maxW:"200px",children:Ls.map(i=>e.jsx("option",{value:i,children:i},i))}),e.jsx(ee,{placeholder:"Filter by Year",value:n.year,onChange:i=>a("year",i.target.value),maxW:"200px",children:u.map(i=>e.jsx("option",{value:i,children:i},i))})]})})},wl=({isOpen:n,onClose:t,batch:s})=>{const r=se(),o=ce(),a=async l=>{try{const u=await r(Ft(l)).unwrap();B(o,"Batch updated Successfully","success")}catch{B(o,"Error updating batch","error")}t()};return e.jsxs(Ae,{isOpen:n,onClose:t,children:[e.jsx(ue,{}),e.jsxs(Ie,{children:[e.jsx(he,{children:"Edit Batch"}),e.jsx(xe,{}),e.jsx(ge,{children:e.jsx(mn,{batch:s,onSubmit:a})}),e.jsx(Fe,{children:e.jsx(R,{colorScheme:"red",onClick:t,children:"Cancel"})})]})]})},kl=({batch:n})=>{const t=we(),[s,r]=c.useState(!1),o=()=>r(!0),a=()=>r(!1),l=p("red.400","teal.1000"),u=p("red.600","teal.500"),d=p("gray.50","gray.800"),h=p("gray.800","whiteAlpha.900");return e.jsxs(_,{direction:"column",p:6,rounded:"lg",shadow:"md",bg:d,border:"1px solid",borderColor:l,_hover:{borderColor:u,transform:"scale(1.03)",transition:"transform 0.3s ease-in-out, border-color 0.2s ease-in-out"},position:"relative",children:[e.jsxs(_,{justify:"space-between",align:"center",mb:4,children:[e.jsx(ke,{size:"md",color:h,isTruncated:!0,children:n.name}),e.jsxs(Ue,{children:[e.jsx(Oe,{as:ae,icon:e.jsx(Ks,{}),variant:"ghost"}),e.jsxs(Ne,{children:[e.jsx(le,{icon:e.jsx(gr,{}),onClick:()=>t(`/batch/${n.id}`),children:"View Details"}),e.jsxs(st,{roles:xn(),children:[e.jsx(le,{icon:e.jsx(pr,{}),onClick:o,children:"Edit Batch"}),e.jsx(le,{icon:e.jsx(mr,{}),color:"red.500",children:"Delete Batch"})]})]})]})]}),e.jsx(ve,{mb:4}),e.jsxs(_,{justify:"space-between",children:[e.jsx(b,{children:e.jsxs(m,{fontSize:"sm",color:h,children:["Created On: ",re(n.createdAt).format("MMMM D, YYYY")]})}),e.jsx(Ee,{px:3,py:1,fontSize:"sm",rounded:"full",colorScheme:h,children:n.branchCode})]}),e.jsx(wl,{isOpen:s,onClose:a,batch:n})]})},Al=({batches:n})=>e.jsx(N,{spacing:6,align:"stretch",children:n.map(t=>e.jsx(kl,{batch:t},t.id))}),Il=E.memo(Al),Ml=()=>e.jsxs(b,{textAlign:"center",py:20,children:[e.jsx(Re,{size:"xl",color:"teal.500"}),e.jsx(m,{fontSize:"lg",color:"gray.500",mt:4,children:"Loading batches..."})]}),Tl=({error:n})=>e.jsx(b,{textAlign:"center",py:20,children:e.jsx(m,{color:"red.500",fontSize:"lg",children:n})}),zl=()=>{const n=se(),t=ce(),[s,r]=c.useState(!0),[o,a]=c.useState(null),l=W(f=>f.batch.allActiveBatches),u=W(f=>f.data.user),[d,h]=c.useState({branch:"",name:"",month:"",year:""}),g=l.filter(f=>{const x=!d.branch||f.branchCode===d.branch,j=!d.name||f.name.toLowerCase().includes(d.name.toLowerCase()),y=!d.month||re(f.createdAt).format("MMMM")===d.month,v=!d.year||re(f.createdAt).format("YYYY")===d.year;return x&&j&&y&&v});c.useEffect(()=>{(async()=>{try{r(!0),a(null),(u==null?void 0:u.role)==="SUPERADMIN"?await n(zt()).unwrap():(u==null?void 0:u.role)==="ADMIN"?await n(Rt(u.id)).unwrap():(u==null?void 0:u.role)==="STUDENT"&&await n(Bt(u.id)).unwrap()}catch(x){a(x.message||"Failed to fetch batches"),B(t,x.message||"Failed to fetch batches","error")}finally{r(!1)}})()},[n,t,u]);const i=p("white","gray.800");return s?e.jsx(Ml,{}):o?e.jsx(Tl,{error:o}):e.jsxs(b,{maxW:"1200px",mx:"auto",px:6,py:10,bg:i,rounded:"lg",shadow:"lg",children:[e.jsx(Sl,{filters:d,setFilters:h}),e.jsx(Il,{batches:g})]})},El=()=>{let{user:n,isLogin:t}=W(s=>s.data);return e.jsxs(Nr,{children:[e.jsx(me,{exact:!0,path:"/",element:e.jsx($s,{children:e.jsx(zl,{})})}),e.jsx(me,{exact:!0,path:"/batch/:batchId",element:e.jsx($s,{children:e.jsx(ol,{})})}),e.jsx(me,{path:"/problems",element:e.jsx(Ao,{})}),e.jsx(me,{path:"/login",element:e.jsx(cn,{})}),e.jsx(me,{path:"/signup",element:e.jsx(Mo,{})}),e.jsx(me,{path:"/problem/:questionId",element:e.jsx(Es,{type:"question"})}),e.jsx(me,{path:"/profile",element:e.jsx(Ya,{})}),e.jsx(me,{path:"/contest/:id",element:e.jsx(Cl,{})}),e.jsx(me,{path:"/admin/update-contest/:contestId",element:e.jsx(Fs,{})}),e.jsx(me,{path:"/contests/:contestId/questions/:questionId/attempts/:attemptId",element:e.jsx(Es,{type:"contest"})}),t&&((n==null?void 0:n.role)==="ADMIN"||(n==null?void 0:n.role)==="SUPERADMIN")&&e.jsxs(e.Fragment,{children:[e.jsx(me,{path:"/admin/create-batch",element:e.jsx(gs,{children:e.jsx(mn,{})})}),e.jsx(me,{path:"/admin/batch/:batchId/create-contest",element:e.jsx(gs,{children:e.jsx(Fs,{})})}),e.jsx(me,{path:"admin/add-question",element:e.jsx(gs,{children:e.jsx(hn,{})})})]}),e.jsx(me,{path:"*",element:e.jsx(vl,{})})]})};function Fl(){c.useState(!1);const{isLogin:n}=W(o=>o.data),{colorMode:t}=Ye(),s=p("#f44336","blue.600"),r=p("white","white");return W(o=>o.data),e.jsxs(e.Fragment,{children:[e.jsx(xo,{}),e.jsx(El,{}),!n&&e.jsx(b,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1000",display:"flex",justifyContent:"center",alignItems:"center",backdropFilter:"blur(8px)",bg:"rgba(0, 0, 0, 0.5)",children:e.jsxs(b,{p:8,borderRadius:"md",boxShadow:"lg",textAlign:"center",bg:t==="light"?"white":"gray.800",children:[e.jsx(m,{fontSize:"xl",fontWeight:"bold",mb:4,color:t==="light"?"gray.800":"white",children:"Welcome to our platform!"}),e.jsx(m,{mb:6,color:t==="light"?"gray.700":"gray.300",children:"You are not logged in. Please log in to access the content."}),e.jsx(R,{colorScheme:"blue",size:"lg",onClick:()=>window.location.reload(),_hover:{bg:s,color:r},children:"Login"})]})})]})}const Rl={default:{colors:{light:{background:"#FFFFFF",text:"#000000",primary:"#3182CE",secondary:"#9B2C2C"},dark:{background:"#1A202C",text:"#FFFFFF",primary:"#63B3ED",secondary:"#ED8936"}}}},Bl=Pr({config:{initialColorMode:"colors",useSystemColorMode:!0},...Rl.default}),$l=Se({name:"editor",initialState:{value:Nt.javascript,language:"javascript",theme:"vs-dark",fontSize:14,isRecording:!1,isCameraActive:!0,inactiveTime:0,tabChangeCount:0,isScreenBlurred:!1},reducers:{setValue:(n,t)=>{n.value=t.payload},setLanguage:(n,t)=>{n.language=t.payload},setTheme:(n,t)=>{n.theme=t.payload},setFontSize:(n,t)=>{n.fontSize=t.payload},setIsRecording:(n,t)=>{n.isRecording=t.payload},setIsCameraActive:(n,t)=>{n.isCameraActive=t.payload},setInactiveTime:(n,t)=>{n.inactiveTime=t.payload},setTabChangeCount:(n,t)=>{n.tabChangeCount=t.payload},setIsScreenBlurred:(n,t)=>{n.isScreenBlurred=t.payload}}}),Dl=$l.reducer,Ll={questions:[],question:{},loading:!1,error:null},Pl=Se({name:"questions",initialState:Ll,reducers:{},extraReducers:n=>{n.addCase(ht.pending,t=>{t.loading=!0,t.error=null}).addCase(ht.fulfilled,(t,s)=>{t.questions.push(s.payload),t.loading=!1}).addCase(ht.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(gt.pending,t=>{t.loading=!0,t.error=null}).addCase(gt.fulfilled,(t,s)=>{t.question=s.payload,t.loading=!1}).addCase(gt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(Xe.pending,t=>{t.loading=!0,t.error=null}).addCase(Xe.fulfilled,(t,s)=>{t.questions=s.payload,t.loading=!1}).addCase(Xe.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(Xt.pending,t=>{t.loading=!0,t.error=null}).addCase(Xt.fulfilled,(t,s)=>{t.loading=!1}).addCase(Xt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(pt.pending,t=>{t.loading=!0,t.error=null}).addCase(pt.fulfilled,(t,s)=>{var o;t.loading=!1;const r=t.questions.findIndex(a=>a.id===s.payload.id);r!==-1&&(t.questions[r]=s.payload),((o=t.question)==null?void 0:o.id)===s.payload.id&&(t.question=s.payload)}).addCase(pt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload}).addCase(mt.pending,t=>{t.loading=!0,t.error=null}).addCase(mt.fulfilled,(t,s)=>{var r;t.loading=!1,t.questions=t.questions.filter(o=>o.id!==s.payload),((r=t.question)==null?void 0:r.id)===s.payload&&(t.question=null)}).addCase(mt.rejected,(t,s)=>{t.loading=!1,t.error=s.payload})}}),Ul=Pl.reducer,Ol={mode:"light"},Nl=Se({name:"theme",initialState:Ol,reducers:{initializeTheme:n=>{if(typeof window<"u"){const t=localStorage.getItem("themeMode");if(t)n.mode=t;else{const s=window.matchMedia("(prefers-color-scheme: dark)").matches;n.mode=s?"dark":"light"}}else n.mode="light"},toggleThemeMode:n=>{n.mode=n.mode==="light"?"dark":"light",typeof window<"u"&&localStorage.setItem("themeMode",n.mode)},setThemeMode:(n,t)=>{n.mode=t.payload,typeof window<"u"&&localStorage.setItem("themeMode",n.mode)}}}),Ql=Nl.reducer,Wl={loading:!1,user:de.get("userToken")?ys(fs(de.get("userToken")).sub):null,users:[],isLogin:!!de.get("token"),token:de.get("token")||null,error:null},_l=Se({name:"user",initialState:Wl,reducers:{logoutUser:n=>{try{de.remove("token"),de.remove("userToken")}catch{}n.user=null,n.isLogin=!1,n.token=null}},extraReducers:n=>{const t=r=>{r.loading=!0,r.error=null},s=(r,o)=>{r.loading=!1,r.error=o.payload};n.addCase(tt.pending,t).addCase(tt.fulfilled,(r,o)=>{r.users=o.payload,r.loading=!1}).addCase(tt.rejected,s).addCase(Dt.pending,t).addCase(Dt.fulfilled,(r,o)=>{r.users.push(o.payload),r.loading=!1}).addCase(Dt.rejected,s).addCase(Lt.pending,t).addCase(Lt.fulfilled,(r,o)=>{const a=o.payload,l=r.users.findIndex(u=>u.id===a.id);l!==-1&&(r.users[l]=a),r.loading=!1}).addCase(Lt.rejected,s).addCase(Pt.pending,t).addCase(Pt.fulfilled,(r,o)=>{r.users=r.users.filter(a=>a.id!==o.payload),r.loading=!1}).addCase(Pt.rejected,s).addCase(Ge.fulfilled,(r,o)=>{r.user=o.payload})}}),ql=_l.reducer,Yl=io({editor:Dl,user:ql,data:go,contest:Ro,solved:Oo,contestAttempt:Yo,question:Ul,theme:Ql,student:Sa,questionSolved:Wo,batch:ha}),Hl=fr({reducer:Yl,middleware:n=>n({serializableCheck:!1}),devTools:!1}),Vl=document.getElementById("root");jn.createRoot(Vl).render(e.jsx(E.StrictMode,{children:e.jsx(Qr,{children:e.jsx(xr,{store:Hl,children:e.jsx(Ur,{theme:Bl,children:e.jsx(Fl,{})})})})}));
