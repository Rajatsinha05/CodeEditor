var UF=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ple=UF((xle,WN)=>{function HF(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Up(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function GF(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var mk={exports:{}},Hp={},gk={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rd=Symbol.for("react.element"),qF=Symbol.for("react.portal"),KF=Symbol.for("react.fragment"),XF=Symbol.for("react.strict_mode"),YF=Symbol.for("react.profiler"),QF=Symbol.for("react.provider"),JF=Symbol.for("react.context"),ZF=Symbol.for("react.forward_ref"),e3=Symbol.for("react.suspense"),t3=Symbol.for("react.memo"),n3=Symbol.for("react.lazy"),Zw=Symbol.iterator;function r3(e){return e===null||typeof e!="object"?null:(e=Zw&&e[Zw]||e["@@iterator"],typeof e=="function"?e:null)}var yk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bk=Object.assign,xk={};function qu(e,t,n){this.props=e,this.context=t,this.refs=xk,this.updater=n||yk}qu.prototype.isReactComponent={};qu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function wk(){}wk.prototype=qu.prototype;function T1(e,t,n){this.props=e,this.context=t,this.refs=xk,this.updater=n||yk}var R1=T1.prototype=new wk;R1.constructor=T1;bk(R1,qu.prototype);R1.isPureReactComponent=!0;var eS=Array.isArray,Sk=Object.prototype.hasOwnProperty,P1={current:null},Ck={key:!0,ref:!0,__self:!0,__source:!0};function _k(e,t,n){var r,o={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Sk.call(t,r)&&!Ck.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)o[r]===void 0&&(o[r]=s[r]);return{$$typeof:rd,type:e,key:i,ref:a,props:o,_owner:P1.current}}function o3(e,t){return{$$typeof:rd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function I1(e){return typeof e=="object"&&e!==null&&e.$$typeof===rd}function i3(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var tS=/\/+/g;function xm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?i3(""+e.key):t.toString(36)}function Gf(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case rd:case qF:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+xm(a,0):r,eS(o)?(n="",e!=null&&(n=e.replace(tS,"$&/")+"/"),Gf(o,t,n,"",function(l){return l})):o!=null&&(I1(o)&&(o=o3(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(tS,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",eS(e))for(var s=0;s<e.length;s++){i=e[s];var u=r+xm(i,s);a+=Gf(i,t,n,u,o)}else if(u=r3(e),typeof u=="function")for(e=u.call(e),s=0;!(i=e.next()).done;)i=i.value,u=r+xm(i,s++),a+=Gf(i,t,n,u,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function qd(e,t,n){if(e==null)return e;var r=[],o=0;return Gf(e,r,"","",function(i){return t.call(n,i,o++)}),r}function a3(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rn={current:null},qf={transition:null},s3={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:qf,ReactCurrentOwner:P1};Ae.Children={map:qd,forEach:function(e,t,n){qd(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qd(e,function(){t++}),t},toArray:function(e){return qd(e,function(t){return t})||[]},only:function(e){if(!I1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ae.Component=qu;Ae.Fragment=KF;Ae.Profiler=YF;Ae.PureComponent=T1;Ae.StrictMode=XF;Ae.Suspense=e3;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s3;Ae.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=bk({},e.props),o=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=P1.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)Sk.call(t,u)&&!Ck.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&s!==void 0?s[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:rd,type:e.type,key:o,ref:i,props:r,_owner:a}};Ae.createContext=function(e){return e={$$typeof:JF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:QF,_context:e},e.Consumer=e};Ae.createElement=_k;Ae.createFactory=function(e){var t=_k.bind(null,e);return t.type=e,t};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(e){return{$$typeof:ZF,render:e}};Ae.isValidElement=I1;Ae.lazy=function(e){return{$$typeof:n3,_payload:{_status:-1,_result:e},_init:a3}};Ae.memo=function(e,t){return{$$typeof:t3,type:e,compare:t===void 0?null:t}};Ae.startTransition=function(e){var t=qf.transition;qf.transition={};try{e()}finally{qf.transition=t}};Ae.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ae.useCallback=function(e,t){return Rn.current.useCallback(e,t)};Ae.useContext=function(e){return Rn.current.useContext(e)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(e){return Rn.current.useDeferredValue(e)};Ae.useEffect=function(e,t){return Rn.current.useEffect(e,t)};Ae.useId=function(){return Rn.current.useId()};Ae.useImperativeHandle=function(e,t,n){return Rn.current.useImperativeHandle(e,t,n)};Ae.useInsertionEffect=function(e,t){return Rn.current.useInsertionEffect(e,t)};Ae.useLayoutEffect=function(e,t){return Rn.current.useLayoutEffect(e,t)};Ae.useMemo=function(e,t){return Rn.current.useMemo(e,t)};Ae.useReducer=function(e,t,n){return Rn.current.useReducer(e,t,n)};Ae.useRef=function(e){return Rn.current.useRef(e)};Ae.useState=function(e){return Rn.current.useState(e)};Ae.useSyncExternalStore=function(e,t,n){return Rn.current.useSyncExternalStore(e,t,n)};Ae.useTransition=function(){return Rn.current.useTransition()};Ae.version="18.2.0";gk.exports=Ae;var T=gk.exports;const lr=Up(T),nS=HF({__proto__:null,default:lr},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u3=T,l3=Symbol.for("react.element"),c3=Symbol.for("react.fragment"),d3=Object.prototype.hasOwnProperty,f3=u3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h3={key:!0,ref:!0,__self:!0,__source:!0};function Ek(e,t,n){var r,o={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)d3.call(t,r)&&!h3.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:l3,type:e,key:i,ref:a,props:o,_owner:f3.current}}Hp.Fragment=c3;Hp.jsx=Ek;Hp.jsxs=Ek;mk.exports=Hp;var L=mk.exports,b0={},kk={exports:{}},yr={},Tk={exports:{}},Rk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,F){var $=O.length;O.push(F);e:for(;0<$;){var G=$-1>>>1,Q=O[G];if(0<o(Q,F))O[G]=F,O[$]=Q,$=G;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var F=O[0],$=O.pop();if($!==F){O[0]=$;e:for(var G=0,Q=O.length,J=Q>>>1;G<J;){var ne=2*(G+1)-1,oe=O[ne],ae=ne+1,me=O[ae];if(0>o(oe,$))ae<Q&&0>o(me,oe)?(O[G]=me,O[ae]=$,G=ae):(O[G]=oe,O[ne]=$,G=ne);else if(ae<Q&&0>o(me,$))O[G]=me,O[ae]=$,G=ae;else break e}}return F}function o(O,F){var $=O.sortIndex-F.sortIndex;return $!==0?$:O.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var u=[],l=[],c=1,d=null,f=3,h=!1,p=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var F=n(l);F!==null;){if(F.callback===null)r(l);else if(F.startTime<=O)r(l),F.sortIndex=F.expirationTime,t(u,F);else break;F=n(l)}}function x(O){if(v=!1,b(O),!p)if(n(u)!==null)p=!0,V(w);else{var F=n(l);F!==null&&M(x,F.startTime-O)}}function w(O,F){p=!1,v&&(v=!1,m(_),_=-1),h=!0;var $=f;try{for(b(F),d=n(u);d!==null&&(!(d.expirationTime>F)||O&&!A());){var G=d.callback;if(typeof G=="function"){d.callback=null,f=d.priorityLevel;var Q=G(d.expirationTime<=F);F=e.unstable_now(),typeof Q=="function"?d.callback=Q:d===n(u)&&r(u),b(F)}else r(u);d=n(u)}if(d!==null)var J=!0;else{var ne=n(l);ne!==null&&M(x,ne.startTime-F),J=!1}return J}finally{d=null,f=$,h=!1}}var S=!1,C=null,_=-1,k=5,E=-1;function A(){return!(e.unstable_now()-E<k)}function D(){if(C!==null){var O=e.unstable_now();E=O;var F=!0;try{F=C(!0,O)}finally{F?U():(S=!1,C=null)}}else S=!1}var U;if(typeof g=="function")U=function(){g(D)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,B=H.port2;H.port1.onmessage=D,U=function(){B.postMessage(null)}}else U=function(){y(D,0)};function V(O){C=O,S||(S=!0,U())}function M(O,F){_=y(function(){O(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,V(w))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(O){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var $=f;f=F;try{return O()}finally{f=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,F){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var $=f;f=O;try{return F()}finally{f=$}},e.unstable_scheduleCallback=function(O,F,$){var G=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?G+$:G):$=G,O){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=$+Q,O={id:c++,callback:F,priorityLevel:O,startTime:$,expirationTime:Q,sortIndex:-1},$>G?(O.sortIndex=$,t(l,O),n(u)===null&&O===n(l)&&(v?(m(_),_=-1):v=!0,M(x,$-G))):(O.sortIndex=Q,t(u,O),p||h||(p=!0,V(w))),O},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(O){var F=f;return function(){var $=f;f=F;try{return O.apply(this,arguments)}finally{f=$}}}})(Rk);Tk.exports=Rk;var p3=Tk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pk=T,vr=p3;function te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ik=new Set,fc={};function rs(e,t){Eu(e,t),Eu(e+"Capture",t)}function Eu(e,t){for(fc[e]=t,e=0;e<t.length;e++)Ik.add(t[e])}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x0=Object.prototype.hasOwnProperty,v3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rS={},oS={};function m3(e){return x0.call(oS,e)?!0:x0.call(rS,e)?!1:v3.test(e)?oS[e]=!0:(rS[e]=!0,!1)}function g3(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function y3(e,t,n,r){if(t===null||typeof t>"u"||g3(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pn(e,t,n,r,o,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){an[e]=new Pn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];an[t]=new Pn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){an[e]=new Pn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){an[e]=new Pn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){an[e]=new Pn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){an[e]=new Pn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){an[e]=new Pn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){an[e]=new Pn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){an[e]=new Pn(e,5,!1,e.toLowerCase(),null,!1,!1)});var A1=/[\-:]([a-z])/g;function D1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(A1,D1);an[t]=new Pn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(A1,D1);an[t]=new Pn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(A1,D1);an[t]=new Pn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){an[e]=new Pn(e,1,!1,e.toLowerCase(),null,!1,!1)});an.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){an[e]=new Pn(e,1,!1,e.toLowerCase(),null,!0,!0)});function M1(e,t,n,r){var o=an.hasOwnProperty(t)?an[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(y3(t,n,o,r)&&(n=null),r||o===null?m3(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var mi=Pk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kd=Symbol.for("react.element"),Ds=Symbol.for("react.portal"),Ms=Symbol.for("react.fragment"),O1=Symbol.for("react.strict_mode"),w0=Symbol.for("react.profiler"),Ak=Symbol.for("react.provider"),Dk=Symbol.for("react.context"),N1=Symbol.for("react.forward_ref"),S0=Symbol.for("react.suspense"),C0=Symbol.for("react.suspense_list"),F1=Symbol.for("react.memo"),Oi=Symbol.for("react.lazy"),Mk=Symbol.for("react.offscreen"),iS=Symbol.iterator;function sl(e){return e===null||typeof e!="object"?null:(e=iS&&e[iS]||e["@@iterator"],typeof e=="function"?e:null)}var mt=Object.assign,wm;function Pl(e){if(wm===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wm=t&&t[1]||""}return`
`+wm+e}var Sm=!1;function Cm(e,t){if(!e||Sm)return"";Sm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var o=l.stack.split(`
`),i=r.stack.split(`
`),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(a!==1||s!==1)do if(a--,s--,0>s||o[a]!==i[s]){var u=`
`+o[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=s);break}}}finally{Sm=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Pl(e):""}function b3(e){switch(e.tag){case 5:return Pl(e.type);case 16:return Pl("Lazy");case 13:return Pl("Suspense");case 19:return Pl("SuspenseList");case 0:case 2:case 15:return e=Cm(e.type,!1),e;case 11:return e=Cm(e.type.render,!1),e;case 1:return e=Cm(e.type,!0),e;default:return""}}function _0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ms:return"Fragment";case Ds:return"Portal";case w0:return"Profiler";case O1:return"StrictMode";case S0:return"Suspense";case C0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dk:return(e.displayName||"Context")+".Consumer";case Ak:return(e._context.displayName||"Context")+".Provider";case N1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case F1:return t=e.displayName||null,t!==null?t:_0(e.type)||"Memo";case Oi:t=e._payload,e=e._init;try{return _0(e(t))}catch{}}return null}function x3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _0(t);case 8:return t===O1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ra(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ok(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function w3(e){var t=Ok(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xd(e){e._valueTracker||(e._valueTracker=w3(e))}function Nk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ok(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Rh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function E0(e,t){var n=t.checked;return mt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function aS(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ra(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Fk(e,t){t=t.checked,t!=null&&M1(e,"checked",t,!1)}function k0(e,t){Fk(e,t);var n=ra(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?T0(e,t.type,n):t.hasOwnProperty("defaultValue")&&T0(e,t.type,ra(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function sS(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function T0(e,t,n){(t!=="number"||Rh(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Il=Array.isArray;function ru(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ra(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function R0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(te(91));return mt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uS(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(te(92));if(Il(n)){if(1<n.length)throw Error(te(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ra(n)}}function Bk(e,t){var n=ra(t.value),r=ra(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function lS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Lk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function P0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Lk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yd,$k=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yd=Yd||document.createElement("div"),Yd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},S3=["Webkit","ms","Moz","O"];Object.keys(Wl).forEach(function(e){S3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wl[t]=Wl[e]})});function zk(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Wl.hasOwnProperty(e)&&Wl[e]?(""+t).trim():t+"px"}function Wk(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=zk(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var C3=mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function I0(e,t){if(t){if(C3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(te(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(te(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(te(62))}}function A0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var D0=null;function B1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var M0=null,ou=null,iu=null;function cS(e){if(e=ad(e)){if(typeof M0!="function")throw Error(te(280));var t=e.stateNode;t&&(t=Yp(t),M0(e.stateNode,e.type,t))}}function Vk(e){ou?iu?iu.push(e):iu=[e]:ou=e}function jk(){if(ou){var e=ou,t=iu;if(iu=ou=null,cS(e),t)for(e=0;e<t.length;e++)cS(t[e])}}function Uk(e,t){return e(t)}function Hk(){}var _m=!1;function Gk(e,t,n){if(_m)return e(t,n);_m=!0;try{return Uk(e,t,n)}finally{_m=!1,(ou!==null||iu!==null)&&(Hk(),jk())}}function pc(e,t){var n=e.stateNode;if(n===null)return null;var r=Yp(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(te(231,t,typeof n));return n}var O0=!1;if(li)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){O0=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{O0=!1}function _3(e,t,n,r,o,i,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Vl=!1,Ph=null,Ih=!1,N0=null,E3={onError:function(e){Vl=!0,Ph=e}};function k3(e,t,n,r,o,i,a,s,u){Vl=!1,Ph=null,_3.apply(E3,arguments)}function T3(e,t,n,r,o,i,a,s,u){if(k3.apply(this,arguments),Vl){if(Vl){var l=Ph;Vl=!1,Ph=null}else throw Error(te(198));Ih||(Ih=!0,N0=l)}}function os(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function qk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function dS(e){if(os(e)!==e)throw Error(te(188))}function R3(e){var t=e.alternate;if(!t){if(t=os(e),t===null)throw Error(te(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return dS(o),e;if(i===r)return dS(o),t;i=i.sibling}throw Error(te(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a)throw Error(te(189))}}if(n.alternate!==r)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?e:t}function Kk(e){return e=R3(e),e!==null?Xk(e):null}function Xk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xk(e);if(t!==null)return t;e=e.sibling}return null}var Yk=vr.unstable_scheduleCallback,fS=vr.unstable_cancelCallback,P3=vr.unstable_shouldYield,I3=vr.unstable_requestPaint,Et=vr.unstable_now,A3=vr.unstable_getCurrentPriorityLevel,L1=vr.unstable_ImmediatePriority,Qk=vr.unstable_UserBlockingPriority,Ah=vr.unstable_NormalPriority,D3=vr.unstable_LowPriority,Jk=vr.unstable_IdlePriority,Gp=null,Eo=null;function M3(e){if(Eo&&typeof Eo.onCommitFiberRoot=="function")try{Eo.onCommitFiberRoot(Gp,e,void 0,(e.current.flags&128)===128)}catch{}}var eo=Math.clz32?Math.clz32:F3,O3=Math.log,N3=Math.LN2;function F3(e){return e>>>=0,e===0?32:31-(O3(e)/N3|0)|0}var Qd=64,Jd=4194304;function Al(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Dh(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~o;s!==0?r=Al(s):(i&=a,i!==0&&(r=Al(i)))}else a=n&~o,a!==0?r=Al(a):i!==0&&(r=Al(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-eo(t),o=1<<n,r|=e[n],t&=~o;return r}function B3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L3(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-eo(i),s=1<<a,u=o[a];u===-1?(!(s&n)||s&r)&&(o[a]=B3(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}function F0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Zk(){var e=Qd;return Qd<<=1,!(Qd&4194240)&&(Qd=64),e}function Em(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function od(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-eo(t),e[t]=n}function $3(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-eo(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function $1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-eo(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Ye=0;function eT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var tT,z1,nT,rT,oT,B0=!1,Zd=[],Ui=null,Hi=null,Gi=null,vc=new Map,mc=new Map,Bi=[],z3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hS(e,t){switch(e){case"focusin":case"focusout":Ui=null;break;case"dragenter":case"dragleave":Hi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":vc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mc.delete(t.pointerId)}}function ll(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=ad(t),t!==null&&z1(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function W3(e,t,n,r,o){switch(t){case"focusin":return Ui=ll(Ui,e,t,n,r,o),!0;case"dragenter":return Hi=ll(Hi,e,t,n,r,o),!0;case"mouseover":return Gi=ll(Gi,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return vc.set(i,ll(vc.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,mc.set(i,ll(mc.get(i)||null,e,t,n,r,o)),!0}return!1}function iT(e){var t=Da(e.target);if(t!==null){var n=os(t);if(n!==null){if(t=n.tag,t===13){if(t=qk(n),t!==null){e.blockedOn=t,oT(e.priority,function(){nT(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Kf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=L0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);D0=r,n.target.dispatchEvent(r),D0=null}else return t=ad(n),t!==null&&z1(t),e.blockedOn=n,!1;t.shift()}return!0}function pS(e,t,n){Kf(e)&&n.delete(t)}function V3(){B0=!1,Ui!==null&&Kf(Ui)&&(Ui=null),Hi!==null&&Kf(Hi)&&(Hi=null),Gi!==null&&Kf(Gi)&&(Gi=null),vc.forEach(pS),mc.forEach(pS)}function cl(e,t){e.blockedOn===t&&(e.blockedOn=null,B0||(B0=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,V3)))}function gc(e){function t(o){return cl(o,e)}if(0<Zd.length){cl(Zd[0],e);for(var n=1;n<Zd.length;n++){var r=Zd[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ui!==null&&cl(Ui,e),Hi!==null&&cl(Hi,e),Gi!==null&&cl(Gi,e),vc.forEach(t),mc.forEach(t),n=0;n<Bi.length;n++)r=Bi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Bi.length&&(n=Bi[0],n.blockedOn===null);)iT(n),n.blockedOn===null&&Bi.shift()}var au=mi.ReactCurrentBatchConfig,Mh=!0;function j3(e,t,n,r){var o=Ye,i=au.transition;au.transition=null;try{Ye=1,W1(e,t,n,r)}finally{Ye=o,au.transition=i}}function U3(e,t,n,r){var o=Ye,i=au.transition;au.transition=null;try{Ye=4,W1(e,t,n,r)}finally{Ye=o,au.transition=i}}function W1(e,t,n,r){if(Mh){var o=L0(e,t,n,r);if(o===null)Nm(e,t,r,Oh,n),hS(e,r);else if(W3(o,e,t,n,r))r.stopPropagation();else if(hS(e,r),t&4&&-1<z3.indexOf(e)){for(;o!==null;){var i=ad(o);if(i!==null&&tT(i),i=L0(e,t,n,r),i===null&&Nm(e,t,r,Oh,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Nm(e,t,r,null,n)}}var Oh=null;function L0(e,t,n,r){if(Oh=null,e=B1(r),e=Da(e),e!==null)if(t=os(e),t===null)e=null;else if(n=t.tag,n===13){if(e=qk(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Oh=e,null}function aT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A3()){case L1:return 1;case Qk:return 4;case Ah:case D3:return 16;case Jk:return 536870912;default:return 16}default:return 16}}var zi=null,V1=null,Xf=null;function sT(){if(Xf)return Xf;var e,t=V1,n=t.length,r,o="value"in zi?zi.value:zi.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[i-r];r++);return Xf=o.slice(e,1<r?1-r:void 0)}function Yf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ef(){return!0}function vS(){return!1}function br(e){function t(n,r,o,i,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ef:vS,this.isPropagationStopped=vS,this}return mt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ef)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ef)},persist:function(){},isPersistent:ef}),t}var Ku={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j1=br(Ku),id=mt({},Ku,{view:0,detail:0}),H3=br(id),km,Tm,dl,qp=mt({},id,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:U1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dl&&(dl&&e.type==="mousemove"?(km=e.screenX-dl.screenX,Tm=e.screenY-dl.screenY):Tm=km=0,dl=e),km)},movementY:function(e){return"movementY"in e?e.movementY:Tm}}),mS=br(qp),G3=mt({},qp,{dataTransfer:0}),q3=br(G3),K3=mt({},id,{relatedTarget:0}),Rm=br(K3),X3=mt({},Ku,{animationName:0,elapsedTime:0,pseudoElement:0}),Y3=br(X3),Q3=mt({},Ku,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),J3=br(Q3),Z3=mt({},Ku,{data:0}),gS=br(Z3),e4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r4(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=n4[e])?!!t[e]:!1}function U1(){return r4}var o4=mt({},id,{key:function(e){if(e.key){var t=e4[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?t4[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:U1,charCode:function(e){return e.type==="keypress"?Yf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),i4=br(o4),a4=mt({},qp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yS=br(a4),s4=mt({},id,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:U1}),u4=br(s4),l4=mt({},Ku,{propertyName:0,elapsedTime:0,pseudoElement:0}),c4=br(l4),d4=mt({},qp,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),f4=br(d4),h4=[9,13,27,32],H1=li&&"CompositionEvent"in window,jl=null;li&&"documentMode"in document&&(jl=document.documentMode);var p4=li&&"TextEvent"in window&&!jl,uT=li&&(!H1||jl&&8<jl&&11>=jl),bS=" ",xS=!1;function lT(e,t){switch(e){case"keyup":return h4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Os=!1;function v4(e,t){switch(e){case"compositionend":return cT(t);case"keypress":return t.which!==32?null:(xS=!0,bS);case"textInput":return e=t.data,e===bS&&xS?null:e;default:return null}}function m4(e,t){if(Os)return e==="compositionend"||!H1&&lT(e,t)?(e=sT(),Xf=V1=zi=null,Os=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return uT&&t.locale!=="ko"?null:t.data;default:return null}}var g4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!g4[e.type]:t==="textarea"}function dT(e,t,n,r){Vk(r),t=Nh(t,"onChange"),0<t.length&&(n=new j1("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ul=null,yc=null;function y4(e){ST(e,0)}function Kp(e){var t=Bs(e);if(Nk(t))return e}function b4(e,t){if(e==="change")return t}var fT=!1;if(li){var Pm;if(li){var Im="oninput"in document;if(!Im){var SS=document.createElement("div");SS.setAttribute("oninput","return;"),Im=typeof SS.oninput=="function"}Pm=Im}else Pm=!1;fT=Pm&&(!document.documentMode||9<document.documentMode)}function CS(){Ul&&(Ul.detachEvent("onpropertychange",hT),yc=Ul=null)}function hT(e){if(e.propertyName==="value"&&Kp(yc)){var t=[];dT(t,yc,e,B1(e)),Gk(y4,t)}}function x4(e,t,n){e==="focusin"?(CS(),Ul=t,yc=n,Ul.attachEvent("onpropertychange",hT)):e==="focusout"&&CS()}function w4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Kp(yc)}function S4(e,t){if(e==="click")return Kp(t)}function C4(e,t){if(e==="input"||e==="change")return Kp(t)}function _4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ro=typeof Object.is=="function"?Object.is:_4;function bc(e,t){if(ro(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!x0.call(t,o)||!ro(e[o],t[o]))return!1}return!0}function _S(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ES(e,t){var n=_S(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_S(n)}}function pT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vT(){for(var e=window,t=Rh();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Rh(e.document)}return t}function G1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function E4(e){var t=vT(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&pT(n.ownerDocument.documentElement,n)){if(r!==null&&G1(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ES(n,i);var a=ES(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var k4=li&&"documentMode"in document&&11>=document.documentMode,Ns=null,$0=null,Hl=null,z0=!1;function kS(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;z0||Ns==null||Ns!==Rh(r)||(r=Ns,"selectionStart"in r&&G1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hl&&bc(Hl,r)||(Hl=r,r=Nh($0,"onSelect"),0<r.length&&(t=new j1("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ns)))}function tf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fs={animationend:tf("Animation","AnimationEnd"),animationiteration:tf("Animation","AnimationIteration"),animationstart:tf("Animation","AnimationStart"),transitionend:tf("Transition","TransitionEnd")},Am={},mT={};li&&(mT=document.createElement("div").style,"AnimationEvent"in window||(delete Fs.animationend.animation,delete Fs.animationiteration.animation,delete Fs.animationstart.animation),"TransitionEvent"in window||delete Fs.transitionend.transition);function Xp(e){if(Am[e])return Am[e];if(!Fs[e])return e;var t=Fs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in mT)return Am[e]=t[n];return e}var gT=Xp("animationend"),yT=Xp("animationiteration"),bT=Xp("animationstart"),xT=Xp("transitionend"),wT=new Map,TS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function la(e,t){wT.set(e,t),rs(t,[e])}for(var Dm=0;Dm<TS.length;Dm++){var Mm=TS[Dm],T4=Mm.toLowerCase(),R4=Mm[0].toUpperCase()+Mm.slice(1);la(T4,"on"+R4)}la(gT,"onAnimationEnd");la(yT,"onAnimationIteration");la(bT,"onAnimationStart");la("dblclick","onDoubleClick");la("focusin","onFocus");la("focusout","onBlur");la(xT,"onTransitionEnd");Eu("onMouseEnter",["mouseout","mouseover"]);Eu("onMouseLeave",["mouseout","mouseover"]);Eu("onPointerEnter",["pointerout","pointerover"]);Eu("onPointerLeave",["pointerout","pointerover"]);rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rs("onBeforeInput",["compositionend","keypress","textInput","paste"]);rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dl));function RS(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,T3(r,t,void 0,e),e.currentTarget=null}function ST(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==i&&o.isPropagationStopped())break e;RS(o,s,l),i=u}else for(a=0;a<r.length;a++){if(s=r[a],u=s.instance,l=s.currentTarget,s=s.listener,u!==i&&o.isPropagationStopped())break e;RS(o,s,l),i=u}}}if(Ih)throw e=N0,Ih=!1,N0=null,e}function rt(e,t){var n=t[H0];n===void 0&&(n=t[H0]=new Set);var r=e+"__bubble";n.has(r)||(CT(t,e,2,!1),n.add(r))}function Om(e,t,n){var r=0;t&&(r|=4),CT(n,e,r,t)}var nf="_reactListening"+Math.random().toString(36).slice(2);function xc(e){if(!e[nf]){e[nf]=!0,Ik.forEach(function(n){n!=="selectionchange"&&(P4.has(n)||Om(n,!1,e),Om(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nf]||(t[nf]=!0,Om("selectionchange",!1,t))}}function CT(e,t,n,r){switch(aT(t)){case 1:var o=j3;break;case 4:o=U3;break;default:o=W1}n=o.bind(null,t,n,e),o=void 0,!O0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Nm(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;a=a.return}for(;s!==null;){if(a=Da(s),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}s=s.parentNode}}r=r.return}Gk(function(){var l=i,c=B1(n),d=[];e:{var f=wT.get(e);if(f!==void 0){var h=j1,p=e;switch(e){case"keypress":if(Yf(n)===0)break e;case"keydown":case"keyup":h=i4;break;case"focusin":p="focus",h=Rm;break;case"focusout":p="blur",h=Rm;break;case"beforeblur":case"afterblur":h=Rm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=mS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=q3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=u4;break;case gT:case yT:case bT:h=Y3;break;case xT:h=c4;break;case"scroll":h=H3;break;case"wheel":h=f4;break;case"copy":case"cut":case"paste":h=J3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=yS}var v=(t&4)!==0,y=!v&&e==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var g=l,b;g!==null;){b=g;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,m!==null&&(x=pc(g,m),x!=null&&v.push(wc(g,x,b)))),y)break;g=g.return}0<v.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:v}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==D0&&(p=n.relatedTarget||n.fromElement)&&(Da(p)||p[ci]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Da(p):null,p!==null&&(y=os(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(v=mS,x="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(v=yS,x="onPointerLeave",m="onPointerEnter",g="pointer"),y=h==null?f:Bs(h),b=p==null?f:Bs(p),f=new v(x,g+"leave",h,n,c),f.target=y,f.relatedTarget=b,x=null,Da(c)===l&&(v=new v(m,g+"enter",p,n,c),v.target=b,v.relatedTarget=y,x=v),y=x,h&&p)t:{for(v=h,m=p,g=0,b=v;b;b=ys(b))g++;for(b=0,x=m;x;x=ys(x))b++;for(;0<g-b;)v=ys(v),g--;for(;0<b-g;)m=ys(m),b--;for(;g--;){if(v===m||m!==null&&v===m.alternate)break t;v=ys(v),m=ys(m)}v=null}else v=null;h!==null&&PS(d,f,h,v,!1),p!==null&&y!==null&&PS(d,y,p,v,!0)}}e:{if(f=l?Bs(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var w=b4;else if(wS(f))if(fT)w=C4;else{w=w4;var S=x4}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=S4);if(w&&(w=w(e,l))){dT(d,w,n,c);break e}S&&S(e,f,l),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&T0(f,"number",f.value)}switch(S=l?Bs(l):window,e){case"focusin":(wS(S)||S.contentEditable==="true")&&(Ns=S,$0=l,Hl=null);break;case"focusout":Hl=$0=Ns=null;break;case"mousedown":z0=!0;break;case"contextmenu":case"mouseup":case"dragend":z0=!1,kS(d,n,c);break;case"selectionchange":if(k4)break;case"keydown":case"keyup":kS(d,n,c)}var C;if(H1)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Os?lT(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(uT&&n.locale!=="ko"&&(Os||_!=="onCompositionStart"?_==="onCompositionEnd"&&Os&&(C=sT()):(zi=c,V1="value"in zi?zi.value:zi.textContent,Os=!0)),S=Nh(l,_),0<S.length&&(_=new gS(_,e,null,n,c),d.push({event:_,listeners:S}),C?_.data=C:(C=cT(n),C!==null&&(_.data=C)))),(C=p4?v4(e,n):m4(e,n))&&(l=Nh(l,"onBeforeInput"),0<l.length&&(c=new gS("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:l}),c.data=C))}ST(d,t)})}function wc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nh(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=pc(e,n),i!=null&&r.unshift(wc(e,i,o)),i=pc(e,t),i!=null&&r.push(wc(e,i,o))),e=e.return}return r}function ys(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function PS(e,t,n,r,o){for(var i=t._reactName,a=[];n!==null&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,o?(u=pc(n,i),u!=null&&a.unshift(wc(n,u,s))):o||(u=pc(n,i),u!=null&&a.push(wc(n,u,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var I4=/\r\n?/g,A4=/\u0000|\uFFFD/g;function IS(e){return(typeof e=="string"?e:""+e).replace(I4,`
`).replace(A4,"")}function rf(e,t,n){if(t=IS(t),IS(e)!==t&&n)throw Error(te(425))}function Fh(){}var W0=null,V0=null;function j0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var U0=typeof setTimeout=="function"?setTimeout:void 0,D4=typeof clearTimeout=="function"?clearTimeout:void 0,AS=typeof Promise=="function"?Promise:void 0,M4=typeof queueMicrotask=="function"?queueMicrotask:typeof AS<"u"?function(e){return AS.resolve(null).then(e).catch(O4)}:U0;function O4(e){setTimeout(function(){throw e})}function Fm(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),gc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);gc(t)}function qi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function DS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Xu=Math.random().toString(36).slice(2),mo="__reactFiber$"+Xu,Sc="__reactProps$"+Xu,ci="__reactContainer$"+Xu,H0="__reactEvents$"+Xu,N4="__reactListeners$"+Xu,F4="__reactHandles$"+Xu;function Da(e){var t=e[mo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ci]||n[mo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=DS(e);e!==null;){if(n=e[mo])return n;e=DS(e)}return t}e=n,n=e.parentNode}return null}function ad(e){return e=e[mo]||e[ci],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(te(33))}function Yp(e){return e[Sc]||null}var G0=[],Ls=-1;function ca(e){return{current:e}}function at(e){0>Ls||(e.current=G0[Ls],G0[Ls]=null,Ls--)}function et(e,t){Ls++,G0[Ls]=e.current,e.current=t}var oa={},yn=ca(oa),Ln=ca(!1),Ka=oa;function ku(e,t){var n=e.type.contextTypes;if(!n)return oa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function $n(e){return e=e.childContextTypes,e!=null}function Bh(){at(Ln),at(yn)}function MS(e,t,n){if(yn.current!==oa)throw Error(te(168));et(yn,t),et(Ln,n)}function _T(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(te(108,x3(e)||"Unknown",o));return mt({},n,r)}function Lh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||oa,Ka=yn.current,et(yn,e),et(Ln,Ln.current),!0}function OS(e,t,n){var r=e.stateNode;if(!r)throw Error(te(169));n?(e=_T(e,t,Ka),r.__reactInternalMemoizedMergedChildContext=e,at(Ln),at(yn),et(yn,e)):at(Ln),et(Ln,n)}var Yo=null,Qp=!1,Bm=!1;function ET(e){Yo===null?Yo=[e]:Yo.push(e)}function B4(e){Qp=!0,ET(e)}function da(){if(!Bm&&Yo!==null){Bm=!0;var e=0,t=Ye;try{var n=Yo;for(Ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yo=null,Qp=!1}catch(o){throw Yo!==null&&(Yo=Yo.slice(e+1)),Yk(L1,da),o}finally{Ye=t,Bm=!1}}return null}var $s=[],zs=0,$h=null,zh=0,kr=[],Tr=0,Xa=null,ei=1,ti="";function Sa(e,t){$s[zs++]=zh,$s[zs++]=$h,$h=e,zh=t}function kT(e,t,n){kr[Tr++]=ei,kr[Tr++]=ti,kr[Tr++]=Xa,Xa=e;var r=ei;e=ti;var o=32-eo(r)-1;r&=~(1<<o),n+=1;var i=32-eo(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,ei=1<<32-eo(t)+o|n<<o|r,ti=i+e}else ei=1<<i|n<<o|r,ti=e}function q1(e){e.return!==null&&(Sa(e,1),kT(e,1,0))}function K1(e){for(;e===$h;)$h=$s[--zs],$s[zs]=null,zh=$s[--zs],$s[zs]=null;for(;e===Xa;)Xa=kr[--Tr],kr[Tr]=null,ti=kr[--Tr],kr[Tr]=null,ei=kr[--Tr],kr[Tr]=null}var cr=null,or=null,lt=!1,Xr=null;function TT(e,t){var n=Ar(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function NS(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,cr=e,or=qi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,cr=e,or=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Xa!==null?{id:ei,overflow:ti}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ar(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,cr=e,or=null,!0):!1;default:return!1}}function q0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function K0(e){if(lt){var t=or;if(t){var n=t;if(!NS(e,t)){if(q0(e))throw Error(te(418));t=qi(n.nextSibling);var r=cr;t&&NS(e,t)?TT(r,n):(e.flags=e.flags&-4097|2,lt=!1,cr=e)}}else{if(q0(e))throw Error(te(418));e.flags=e.flags&-4097|2,lt=!1,cr=e}}}function FS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;cr=e}function of(e){if(e!==cr)return!1;if(!lt)return FS(e),lt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!j0(e.type,e.memoizedProps)),t&&(t=or)){if(q0(e))throw RT(),Error(te(418));for(;t;)TT(e,t),t=qi(t.nextSibling)}if(FS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){or=qi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}or=null}}else or=cr?qi(e.stateNode.nextSibling):null;return!0}function RT(){for(var e=or;e;)e=qi(e.nextSibling)}function Tu(){or=cr=null,lt=!1}function X1(e){Xr===null?Xr=[e]:Xr.push(e)}var L4=mi.ReactCurrentBatchConfig;function qr(e,t){if(e&&e.defaultProps){t=mt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Wh=ca(null),Vh=null,Ws=null,Y1=null;function Q1(){Y1=Ws=Vh=null}function J1(e){var t=Wh.current;at(Wh),e._currentValue=t}function X0(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function su(e,t){Vh=e,Y1=Ws=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Bn=!0),e.firstContext=null)}function Br(e){var t=e._currentValue;if(Y1!==e)if(e={context:e,memoizedValue:t,next:null},Ws===null){if(Vh===null)throw Error(te(308));Ws=e,Vh.dependencies={lanes:0,firstContext:e}}else Ws=Ws.next=e;return t}var Ma=null;function Z1(e){Ma===null?Ma=[e]:Ma.push(e)}function PT(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Z1(t)):(n.next=o.next,o.next=n),t.interleaved=n,di(e,r)}function di(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ni=!1;function eb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function oi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ki(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,$e&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,di(e,n)}return o=r.interleaved,o===null?(t.next=t,Z1(r)):(t.next=o.next,o.next=t),r.interleaved=t,di(e,n)}function Qf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$1(e,n)}}function BS(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function jh(e,t,n,r){var o=e.updateQueue;Ni=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var u=s,l=u.next;u.next=null,a===null?i=l:a.next=l,a=u;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(i!==null){var d=o.baseState;a=0,c=l=u=null,s=i;do{var f=s.lane,h=s.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,h=n,v.tag){case 1:if(p=v.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=mt({},d,f);break e;case 2:Ni=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,f=o.effects,f===null?o.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=h,u=d):c=c.next=h,a|=f;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;f=s,s=f.next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}while(!0);if(c===null&&(u=d),o.baseState=u,o.firstBaseUpdate=l,o.lastBaseUpdate=c,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);Qa|=a,e.lanes=a,e.memoizedState=d}}function LS(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(te(191,o));o.call(r)}}}var AT=new Pk.Component().refs;function Y0(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:mt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Jp={isMounted:function(e){return(e=e._reactInternals)?os(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=kn(),o=Yi(e),i=oi(r,o);i.payload=t,n!=null&&(i.callback=n),t=Ki(e,i,o),t!==null&&(to(t,e,o,r),Qf(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=kn(),o=Yi(e),i=oi(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ki(e,i,o),t!==null&&(to(t,e,o,r),Qf(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=kn(),r=Yi(e),o=oi(n,r);o.tag=2,t!=null&&(o.callback=t),t=Ki(e,o,r),t!==null&&(to(t,e,r,n),Qf(t,e,r))}};function $S(e,t,n,r,o,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!bc(n,r)||!bc(o,i):!0}function DT(e,t,n){var r=!1,o=oa,i=t.contextType;return typeof i=="object"&&i!==null?i=Br(i):(o=$n(t)?Ka:yn.current,r=t.contextTypes,i=(r=r!=null)?ku(e,o):oa),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Jp,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function zS(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Jp.enqueueReplaceState(t,t.state,null)}function Q0(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=AT,eb(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=Br(i):(i=$n(t)?Ka:yn.current,o.context=ku(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Y0(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Jp.enqueueReplaceState(o,o.state,null),jh(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function fl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var r=n.stateNode}if(!r)throw Error(te(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var s=o.refs;s===AT&&(s=o.refs={}),a===null?delete s[i]:s[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,e))}return e}function af(e,t){throw e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function WS(e){var t=e._init;return t(e._payload)}function MT(e){function t(m,g){if(e){var b=m.deletions;b===null?(m.deletions=[g],m.flags|=16):b.push(g)}}function n(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function o(m,g){return m=Qi(m,g),m.index=0,m.sibling=null,m}function i(m,g,b){return m.index=b,e?(b=m.alternate,b!==null?(b=b.index,b<g?(m.flags|=2,g):b):(m.flags|=2,g)):(m.flags|=1048576,g)}function a(m){return e&&m.alternate===null&&(m.flags|=2),m}function s(m,g,b,x){return g===null||g.tag!==6?(g=Um(b,m.mode,x),g.return=m,g):(g=o(g,b),g.return=m,g)}function u(m,g,b,x){var w=b.type;return w===Ms?c(m,g,b.props.children,x,b.key):g!==null&&(g.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Oi&&WS(w)===g.type)?(x=o(g,b.props),x.ref=fl(m,g,b),x.return=m,x):(x=rh(b.type,b.key,b.props,null,m.mode,x),x.ref=fl(m,g,b),x.return=m,x)}function l(m,g,b,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=Hm(b,m.mode,x),g.return=m,g):(g=o(g,b.children||[]),g.return=m,g)}function c(m,g,b,x,w){return g===null||g.tag!==7?(g=za(b,m.mode,x,w),g.return=m,g):(g=o(g,b),g.return=m,g)}function d(m,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Um(""+g,m.mode,b),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Kd:return b=rh(g.type,g.key,g.props,null,m.mode,b),b.ref=fl(m,null,g),b.return=m,b;case Ds:return g=Hm(g,m.mode,b),g.return=m,g;case Oi:var x=g._init;return d(m,x(g._payload),b)}if(Il(g)||sl(g))return g=za(g,m.mode,b,null),g.return=m,g;af(m,g)}return null}function f(m,g,b,x){var w=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:s(m,g,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Kd:return b.key===w?u(m,g,b,x):null;case Ds:return b.key===w?l(m,g,b,x):null;case Oi:return w=b._init,f(m,g,w(b._payload),x)}if(Il(b)||sl(b))return w!==null?null:c(m,g,b,x,null);af(m,b)}return null}function h(m,g,b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(b)||null,s(g,m,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Kd:return m=m.get(x.key===null?b:x.key)||null,u(g,m,x,w);case Ds:return m=m.get(x.key===null?b:x.key)||null,l(g,m,x,w);case Oi:var S=x._init;return h(m,g,b,S(x._payload),w)}if(Il(x)||sl(x))return m=m.get(b)||null,c(g,m,x,w,null);af(g,x)}return null}function p(m,g,b,x){for(var w=null,S=null,C=g,_=g=0,k=null;C!==null&&_<b.length;_++){C.index>_?(k=C,C=null):k=C.sibling;var E=f(m,C,b[_],x);if(E===null){C===null&&(C=k);break}e&&C&&E.alternate===null&&t(m,C),g=i(E,g,_),S===null?w=E:S.sibling=E,S=E,C=k}if(_===b.length)return n(m,C),lt&&Sa(m,_),w;if(C===null){for(;_<b.length;_++)C=d(m,b[_],x),C!==null&&(g=i(C,g,_),S===null?w=C:S.sibling=C,S=C);return lt&&Sa(m,_),w}for(C=r(m,C);_<b.length;_++)k=h(C,m,_,b[_],x),k!==null&&(e&&k.alternate!==null&&C.delete(k.key===null?_:k.key),g=i(k,g,_),S===null?w=k:S.sibling=k,S=k);return e&&C.forEach(function(A){return t(m,A)}),lt&&Sa(m,_),w}function v(m,g,b,x){var w=sl(b);if(typeof w!="function")throw Error(te(150));if(b=w.call(b),b==null)throw Error(te(151));for(var S=w=null,C=g,_=g=0,k=null,E=b.next();C!==null&&!E.done;_++,E=b.next()){C.index>_?(k=C,C=null):k=C.sibling;var A=f(m,C,E.value,x);if(A===null){C===null&&(C=k);break}e&&C&&A.alternate===null&&t(m,C),g=i(A,g,_),S===null?w=A:S.sibling=A,S=A,C=k}if(E.done)return n(m,C),lt&&Sa(m,_),w;if(C===null){for(;!E.done;_++,E=b.next())E=d(m,E.value,x),E!==null&&(g=i(E,g,_),S===null?w=E:S.sibling=E,S=E);return lt&&Sa(m,_),w}for(C=r(m,C);!E.done;_++,E=b.next())E=h(C,m,_,E.value,x),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?_:E.key),g=i(E,g,_),S===null?w=E:S.sibling=E,S=E);return e&&C.forEach(function(D){return t(m,D)}),lt&&Sa(m,_),w}function y(m,g,b,x){if(typeof b=="object"&&b!==null&&b.type===Ms&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Kd:e:{for(var w=b.key,S=g;S!==null;){if(S.key===w){if(w=b.type,w===Ms){if(S.tag===7){n(m,S.sibling),g=o(S,b.props.children),g.return=m,m=g;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Oi&&WS(w)===S.type){n(m,S.sibling),g=o(S,b.props),g.ref=fl(m,S,b),g.return=m,m=g;break e}n(m,S);break}else t(m,S);S=S.sibling}b.type===Ms?(g=za(b.props.children,m.mode,x,b.key),g.return=m,m=g):(x=rh(b.type,b.key,b.props,null,m.mode,x),x.ref=fl(m,g,b),x.return=m,m=x)}return a(m);case Ds:e:{for(S=b.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){n(m,g.sibling),g=o(g,b.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else t(m,g);g=g.sibling}g=Hm(b,m.mode,x),g.return=m,m=g}return a(m);case Oi:return S=b._init,y(m,g,S(b._payload),x)}if(Il(b))return p(m,g,b,x);if(sl(b))return v(m,g,b,x);af(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(n(m,g.sibling),g=o(g,b),g.return=m,m=g):(n(m,g),g=Um(b,m.mode,x),g.return=m,m=g),a(m)):n(m,g)}return y}var Ru=MT(!0),OT=MT(!1),sd={},ko=ca(sd),Cc=ca(sd),_c=ca(sd);function Oa(e){if(e===sd)throw Error(te(174));return e}function tb(e,t){switch(et(_c,t),et(Cc,e),et(ko,sd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:P0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=P0(t,e)}at(ko),et(ko,t)}function Pu(){at(ko),at(Cc),at(_c)}function NT(e){Oa(_c.current);var t=Oa(ko.current),n=P0(t,e.type);t!==n&&(et(Cc,e),et(ko,n))}function nb(e){Cc.current===e&&(at(ko),at(Cc))}var dt=ca(0);function Uh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Lm=[];function rb(){for(var e=0;e<Lm.length;e++)Lm[e]._workInProgressVersionPrimary=null;Lm.length=0}var Jf=mi.ReactCurrentDispatcher,$m=mi.ReactCurrentBatchConfig,Ya=0,vt=null,Ot=null,Ht=null,Hh=!1,Gl=!1,Ec=0,$4=0;function un(){throw Error(te(321))}function ob(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ro(e[n],t[n]))return!1;return!0}function ib(e,t,n,r,o,i){if(Ya=i,vt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jf.current=e===null||e.memoizedState===null?j4:U4,e=n(r,o),Gl){i=0;do{if(Gl=!1,Ec=0,25<=i)throw Error(te(301));i+=1,Ht=Ot=null,t.updateQueue=null,Jf.current=H4,e=n(r,o)}while(Gl)}if(Jf.current=Gh,t=Ot!==null&&Ot.next!==null,Ya=0,Ht=Ot=vt=null,Hh=!1,t)throw Error(te(300));return e}function ab(){var e=Ec!==0;return Ec=0,e}function lo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?vt.memoizedState=Ht=e:Ht=Ht.next=e,Ht}function Lr(){if(Ot===null){var e=vt.alternate;e=e!==null?e.memoizedState:null}else e=Ot.next;var t=Ht===null?vt.memoizedState:Ht.next;if(t!==null)Ht=t,Ot=e;else{if(e===null)throw Error(te(310));Ot=e,e={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Ht===null?vt.memoizedState=Ht=e:Ht=Ht.next=e}return Ht}function kc(e,t){return typeof t=="function"?t(e):t}function zm(e){var t=Lr(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var r=Ot,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var a=o.next;o.next=i.next,i.next=a}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var s=a=null,u=null,l=i;do{var c=l.lane;if((Ya&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var d={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=d,a=r):u=u.next=d,vt.lanes|=c,Qa|=c}l=l.next}while(l!==null&&l!==i);u===null?a=r:u.next=s,ro(r,t.memoizedState)||(Bn=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,vt.lanes|=i,Qa|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Wm(e){var t=Lr(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do i=e(i,a.action),a=a.next;while(a!==o);ro(i,t.memoizedState)||(Bn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function FT(){}function BT(e,t){var n=vt,r=Lr(),o=t(),i=!ro(r.memoizedState,o);if(i&&(r.memoizedState=o,Bn=!0),r=r.queue,sb(zT.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,Tc(9,$T.bind(null,n,r,o,t),void 0,null),Gt===null)throw Error(te(349));Ya&30||LT(n,t,o)}return o}function LT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=vt.updateQueue,t===null?(t={lastEffect:null,stores:null},vt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $T(e,t,n,r){t.value=n,t.getSnapshot=r,WT(t)&&VT(e)}function zT(e,t,n){return n(function(){WT(t)&&VT(e)})}function WT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ro(e,n)}catch{return!0}}function VT(e){var t=di(e,1);t!==null&&to(t,e,1,-1)}function VS(e){var t=lo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kc,lastRenderedState:e},t.queue=e,e=e.dispatch=V4.bind(null,vt,e),[t.memoizedState,e]}function Tc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=vt.updateQueue,t===null?(t={lastEffect:null,stores:null},vt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function jT(){return Lr().memoizedState}function Zf(e,t,n,r){var o=lo();vt.flags|=e,o.memoizedState=Tc(1|t,n,void 0,r===void 0?null:r)}function Zp(e,t,n,r){var o=Lr();r=r===void 0?null:r;var i=void 0;if(Ot!==null){var a=Ot.memoizedState;if(i=a.destroy,r!==null&&ob(r,a.deps)){o.memoizedState=Tc(t,n,i,r);return}}vt.flags|=e,o.memoizedState=Tc(1|t,n,i,r)}function jS(e,t){return Zf(8390656,8,e,t)}function sb(e,t){return Zp(2048,8,e,t)}function UT(e,t){return Zp(4,2,e,t)}function HT(e,t){return Zp(4,4,e,t)}function GT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qT(e,t,n){return n=n!=null?n.concat([e]):null,Zp(4,4,GT.bind(null,t,e),n)}function ub(){}function KT(e,t){var n=Lr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ob(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function XT(e,t){var n=Lr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ob(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function YT(e,t,n){return Ya&21?(ro(n,t)||(n=Zk(),vt.lanes|=n,Qa|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Bn=!0),e.memoizedState=n)}function z4(e,t){var n=Ye;Ye=n!==0&&4>n?n:4,e(!0);var r=$m.transition;$m.transition={};try{e(!1),t()}finally{Ye=n,$m.transition=r}}function QT(){return Lr().memoizedState}function W4(e,t,n){var r=Yi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},JT(e))ZT(t,n);else if(n=PT(e,t,n,r),n!==null){var o=kn();to(n,e,r,o),eR(n,t,r)}}function V4(e,t,n){var r=Yi(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(JT(e))ZT(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,ro(s,a)){var u=t.interleaved;u===null?(o.next=o,Z1(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}n=PT(e,t,o,r),n!==null&&(o=kn(),to(n,e,r,o),eR(n,t,r))}}function JT(e){var t=e.alternate;return e===vt||t!==null&&t===vt}function ZT(e,t){Gl=Hh=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eR(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$1(e,n)}}var Gh={readContext:Br,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useInsertionEffect:un,useLayoutEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useMutableSource:un,useSyncExternalStore:un,useId:un,unstable_isNewReconciler:!1},j4={readContext:Br,useCallback:function(e,t){return lo().memoizedState=[e,t===void 0?null:t],e},useContext:Br,useEffect:jS,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Zf(4194308,4,GT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zf(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zf(4,2,e,t)},useMemo:function(e,t){var n=lo();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=lo();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=W4.bind(null,vt,e),[r.memoizedState,e]},useRef:function(e){var t=lo();return e={current:e},t.memoizedState=e},useState:VS,useDebugValue:ub,useDeferredValue:function(e){return lo().memoizedState=e},useTransition:function(){var e=VS(!1),t=e[0];return e=z4.bind(null,e[1]),lo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vt,o=lo();if(lt){if(n===void 0)throw Error(te(407));n=n()}else{if(n=t(),Gt===null)throw Error(te(349));Ya&30||LT(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,jS(zT.bind(null,r,i,e),[e]),r.flags|=2048,Tc(9,$T.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=lo(),t=Gt.identifierPrefix;if(lt){var n=ti,r=ei;n=(r&~(1<<32-eo(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ec++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=$4++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},U4={readContext:Br,useCallback:KT,useContext:Br,useEffect:sb,useImperativeHandle:qT,useInsertionEffect:UT,useLayoutEffect:HT,useMemo:XT,useReducer:zm,useRef:jT,useState:function(){return zm(kc)},useDebugValue:ub,useDeferredValue:function(e){var t=Lr();return YT(t,Ot.memoizedState,e)},useTransition:function(){var e=zm(kc)[0],t=Lr().memoizedState;return[e,t]},useMutableSource:FT,useSyncExternalStore:BT,useId:QT,unstable_isNewReconciler:!1},H4={readContext:Br,useCallback:KT,useContext:Br,useEffect:sb,useImperativeHandle:qT,useInsertionEffect:UT,useLayoutEffect:HT,useMemo:XT,useReducer:Wm,useRef:jT,useState:function(){return Wm(kc)},useDebugValue:ub,useDeferredValue:function(e){var t=Lr();return Ot===null?t.memoizedState=e:YT(t,Ot.memoizedState,e)},useTransition:function(){var e=Wm(kc)[0],t=Lr().memoizedState;return[e,t]},useMutableSource:FT,useSyncExternalStore:BT,useId:QT,unstable_isNewReconciler:!1};function Iu(e,t){try{var n="",r=t;do n+=b3(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function Vm(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function J0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var G4=typeof WeakMap=="function"?WeakMap:Map;function tR(e,t,n){n=oi(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kh||(Kh=!0,uy=r),J0(e,t)},n}function nR(e,t,n){n=oi(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){J0(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){J0(e,t),typeof r!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function US(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new G4;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=aB.bind(null,e,t,n),t.then(e,e))}function HS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function GS(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=oi(-1,1),t.tag=2,Ki(n,t,1))),n.lanes|=1),e)}var q4=mi.ReactCurrentOwner,Bn=!1;function _n(e,t,n,r){t.child=e===null?OT(t,null,n,r):Ru(t,e.child,n,r)}function qS(e,t,n,r,o){n=n.render;var i=t.ref;return su(t,o),r=ib(e,t,n,r,i,o),n=ab(),e!==null&&!Bn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,fi(e,t,o)):(lt&&n&&q1(t),t.flags|=1,_n(e,t,r,o),t.child)}function KS(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!mb(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,rR(e,t,i,r,o)):(e=rh(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:bc,n(a,r)&&e.ref===t.ref)return fi(e,t,o)}return t.flags|=1,e=Qi(i,r),e.ref=t.ref,e.return=t,t.child=e}function rR(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(bc(i,r)&&e.ref===t.ref)if(Bn=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(Bn=!0);else return t.lanes=e.lanes,fi(e,t,o)}return Z0(e,t,n,r,o)}function oR(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(js,Jn),Jn|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,et(js,Jn),Jn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,et(js,Jn),Jn|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,et(js,Jn),Jn|=r;return _n(e,t,o,n),t.child}function iR(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Z0(e,t,n,r,o){var i=$n(n)?Ka:yn.current;return i=ku(t,i),su(t,o),n=ib(e,t,n,r,i,o),r=ab(),e!==null&&!Bn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,fi(e,t,o)):(lt&&r&&q1(t),t.flags|=1,_n(e,t,n,o),t.child)}function XS(e,t,n,r,o){if($n(n)){var i=!0;Lh(t)}else i=!1;if(su(t,o),t.stateNode===null)eh(e,t),DT(t,n,r),Q0(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;typeof l=="object"&&l!==null?l=Br(l):(l=$n(n)?Ka:yn.current,l=ku(t,l));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||u!==l)&&zS(t,a,r,l),Ni=!1;var f=t.memoizedState;a.state=f,jh(t,r,a,o),u=t.memoizedState,s!==r||f!==u||Ln.current||Ni?(typeof c=="function"&&(Y0(t,n,c,r),u=t.memoizedState),(s=Ni||$S(t,n,s,r,f,u,l))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,IT(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:qr(t.type,s),a.props=l,d=t.pendingProps,f=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Br(u):(u=$n(n)?Ka:yn.current,u=ku(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||f!==u)&&zS(t,a,r,u),Ni=!1,f=t.memoizedState,a.state=f,jh(t,r,a,o);var p=t.memoizedState;s!==d||f!==p||Ln.current||Ni?(typeof h=="function"&&(Y0(t,n,h,r),p=t.memoizedState),(l=Ni||$S(t,n,l,r,f,p,u)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return ey(e,t,n,r,i,o)}function ey(e,t,n,r,o,i){iR(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&OS(t,n,!1),fi(e,t,i);r=t.stateNode,q4.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ru(t,e.child,null,i),t.child=Ru(t,null,s,i)):_n(e,t,s,i),t.memoizedState=r.state,o&&OS(t,n,!0),t.child}function aR(e){var t=e.stateNode;t.pendingContext?MS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&MS(e,t.context,!1),tb(e,t.containerInfo)}function YS(e,t,n,r,o){return Tu(),X1(o),t.flags|=256,_n(e,t,n,r),t.child}var ty={dehydrated:null,treeContext:null,retryLane:0};function ny(e){return{baseLanes:e,cachePool:null,transitions:null}}function sR(e,t,n){var r=t.pendingProps,o=dt.current,i=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(o&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),et(dt,o&1),e===null)return K0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=nv(a,r,0,null),e=za(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ny(n),t.memoizedState=ty,e):lb(t,a));if(o=e.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return K4(e,t,a,r,s,o,n);if(i){i=r.fallback,a=t.mode,o=e.child,s=o.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Qi(o,u),r.subtreeFlags=o.subtreeFlags&14680064),s!==null?i=Qi(s,i):(i=za(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?ny(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=ty,r}return i=e.child,e=i.sibling,r=Qi(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function lb(e,t){return t=nv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function sf(e,t,n,r){return r!==null&&X1(r),Ru(t,e.child,null,n),e=lb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function K4(e,t,n,r,o,i,a){if(n)return t.flags&256?(t.flags&=-257,r=Vm(Error(te(422))),sf(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=nv({mode:"visible",children:r.children},o,0,null),i=za(i,o,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Ru(t,e.child,null,a),t.child.memoizedState=ny(a),t.memoizedState=ty,i);if(!(t.mode&1))return sf(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(te(419)),r=Vm(i,r,void 0),sf(e,t,a,r)}if(s=(a&e.childLanes)!==0,Bn||s){if(r=Gt,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,di(e,o),to(r,e,o,-1))}return vb(),r=Vm(Error(te(421))),sf(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=sB.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,or=qi(o.nextSibling),cr=t,lt=!0,Xr=null,e!==null&&(kr[Tr++]=ei,kr[Tr++]=ti,kr[Tr++]=Xa,ei=e.id,ti=e.overflow,Xa=t),t=lb(t,r.children),t.flags|=4096,t)}function QS(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),X0(e.return,t,n)}function jm(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function uR(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(_n(e,t,r.children,n),r=dt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&QS(e,n,t);else if(e.tag===19)QS(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(et(dt,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Uh(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),jm(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Uh(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}jm(t,!0,n,null,i);break;case"together":jm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function eh(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Qa|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,n=Qi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function X4(e,t,n){switch(t.tag){case 3:aR(t),Tu();break;case 5:NT(t);break;case 1:$n(t.type)&&Lh(t);break;case 4:tb(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;et(Wh,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(et(dt,dt.current&1),t.flags|=128,null):n&t.child.childLanes?sR(e,t,n):(et(dt,dt.current&1),e=fi(e,t,n),e!==null?e.sibling:null);et(dt,dt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return uR(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),et(dt,dt.current),r)break;return null;case 22:case 23:return t.lanes=0,oR(e,t,n)}return fi(e,t,n)}var lR,ry,cR,dR;lR=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ry=function(){};cR=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Oa(ko.current);var i=null;switch(n){case"input":o=E0(e,o),r=E0(e,r),i=[];break;case"select":o=mt({},o,{value:void 0}),r=mt({},r,{value:void 0}),i=[];break;case"textarea":o=R0(e,o),r=R0(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Fh)}I0(n,r);var a;n=null;for(l in o)if(!r.hasOwnProperty(l)&&o.hasOwnProperty(l)&&o[l]!=null)if(l==="style"){var s=o[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(fc.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var u=r[l];if(s=o!=null?o[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(i=i||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(fc.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&rt("scroll",e),i||s===u||(i=[])):(i=i||[]).push(l,u))}n&&(i=i||[]).push("style",n);var l=i;(t.updateQueue=l)&&(t.flags|=4)}};dR=function(e,t,n,r){n!==r&&(t.flags|=4)};function hl(e,t){if(!lt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ln(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Y4(e,t,n){var r=t.pendingProps;switch(K1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(t),null;case 1:return $n(t.type)&&Bh(),ln(t),null;case 3:return r=t.stateNode,Pu(),at(Ln),at(yn),rb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(of(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xr!==null&&(dy(Xr),Xr=null))),ry(e,t),ln(t),null;case 5:nb(t);var o=Oa(_c.current);if(n=t.type,e!==null&&t.stateNode!=null)cR(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(te(166));return ln(t),null}if(e=Oa(ko.current),of(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[mo]=t,r[Sc]=i,e=(t.mode&1)!==0,n){case"dialog":rt("cancel",r),rt("close",r);break;case"iframe":case"object":case"embed":rt("load",r);break;case"video":case"audio":for(o=0;o<Dl.length;o++)rt(Dl[o],r);break;case"source":rt("error",r);break;case"img":case"image":case"link":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"input":aS(r,i),rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},rt("invalid",r);break;case"textarea":uS(r,i),rt("invalid",r)}I0(n,i),o=null;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];a==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&rf(r.textContent,s,e),o=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&rf(r.textContent,s,e),o=["children",""+s]):fc.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&rt("scroll",r)}switch(n){case"input":Xd(r),sS(r,i,!0);break;case"textarea":Xd(r),lS(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Fh)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Lk(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[mo]=t,e[Sc]=r,lR(e,t,!1,!1),t.stateNode=e;e:{switch(a=A0(n,r),n){case"dialog":rt("cancel",e),rt("close",e),o=r;break;case"iframe":case"object":case"embed":rt("load",e),o=r;break;case"video":case"audio":for(o=0;o<Dl.length;o++)rt(Dl[o],e);o=r;break;case"source":rt("error",e),o=r;break;case"img":case"image":case"link":rt("error",e),rt("load",e),o=r;break;case"details":rt("toggle",e),o=r;break;case"input":aS(e,r),o=E0(e,r),rt("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=mt({},r,{value:void 0}),rt("invalid",e);break;case"textarea":uS(e,r),o=R0(e,r),rt("invalid",e);break;default:o=r}I0(n,o),s=o;for(i in s)if(s.hasOwnProperty(i)){var u=s[i];i==="style"?Wk(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&$k(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&hc(e,u):typeof u=="number"&&hc(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(fc.hasOwnProperty(i)?u!=null&&i==="onScroll"&&rt("scroll",e):u!=null&&M1(e,i,u,a))}switch(n){case"input":Xd(e),sS(e,r,!1);break;case"textarea":Xd(e),lS(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ra(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?ru(e,!!r.multiple,i,!1):r.defaultValue!=null&&ru(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Fh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ln(t),null;case 6:if(e&&t.stateNode!=null)dR(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(te(166));if(n=Oa(_c.current),Oa(ko.current),of(t)){if(r=t.stateNode,n=t.memoizedProps,r[mo]=t,(i=r.nodeValue!==n)&&(e=cr,e!==null))switch(e.tag){case 3:rf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rf(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mo]=t,t.stateNode=r}return ln(t),null;case 13:if(at(dt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(lt&&or!==null&&t.mode&1&&!(t.flags&128))RT(),Tu(),t.flags|=98560,i=!1;else if(i=of(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(te(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(te(317));i[mo]=t}else Tu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ln(t),i=!1}else Xr!==null&&(dy(Xr),Xr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||dt.current&1?Nt===0&&(Nt=3):vb())),t.updateQueue!==null&&(t.flags|=4),ln(t),null);case 4:return Pu(),ry(e,t),e===null&&xc(t.stateNode.containerInfo),ln(t),null;case 10:return J1(t.type._context),ln(t),null;case 17:return $n(t.type)&&Bh(),ln(t),null;case 19:if(at(dt),i=t.memoizedState,i===null)return ln(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)hl(i,!1);else{if(Nt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Uh(e),a!==null){for(t.flags|=128,hl(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return et(dt,dt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Et()>Au&&(t.flags|=128,r=!0,hl(i,!1),t.lanes=4194304)}else{if(!r)if(e=Uh(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!lt)return ln(t),null}else 2*Et()-i.renderingStartTime>Au&&n!==1073741824&&(t.flags|=128,r=!0,hl(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Et(),t.sibling=null,n=dt.current,et(dt,r?n&1|2:n&1),t):(ln(t),null);case 22:case 23:return pb(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Jn&1073741824&&(ln(t),t.subtreeFlags&6&&(t.flags|=8192)):ln(t),null;case 24:return null;case 25:return null}throw Error(te(156,t.tag))}function Q4(e,t){switch(K1(t),t.tag){case 1:return $n(t.type)&&Bh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pu(),at(Ln),at(yn),rb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return nb(t),null;case 13:if(at(dt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));Tu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return at(dt),null;case 4:return Pu(),null;case 10:return J1(t.type._context),null;case 22:case 23:return pb(),null;case 24:return null;default:return null}}var uf=!1,hn=!1,J4=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Vs(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){wt(e,t,r)}else n.current=null}function oy(e,t,n){try{n()}catch(r){wt(e,t,r)}}var JS=!1;function Z4(e,t){if(W0=Mh,e=vT(),G1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,s=-1,u=-1,l=0,c=0,d=e,f=null;t:for(;;){for(var h;d!==n||o!==0&&d.nodeType!==3||(s=a+o),d!==i||r!==0&&d.nodeType!==3||(u=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++l===o&&(s=a),f===i&&++c===r&&(u=a),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(V0={focusedElem:e,selectionRange:n},Mh=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,y=p.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:qr(t.type,v),y);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(x){wt(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return p=JS,JS=!1,p}function ql(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&oy(t,n,i)}o=o.next}while(o!==r)}}function ev(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iy(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function fR(e){var t=e.alternate;t!==null&&(e.alternate=null,fR(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[mo],delete t[Sc],delete t[H0],delete t[N4],delete t[F4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hR(e){return e.tag===5||e.tag===3||e.tag===4}function ZS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ay(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Fh));else if(r!==4&&(e=e.child,e!==null))for(ay(e,t,n),e=e.sibling;e!==null;)ay(e,t,n),e=e.sibling}function sy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(sy(e,t,n),e=e.sibling;e!==null;)sy(e,t,n),e=e.sibling}var Jt=null,Kr=!1;function _i(e,t,n){for(n=n.child;n!==null;)pR(e,t,n),n=n.sibling}function pR(e,t,n){if(Eo&&typeof Eo.onCommitFiberUnmount=="function")try{Eo.onCommitFiberUnmount(Gp,n)}catch{}switch(n.tag){case 5:hn||Vs(n,t);case 6:var r=Jt,o=Kr;Jt=null,_i(e,t,n),Jt=r,Kr=o,Jt!==null&&(Kr?(e=Jt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Jt.removeChild(n.stateNode));break;case 18:Jt!==null&&(Kr?(e=Jt,n=n.stateNode,e.nodeType===8?Fm(e.parentNode,n):e.nodeType===1&&Fm(e,n),gc(e)):Fm(Jt,n.stateNode));break;case 4:r=Jt,o=Kr,Jt=n.stateNode.containerInfo,Kr=!0,_i(e,t,n),Jt=r,Kr=o;break;case 0:case 11:case 14:case 15:if(!hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&oy(n,t,a),o=o.next}while(o!==r)}_i(e,t,n);break;case 1:if(!hn&&(Vs(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){wt(n,t,s)}_i(e,t,n);break;case 21:_i(e,t,n);break;case 22:n.mode&1?(hn=(r=hn)||n.memoizedState!==null,_i(e,t,n),hn=r):_i(e,t,n);break;default:_i(e,t,n)}}function e2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new J4),t.forEach(function(r){var o=uB.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Ur(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Jt=s.stateNode,Kr=!1;break e;case 3:Jt=s.stateNode.containerInfo,Kr=!0;break e;case 4:Jt=s.stateNode.containerInfo,Kr=!0;break e}s=s.return}if(Jt===null)throw Error(te(160));pR(i,a,o),Jt=null,Kr=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(l){wt(o,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vR(t,e),t=t.sibling}function vR(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ur(t,e),ao(e),r&4){try{ql(3,e,e.return),ev(3,e)}catch(v){wt(e,e.return,v)}try{ql(5,e,e.return)}catch(v){wt(e,e.return,v)}}break;case 1:Ur(t,e),ao(e),r&512&&n!==null&&Vs(n,n.return);break;case 5:if(Ur(t,e),ao(e),r&512&&n!==null&&Vs(n,n.return),e.flags&32){var o=e.stateNode;try{hc(o,"")}catch(v){wt(e,e.return,v)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,s=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&Fk(o,i),A0(s,a);var l=A0(s,i);for(a=0;a<u.length;a+=2){var c=u[a],d=u[a+1];c==="style"?Wk(o,d):c==="dangerouslySetInnerHTML"?$k(o,d):c==="children"?hc(o,d):M1(o,c,d,l)}switch(s){case"input":k0(o,i);break;case"textarea":Bk(o,i);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?ru(o,!!i.multiple,h,!1):f!==!!i.multiple&&(i.defaultValue!=null?ru(o,!!i.multiple,i.defaultValue,!0):ru(o,!!i.multiple,i.multiple?[]:"",!1))}o[Sc]=i}catch(v){wt(e,e.return,v)}}break;case 6:if(Ur(t,e),ao(e),r&4){if(e.stateNode===null)throw Error(te(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(v){wt(e,e.return,v)}}break;case 3:if(Ur(t,e),ao(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gc(t.containerInfo)}catch(v){wt(e,e.return,v)}break;case 4:Ur(t,e),ao(e);break;case 13:Ur(t,e),ao(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(fb=Et())),r&4&&e2(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(hn=(l=hn)||c,Ur(t,e),hn=l):Ur(t,e),ao(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(ue=e,c=e.child;c!==null;){for(d=ue=c;ue!==null;){switch(f=ue,h=f.child,f.tag){case 0:case 11:case 14:case 15:ql(4,f,f.return);break;case 1:Vs(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(v){wt(r,n,v)}}break;case 5:Vs(f,f.return);break;case 22:if(f.memoizedState!==null){n2(d);continue}}h!==null?(h.return=f,ue=h):n2(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{o=d.stateNode,l?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,u=d.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=zk("display",a))}catch(v){wt(e,e.return,v)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(v){wt(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ur(t,e),ao(e),r&4&&e2(e);break;case 21:break;default:Ur(t,e),ao(e)}}function ao(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(hR(n)){var r=n;break e}n=n.return}throw Error(te(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(hc(o,""),r.flags&=-33);var i=ZS(e);sy(e,i,o);break;case 3:case 4:var a=r.stateNode.containerInfo,s=ZS(e);ay(e,s,a);break;default:throw Error(te(161))}}catch(u){wt(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function eB(e,t,n){ue=e,mR(e)}function mR(e,t,n){for(var r=(e.mode&1)!==0;ue!==null;){var o=ue,i=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||uf;if(!a){var s=o.alternate,u=s!==null&&s.memoizedState!==null||hn;s=uf;var l=hn;if(uf=a,(hn=u)&&!l)for(ue=o;ue!==null;)a=ue,u=a.child,a.tag===22&&a.memoizedState!==null?r2(o):u!==null?(u.return=a,ue=u):r2(o);for(;i!==null;)ue=i,mR(i),i=i.sibling;ue=o,uf=s,hn=l}t2(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,ue=i):t2(e)}}function t2(e){for(;ue!==null;){var t=ue;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:hn||ev(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!hn)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:qr(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&LS(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}LS(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&gc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}hn||t.flags&512&&iy(t)}catch(f){wt(t,t.return,f)}}if(t===e){ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,ue=n;break}ue=t.return}}function n2(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ue=n;break}ue=t.return}}function r2(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ev(4,t)}catch(u){wt(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(u){wt(t,o,u)}}var i=t.return;try{iy(t)}catch(u){wt(t,i,u)}break;case 5:var a=t.return;try{iy(t)}catch(u){wt(t,a,u)}}}catch(u){wt(t,t.return,u)}if(t===e){ue=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ue=s;break}ue=t.return}}var tB=Math.ceil,qh=mi.ReactCurrentDispatcher,cb=mi.ReactCurrentOwner,Or=mi.ReactCurrentBatchConfig,$e=0,Gt=null,Pt=null,on=0,Jn=0,js=ca(0),Nt=0,Rc=null,Qa=0,tv=0,db=0,Kl=null,Mn=null,fb=0,Au=1/0,Xo=null,Kh=!1,uy=null,Xi=null,lf=!1,Wi=null,Xh=0,Xl=0,ly=null,th=-1,nh=0;function kn(){return $e&6?Et():th!==-1?th:th=Et()}function Yi(e){return e.mode&1?$e&2&&on!==0?on&-on:L4.transition!==null?(nh===0&&(nh=Zk()),nh):(e=Ye,e!==0||(e=window.event,e=e===void 0?16:aT(e.type)),e):1}function to(e,t,n,r){if(50<Xl)throw Xl=0,ly=null,Error(te(185));od(e,n,r),(!($e&2)||e!==Gt)&&(e===Gt&&(!($e&2)&&(tv|=n),Nt===4&&Li(e,on)),zn(e,r),n===1&&$e===0&&!(t.mode&1)&&(Au=Et()+500,Qp&&da()))}function zn(e,t){var n=e.callbackNode;L3(e,t);var r=Dh(e,e===Gt?on:0);if(r===0)n!==null&&fS(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&fS(n),t===1)e.tag===0?B4(o2.bind(null,e)):ET(o2.bind(null,e)),M4(function(){!($e&6)&&da()}),n=null;else{switch(eT(r)){case 1:n=L1;break;case 4:n=Qk;break;case 16:n=Ah;break;case 536870912:n=Jk;break;default:n=Ah}n=_R(n,gR.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function gR(e,t){if(th=-1,nh=0,$e&6)throw Error(te(327));var n=e.callbackNode;if(uu()&&e.callbackNode!==n)return null;var r=Dh(e,e===Gt?on:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Yh(e,r);else{t=r;var o=$e;$e|=2;var i=bR();(Gt!==e||on!==t)&&(Xo=null,Au=Et()+500,$a(e,t));do try{oB();break}catch(s){yR(e,s)}while(!0);Q1(),qh.current=i,$e=o,Pt!==null?t=0:(Gt=null,on=0,t=Nt)}if(t!==0){if(t===2&&(o=F0(e),o!==0&&(r=o,t=cy(e,o))),t===1)throw n=Rc,$a(e,0),Li(e,r),zn(e,Et()),n;if(t===6)Li(e,r);else{if(o=e.current.alternate,!(r&30)&&!nB(o)&&(t=Yh(e,r),t===2&&(i=F0(e),i!==0&&(r=i,t=cy(e,i))),t===1))throw n=Rc,$a(e,0),Li(e,r),zn(e,Et()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(te(345));case 2:Ca(e,Mn,Xo);break;case 3:if(Li(e,r),(r&130023424)===r&&(t=fb+500-Et(),10<t)){if(Dh(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){kn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=U0(Ca.bind(null,e,Mn,Xo),t);break}Ca(e,Mn,Xo);break;case 4:if(Li(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-eo(r);i=1<<a,a=t[a],a>o&&(o=a),r&=~i}if(r=o,r=Et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tB(r/1960))-r,10<r){e.timeoutHandle=U0(Ca.bind(null,e,Mn,Xo),r);break}Ca(e,Mn,Xo);break;case 5:Ca(e,Mn,Xo);break;default:throw Error(te(329))}}}return zn(e,Et()),e.callbackNode===n?gR.bind(null,e):null}function cy(e,t){var n=Kl;return e.current.memoizedState.isDehydrated&&($a(e,t).flags|=256),e=Yh(e,t),e!==2&&(t=Mn,Mn=n,t!==null&&dy(t)),e}function dy(e){Mn===null?Mn=e:Mn.push.apply(Mn,e)}function nB(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!ro(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Li(e,t){for(t&=~db,t&=~tv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-eo(t),r=1<<n;e[n]=-1,t&=~r}}function o2(e){if($e&6)throw Error(te(327));uu();var t=Dh(e,0);if(!(t&1))return zn(e,Et()),null;var n=Yh(e,t);if(e.tag!==0&&n===2){var r=F0(e);r!==0&&(t=r,n=cy(e,r))}if(n===1)throw n=Rc,$a(e,0),Li(e,t),zn(e,Et()),n;if(n===6)throw Error(te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ca(e,Mn,Xo),zn(e,Et()),null}function hb(e,t){var n=$e;$e|=1;try{return e(t)}finally{$e=n,$e===0&&(Au=Et()+500,Qp&&da())}}function Ja(e){Wi!==null&&Wi.tag===0&&!($e&6)&&uu();var t=$e;$e|=1;var n=Or.transition,r=Ye;try{if(Or.transition=null,Ye=1,e)return e()}finally{Ye=r,Or.transition=n,$e=t,!($e&6)&&da()}}function pb(){Jn=js.current,at(js)}function $a(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,D4(n)),Pt!==null)for(n=Pt.return;n!==null;){var r=n;switch(K1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bh();break;case 3:Pu(),at(Ln),at(yn),rb();break;case 5:nb(r);break;case 4:Pu();break;case 13:at(dt);break;case 19:at(dt);break;case 10:J1(r.type._context);break;case 22:case 23:pb()}n=n.return}if(Gt=e,Pt=e=Qi(e.current,null),on=Jn=t,Nt=0,Rc=null,db=tv=Qa=0,Mn=Kl=null,Ma!==null){for(t=0;t<Ma.length;t++)if(n=Ma[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=o,r.next=a}n.pending=r}Ma=null}return e}function yR(e,t){do{var n=Pt;try{if(Q1(),Jf.current=Gh,Hh){for(var r=vt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Hh=!1}if(Ya=0,Ht=Ot=vt=null,Gl=!1,Ec=0,cb.current=null,n===null||n.return===null){Nt=1,Rc=t,Pt=null;break}e:{var i=e,a=n.return,s=n,u=t;if(t=on,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=HS(a);if(h!==null){h.flags&=-257,GS(h,a,s,i,t),h.mode&1&&US(i,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var v=new Set;v.add(u),t.updateQueue=v}else p.add(u);break e}else{if(!(t&1)){US(i,l,t),vb();break e}u=Error(te(426))}}else if(lt&&s.mode&1){var y=HS(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),GS(y,a,s,i,t),X1(Iu(u,s));break e}}i=u=Iu(u,s),Nt!==4&&(Nt=2),Kl===null?Kl=[i]:Kl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=tR(i,u,t);BS(i,m);break e;case 1:s=u;var g=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Xi===null||!Xi.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=nR(i,s,t);BS(i,x);break e}}i=i.return}while(i!==null)}wR(n)}catch(w){t=w,Pt===n&&n!==null&&(Pt=n=n.return);continue}break}while(!0)}function bR(){var e=qh.current;return qh.current=Gh,e===null?Gh:e}function vb(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Gt===null||!(Qa&268435455)&&!(tv&268435455)||Li(Gt,on)}function Yh(e,t){var n=$e;$e|=2;var r=bR();(Gt!==e||on!==t)&&(Xo=null,$a(e,t));do try{rB();break}catch(o){yR(e,o)}while(!0);if(Q1(),$e=n,qh.current=r,Pt!==null)throw Error(te(261));return Gt=null,on=0,Nt}function rB(){for(;Pt!==null;)xR(Pt)}function oB(){for(;Pt!==null&&!P3();)xR(Pt)}function xR(e){var t=CR(e.alternate,e,Jn);e.memoizedProps=e.pendingProps,t===null?wR(e):Pt=t,cb.current=null}function wR(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Q4(n,t),n!==null){n.flags&=32767,Pt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Nt=6,Pt=null;return}}else if(n=Y4(n,t,Jn),n!==null){Pt=n;return}if(t=t.sibling,t!==null){Pt=t;return}Pt=t=e}while(t!==null);Nt===0&&(Nt=5)}function Ca(e,t,n){var r=Ye,o=Or.transition;try{Or.transition=null,Ye=1,iB(e,t,n,r)}finally{Or.transition=o,Ye=r}return null}function iB(e,t,n,r){do uu();while(Wi!==null);if($e&6)throw Error(te(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if($3(e,i),e===Gt&&(Pt=Gt=null,on=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lf||(lf=!0,_R(Ah,function(){return uu(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Or.transition,Or.transition=null;var a=Ye;Ye=1;var s=$e;$e|=4,cb.current=null,Z4(e,n),vR(n,e),E4(V0),Mh=!!W0,V0=W0=null,e.current=n,eB(n),I3(),$e=s,Ye=a,Or.transition=i}else e.current=n;if(lf&&(lf=!1,Wi=e,Xh=o),i=e.pendingLanes,i===0&&(Xi=null),M3(n.stateNode),zn(e,Et()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Kh)throw Kh=!1,e=uy,uy=null,e;return Xh&1&&e.tag!==0&&uu(),i=e.pendingLanes,i&1?e===ly?Xl++:(Xl=0,ly=e):Xl=0,da(),null}function uu(){if(Wi!==null){var e=eT(Xh),t=Or.transition,n=Ye;try{if(Or.transition=null,Ye=16>e?16:e,Wi===null)var r=!1;else{if(e=Wi,Wi=null,Xh=0,$e&6)throw Error(te(331));var o=$e;for($e|=4,ue=e.current;ue!==null;){var i=ue,a=i.child;if(ue.flags&16){var s=i.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(ue=l;ue!==null;){var c=ue;switch(c.tag){case 0:case 11:case 15:ql(8,c,i)}var d=c.child;if(d!==null)d.return=c,ue=d;else for(;ue!==null;){c=ue;var f=c.sibling,h=c.return;if(fR(c),c===l){ue=null;break}if(f!==null){f.return=h,ue=f;break}ue=h}}}var p=i.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}ue=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ue=a;else e:for(;ue!==null;){if(i=ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ql(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,ue=m;break e}ue=i.return}}var g=e.current;for(ue=g;ue!==null;){a=ue;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,ue=b;else e:for(a=g;ue!==null;){if(s=ue,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:ev(9,s)}}catch(w){wt(s,s.return,w)}if(s===a){ue=null;break e}var x=s.sibling;if(x!==null){x.return=s.return,ue=x;break e}ue=s.return}}if($e=o,da(),Eo&&typeof Eo.onPostCommitFiberRoot=="function")try{Eo.onPostCommitFiberRoot(Gp,e)}catch{}r=!0}return r}finally{Ye=n,Or.transition=t}}return!1}function i2(e,t,n){t=Iu(n,t),t=tR(e,t,1),e=Ki(e,t,1),t=kn(),e!==null&&(od(e,1,t),zn(e,t))}function wt(e,t,n){if(e.tag===3)i2(e,e,n);else for(;t!==null;){if(t.tag===3){i2(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xi===null||!Xi.has(r))){e=Iu(n,e),e=nR(t,e,1),t=Ki(t,e,1),e=kn(),t!==null&&(od(t,1,e),zn(t,e));break}}t=t.return}}function aB(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=kn(),e.pingedLanes|=e.suspendedLanes&n,Gt===e&&(on&n)===n&&(Nt===4||Nt===3&&(on&130023424)===on&&500>Et()-fb?$a(e,0):db|=n),zn(e,t)}function SR(e,t){t===0&&(e.mode&1?(t=Jd,Jd<<=1,!(Jd&130023424)&&(Jd=4194304)):t=1);var n=kn();e=di(e,t),e!==null&&(od(e,t,n),zn(e,n))}function sB(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),SR(e,n)}function uB(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(t),SR(e,n)}var CR;CR=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ln.current)Bn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Bn=!1,X4(e,t,n);Bn=!!(e.flags&131072)}else Bn=!1,lt&&t.flags&1048576&&kT(t,zh,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;eh(e,t),e=t.pendingProps;var o=ku(t,yn.current);su(t,n),o=ib(null,t,r,e,o,n);var i=ab();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$n(r)?(i=!0,Lh(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,eb(t),o.updater=Jp,t.stateNode=o,o._reactInternals=t,Q0(t,r,e,n),t=ey(null,t,r,!0,i,n)):(t.tag=0,lt&&i&&q1(t),_n(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(eh(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=cB(r),e=qr(r,e),o){case 0:t=Z0(null,t,r,e,n);break e;case 1:t=XS(null,t,r,e,n);break e;case 11:t=qS(null,t,r,e,n);break e;case 14:t=KS(null,t,r,qr(r.type,e),n);break e}throw Error(te(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qr(r,o),Z0(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qr(r,o),XS(e,t,r,o,n);case 3:e:{if(aR(t),e===null)throw Error(te(387));r=t.pendingProps,i=t.memoizedState,o=i.element,IT(e,t),jh(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=Iu(Error(te(423)),t),t=YS(e,t,r,n,o);break e}else if(r!==o){o=Iu(Error(te(424)),t),t=YS(e,t,r,n,o);break e}else for(or=qi(t.stateNode.containerInfo.firstChild),cr=t,lt=!0,Xr=null,n=OT(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Tu(),r===o){t=fi(e,t,n);break e}_n(e,t,r,n)}t=t.child}return t;case 5:return NT(t),e===null&&K0(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,a=o.children,j0(r,o)?a=null:i!==null&&j0(r,i)&&(t.flags|=32),iR(e,t),_n(e,t,a,n),t.child;case 6:return e===null&&K0(t),null;case 13:return sR(e,t,n);case 4:return tb(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ru(t,null,r,n):_n(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qr(r,o),qS(e,t,r,o,n);case 7:return _n(e,t,t.pendingProps,n),t.child;case 8:return _n(e,t,t.pendingProps.children,n),t.child;case 12:return _n(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,a=o.value,et(Wh,r._currentValue),r._currentValue=a,i!==null)if(ro(i.value,a)){if(i.children===o.children&&!Ln.current){t=fi(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){a=i.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=oi(-1,n&-n),u.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),X0(i.return,n,t),s.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(te(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),X0(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}_n(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,su(t,n),o=Br(o),r=r(o),t.flags|=1,_n(e,t,r,n),t.child;case 14:return r=t.type,o=qr(r,t.pendingProps),o=qr(r.type,o),KS(e,t,r,o,n);case 15:return rR(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qr(r,o),eh(e,t),t.tag=1,$n(r)?(e=!0,Lh(t)):e=!1,su(t,n),DT(t,r,o),Q0(t,r,o,n),ey(null,t,r,!0,e,n);case 19:return uR(e,t,n);case 22:return oR(e,t,n)}throw Error(te(156,t.tag))};function _R(e,t){return Yk(e,t)}function lB(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(e,t,n,r){return new lB(e,t,n,r)}function mb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cB(e){if(typeof e=="function")return mb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===N1)return 11;if(e===F1)return 14}return 2}function Qi(e,t){var n=e.alternate;return n===null?(n=Ar(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function rh(e,t,n,r,o,i){var a=2;if(r=e,typeof e=="function")mb(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Ms:return za(n.children,o,i,t);case O1:a=8,o|=8;break;case w0:return e=Ar(12,n,t,o|2),e.elementType=w0,e.lanes=i,e;case S0:return e=Ar(13,n,t,o),e.elementType=S0,e.lanes=i,e;case C0:return e=Ar(19,n,t,o),e.elementType=C0,e.lanes=i,e;case Mk:return nv(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ak:a=10;break e;case Dk:a=9;break e;case N1:a=11;break e;case F1:a=14;break e;case Oi:a=16,r=null;break e}throw Error(te(130,e==null?e:typeof e,""))}return t=Ar(a,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function za(e,t,n,r){return e=Ar(7,e,r,t),e.lanes=n,e}function nv(e,t,n,r){return e=Ar(22,e,r,t),e.elementType=Mk,e.lanes=n,e.stateNode={isHidden:!1},e}function Um(e,t,n){return e=Ar(6,e,null,t),e.lanes=n,e}function Hm(e,t,n){return t=Ar(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dB(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Em(0),this.expirationTimes=Em(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Em(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function gb(e,t,n,r,o,i,a,s,u){return e=new dB(e,t,n,s,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ar(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eb(i),e}function fB(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ds,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ER(e){if(!e)return oa;e=e._reactInternals;e:{if(os(e)!==e||e.tag!==1)throw Error(te(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($n(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(te(171))}if(e.tag===1){var n=e.type;if($n(n))return _T(e,n,t)}return t}function kR(e,t,n,r,o,i,a,s,u){return e=gb(n,r,!0,e,o,i,a,s,u),e.context=ER(null),n=e.current,r=kn(),o=Yi(n),i=oi(r,o),i.callback=t??null,Ki(n,i,o),e.current.lanes=o,od(e,o,r),zn(e,r),e}function rv(e,t,n,r){var o=t.current,i=kn(),a=Yi(o);return n=ER(n),t.context===null?t.context=n:t.pendingContext=n,t=oi(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ki(o,t,a),e!==null&&(to(e,o,a,i),Qf(e,o,a)),a}function Qh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function a2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function yb(e,t){a2(e,t),(e=e.alternate)&&a2(e,t)}function hB(){return null}var TR=typeof reportError=="function"?reportError:function(e){console.error(e)};function bb(e){this._internalRoot=e}ov.prototype.render=bb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));rv(e,t,null,null)};ov.prototype.unmount=bb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ja(function(){rv(null,e,null,null)}),t[ci]=null}};function ov(e){this._internalRoot=e}ov.prototype.unstable_scheduleHydration=function(e){if(e){var t=rT();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bi.length&&t!==0&&t<Bi[n].priority;n++);Bi.splice(n,0,e),n===0&&iT(e)}};function xb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function iv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function s2(){}function pB(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var l=Qh(a);i.call(l)}}var a=kR(t,r,e,0,null,!1,!1,"",s2);return e._reactRootContainer=a,e[ci]=a.current,xc(e.nodeType===8?e.parentNode:e),Ja(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var s=r;r=function(){var l=Qh(u);s.call(l)}}var u=gb(e,0,!1,null,null,!1,!1,"",s2);return e._reactRootContainer=u,e[ci]=u.current,xc(e.nodeType===8?e.parentNode:e),Ja(function(){rv(t,u,n,r)}),u}function av(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if(typeof o=="function"){var s=o;o=function(){var u=Qh(a);s.call(u)}}rv(t,a,e,o)}else a=pB(n,t,e,o,r);return Qh(a)}tT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Al(t.pendingLanes);n!==0&&($1(t,n|1),zn(t,Et()),!($e&6)&&(Au=Et()+500,da()))}break;case 13:Ja(function(){var r=di(e,1);if(r!==null){var o=kn();to(r,e,1,o)}}),yb(e,1)}};z1=function(e){if(e.tag===13){var t=di(e,134217728);if(t!==null){var n=kn();to(t,e,134217728,n)}yb(e,134217728)}};nT=function(e){if(e.tag===13){var t=Yi(e),n=di(e,t);if(n!==null){var r=kn();to(n,e,t,r)}yb(e,t)}};rT=function(){return Ye};oT=function(e,t){var n=Ye;try{return Ye=e,t()}finally{Ye=n}};M0=function(e,t,n){switch(t){case"input":if(k0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Yp(r);if(!o)throw Error(te(90));Nk(r),k0(r,o)}}}break;case"textarea":Bk(e,n);break;case"select":t=n.value,t!=null&&ru(e,!!n.multiple,t,!1)}};Uk=hb;Hk=Ja;var vB={usingClientEntryPoint:!1,Events:[ad,Bs,Yp,Vk,jk,hb]},pl={findFiberByHostInstance:Da,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},mB={bundleType:pl.bundleType,version:pl.version,rendererPackageName:pl.rendererPackageName,rendererConfig:pl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kk(e),e===null?null:e.stateNode},findFiberByHostInstance:pl.findFiberByHostInstance||hB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cf.isDisabled&&cf.supportsFiber)try{Gp=cf.inject(mB),Eo=cf}catch{}}yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vB;yr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xb(t))throw Error(te(200));return fB(e,t,null,n)};yr.createRoot=function(e,t){if(!xb(e))throw Error(te(299));var n=!1,r="",o=TR;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=gb(e,1,!1,null,null,n,!1,r,o),e[ci]=t.current,xc(e.nodeType===8?e.parentNode:e),new bb(t)};yr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=Kk(t),e=e===null?null:e.stateNode,e};yr.flushSync=function(e){return Ja(e)};yr.hydrate=function(e,t,n){if(!iv(t))throw Error(te(200));return av(null,e,t,!0,n)};yr.hydrateRoot=function(e,t,n){if(!xb(e))throw Error(te(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",a=TR;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=kR(t,null,e,1,n??null,o,!1,i,a),e[ci]=t.current,xc(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new ov(t)};yr.render=function(e,t,n){if(!iv(t))throw Error(te(200));return av(null,e,t,!1,n)};yr.unmountComponentAtNode=function(e){if(!iv(e))throw Error(te(40));return e._reactRootContainer?(Ja(function(){av(null,null,e,!1,function(){e._reactRootContainer=null,e[ci]=null})}),!0):!1};yr.unstable_batchedUpdates=hb;yr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!iv(n))throw Error(te(200));if(e==null||e._reactInternals===void 0)throw Error(te(38));return av(e,t,n,!1,r)};yr.version="18.2.0-next-9e3b772b8-20220608";function RR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RR)}catch(e){console.error(e)}}RR(),kk.exports=yr;var ud=kk.exports,u2=ud;b0.createRoot=u2.createRoot,b0.hydrateRoot=u2.hydrateRoot;function gB(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function yB(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var bB=function(){function e(n){var r=this;this._insertTag=function(o){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(o,i),r.tags.push(o)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(yB(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var i=gB(o);try{i.insertRule(r,i.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),dn="-ms-",Jh="-moz-",Ue="-webkit-",PR="comm",wb="rule",Sb="decl",xB="@import",IR="@keyframes",wB="@layer",SB=Math.abs,sv=String.fromCharCode,CB=Object.assign;function _B(e,t){return nn(e,0)^45?(((t<<2^nn(e,0))<<2^nn(e,1))<<2^nn(e,2))<<2^nn(e,3):0}function AR(e){return e.trim()}function EB(e,t){return(e=t.exec(e))?e[0]:e}function He(e,t,n){return e.replace(t,n)}function fy(e,t){return e.indexOf(t)}function nn(e,t){return e.charCodeAt(t)|0}function Pc(e,t,n){return e.slice(t,n)}function ho(e){return e.length}function Cb(e){return e.length}function df(e,t){return t.push(e),e}function kB(e,t){return e.map(t).join("")}var uv=1,Du=1,DR=0,Hn=0,Rt=0,Yu="";function lv(e,t,n,r,o,i,a){return{value:e,root:t,parent:n,type:r,props:o,children:i,line:uv,column:Du,length:a,return:""}}function vl(e,t){return CB(lv("",null,null,"",null,null,0),e,{length:-e.length},t)}function TB(){return Rt}function RB(){return Rt=Hn>0?nn(Yu,--Hn):0,Du--,Rt===10&&(Du=1,uv--),Rt}function dr(){return Rt=Hn<DR?nn(Yu,Hn++):0,Du++,Rt===10&&(Du=1,uv++),Rt}function To(){return nn(Yu,Hn)}function oh(){return Hn}function ld(e,t){return Pc(Yu,e,t)}function Ic(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function MR(e){return uv=Du=1,DR=ho(Yu=e),Hn=0,[]}function OR(e){return Yu="",e}function ih(e){return AR(ld(Hn-1,hy(e===91?e+2:e===40?e+1:e)))}function PB(e){for(;(Rt=To())&&Rt<33;)dr();return Ic(e)>2||Ic(Rt)>3?"":" "}function IB(e,t){for(;--t&&dr()&&!(Rt<48||Rt>102||Rt>57&&Rt<65||Rt>70&&Rt<97););return ld(e,oh()+(t<6&&To()==32&&dr()==32))}function hy(e){for(;dr();)switch(Rt){case e:return Hn;case 34:case 39:e!==34&&e!==39&&hy(Rt);break;case 40:e===41&&hy(e);break;case 92:dr();break}return Hn}function AB(e,t){for(;dr()&&e+Rt!==57;)if(e+Rt===84&&To()===47)break;return"/*"+ld(t,Hn-1)+"*"+sv(e===47?e:dr())}function DB(e){for(;!Ic(To());)dr();return ld(e,Hn)}function MB(e){return OR(ah("",null,null,null,[""],e=MR(e),0,[0],e))}function ah(e,t,n,r,o,i,a,s,u){for(var l=0,c=0,d=a,f=0,h=0,p=0,v=1,y=1,m=1,g=0,b="",x=o,w=i,S=r,C=b;y;)switch(p=g,g=dr()){case 40:if(p!=108&&nn(C,d-1)==58){fy(C+=He(ih(g),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:C+=ih(g);break;case 9:case 10:case 13:case 32:C+=PB(p);break;case 92:C+=IB(oh()-1,7);continue;case 47:switch(To()){case 42:case 47:df(OB(AB(dr(),oh()),t,n),u);break;default:C+="/"}break;case 123*v:s[l++]=ho(C)*m;case 125*v:case 59:case 0:switch(g){case 0:case 125:y=0;case 59+c:m==-1&&(C=He(C,/\f/g,"")),h>0&&ho(C)-d&&df(h>32?c2(C+";",r,n,d-1):c2(He(C," ","")+";",r,n,d-2),u);break;case 59:C+=";";default:if(df(S=l2(C,t,n,l,c,o,s,b,x=[],w=[],d),i),g===123)if(c===0)ah(C,t,S,S,x,i,d,s,w);else switch(f===99&&nn(C,3)===110?100:f){case 100:case 108:case 109:case 115:ah(e,S,S,r&&df(l2(e,S,S,0,0,o,s,b,o,x=[],d),w),o,w,d,s,r?x:w);break;default:ah(C,S,S,S,[""],w,0,s,w)}}l=c=h=0,v=m=1,b=C="",d=a;break;case 58:d=1+ho(C),h=p;default:if(v<1){if(g==123)--v;else if(g==125&&v++==0&&RB()==125)continue}switch(C+=sv(g),g*v){case 38:m=c>0?1:(C+="\f",-1);break;case 44:s[l++]=(ho(C)-1)*m,m=1;break;case 64:To()===45&&(C+=ih(dr())),f=To(),c=d=ho(b=C+=DB(oh())),g++;break;case 45:p===45&&ho(C)==2&&(v=0)}}return i}function l2(e,t,n,r,o,i,a,s,u,l,c){for(var d=o-1,f=o===0?i:[""],h=Cb(f),p=0,v=0,y=0;p<r;++p)for(var m=0,g=Pc(e,d+1,d=SB(v=a[p])),b=e;m<h;++m)(b=AR(v>0?f[m]+" "+g:He(g,/&\f/g,f[m])))&&(u[y++]=b);return lv(e,t,n,o===0?wb:s,u,l,c)}function OB(e,t,n){return lv(e,t,n,PR,sv(TB()),Pc(e,2,-2),0)}function c2(e,t,n,r){return lv(e,t,n,Sb,Pc(e,0,r),Pc(e,r+1,-1),r)}function lu(e,t){for(var n="",r=Cb(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function NB(e,t,n,r){switch(e.type){case wB:if(e.children.length)break;case xB:case Sb:return e.return=e.return||e.value;case PR:return"";case IR:return e.return=e.value+"{"+lu(e.children,r)+"}";case wb:e.value=e.props.join(",")}return ho(n=lu(e.children,r))?e.return=e.value+"{"+n+"}":""}function FB(e){var t=Cb(e);return function(n,r,o,i){for(var a="",s=0;s<t;s++)a+=e[s](n,r,o,i)||"";return a}}function BB(e){return function(t){t.root||(t=t.return)&&e(t)}}var d2=function(t){var n=new WeakMap;return function(r){if(n.has(r))return n.get(r);var o=t(r);return n.set(r,o),o}};function NR(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var LB=function(t,n,r){for(var o=0,i=0;o=i,i=To(),o===38&&i===12&&(n[r]=1),!Ic(i);)dr();return ld(t,Hn)},$B=function(t,n){var r=-1,o=44;do switch(Ic(o)){case 0:o===38&&To()===12&&(n[r]=1),t[r]+=LB(Hn-1,n,r);break;case 2:t[r]+=ih(o);break;case 4:if(o===44){t[++r]=To()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=sv(o)}while(o=dr());return t},zB=function(t,n){return OR($B(MR(t),n))},f2=new WeakMap,WB=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,o=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!f2.get(r))&&!o){f2.set(t,!0);for(var i=[],a=zB(n,i),s=r.props,u=0,l=0;u<a.length;u++)for(var c=0;c<s.length;c++,l++)t.props[l]=i[u]?a[u].replace(/&\f/g,s[c]):s[c]+" "+a[u]}}},VB=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function FR(e,t){switch(_B(e,t)){case 5103:return Ue+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ue+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ue+e+Jh+e+dn+e+e;case 6828:case 4268:return Ue+e+dn+e+e;case 6165:return Ue+e+dn+"flex-"+e+e;case 5187:return Ue+e+He(e,/(\w+).+(:[^]+)/,Ue+"box-$1$2"+dn+"flex-$1$2")+e;case 5443:return Ue+e+dn+"flex-item-"+He(e,/flex-|-self/,"")+e;case 4675:return Ue+e+dn+"flex-line-pack"+He(e,/align-content|flex-|-self/,"")+e;case 5548:return Ue+e+dn+He(e,"shrink","negative")+e;case 5292:return Ue+e+dn+He(e,"basis","preferred-size")+e;case 6060:return Ue+"box-"+He(e,"-grow","")+Ue+e+dn+He(e,"grow","positive")+e;case 4554:return Ue+He(e,/([^-])(transform)/g,"$1"+Ue+"$2")+e;case 6187:return He(He(He(e,/(zoom-|grab)/,Ue+"$1"),/(image-set)/,Ue+"$1"),e,"")+e;case 5495:case 3959:return He(e,/(image-set\([^]*)/,Ue+"$1$`$1");case 4968:return He(He(e,/(.+:)(flex-)?(.*)/,Ue+"box-pack:$3"+dn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ue+e+e;case 4095:case 3583:case 4068:case 2532:return He(e,/(.+)-inline(.+)/,Ue+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ho(e)-1-t>6)switch(nn(e,t+1)){case 109:if(nn(e,t+4)!==45)break;case 102:return He(e,/(.+:)(.+)-([^]+)/,"$1"+Ue+"$2-$3$1"+Jh+(nn(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~fy(e,"stretch")?FR(He(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(nn(e,t+1)!==115)break;case 6444:switch(nn(e,ho(e)-3-(~fy(e,"!important")&&10))){case 107:return He(e,":",":"+Ue)+e;case 101:return He(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ue+(nn(e,14)===45?"inline-":"")+"box$3$1"+Ue+"$2$3$1"+dn+"$2box$3")+e}break;case 5936:switch(nn(e,t+11)){case 114:return Ue+e+dn+He(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ue+e+dn+He(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ue+e+dn+He(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ue+e+dn+e+e}return e}var jB=function(t,n,r,o){if(t.length>-1&&!t.return)switch(t.type){case Sb:t.return=FR(t.value,t.length);break;case IR:return lu([vl(t,{value:He(t.value,"@","@"+Ue)})],o);case wb:if(t.length)return kB(t.props,function(i){switch(EB(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return lu([vl(t,{props:[He(i,/:(read-\w+)/,":"+Jh+"$1")]})],o);case"::placeholder":return lu([vl(t,{props:[He(i,/:(plac\w+)/,":"+Ue+"input-$1")]}),vl(t,{props:[He(i,/:(plac\w+)/,":"+Jh+"$1")]}),vl(t,{props:[He(i,/:(plac\w+)/,dn+"input-$1")]})],o)}return""})}},UB=[jB],HB=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var y=v.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var o=t.stylisPlugins||UB,i={},a,s=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var y=v.getAttribute("data-emotion").split(" "),m=1;m<y.length;m++)i[y[m]]=!0;s.push(v)});var u,l=[WB,VB];{var c,d=[NB,BB(function(v){c.insert(v)})],f=FB(l.concat(o,d)),h=function(y){return lu(MB(y),f)};u=function(y,m,g,b){c=g,h(y?y+"{"+m.styles+"}":m.styles),b&&(p.inserted[m.name]=!0)}}var p={key:n,sheet:new bB({key:n,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:u};return p.sheet.hydrate(s),p};function Za(){return Za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Za.apply(this,arguments)}var BR={exports:{}},Qe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xt=typeof Symbol=="function"&&Symbol.for,_b=Xt?Symbol.for("react.element"):60103,Eb=Xt?Symbol.for("react.portal"):60106,cv=Xt?Symbol.for("react.fragment"):60107,dv=Xt?Symbol.for("react.strict_mode"):60108,fv=Xt?Symbol.for("react.profiler"):60114,hv=Xt?Symbol.for("react.provider"):60109,pv=Xt?Symbol.for("react.context"):60110,kb=Xt?Symbol.for("react.async_mode"):60111,vv=Xt?Symbol.for("react.concurrent_mode"):60111,mv=Xt?Symbol.for("react.forward_ref"):60112,gv=Xt?Symbol.for("react.suspense"):60113,GB=Xt?Symbol.for("react.suspense_list"):60120,yv=Xt?Symbol.for("react.memo"):60115,bv=Xt?Symbol.for("react.lazy"):60116,qB=Xt?Symbol.for("react.block"):60121,KB=Xt?Symbol.for("react.fundamental"):60117,XB=Xt?Symbol.for("react.responder"):60118,YB=Xt?Symbol.for("react.scope"):60119;function xr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case _b:switch(e=e.type,e){case kb:case vv:case cv:case fv:case dv:case gv:return e;default:switch(e=e&&e.$$typeof,e){case pv:case mv:case bv:case yv:case hv:return e;default:return t}}case Eb:return t}}}function LR(e){return xr(e)===vv}Qe.AsyncMode=kb;Qe.ConcurrentMode=vv;Qe.ContextConsumer=pv;Qe.ContextProvider=hv;Qe.Element=_b;Qe.ForwardRef=mv;Qe.Fragment=cv;Qe.Lazy=bv;Qe.Memo=yv;Qe.Portal=Eb;Qe.Profiler=fv;Qe.StrictMode=dv;Qe.Suspense=gv;Qe.isAsyncMode=function(e){return LR(e)||xr(e)===kb};Qe.isConcurrentMode=LR;Qe.isContextConsumer=function(e){return xr(e)===pv};Qe.isContextProvider=function(e){return xr(e)===hv};Qe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===_b};Qe.isForwardRef=function(e){return xr(e)===mv};Qe.isFragment=function(e){return xr(e)===cv};Qe.isLazy=function(e){return xr(e)===bv};Qe.isMemo=function(e){return xr(e)===yv};Qe.isPortal=function(e){return xr(e)===Eb};Qe.isProfiler=function(e){return xr(e)===fv};Qe.isStrictMode=function(e){return xr(e)===dv};Qe.isSuspense=function(e){return xr(e)===gv};Qe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===cv||e===vv||e===fv||e===dv||e===gv||e===GB||typeof e=="object"&&e!==null&&(e.$$typeof===bv||e.$$typeof===yv||e.$$typeof===hv||e.$$typeof===pv||e.$$typeof===mv||e.$$typeof===KB||e.$$typeof===XB||e.$$typeof===YB||e.$$typeof===qB)};Qe.typeOf=xr;BR.exports=Qe;var QB=BR.exports,$R=QB,JB={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ZB={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},zR={};zR[$R.ForwardRef]=JB;zR[$R.Memo]=ZB;var eL=!0;function tL(e,t,n){var r="";return n.split(" ").forEach(function(o){e[o]!==void 0?t.push(e[o]+";"):r+=o+" "}),r}var WR=function(t,n,r){var o=t.key+"-"+n.name;(r===!1||eL===!1)&&t.registered[o]===void 0&&(t.registered[o]=n.styles)},VR=function(t,n,r){WR(t,n,r);var o=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var i=n;do t.insert(n===i?"."+o:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function nL(e){for(var t=0,n,r=0,o=e.length;o>=4;++r,o-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var rL={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},oL=/[A-Z]|^ms/g,iL=/_EMO_([^_]+?)_([^]*?)_EMO_/g,jR=function(t){return t.charCodeAt(1)===45},h2=function(t){return t!=null&&typeof t!="boolean"},Gm=NR(function(e){return jR(e)?e:e.replace(oL,"-$&").toLowerCase()}),p2=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(iL,function(r,o,i){return po={name:o,styles:i,next:po},o})}return rL[t]!==1&&!jR(t)&&typeof n=="number"&&n!==0?n+"px":n};function Ac(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return po={name:n.name,styles:n.styles,next:po},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)po={name:r.name,styles:r.styles,next:po},r=r.next;var o=n.styles+";";return o}return aL(e,t,n)}case"function":{if(e!==void 0){var i=po,a=n(e);return po=i,Ac(e,t,a)}break}}if(t==null)return n;var s=t[n];return s!==void 0?s:n}function aL(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=Ac(e,t,n[o])+";";else for(var i in n){var a=n[i];if(typeof a!="object")t!=null&&t[a]!==void 0?r+=i+"{"+t[a]+"}":h2(a)&&(r+=Gm(i)+":"+p2(i,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var s=0;s<a.length;s++)h2(a[s])&&(r+=Gm(i)+":"+p2(i,a[s])+";");else{var u=Ac(e,t,a);switch(i){case"animation":case"animationName":{r+=Gm(i)+":"+u+";";break}default:r+=i+"{"+u+"}"}}}return r}var v2=/label:\s*([^\s;\n{]+)\s*(;|$)/g,po,Tb=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var o=!0,i="";po=void 0;var a=t[0];a==null||a.raw===void 0?(o=!1,i+=Ac(r,n,a)):i+=a[0];for(var s=1;s<t.length;s++)i+=Ac(r,n,t[s]),o&&(i+=a[s]);v2.lastIndex=0;for(var u="",l;(l=v2.exec(i))!==null;)u+="-"+l[1];var c=nL(i)+u;return{name:c,styles:i,next:po}},sL=function(t){return t()},UR=nS.useInsertionEffect?nS.useInsertionEffect:!1,uL=UR||sL,m2=UR||T.useLayoutEffect,HR=T.createContext(typeof HTMLElement<"u"?HB({key:"css"}):null);HR.Provider;var GR=function(t){return T.forwardRef(function(n,r){var o=T.useContext(HR);return t(n,o,r)})},Dc=T.createContext({}),lL=function(t,n){if(typeof n=="function"){var r=n(t);return r}return Za({},t,n)},cL=d2(function(e){return d2(function(t){return lL(e,t)})}),dL=function(t){var n=T.useContext(Dc);return t.theme!==n&&(n=cL(n)(t.theme)),T.createElement(Dc.Provider,{value:n},t.children)},xv=GR(function(e,t){var n=e.styles,r=Tb([n],void 0,T.useContext(Dc)),o=T.useRef();return m2(function(){var i=t.key+"-global",a=new t.sheet.constructor({key:i,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),s=!1,u=document.querySelector('style[data-emotion="'+i+" "+r.name+'"]');return t.sheet.tags.length&&(a.before=t.sheet.tags[0]),u!==null&&(s=!0,u.setAttribute("data-emotion",i),a.hydrate([u])),o.current=[a,s],function(){a.flush()}},[t]),m2(function(){var i=o.current,a=i[0],s=i[1];if(s){i[1]=!1;return}if(r.next!==void 0&&VR(t,r.next,!0),a.tags.length){var u=a.tags[a.tags.length-1].nextElementSibling;a.before=u,a.flush()}t.insert("",r,a,!1)},[t,r.name]),null});function fL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Tb(t)}var hL=function(){var t=fL.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},qR=String.raw,KR=qR`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,pL=()=>L.jsx(xv,{styles:KR}),vL=({scope:e=""})=>L.jsx(xv,{styles:qR`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${e} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${e} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${e} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${e} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${e} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${e} :where(b, strong) {
        font-weight: bold;
      }

      ${e} small {
        font-size: 80%;
      }

      ${e} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${e} sub {
        bottom: -0.25em;
      }

      ${e} sup {
        top: -0.5em;
      }

      ${e} img {
        border-style: none;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${e} :where(button, input) {
        overflow: visible;
      }

      ${e} :where(button, select) {
        text-transform: none;
      }

      ${e} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${e} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${e} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${e} progress {
        vertical-align: baseline;
      }

      ${e} textarea {
        overflow: auto;
      }

      ${e} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${e} input[type="number"]::-webkit-inner-spin-button,
      ${e} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${e} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${e} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${e} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${e} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${e} details {
        display: block;
      }

      ${e} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${e} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${e} button {
        background: transparent;
        padding: 0;
      }

      ${e} fieldset {
        margin: 0;
        padding: 0;
      }

      ${e} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${e} textarea {
        resize: vertical;
      }

      ${e} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${e} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${e} table {
        border-collapse: collapse;
      }

      ${e} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${e} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${e} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${e} select::-ms-expand {
        display: none;
      }

      ${KR}
    `});function mL(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function In(e={}){const{name:t,strict:n=!0,hookName:r="useContext",providerName:o="Provider",errorMessage:i,defaultValue:a}=e,s=T.createContext(a);s.displayName=t;function u(){var l;const c=T.useContext(s);if(!c&&n){const d=new Error(i??mL(r,o));throw d.name="ContextError",(l=Error.captureStackTrace)==null||l.call(Error,d,u),d}return c}return[s.Provider,u,s]}var[gL,yL]=In({strict:!1,name:"PortalManagerContext"});function XR(e){const{children:t,zIndex:n}=e;return L.jsx(gL,{value:{zIndex:n},children:t})}XR.displayName="PortalManager";var Mc=globalThis!=null&&globalThis.document?T.useLayoutEffect:T.useEffect,[YR,bL]=In({strict:!1,name:"PortalContext"}),Rb="chakra-portal",xL=".chakra-portal",wL=e=>L.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),SL=e=>{const{appendToParentPortal:t,children:n}=e,[r,o]=T.useState(null),i=T.useRef(null),[,a]=T.useState({});T.useEffect(()=>a({}),[]);const s=bL(),u=yL();Mc(()=>{if(!r)return;const c=r.ownerDocument,d=t?s??c.body:c.body;if(!d)return;i.current=c.createElement("div"),i.current.className=Rb,d.appendChild(i.current),a({});const f=i.current;return()=>{d.contains(f)&&d.removeChild(f)}},[r]);const l=u!=null&&u.zIndex?L.jsx(wL,{zIndex:u==null?void 0:u.zIndex,children:n}):n;return i.current?ud.createPortal(L.jsx(YR,{value:i.current,children:l}),i.current):L.jsx("span",{ref:c=>{c&&o(c)}})},CL=e=>{const{children:t,containerRef:n,appendToParentPortal:r}=e,o=n.current,i=o??(typeof window<"u"?document.body:void 0),a=T.useMemo(()=>{const u=o==null?void 0:o.ownerDocument.createElement("div");return u&&(u.className=Rb),u},[o]),[,s]=T.useState({});return Mc(()=>s({}),[]),Mc(()=>{if(!(!a||!i))return i.appendChild(a),()=>{i.removeChild(a)}},[a,i]),i&&a?ud.createPortal(L.jsx(YR,{value:r?a:null,children:t}),a):null};function cd(e){const t={appendToParentPortal:!0,...e},{containerRef:n,...r}=t;return n?L.jsx(CL,{containerRef:n,...r}):L.jsx(SL,{...r})}cd.className=Rb;cd.selector=xL;cd.displayName="Portal";function dd(){const e=T.useContext(Dc);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}var Pb=T.createContext({});Pb.displayName="ColorModeContext";function Ib(){const e=T.useContext(Pb);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}var ff={light:"chakra-ui-light",dark:"chakra-ui-dark"};function _L(e={}){const{preventTransition:t=!0}=e,n={setDataset:r=>{const o=t?n.preventTransition():void 0;document.documentElement.dataset.theme=r,document.documentElement.style.colorScheme=r,o==null||o()},setClassName(r){document.body.classList.add(r?ff.dark:ff.light),document.body.classList.remove(r?ff.light:ff.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(r){var o;return((o=n.query().matches)!=null?o:r==="dark")?"dark":"light"},addListener(r){const o=n.query(),i=a=>{r(a.matches?"dark":"light")};return typeof o.addListener=="function"?o.addListener(i):o.addEventListener("change",i),()=>{typeof o.removeListener=="function"?o.removeListener(i):o.removeEventListener("change",i)}},preventTransition(){const r=document.createElement("style");return r.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(r)})})}}};return n}var EL="chakra-ui-color-mode";function kL(e){return{ssr:!1,type:"localStorage",get(t){if(!(globalThis!=null&&globalThis.document))return t;let n;try{n=localStorage.getItem(e)||t}catch{}return n||t},set(t){try{localStorage.setItem(e,t)}catch{}}}}var TL=kL(EL),g2=()=>{};function y2(e,t){return e.type==="cookie"&&e.ssr?e.get(t):t}function QR(e){const{value:t,children:n,options:{useSystemColorMode:r,initialColorMode:o,disableTransitionOnChange:i}={},colorModeManager:a=TL}=e,s=o==="dark"?"dark":"light",[u,l]=T.useState(()=>y2(a,s)),[c,d]=T.useState(()=>y2(a)),{getSystemTheme:f,setClassName:h,setDataset:p,addListener:v}=T.useMemo(()=>_L({preventTransition:i}),[i]),y=o==="system"&&!u?c:u,m=T.useCallback(x=>{const w=x==="system"?f():x;l(w),h(w==="dark"),p(w),a.set(w)},[a,f,h,p]);Mc(()=>{o==="system"&&d(f())},[]),T.useEffect(()=>{const x=a.get();if(x){m(x);return}if(o==="system"){m("system");return}m(s)},[a,s,o,m]);const g=T.useCallback(()=>{m(y==="dark"?"light":"dark")},[y,m]);T.useEffect(()=>{if(r)return v(m)},[r,v,m]);const b=T.useMemo(()=>({colorMode:t??y,toggleColorMode:t?g2:g,setColorMode:t?g2:m,forced:t!==void 0}),[y,g,m,t]);return L.jsx(Pb.Provider,{value:b,children:n})}QR.displayName="ColorModeProvider";function JR(){const e=Ib(),t=dd();return{...e,theme:t}}var Ze=(...e)=>e.filter(Boolean).join(" ");function Wn(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!Array.isArray(e)}function Jr(e,...t){return RL(e)?e(...t):e}var RL=e=>typeof e=="function",Zn=e=>e?"":void 0,qm=e=>e?!0:void 0;function So(...e){return function(n){e.some(r=>(r==null||r(n),n==null?void 0:n.defaultPrevented))}}function PL(...e){return function(n){e.forEach(r=>{r==null||r(n)})}}var Zh={exports:{}};Zh.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",o=800,i=16,a=9007199254740991,s="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Function]",p="[object GeneratorFunction]",v="[object Map]",y="[object Number]",m="[object Null]",g="[object Object]",b="[object Proxy]",x="[object RegExp]",w="[object Set]",S="[object String]",C="[object Undefined]",_="[object WeakMap]",k="[object ArrayBuffer]",E="[object DataView]",A="[object Float32Array]",D="[object Float64Array]",U="[object Int8Array]",H="[object Int16Array]",B="[object Int32Array]",V="[object Uint8Array]",M="[object Uint8ClampedArray]",O="[object Uint16Array]",F="[object Uint32Array]",$=/[\\^$.*+?()[\]{}|]/g,G=/^\[object .+?Constructor\]$/,Q=/^(?:0|[1-9]\d*)$/,J={};J[A]=J[D]=J[U]=J[H]=J[B]=J[V]=J[M]=J[O]=J[F]=!0,J[s]=J[u]=J[k]=J[c]=J[E]=J[d]=J[f]=J[h]=J[v]=J[y]=J[g]=J[x]=J[w]=J[S]=J[_]=!1;var ne=typeof Gd=="object"&&Gd&&Gd.Object===Object&&Gd,oe=typeof self=="object"&&self&&self.Object===Object&&self,ae=ne||oe||Function("return this")(),me=t&&!t.nodeType&&t,ve=me&&!0&&e&&!e.nodeType&&e,we=ve&&ve.exports===me,De=we&&ne.process,ge=function(){try{var I=ve&&ve.require&&ve.require("util").types;return I||De&&De.binding&&De.binding("util")}catch{}}(),Ie=ge&&ge.isTypedArray;function _e(I,W,K){switch(K.length){case 0:return I.call(W);case 1:return I.call(W,K[0]);case 2:return I.call(W,K[0],K[1]);case 3:return I.call(W,K[0],K[1],K[2])}return I.apply(W,K)}function ze(I,W){for(var K=-1,se=Array(I);++K<I;)se[K]=W(K);return se}function We(I){return function(W){return I(W)}}function Ve(I,W){return I==null?void 0:I[W]}function xn(I,W){return function(K){return I(W(K))}}var An=Array.prototype,Yt=Function.prototype,Dt=Object.prototype,Vt=ae["__core-js_shared__"],sn=Yt.toString,yt=Dt.hasOwnProperty,Xn=function(){var I=/[^.]+$/.exec(Vt&&Vt.keys&&Vt.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),wn=Dt.toString,Ci=sn.call(Object),jr=RegExp("^"+sn.call(yt).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jt=we?ae.Buffer:void 0,ps=ae.Symbol,Ld=ae.Uint8Array,$d=jt?jt.allocUnsafe:void 0,zd=xn(Object.getPrototypeOf,Object),vs=Object.create,nl=Dt.propertyIsEnumerable,rl=An.splice,ga=ps?ps.toStringTag:void 0,Wd=function(){try{var I=fm(Object,"defineProperty");return I({},"",{}),I}catch{}}(),VN=jt?jt.isBuffer:void 0,Ww=Math.max,jN=Date.now,Vw=fm(ae,"Map"),ol=fm(Object,"create"),UN=function(){function I(){}return function(W){if(!ba(W))return{};if(vs)return vs(W);I.prototype=W;var K=new I;return I.prototype=void 0,K}}();function ya(I){var W=-1,K=I==null?0:I.length;for(this.clear();++W<K;){var se=I[W];this.set(se[0],se[1])}}function HN(){this.__data__=ol?ol(null):{},this.size=0}function GN(I){var W=this.has(I)&&delete this.__data__[I];return this.size-=W?1:0,W}function qN(I){var W=this.__data__;if(ol){var K=W[I];return K===r?void 0:K}return yt.call(W,I)?W[I]:void 0}function KN(I){var W=this.__data__;return ol?W[I]!==void 0:yt.call(W,I)}function XN(I,W){var K=this.__data__;return this.size+=this.has(I)?0:1,K[I]=ol&&W===void 0?r:W,this}ya.prototype.clear=HN,ya.prototype.delete=GN,ya.prototype.get=qN,ya.prototype.has=KN,ya.prototype.set=XN;function Ho(I){var W=-1,K=I==null?0:I.length;for(this.clear();++W<K;){var se=I[W];this.set(se[0],se[1])}}function YN(){this.__data__=[],this.size=0}function QN(I){var W=this.__data__,K=Vd(W,I);if(K<0)return!1;var se=W.length-1;return K==se?W.pop():rl.call(W,K,1),--this.size,!0}function JN(I){var W=this.__data__,K=Vd(W,I);return K<0?void 0:W[K][1]}function ZN(I){return Vd(this.__data__,I)>-1}function eF(I,W){var K=this.__data__,se=Vd(K,I);return se<0?(++this.size,K.push([I,W])):K[se][1]=W,this}Ho.prototype.clear=YN,Ho.prototype.delete=QN,Ho.prototype.get=JN,Ho.prototype.has=ZN,Ho.prototype.set=eF;function ms(I){var W=-1,K=I==null?0:I.length;for(this.clear();++W<K;){var se=I[W];this.set(se[0],se[1])}}function tF(){this.size=0,this.__data__={hash:new ya,map:new(Vw||Ho),string:new ya}}function nF(I){var W=Ud(this,I).delete(I);return this.size-=W?1:0,W}function rF(I){return Ud(this,I).get(I)}function oF(I){return Ud(this,I).has(I)}function iF(I,W){var K=Ud(this,I),se=K.size;return K.set(I,W),this.size+=K.size==se?0:1,this}ms.prototype.clear=tF,ms.prototype.delete=nF,ms.prototype.get=rF,ms.prototype.has=oF,ms.prototype.set=iF;function gs(I){var W=this.__data__=new Ho(I);this.size=W.size}function aF(){this.__data__=new Ho,this.size=0}function sF(I){var W=this.__data__,K=W.delete(I);return this.size=W.size,K}function uF(I){return this.__data__.get(I)}function lF(I){return this.__data__.has(I)}function cF(I,W){var K=this.__data__;if(K instanceof Ho){var se=K.__data__;if(!Vw||se.length<n-1)return se.push([I,W]),this.size=++K.size,this;K=this.__data__=new ms(se)}return K.set(I,W),this.size=K.size,this}gs.prototype.clear=aF,gs.prototype.delete=sF,gs.prototype.get=uF,gs.prototype.has=lF,gs.prototype.set=cF;function dF(I,W){var K=vm(I),se=!K&&pm(I),Ne=!K&&!se&&qw(I),Je=!K&&!se&&!Ne&&Xw(I),st=K||se||Ne||Je,Me=st?ze(I.length,String):[],ut=Me.length;for(var wr in I)(W||yt.call(I,wr))&&!(st&&(wr=="length"||Ne&&(wr=="offset"||wr=="parent")||Je&&(wr=="buffer"||wr=="byteLength"||wr=="byteOffset")||Hw(wr,ut)))&&Me.push(wr);return Me}function cm(I,W,K){(K!==void 0&&!Hd(I[W],K)||K===void 0&&!(W in I))&&dm(I,W,K)}function fF(I,W,K){var se=I[W];(!(yt.call(I,W)&&Hd(se,K))||K===void 0&&!(W in I))&&dm(I,W,K)}function Vd(I,W){for(var K=I.length;K--;)if(Hd(I[K][0],W))return K;return-1}function dm(I,W,K){W=="__proto__"&&Wd?Wd(I,W,{configurable:!0,enumerable:!0,value:K,writable:!0}):I[W]=K}var hF=kF();function jd(I){return I==null?I===void 0?C:m:ga&&ga in Object(I)?TF(I):MF(I)}function jw(I){return il(I)&&jd(I)==s}function pF(I){if(!ba(I)||AF(I))return!1;var W=gm(I)?jr:G;return W.test(BF(I))}function vF(I){return il(I)&&Kw(I.length)&&!!J[jd(I)]}function mF(I){if(!ba(I))return DF(I);var W=Gw(I),K=[];for(var se in I)se=="constructor"&&(W||!yt.call(I,se))||K.push(se);return K}function Uw(I,W,K,se,Ne){I!==W&&hF(W,function(Je,st){if(Ne||(Ne=new gs),ba(Je))gF(I,W,st,K,Uw,se,Ne);else{var Me=se?se(hm(I,st),Je,st+"",I,W,Ne):void 0;Me===void 0&&(Me=Je),cm(I,st,Me)}},Yw)}function gF(I,W,K,se,Ne,Je,st){var Me=hm(I,K),ut=hm(W,K),wr=st.get(ut);if(wr){cm(I,K,wr);return}var Yn=Je?Je(Me,ut,K+"",I,W,st):void 0,al=Yn===void 0;if(al){var ym=vm(ut),bm=!ym&&qw(ut),Jw=!ym&&!bm&&Xw(ut);Yn=ut,ym||bm||Jw?vm(Me)?Yn=Me:LF(Me)?Yn=CF(Me):bm?(al=!1,Yn=xF(ut,!0)):Jw?(al=!1,Yn=SF(ut,!0)):Yn=[]:$F(ut)||pm(ut)?(Yn=Me,pm(Me)?Yn=zF(Me):(!ba(Me)||gm(Me))&&(Yn=RF(ut))):al=!1}al&&(st.set(ut,Yn),Ne(Yn,ut,se,Je,st),st.delete(ut)),cm(I,K,Yn)}function yF(I,W){return NF(OF(I,W,Qw),I+"")}var bF=Wd?function(I,W){return Wd(I,"toString",{configurable:!0,enumerable:!1,value:VF(W),writable:!0})}:Qw;function xF(I,W){if(W)return I.slice();var K=I.length,se=$d?$d(K):new I.constructor(K);return I.copy(se),se}function wF(I){var W=new I.constructor(I.byteLength);return new Ld(W).set(new Ld(I)),W}function SF(I,W){var K=W?wF(I.buffer):I.buffer;return new I.constructor(K,I.byteOffset,I.length)}function CF(I,W){var K=-1,se=I.length;for(W||(W=Array(se));++K<se;)W[K]=I[K];return W}function _F(I,W,K,se){var Ne=!K;K||(K={});for(var Je=-1,st=W.length;++Je<st;){var Me=W[Je],ut=se?se(K[Me],I[Me],Me,K,I):void 0;ut===void 0&&(ut=I[Me]),Ne?dm(K,Me,ut):fF(K,Me,ut)}return K}function EF(I){return yF(function(W,K){var se=-1,Ne=K.length,Je=Ne>1?K[Ne-1]:void 0,st=Ne>2?K[2]:void 0;for(Je=I.length>3&&typeof Je=="function"?(Ne--,Je):void 0,st&&PF(K[0],K[1],st)&&(Je=Ne<3?void 0:Je,Ne=1),W=Object(W);++se<Ne;){var Me=K[se];Me&&I(W,Me,se,Je)}return W})}function kF(I){return function(W,K,se){for(var Ne=-1,Je=Object(W),st=se(W),Me=st.length;Me--;){var ut=st[I?Me:++Ne];if(K(Je[ut],ut,Je)===!1)break}return W}}function Ud(I,W){var K=I.__data__;return IF(W)?K[typeof W=="string"?"string":"hash"]:K.map}function fm(I,W){var K=Ve(I,W);return pF(K)?K:void 0}function TF(I){var W=yt.call(I,ga),K=I[ga];try{I[ga]=void 0;var se=!0}catch{}var Ne=wn.call(I);return se&&(W?I[ga]=K:delete I[ga]),Ne}function RF(I){return typeof I.constructor=="function"&&!Gw(I)?UN(zd(I)):{}}function Hw(I,W){var K=typeof I;return W=W??a,!!W&&(K=="number"||K!="symbol"&&Q.test(I))&&I>-1&&I%1==0&&I<W}function PF(I,W,K){if(!ba(K))return!1;var se=typeof W;return(se=="number"?mm(K)&&Hw(W,K.length):se=="string"&&W in K)?Hd(K[W],I):!1}function IF(I){var W=typeof I;return W=="string"||W=="number"||W=="symbol"||W=="boolean"?I!=="__proto__":I===null}function AF(I){return!!Xn&&Xn in I}function Gw(I){var W=I&&I.constructor,K=typeof W=="function"&&W.prototype||Dt;return I===K}function DF(I){var W=[];if(I!=null)for(var K in Object(I))W.push(K);return W}function MF(I){return wn.call(I)}function OF(I,W,K){return W=Ww(W===void 0?I.length-1:W,0),function(){for(var se=arguments,Ne=-1,Je=Ww(se.length-W,0),st=Array(Je);++Ne<Je;)st[Ne]=se[W+Ne];Ne=-1;for(var Me=Array(W+1);++Ne<W;)Me[Ne]=se[Ne];return Me[W]=K(st),_e(I,this,Me)}}function hm(I,W){if(!(W==="constructor"&&typeof I[W]=="function")&&W!="__proto__")return I[W]}var NF=FF(bF);function FF(I){var W=0,K=0;return function(){var se=jN(),Ne=i-(se-K);if(K=se,Ne>0){if(++W>=o)return arguments[0]}else W=0;return I.apply(void 0,arguments)}}function BF(I){if(I!=null){try{return sn.call(I)}catch{}try{return I+""}catch{}}return""}function Hd(I,W){return I===W||I!==I&&W!==W}var pm=jw(function(){return arguments}())?jw:function(I){return il(I)&&yt.call(I,"callee")&&!nl.call(I,"callee")},vm=Array.isArray;function mm(I){return I!=null&&Kw(I.length)&&!gm(I)}function LF(I){return il(I)&&mm(I)}var qw=VN||jF;function gm(I){if(!ba(I))return!1;var W=jd(I);return W==h||W==p||W==l||W==b}function Kw(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=a}function ba(I){var W=typeof I;return I!=null&&(W=="object"||W=="function")}function il(I){return I!=null&&typeof I=="object"}function $F(I){if(!il(I)||jd(I)!=g)return!1;var W=zd(I);if(W===null)return!0;var K=yt.call(W,"constructor")&&W.constructor;return typeof K=="function"&&K instanceof K&&sn.call(K)==Ci}var Xw=Ie?We(Ie):vF;function zF(I){return _F(I,Yw(I))}function Yw(I){return mm(I)?dF(I,!0):mF(I)}var WF=EF(function(I,W,K,se){Uw(I,W,K,se)});function VF(I){return function(){return I}}function Qw(I){return I}function jF(){return!1}e.exports=WF})(Zh,Zh.exports);var IL=Zh.exports;const Dr=Up(IL);var AL=e=>/!(important)?$/.test(e),b2=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,DL=(e,t)=>n=>{const r=String(t),o=AL(r),i=b2(r),a=e?`${e}.${i}`:i;let s=Wn(n.__cssMap)&&a in n.__cssMap?n.__cssMap[a].varRef:t;return s=b2(s),o?`${s} !important`:s};function Ab(e){const{scale:t,transform:n,compose:r}=e;return(i,a)=>{var s;const u=DL(t,i)(a);let l=(s=n==null?void 0:n(u,a))!=null?s:u;return r&&(l=r(l,a)),l}}var hf=(...e)=>t=>e.reduce((n,r)=>r(n),t);function Sr(e,t){return n=>{const r={property:n,scale:e};return r.transform=Ab({scale:e,transform:t}),r}}var ML=({rtl:e,ltr:t})=>n=>n.direction==="rtl"?e:t;function OL(e){const{property:t,scale:n,transform:r}=e;return{scale:n,property:ML(t),transform:n?Ab({scale:n,compose:r}):r}}var ZR=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function NL(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...ZR].join(" ")}function FL(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...ZR].join(" ")}var BL={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},LL={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function $L(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var zL={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},py={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},WL=new Set(Object.values(py)),vy=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),VL=e=>e.trim();function jL(e,t){if(e==null||vy.has(e))return e;if(!(my(e)||vy.has(e)))return`url('${e}')`;const o=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),i=o==null?void 0:o[1],a=o==null?void 0:o[2];if(!i||!a)return e;const s=i.includes("-gradient")?i:`${i}-gradient`,[u,...l]=a.split(",").map(VL).filter(Boolean);if((l==null?void 0:l.length)===0)return e;const c=u in py?py[u]:u;l.unshift(c);const d=l.map(f=>{if(WL.has(f))return f;const h=f.indexOf(" "),[p,v]=h!==-1?[f.substr(0,h),f.substr(h+1)]:[f],y=my(v)?v:v&&v.split(" "),m=`colors.${p}`,g=m in t.__cssMap?t.__cssMap[m].varRef:p;return y?[g,...Array.isArray(y)?y:[y]].join(" "):g});return`${s}(${d.join(", ")})`}var my=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),UL=(e,t)=>jL(e,t??{});function HL(e){return/^var\(--.+\)$/.test(e)}var GL=e=>{const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}},so=e=>t=>`${e}(${t})`,Oe={filter(e){return e!=="auto"?e:BL},backdropFilter(e){return e!=="auto"?e:LL},ring(e){return $L(Oe.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?NL():e==="auto-gpu"?FL():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=GL(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const n={left:"right",right:"left"};return t.direction==="rtl"?n[e]:e},degree(e){if(HL(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:UL,blur:so("blur"),opacity:so("opacity"),brightness:so("brightness"),contrast:so("contrast"),dropShadow:so("drop-shadow"),grayscale:so("grayscale"),hueRotate:e=>so("hue-rotate")(Oe.degree(e)),invert:so("invert"),saturate:so("saturate"),sepia:so("sepia"),bgImage(e){return e==null||my(e)||vy.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:n,divide:r}=(t=zL[e])!=null?t:{},o={flexDirection:e};return n&&(o[n]=1),r&&(o[r]=1),o}},j={borderWidths:Sr("borderWidths"),borderStyles:Sr("borderStyles"),colors:Sr("colors"),borders:Sr("borders"),gradients:Sr("gradients",Oe.gradient),radii:Sr("radii",Oe.px),space:Sr("space",hf(Oe.vh,Oe.px)),spaceT:Sr("space",hf(Oe.vh,Oe.px)),degreeT(e){return{property:e,transform:Oe.degree}},prop(e,t,n){return{property:e,scale:t,...t&&{transform:Ab({scale:t,transform:n})}}},propT(e,t){return{property:e,transform:t}},sizes:Sr("sizes",hf(Oe.vh,Oe.px)),sizesT:Sr("sizes",hf(Oe.vh,Oe.fraction)),shadows:Sr("shadows"),logical:OL,blur:Sr("blur",Oe.blur)},sh={background:j.colors("background"),backgroundColor:j.colors("backgroundColor"),backgroundImage:j.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Oe.bgClip},bgSize:j.prop("backgroundSize"),bgPosition:j.prop("backgroundPosition"),bg:j.colors("background"),bgColor:j.colors("backgroundColor"),bgPos:j.prop("backgroundPosition"),bgRepeat:j.prop("backgroundRepeat"),bgAttachment:j.prop("backgroundAttachment"),bgGradient:j.gradients("backgroundImage"),bgClip:{transform:Oe.bgClip}};Object.assign(sh,{bgImage:sh.backgroundImage,bgImg:sh.backgroundImage});var je={border:j.borders("border"),borderWidth:j.borderWidths("borderWidth"),borderStyle:j.borderStyles("borderStyle"),borderColor:j.colors("borderColor"),borderRadius:j.radii("borderRadius"),borderTop:j.borders("borderTop"),borderBlockStart:j.borders("borderBlockStart"),borderTopLeftRadius:j.radii("borderTopLeftRadius"),borderStartStartRadius:j.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:j.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:j.radii("borderTopRightRadius"),borderStartEndRadius:j.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:j.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:j.borders("borderRight"),borderInlineEnd:j.borders("borderInlineEnd"),borderBottom:j.borders("borderBottom"),borderBlockEnd:j.borders("borderBlockEnd"),borderBottomLeftRadius:j.radii("borderBottomLeftRadius"),borderBottomRightRadius:j.radii("borderBottomRightRadius"),borderLeft:j.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:j.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:j.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:j.borders(["borderLeft","borderRight"]),borderInline:j.borders("borderInline"),borderY:j.borders(["borderTop","borderBottom"]),borderBlock:j.borders("borderBlock"),borderTopWidth:j.borderWidths("borderTopWidth"),borderBlockStartWidth:j.borderWidths("borderBlockStartWidth"),borderTopColor:j.colors("borderTopColor"),borderBlockStartColor:j.colors("borderBlockStartColor"),borderTopStyle:j.borderStyles("borderTopStyle"),borderBlockStartStyle:j.borderStyles("borderBlockStartStyle"),borderBottomWidth:j.borderWidths("borderBottomWidth"),borderBlockEndWidth:j.borderWidths("borderBlockEndWidth"),borderBottomColor:j.colors("borderBottomColor"),borderBlockEndColor:j.colors("borderBlockEndColor"),borderBottomStyle:j.borderStyles("borderBottomStyle"),borderBlockEndStyle:j.borderStyles("borderBlockEndStyle"),borderLeftWidth:j.borderWidths("borderLeftWidth"),borderInlineStartWidth:j.borderWidths("borderInlineStartWidth"),borderLeftColor:j.colors("borderLeftColor"),borderInlineStartColor:j.colors("borderInlineStartColor"),borderLeftStyle:j.borderStyles("borderLeftStyle"),borderInlineStartStyle:j.borderStyles("borderInlineStartStyle"),borderRightWidth:j.borderWidths("borderRightWidth"),borderInlineEndWidth:j.borderWidths("borderInlineEndWidth"),borderRightColor:j.colors("borderRightColor"),borderInlineEndColor:j.colors("borderInlineEndColor"),borderRightStyle:j.borderStyles("borderRightStyle"),borderInlineEndStyle:j.borderStyles("borderInlineEndStyle"),borderTopRadius:j.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:j.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:j.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:j.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(je,{rounded:je.borderRadius,roundedTop:je.borderTopRadius,roundedTopLeft:je.borderTopLeftRadius,roundedTopRight:je.borderTopRightRadius,roundedTopStart:je.borderStartStartRadius,roundedTopEnd:je.borderStartEndRadius,roundedBottom:je.borderBottomRadius,roundedBottomLeft:je.borderBottomLeftRadius,roundedBottomRight:je.borderBottomRightRadius,roundedBottomStart:je.borderEndStartRadius,roundedBottomEnd:je.borderEndEndRadius,roundedLeft:je.borderLeftRadius,roundedRight:je.borderRightRadius,roundedStart:je.borderInlineStartRadius,roundedEnd:je.borderInlineEndRadius,borderStart:je.borderInlineStart,borderEnd:je.borderInlineEnd,borderTopStartRadius:je.borderStartStartRadius,borderTopEndRadius:je.borderStartEndRadius,borderBottomStartRadius:je.borderEndStartRadius,borderBottomEndRadius:je.borderEndEndRadius,borderStartRadius:je.borderInlineStartRadius,borderEndRadius:je.borderInlineEndRadius,borderStartWidth:je.borderInlineStartWidth,borderEndWidth:je.borderInlineEndWidth,borderStartColor:je.borderInlineStartColor,borderEndColor:je.borderInlineEndColor,borderStartStyle:je.borderInlineStartStyle,borderEndStyle:je.borderInlineEndStyle});var qL={color:j.colors("color"),textColor:j.colors("color"),fill:j.colors("fill"),stroke:j.colors("stroke")},gy={boxShadow:j.shadows("boxShadow"),mixBlendMode:!0,blendMode:j.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:j.prop("backgroundBlendMode"),opacity:!0};Object.assign(gy,{shadow:gy.boxShadow});var KL={filter:{transform:Oe.filter},blur:j.blur("--chakra-blur"),brightness:j.propT("--chakra-brightness",Oe.brightness),contrast:j.propT("--chakra-contrast",Oe.contrast),hueRotate:j.propT("--chakra-hue-rotate",Oe.hueRotate),invert:j.propT("--chakra-invert",Oe.invert),saturate:j.propT("--chakra-saturate",Oe.saturate),dropShadow:j.propT("--chakra-drop-shadow",Oe.dropShadow),backdropFilter:{transform:Oe.backdropFilter},backdropBlur:j.blur("--chakra-backdrop-blur"),backdropBrightness:j.propT("--chakra-backdrop-brightness",Oe.brightness),backdropContrast:j.propT("--chakra-backdrop-contrast",Oe.contrast),backdropHueRotate:j.propT("--chakra-backdrop-hue-rotate",Oe.hueRotate),backdropInvert:j.propT("--chakra-backdrop-invert",Oe.invert),backdropSaturate:j.propT("--chakra-backdrop-saturate",Oe.saturate)},ep={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Oe.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:j.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:j.space("gap"),rowGap:j.space("rowGap"),columnGap:j.space("columnGap")};Object.assign(ep,{flexDir:ep.flexDirection});var eP={gridGap:j.space("gridGap"),gridColumnGap:j.space("gridColumnGap"),gridRowGap:j.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},XL={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Oe.outline},outlineOffset:!0,outlineColor:j.colors("outlineColor")},_r={width:j.sizesT("width"),inlineSize:j.sizesT("inlineSize"),height:j.sizes("height"),blockSize:j.sizes("blockSize"),boxSize:j.sizes(["width","height"]),minWidth:j.sizes("minWidth"),minInlineSize:j.sizes("minInlineSize"),minHeight:j.sizes("minHeight"),minBlockSize:j.sizes("minBlockSize"),maxWidth:j.sizes("maxWidth"),maxInlineSize:j.sizes("maxInlineSize"),maxHeight:j.sizes("maxHeight"),maxBlockSize:j.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var n,r,o;return{[`@media screen and (min-width: ${(o=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r.minW)!=null?o:e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var n,r,o;return{[`@media screen and (max-width: ${(o=(r=(n=t.__breakpoints)==null?void 0:n.get(e))==null?void 0:r._minW)!=null?o:e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:j.propT("float",Oe.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(_r,{w:_r.width,h:_r.height,minW:_r.minWidth,maxW:_r.maxWidth,minH:_r.minHeight,maxH:_r.maxHeight,overscroll:_r.overscrollBehavior,overscrollX:_r.overscrollBehaviorX,overscrollY:_r.overscrollBehaviorY});var YL={listStyleType:!0,listStylePosition:!0,listStylePos:j.prop("listStylePosition"),listStyleImage:!0,listStyleImg:j.prop("listStyleImage")};function QL(e,t,n,r){const o=typeof t=="string"?t.split("."):[t];for(r=0;r<o.length&&e;r+=1)e=e[o[r]];return e===void 0?n:e}var JL=e=>{const t=new WeakMap;return(r,o,i,a)=>{if(typeof r>"u")return e(r,o,i);t.has(r)||t.set(r,new Map);const s=t.get(r);if(s.has(o))return s.get(o);const u=e(r,o,i,a);return s.set(o,u),u}},ZL=JL(QL),e$={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},t$={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},Km=(e,t,n)=>{const r={},o=ZL(e,t,{});for(const i in o)i in n&&n[i]!=null||(r[i]=o[i]);return r},n$={srOnly:{transform(e){return e===!0?e$:e==="focusable"?t$:{}}},layerStyle:{processResult:!0,transform:(e,t,n)=>Km(t,`layerStyles.${e}`,n)},textStyle:{processResult:!0,transform:(e,t,n)=>Km(t,`textStyles.${e}`,n)},apply:{processResult:!0,transform:(e,t,n)=>Km(t,e,n)}},Yl={position:!0,pos:j.prop("position"),zIndex:j.prop("zIndex","zIndices"),inset:j.spaceT("inset"),insetX:j.spaceT(["left","right"]),insetInline:j.spaceT("insetInline"),insetY:j.spaceT(["top","bottom"]),insetBlock:j.spaceT("insetBlock"),top:j.spaceT("top"),insetBlockStart:j.spaceT("insetBlockStart"),bottom:j.spaceT("bottom"),insetBlockEnd:j.spaceT("insetBlockEnd"),left:j.spaceT("left"),insetInlineStart:j.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:j.spaceT("right"),insetInlineEnd:j.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(Yl,{insetStart:Yl.insetInlineStart,insetEnd:Yl.insetInlineEnd});var r$={ring:{transform:Oe.ring},ringColor:j.colors("--chakra-ring-color"),ringOffset:j.prop("--chakra-ring-offset-width"),ringOffsetColor:j.colors("--chakra-ring-offset-color"),ringInset:j.prop("--chakra-ring-inset")},ot={margin:j.spaceT("margin"),marginTop:j.spaceT("marginTop"),marginBlockStart:j.spaceT("marginBlockStart"),marginRight:j.spaceT("marginRight"),marginInlineEnd:j.spaceT("marginInlineEnd"),marginBottom:j.spaceT("marginBottom"),marginBlockEnd:j.spaceT("marginBlockEnd"),marginLeft:j.spaceT("marginLeft"),marginInlineStart:j.spaceT("marginInlineStart"),marginX:j.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:j.spaceT("marginInline"),marginY:j.spaceT(["marginTop","marginBottom"]),marginBlock:j.spaceT("marginBlock"),padding:j.space("padding"),paddingTop:j.space("paddingTop"),paddingBlockStart:j.space("paddingBlockStart"),paddingRight:j.space("paddingRight"),paddingBottom:j.space("paddingBottom"),paddingBlockEnd:j.space("paddingBlockEnd"),paddingLeft:j.space("paddingLeft"),paddingInlineStart:j.space("paddingInlineStart"),paddingInlineEnd:j.space("paddingInlineEnd"),paddingX:j.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:j.space("paddingInline"),paddingY:j.space(["paddingTop","paddingBottom"]),paddingBlock:j.space("paddingBlock")};Object.assign(ot,{m:ot.margin,mt:ot.marginTop,mr:ot.marginRight,me:ot.marginInlineEnd,marginEnd:ot.marginInlineEnd,mb:ot.marginBottom,ml:ot.marginLeft,ms:ot.marginInlineStart,marginStart:ot.marginInlineStart,mx:ot.marginX,my:ot.marginY,p:ot.padding,pt:ot.paddingTop,py:ot.paddingY,px:ot.paddingX,pb:ot.paddingBottom,pl:ot.paddingLeft,ps:ot.paddingInlineStart,paddingStart:ot.paddingInlineStart,pr:ot.paddingRight,pe:ot.paddingInlineEnd,paddingEnd:ot.paddingInlineEnd});var o$={textDecorationColor:j.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:j.shadows("textShadow")},i$={clipPath:!0,transform:j.propT("transform",Oe.transform),transformOrigin:!0,translateX:j.spaceT("--chakra-translate-x"),translateY:j.spaceT("--chakra-translate-y"),skewX:j.degreeT("--chakra-skew-x"),skewY:j.degreeT("--chakra-skew-y"),scaleX:j.prop("--chakra-scale-x"),scaleY:j.prop("--chakra-scale-y"),scale:j.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:j.degreeT("--chakra-rotate")},a$={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:j.prop("transitionDuration","transition.duration"),transitionProperty:j.prop("transitionProperty","transition.property"),transitionTimingFunction:j.prop("transitionTimingFunction","transition.easing")},s$={fontFamily:j.prop("fontFamily","fonts"),fontSize:j.prop("fontSize","fontSizes",Oe.px),fontWeight:j.prop("fontWeight","fontWeights"),lineHeight:j.prop("lineHeight","lineHeights"),letterSpacing:j.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},u$={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:j.spaceT("scrollMargin"),scrollMarginTop:j.spaceT("scrollMarginTop"),scrollMarginBottom:j.spaceT("scrollMarginBottom"),scrollMarginLeft:j.spaceT("scrollMarginLeft"),scrollMarginRight:j.spaceT("scrollMarginRight"),scrollMarginX:j.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:j.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:j.spaceT("scrollPadding"),scrollPaddingTop:j.spaceT("scrollPaddingTop"),scrollPaddingBottom:j.spaceT("scrollPaddingBottom"),scrollPaddingLeft:j.spaceT("scrollPaddingLeft"),scrollPaddingRight:j.spaceT("scrollPaddingRight"),scrollPaddingX:j.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:j.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function tP(e){return Wn(e)&&e.reference?e.reference:String(e)}var wv=(e,...t)=>t.map(tP).join(` ${e} `).replace(/calc/g,""),x2=(...e)=>`calc(${wv("+",...e)})`,w2=(...e)=>`calc(${wv("-",...e)})`,yy=(...e)=>`calc(${wv("*",...e)})`,S2=(...e)=>`calc(${wv("/",...e)})`,C2=e=>{const t=tP(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:yy(t,-1)},Pa=Object.assign(e=>({add:(...t)=>Pa(x2(e,...t)),subtract:(...t)=>Pa(w2(e,...t)),multiply:(...t)=>Pa(yy(e,...t)),divide:(...t)=>Pa(S2(e,...t)),negate:()=>Pa(C2(e)),toString:()=>e.toString()}),{add:x2,subtract:w2,multiply:yy,divide:S2,negate:C2});function l$(e,t="-"){return e.replace(/\s+/g,t)}function c$(e){const t=l$(e.toString());return f$(d$(t))}function d$(e){return e.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?e.replace(".","\\."):e}function f$(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function h$(e,t=""){return[t,e].filter(Boolean).join("-")}function p$(e,t){return`var(${e}${t?`, ${t}`:""})`}function v$(e,t=""){return c$(`--${h$(e,t)}`)}function be(e,t,n){const r=v$(e,n);return{variable:r,reference:p$(r,t)}}function m$(e,t){const n={};for(const r of t){if(Array.isArray(r)){const[o,i]=r;n[o]=be(`${e}-${o}`,i);continue}n[r]=be(`${e}-${r}`)}return n}function g$(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}function y$(e){const t=parseFloat(e.toString()),n=e.toString().replace(String(t),"");return{unitless:!n,value:t,unit:n}}function by(e){if(e==null)return e;const{unitless:t}=y$(e);return t||typeof e=="number"?`${e}px`:e}var nP=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,Db=e=>Object.fromEntries(Object.entries(e).sort(nP));function _2(e){const t=Db(e);return Object.assign(Object.values(t),t)}function b$(e){const t=Object.keys(Db(e));return new Set(t)}function E2(e){var t;if(!e)return e;e=(t=by(e))!=null?t:e;const n=-.02;return typeof e=="number"?`${e+n}`:e.replace(/(\d+\.?\d*)/u,r=>`${parseFloat(r)+n}`)}function Ml(e,t){const n=["@media screen"];return e&&n.push("and",`(min-width: ${by(e)})`),t&&n.push("and",`(max-width: ${by(t)})`),n.join(" ")}function x$(e){var t;if(!e)return null;e.base=(t=e.base)!=null?t:"0px";const n=_2(e),r=Object.entries(e).sort(nP).map(([a,s],u,l)=>{var c;let[,d]=(c=l[u+1])!=null?c:[];return d=parseFloat(d)>0?E2(d):void 0,{_minW:E2(s),breakpoint:a,minW:s,maxW:d,maxWQuery:Ml(null,d),minWQuery:Ml(s),minMaxQuery:Ml(s,d)}}),o=b$(e),i=Array.from(o.values());return{keys:o,normalized:n,isResponsive(a){const s=Object.keys(a);return s.length>0&&s.every(u=>o.has(u))},asObject:Db(e),asArray:_2(e),details:r,get(a){return r.find(s=>s.breakpoint===a)},media:[null,...n.map(a=>Ml(a)).slice(1)],toArrayValue(a){if(!Wn(a))throw new Error("toArrayValue: value must be an object");const s=i.map(u=>{var l;return(l=a[u])!=null?l:null});for(;g$(s)===null;)s.pop();return s},toObjectValue(a){if(!Array.isArray(a))throw new Error("toObjectValue: value must be an array");return a.reduce((s,u,l)=>{const c=i[l];return c!=null&&u!=null&&(s[c]=u),s},{})}}}var Qt={hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,indeterminate:(e,t)=>`${e}:indeterminate ${t}, ${e}[aria-checked=mixed] ${t}, ${e}[data-indeterminate] ${t}`,readOnly:(e,t)=>`${e}:read-only ${t}, ${e}[readonly] ${t}, ${e}[data-read-only] ${t}`,expanded:(e,t)=>`${e}:read-only ${t}, ${e}[aria-expanded=true] ${t}, ${e}[data-expanded] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},Ei=e=>rP(t=>e(t,"&"),"[role=group]","[data-group]",".group"),Go=e=>rP(t=>e(t,"~ &"),"[data-peer]",".peer"),rP=(e,...t)=>t.map(e).join(", "),Sv={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:Ei(Qt.hover),_peerHover:Go(Qt.hover),_groupFocus:Ei(Qt.focus),_peerFocus:Go(Qt.focus),_groupFocusVisible:Ei(Qt.focusVisible),_peerFocusVisible:Go(Qt.focusVisible),_groupActive:Ei(Qt.active),_peerActive:Go(Qt.active),_groupDisabled:Ei(Qt.disabled),_peerDisabled:Go(Qt.disabled),_groupInvalid:Ei(Qt.invalid),_peerInvalid:Go(Qt.invalid),_groupChecked:Ei(Qt.checked),_peerChecked:Go(Qt.checked),_groupFocusWithin:Ei(Qt.focusWithin),_peerFocusWithin:Go(Qt.focusWithin),_peerPlaceholderShown:Go(Qt.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},oP=Object.keys(Sv);function k2(e,t){return be(String(e).replace(/\./g,"-"),void 0,t)}function w$(e,t){let n={};const r={};for(const[o,i]of Object.entries(e)){const{isSemantic:a,value:s}=i,{variable:u,reference:l}=k2(o,t==null?void 0:t.cssVarPrefix);if(!a){if(o.startsWith("space")){const f=o.split("."),[h,...p]=f,v=`${h}.-${p.join(".")}`,y=Pa.negate(s),m=Pa.negate(l);r[v]={value:y,var:u,varRef:m}}n[u]=s,r[o]={value:s,var:u,varRef:l};continue}const c=f=>{const p=[String(o).split(".")[0],f].join(".");if(!e[p])return f;const{reference:y}=k2(p,t==null?void 0:t.cssVarPrefix);return y},d=Wn(s)?s:{default:s};n=Dr(n,Object.entries(d).reduce((f,[h,p])=>{var v,y;if(!p)return f;const m=c(`${p}`);if(h==="default")return f[u]=m,f;const g=(y=(v=Sv)==null?void 0:v[h])!=null?y:h;return f[g]={[u]:m},f},{})),r[o]={value:l,var:u,varRef:l}}return{cssVars:n,cssMap:r}}function S$(e,t=[]){const n=Object.assign({},e);for(const r of t)r in n&&delete n[r];return n}function C$(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function _$(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}function T2(e,t,n={}){const{stop:r,getKey:o}=n;function i(a,s=[]){var u;if(_$(a)||Array.isArray(a)){const l={};for(const[c,d]of Object.entries(a)){const f=(u=o==null?void 0:o(c))!=null?u:c,h=[...s,f];if(r!=null&&r(a,h))return t(a,s);l[f]=i(d,h)}return l}return t(a,s)}return i(e)}var E$=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function k$(e){return C$(e,E$)}function T$(e){return e.semanticTokens}function R$(e){const{__cssMap:t,__cssVars:n,__breakpoints:r,...o}=e;return o}var P$=e=>oP.includes(e)||e==="default";function I$({tokens:e,semanticTokens:t}){const n={};return T2(e,(r,o)=>{r!=null&&(n[o.join(".")]={isSemantic:!1,value:r})}),T2(t,(r,o)=>{r!=null&&(n[o.join(".")]={isSemantic:!0,value:r})},{stop:r=>Object.keys(r).every(P$)}),n}function A$(e){var t;const n=R$(e),r=k$(n),o=T$(n),i=I$({tokens:r,semanticTokens:o}),a=(t=n.config)==null?void 0:t.cssVarPrefix,{cssMap:s,cssVars:u}=w$(i,{cssVarPrefix:a});return Object.assign(n,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...u},__cssMap:s,__breakpoints:x$(n.breakpoints)}),n}var Mb=Dr({},sh,je,qL,ep,_r,KL,r$,XL,eP,n$,Yl,gy,ot,u$,s$,o$,i$,YL,a$),D$=Object.assign({},ot,_r,ep,eP,Yl),M$=Object.keys(D$),O$=[...Object.keys(Mb),...oP],N$={...Mb,...Sv},F$=e=>e in N$,B$=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:n,toArrayValue:r,media:o}=t.__breakpoints,i={};for(const a in e){let s=Jr(e[a],t);if(s==null)continue;if(s=Wn(s)&&n(s)?r(s):s,!Array.isArray(s)){i[a]=s;continue}const u=s.slice(0,o.length).length;for(let l=0;l<u;l+=1){const c=o==null?void 0:o[l];if(!c){i[a]=s[l];continue}i[c]=i[c]||{},s[l]!=null&&(i[c][a]=s[l])}}return i};function L$(e){const t=[];let n="",r=!1;for(let o=0;o<e.length;o++){const i=e[o];i==="("?(r=!0,n+=i):i===")"?(r=!1,n+=i):i===","&&!r?(t.push(n),n=""):n+=i}return n=n.trim(),n&&t.push(n),t}function $$(e){return/^var\(--.+\)$/.test(e)}var z$=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!$$(t),W$=(e,t)=>{var n,r;if(t==null)return t;const o=u=>{var l,c;return(c=(l=e.__cssMap)==null?void 0:l[u])==null?void 0:c.varRef},i=u=>{var l;return(l=o(u))!=null?l:u},[a,s]=L$(t);return t=(r=(n=o(a))!=null?n:i(s))!=null?r:i(t),t};function V$(e){const{configs:t={},pseudos:n={},theme:r}=e,o=(i,a=!1)=>{var s,u,l;const c=Jr(i,r),d=B$(c)(r);let f={};for(let h in d){const p=d[h];let v=Jr(p,r);h in n&&(h=n[h]),z$(h,v)&&(v=W$(r,v));let y=t[h];if(y===!0&&(y={property:h}),Wn(v)){f[h]=(s=f[h])!=null?s:{},f[h]=Dr({},f[h],o(v,!0));continue}let m=(l=(u=y==null?void 0:y.transform)==null?void 0:u.call(y,v,r,c))!=null?l:v;m=y!=null&&y.processResult?o(m,!0):m;const g=Jr(y==null?void 0:y.property,r);if(!a&&(y!=null&&y.static)){const b=Jr(y.static,r);f=Dr({},f,b)}if(g&&Array.isArray(g)){for(const b of g)f[b]=m;continue}if(g){g==="&"&&Wn(m)?f=Dr({},f,m):f[g]=m;continue}if(Wn(m)){f=Dr({},f,m);continue}f[h]=m}return f};return o}var iP=e=>t=>V$({theme:t,pseudos:Sv,configs:Mb})(e);function nt(e){return{definePartsStyle(t){return t},defineMultiStyleConfig(t){return{parts:e,...t}}}}function j$(e,t){if(Array.isArray(e))return e;if(Wn(e))return t(e);if(e!=null)return[e]}function U$(e,t){for(let n=t+1;n<e.length;n++)if(e[n]!=null)return n;return-1}function H$(e){const t=e.__breakpoints;return function(r,o,i,a){var s,u;if(!t)return;const l={},c=j$(i,t.toArrayValue);if(!c)return l;const d=c.length,f=d===1,h=!!r.parts;for(let p=0;p<d;p++){const v=t.details[p],y=t.details[U$(c,p)],m=Ml(v.minW,y==null?void 0:y._minW),g=Jr((s=r[o])==null?void 0:s[c[p]],a);if(g){if(h){(u=r.parts)==null||u.forEach(b=>{Dr(l,{[b]:f?g[b]:{[m]:g[b]}})});continue}if(!h){f?Dr(l,g):l[m]=g;continue}l[m]=g}}return l}}function G$(e){return t=>{var n;const{variant:r,size:o,theme:i}=t,a=H$(i);return Dr({},Jr((n=e.baseStyle)!=null?n:{},t),a(e,"sizes",o,t),a(e,"variants",r,t))}}function Fo(e){return S$(e,["styleConfig","size","variant","colorScheme"])}var q$=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function K$(e){return Wn(e)?q$.every(t=>Object.prototype.hasOwnProperty.call(e,t)):!1}var X$={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},Y$={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},Q$={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},J$={property:X$,easing:Y$,duration:Q$},Z$=J$,ez={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},tz=ez,nz={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},rz=nz,oz={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},iz=oz,az={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},sz=az,uz={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},lz=uz,cz={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},dz=cz,fz={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},hz=fz,pz={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},aP=pz,sP={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},vz={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},mz={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},gz={...sP,...vz,container:mz},uP=gz,yz={breakpoints:iz,zIndices:tz,radii:lz,blur:hz,colors:sz,...aP,sizes:uP,shadows:dz,space:sP,borders:rz,transition:Z$},{defineMultiStyleConfig:bz,definePartsStyle:Ol}=nt(["stepper","step","title","description","indicator","separator","icon","number"]),Qo=be("stepper-indicator-size"),Us=be("stepper-icon-size"),Hs=be("stepper-title-font-size"),Nl=be("stepper-description-font-size"),ml=be("stepper-accent-color"),xz=Ol(({colorScheme:e})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[ml.variable]:`colors.${e}.500`,_dark:{[ml.variable]:`colors.${e}.200`}},title:{fontSize:Hs.reference,fontWeight:"medium"},description:{fontSize:Nl.reference,color:"chakra-subtle-text"},number:{fontSize:Hs.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:Us.reference,height:Us.reference},indicator:{flexShrink:0,borderRadius:"full",width:Qo.reference,height:Qo.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:ml.reference},"&[data-status=complete]":{bg:ml.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:ml.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${Qo.reference} - 8px)`,top:`calc(${Qo.reference} + 4px)`,insetStart:`calc(${Qo.reference} / 2 - 1px)`}}})),wz=bz({baseStyle:xz,sizes:{xs:Ol({stepper:{[Qo.variable]:"sizes.4",[Us.variable]:"sizes.3",[Hs.variable]:"fontSizes.xs",[Nl.variable]:"fontSizes.xs"}}),sm:Ol({stepper:{[Qo.variable]:"sizes.6",[Us.variable]:"sizes.4",[Hs.variable]:"fontSizes.sm",[Nl.variable]:"fontSizes.xs"}}),md:Ol({stepper:{[Qo.variable]:"sizes.8",[Us.variable]:"sizes.5",[Hs.variable]:"fontSizes.md",[Nl.variable]:"fontSizes.sm"}}),lg:Ol({stepper:{[Qo.variable]:"sizes.10",[Us.variable]:"sizes.6",[Hs.variable]:"fontSizes.lg",[Nl.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function Ke(e,t={}){let n=!1;function r(){if(!n){n=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function o(...c){r();for(const d of c)t[d]=u(d);return Ke(e,t)}function i(...c){for(const d of c)d in t||(t[d]=u(d));return Ke(e,t)}function a(){return Object.fromEntries(Object.entries(t).map(([d,f])=>[d,f.selector]))}function s(){return Object.fromEntries(Object.entries(t).map(([d,f])=>[d,f.className]))}function u(c){const h=`chakra-${(["container","root"].includes(c??"")?[e]:[e,c]).filter(Boolean).join("__")}`;return{className:h,selector:`.${h}`,toString:()=>c}}return{parts:o,toPart:u,extend:i,selectors:a,classnames:s,get keys(){return Object.keys(t)},__type:{}}}var Sz=Ke("accordion").parts("root","container","button","panel").extend("icon"),Cz=Ke("alert").parts("title","description","container").extend("icon","spinner"),_z=Ke("avatar").parts("label","badge","container").extend("excessLabel","group"),Ez=Ke("breadcrumb").parts("link","item","container").extend("separator");Ke("button").parts();var kz=Ke("checkbox").parts("control","icon","container").extend("label");Ke("progress").parts("track","filledTrack").extend("label");var Tz=Ke("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),Rz=Ke("editable").parts("preview","input","textarea"),Pz=Ke("form").parts("container","requiredIndicator","helperText"),Iz=Ke("formError").parts("text","icon"),Az=Ke("input").parts("addon","field","element","group"),Dz=Ke("list").parts("container","item","icon"),Mz=Ke("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),Oz=Ke("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),Nz=Ke("numberinput").parts("root","field","stepperGroup","stepper");Ke("pininput").parts("field");var Fz=Ke("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),Bz=Ke("progress").parts("label","filledTrack","track"),Lz=Ke("radio").parts("container","control","label"),$z=Ke("select").parts("field","icon"),zz=Ke("slider").parts("container","track","thumb","filledTrack","mark"),Wz=Ke("stat").parts("container","label","helpText","number","icon"),Vz=Ke("switch").parts("container","track","thumb","label"),jz=Ke("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),Uz=Ke("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),Hz=Ke("tag").parts("container","label","closeButton"),Gz=Ke("card").parts("container","header","body","footer");Ke("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function Na(e,t,n){return Math.min(Math.max(e,n),t)}class qz extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var Fl=qz;function Ob(e){if(typeof e!="string")throw new Fl(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=t5.test(e)?Yz(e):e;const n=Qz.exec(t);if(n){const a=Array.from(n).slice(1);return[...a.slice(0,3).map(s=>parseInt(Oc(s,2),16)),parseInt(Oc(a[3]||"f",2),16)/255]}const r=Jz.exec(t);if(r){const a=Array.from(r).slice(1);return[...a.slice(0,3).map(s=>parseInt(s,16)),parseInt(a[3]||"ff",16)/255]}const o=Zz.exec(t);if(o){const a=Array.from(o).slice(1);return[...a.slice(0,3).map(s=>parseInt(s,10)),parseFloat(a[3]||"1")]}const i=e5.exec(t);if(i){const[a,s,u,l]=Array.from(i).slice(1).map(parseFloat);if(Na(0,100,s)!==s)throw new Fl(e);if(Na(0,100,u)!==u)throw new Fl(e);return[...n5(a,s,u),Number.isNaN(l)?1:l]}throw new Fl(e)}function Kz(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0)%2341}const R2=e=>parseInt(e.replace(/_/g,""),36),Xz="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const n=R2(t.substring(0,3)),r=R2(t.substring(3)).toString(16);let o="";for(let i=0;i<6-r.length;i++)o+="0";return e[n]=`${o}${r}`,e},{});function Yz(e){const t=e.toLowerCase().trim(),n=Xz[Kz(t)];if(!n)throw new Fl(e);return`#${n}`}const Oc=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),Qz=new RegExp(`^#${Oc("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Jz=new RegExp(`^#${Oc("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),Zz=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${Oc(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),e5=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,t5=/^[a-z]+$/i,P2=e=>Math.round(e*255),n5=(e,t,n)=>{let r=n/100;if(t===0)return[r,r,r].map(P2);const o=(e%360+360)%360/60,i=(1-Math.abs(2*r-1))*(t/100),a=i*(1-Math.abs(o%2-1));let s=0,u=0,l=0;o>=0&&o<1?(s=i,u=a):o>=1&&o<2?(s=a,u=i):o>=2&&o<3?(u=i,l=a):o>=3&&o<4?(u=a,l=i):o>=4&&o<5?(s=a,l=i):o>=5&&o<6&&(s=i,l=a);const c=r-i/2,d=s+c,f=u+c,h=l+c;return[d,f,h].map(P2)};function r5(e,t,n,r){return`rgba(${Na(0,255,e).toFixed()}, ${Na(0,255,t).toFixed()}, ${Na(0,255,n).toFixed()}, ${parseFloat(Na(0,1,r).toFixed(3))})`}function o5(e,t){const[n,r,o,i]=Ob(e);return r5(n,r,o,i-t)}function i5(e){const[t,n,r,o]=Ob(e);let i=a=>{const s=Na(0,255,a).toString(16);return s.length===1?`0${s}`:s};return`#${i(t)}${i(n)}${i(r)}${o<1?i(Math.round(o*255)):""}`}function a5(e,t,n,r,o){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:o;return e===o?n:e}var s5=e=>Object.keys(e).length===0,En=(e,t,n)=>{const r=a5(e,`colors.${t}`,t);try{return i5(r),r}catch{return n??"#000000"}},u5=e=>{const[t,n,r]=Ob(e);return(t*299+n*587+r*114)/1e3},l5=e=>t=>{const n=En(t,e);return u5(n)<128?"dark":"light"},c5=e=>t=>l5(e)(t)==="dark",Mu=(e,t)=>n=>{const r=En(n,e);return o5(r,1-t)};function I2(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${t} 25%,
    transparent 25%,
    transparent 50%,
    ${t} 50%,
    ${t} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}var d5=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function f5(e){const t=d5();return!e||s5(e)?t:e.string&&e.colors?p5(e.string,e.colors):e.string&&!e.colors?h5(e.string):e.colors&&!e.string?v5(e.colors):t}function h5(e){let t=0;if(e.length===0)return t.toString();for(let r=0;r<e.length;r+=1)t=e.charCodeAt(r)+((t<<5)-t),t=t&t;let n="#";for(let r=0;r<3;r+=1){const o=t>>r*8&255;n+=`00${o.toString(16)}`.substr(-2)}return n}function p5(e,t){let n=0;if(e.length===0)return t[0];for(let r=0;r<e.length;r+=1)n=e.charCodeAt(r)+((n<<5)-n),n=n&n;return n=(n%t.length+t.length)%t.length,t[n]}function v5(e){return e[Math.floor(Math.random()*e.length)]}function ye(e,t){return n=>n.colorMode==="dark"?t:e}function Nb(e){const{orientation:t,vertical:n,horizontal:r}=e;return t?t==="vertical"?n:r:{}}function lP(e){return Wn(e)&&e.reference?e.reference:String(e)}var Cv=(e,...t)=>t.map(lP).join(` ${e} `).replace(/calc/g,""),A2=(...e)=>`calc(${Cv("+",...e)})`,D2=(...e)=>`calc(${Cv("-",...e)})`,xy=(...e)=>`calc(${Cv("*",...e)})`,M2=(...e)=>`calc(${Cv("/",...e)})`,O2=e=>{const t=lP(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:xy(t,-1)},Jo=Object.assign(e=>({add:(...t)=>Jo(A2(e,...t)),subtract:(...t)=>Jo(D2(e,...t)),multiply:(...t)=>Jo(xy(e,...t)),divide:(...t)=>Jo(M2(e,...t)),negate:()=>Jo(O2(e)),toString:()=>e.toString()}),{add:A2,subtract:D2,multiply:xy,divide:M2,negate:O2});function m5(e){return!Number.isInteger(parseFloat(e.toString()))}function g5(e,t="-"){return e.replace(/\s+/g,t)}function cP(e){const t=g5(e.toString());return t.includes("\\.")?e:m5(e)?t.replace(".","\\."):e}function y5(e,t=""){return[t,cP(e)].filter(Boolean).join("-")}function b5(e,t){return`var(${cP(e)}${t?`, ${t}`:""})`}function x5(e,t=""){return`--${y5(e,t)}`}function zt(e,t){const n=x5(e,t==null?void 0:t.prefix);return{variable:n,reference:b5(n,w5(t==null?void 0:t.fallback))}}function w5(e){return typeof e=="string"?e:e==null?void 0:e.reference}var{defineMultiStyleConfig:S5,definePartsStyle:uh}=nt(Vz.keys),Ql=zt("switch-track-width"),Wa=zt("switch-track-height"),Xm=zt("switch-track-diff"),C5=Jo.subtract(Ql,Wa),wy=zt("switch-thumb-x"),gl=zt("switch-bg"),_5=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[Ql.reference],height:[Wa.reference],transitionProperty:"common",transitionDuration:"fast",[gl.variable]:"colors.gray.300",_dark:{[gl.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[gl.variable]:`colors.${t}.500`,_dark:{[gl.variable]:`colors.${t}.200`}},bg:gl.reference}},E5={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[Wa.reference],height:[Wa.reference],_checked:{transform:`translateX(${wy.reference})`}},k5=uh(e=>({container:{[Xm.variable]:C5,[wy.variable]:Xm.reference,_rtl:{[wy.variable]:Jo(Xm).negate().toString()}},track:_5(e),thumb:E5})),T5={sm:uh({container:{[Ql.variable]:"1.375rem",[Wa.variable]:"sizes.3"}}),md:uh({container:{[Ql.variable]:"1.875rem",[Wa.variable]:"sizes.4"}}),lg:uh({container:{[Ql.variable]:"2.875rem",[Wa.variable]:"sizes.6"}})},R5=S5({baseStyle:k5,sizes:T5,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:P5,definePartsStyle:cu}=nt(jz.keys),I5=cu({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),tp={"&[data-is-numeric=true]":{textAlign:"end"}},A5=cu(e=>{const{colorScheme:t}=e;return{th:{color:ye("gray.600","gray.400")(e),borderBottom:"1px",borderColor:ye(`${t}.100`,`${t}.700`)(e),...tp},td:{borderBottom:"1px",borderColor:ye(`${t}.100`,`${t}.700`)(e),...tp},caption:{color:ye("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),D5=cu(e=>{const{colorScheme:t}=e;return{th:{color:ye("gray.600","gray.400")(e),borderBottom:"1px",borderColor:ye(`${t}.100`,`${t}.700`)(e),...tp},td:{borderBottom:"1px",borderColor:ye(`${t}.100`,`${t}.700`)(e),...tp},caption:{color:ye("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:ye(`${t}.100`,`${t}.700`)(e)},td:{background:ye(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),M5={simple:A5,striped:D5,unstyled:{}},O5={sm:cu({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:cu({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:cu({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},N5=P5({baseStyle:I5,variants:M5,sizes:O5,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),Nn=be("tabs-color"),Qr=be("tabs-bg"),pf=be("tabs-border-color"),{defineMultiStyleConfig:F5,definePartsStyle:Ro}=nt(Uz.keys),B5=e=>{const{orientation:t}=e;return{display:t==="vertical"?"flex":"block"}},L5=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},$5=e=>{const{align:t="start",orientation:n}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:n==="vertical"?"column":"row"}},z5={p:4},W5=Ro(e=>({root:B5(e),tab:L5(e),tablist:$5(e),tabpanel:z5})),V5={sm:Ro({tab:{py:1,px:4,fontSize:"sm"}}),md:Ro({tab:{fontSize:"md",py:2,px:4}}),lg:Ro({tab:{fontSize:"lg",py:3,px:4}})},j5=Ro(e=>{const{colorScheme:t,orientation:n}=e,r=n==="vertical",o=r?"borderStart":"borderBottom",i=r?"marginStart":"marginBottom";return{tablist:{[o]:"2px solid",borderColor:"inherit"},tab:{[o]:"2px solid",borderColor:"transparent",[i]:"-2px",_selected:{[Nn.variable]:`colors.${t}.600`,_dark:{[Nn.variable]:`colors.${t}.300`},borderColor:"currentColor"},_active:{[Qr.variable]:"colors.gray.200",_dark:{[Qr.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:Nn.reference,bg:Qr.reference}}}),U5=Ro(e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[pf.variable]:"transparent",_selected:{[Nn.variable]:`colors.${t}.600`,[pf.variable]:"colors.white",_dark:{[Nn.variable]:`colors.${t}.300`,[pf.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:pf.reference},color:Nn.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),H5=Ro(e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[Qr.variable]:"colors.gray.50",_dark:{[Qr.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[Qr.variable]:"colors.white",[Nn.variable]:`colors.${t}.600`,_dark:{[Qr.variable]:"colors.gray.800",[Nn.variable]:`colors.${t}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:Nn.reference,bg:Qr.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),G5=Ro(e=>{const{colorScheme:t,theme:n}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:En(n,`${t}.700`),bg:En(n,`${t}.100`)}}}}),q5=Ro(e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[Nn.variable]:"colors.gray.600",_dark:{[Nn.variable]:"inherit"},_selected:{[Nn.variable]:"colors.white",[Qr.variable]:`colors.${t}.600`,_dark:{[Nn.variable]:"colors.gray.800",[Qr.variable]:`colors.${t}.300`}},color:Nn.reference,bg:Qr.reference}}}),K5=Ro({}),X5={line:j5,enclosed:U5,"enclosed-colored":H5,"soft-rounded":G5,"solid-rounded":q5,unstyled:K5},Y5=F5({baseStyle:W5,sizes:V5,variants:X5,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),Tt=m$("badge",["bg","color","shadow"]),Q5={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:Tt.bg.reference,color:Tt.color.reference,boxShadow:Tt.shadow.reference},J5=e=>{const{colorScheme:t,theme:n}=e,r=Mu(`${t}.500`,.6)(n);return{[Tt.bg.variable]:`colors.${t}.500`,[Tt.color.variable]:"colors.white",_dark:{[Tt.bg.variable]:r,[Tt.color.variable]:"colors.whiteAlpha.800"}}},Z5=e=>{const{colorScheme:t,theme:n}=e,r=Mu(`${t}.200`,.16)(n);return{[Tt.bg.variable]:`colors.${t}.100`,[Tt.color.variable]:`colors.${t}.800`,_dark:{[Tt.bg.variable]:r,[Tt.color.variable]:`colors.${t}.200`}}},eW=e=>{const{colorScheme:t,theme:n}=e,r=Mu(`${t}.200`,.8)(n);return{[Tt.color.variable]:`colors.${t}.500`,_dark:{[Tt.color.variable]:r},[Tt.shadow.variable]:`inset 0 0 0px 1px ${Tt.color.reference}`}},tW={solid:J5,subtle:Z5,outline:eW},Jl={baseStyle:Q5,variants:tW,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:nW,definePartsStyle:Va}=nt(Hz.keys),N2=be("tag-bg"),F2=be("tag-color"),Ym=be("tag-shadow"),lh=be("tag-min-height"),ch=be("tag-min-width"),dh=be("tag-font-size"),fh=be("tag-padding-inline"),rW={fontWeight:"medium",lineHeight:1.2,outline:0,[F2.variable]:Tt.color.reference,[N2.variable]:Tt.bg.reference,[Ym.variable]:Tt.shadow.reference,color:F2.reference,bg:N2.reference,boxShadow:Ym.reference,borderRadius:"md",minH:lh.reference,minW:ch.reference,fontSize:dh.reference,px:fh.reference,_focusVisible:{[Ym.variable]:"shadows.outline"}},oW={lineHeight:1.2,overflow:"visible"},iW={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},aW=Va({container:rW,label:oW,closeButton:iW}),sW={sm:Va({container:{[lh.variable]:"sizes.5",[ch.variable]:"sizes.5",[dh.variable]:"fontSizes.xs",[fh.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:Va({container:{[lh.variable]:"sizes.6",[ch.variable]:"sizes.6",[dh.variable]:"fontSizes.sm",[fh.variable]:"space.2"}}),lg:Va({container:{[lh.variable]:"sizes.8",[ch.variable]:"sizes.8",[dh.variable]:"fontSizes.md",[fh.variable]:"space.3"}})},uW={subtle:Va(e=>{var t;return{container:(t=Jl.variants)==null?void 0:t.subtle(e)}}),solid:Va(e=>{var t;return{container:(t=Jl.variants)==null?void 0:t.solid(e)}}),outline:Va(e=>{var t;return{container:(t=Jl.variants)==null?void 0:t.outline(e)}})},lW=nW({variants:uW,baseStyle:aW,sizes:sW,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:ni,defineMultiStyleConfig:cW}=nt(Az.keys),Gs=be("input-height"),qs=be("input-font-size"),Ks=be("input-padding"),Xs=be("input-border-radius"),dW=ni({addon:{height:Gs.reference,fontSize:qs.reference,px:Ks.reference,borderRadius:Xs.reference},field:{width:"100%",height:Gs.reference,fontSize:qs.reference,px:Ks.reference,borderRadius:Xs.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),ki={lg:{[qs.variable]:"fontSizes.lg",[Ks.variable]:"space.4",[Xs.variable]:"radii.md",[Gs.variable]:"sizes.12"},md:{[qs.variable]:"fontSizes.md",[Ks.variable]:"space.4",[Xs.variable]:"radii.md",[Gs.variable]:"sizes.10"},sm:{[qs.variable]:"fontSizes.sm",[Ks.variable]:"space.3",[Xs.variable]:"radii.sm",[Gs.variable]:"sizes.8"},xs:{[qs.variable]:"fontSizes.xs",[Ks.variable]:"space.2",[Xs.variable]:"radii.sm",[Gs.variable]:"sizes.6"}},fW={lg:ni({field:ki.lg,group:ki.lg}),md:ni({field:ki.md,group:ki.md}),sm:ni({field:ki.sm,group:ki.sm}),xs:ni({field:ki.xs,group:ki.xs})};function Fb(e){const{focusBorderColor:t,errorBorderColor:n}=e;return{focusBorderColor:t||ye("blue.500","blue.300")(e),errorBorderColor:n||ye("red.500","red.300")(e)}}var hW=ni(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=Fb(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:ye("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:En(t,r),boxShadow:`0 0 0 1px ${En(t,r)}`},_focusVisible:{zIndex:1,borderColor:En(t,n),boxShadow:`0 0 0 1px ${En(t,n)}`}},addon:{border:"1px solid",borderColor:ye("inherit","whiteAlpha.50")(e),bg:ye("gray.100","whiteAlpha.300")(e)}}}),pW=ni(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=Fb(e);return{field:{border:"2px solid",borderColor:"transparent",bg:ye("gray.100","whiteAlpha.50")(e),_hover:{bg:ye("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:En(t,r)},_focusVisible:{bg:"transparent",borderColor:En(t,n)}},addon:{border:"2px solid",borderColor:"transparent",bg:ye("gray.100","whiteAlpha.50")(e)}}}),vW=ni(e=>{const{theme:t}=e,{focusBorderColor:n,errorBorderColor:r}=Fb(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:En(t,r),boxShadow:`0px 1px 0px 0px ${En(t,r)}`},_focusVisible:{borderColor:En(t,n),boxShadow:`0px 1px 0px 0px ${En(t,n)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),mW=ni({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),gW={outline:hW,filled:pW,flushed:vW,unstyled:mW},Ge=cW({baseStyle:dW,sizes:fW,variants:gW,defaultProps:{size:"md",variant:"outline"}}),B2,yW={...(B2=Ge.baseStyle)==null?void 0:B2.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},L2,$2,bW={outline:e=>{var t,n;return(n=(t=Ge.variants)==null?void 0:t.outline(e).field)!=null?n:{}},flushed:e=>{var t,n;return(n=(t=Ge.variants)==null?void 0:t.flushed(e).field)!=null?n:{}},filled:e=>{var t,n;return(n=(t=Ge.variants)==null?void 0:t.filled(e).field)!=null?n:{}},unstyled:($2=(L2=Ge.variants)==null?void 0:L2.unstyled.field)!=null?$2:{}},z2,W2,V2,j2,U2,H2,G2,q2,xW={xs:(W2=(z2=Ge.sizes)==null?void 0:z2.xs.field)!=null?W2:{},sm:(j2=(V2=Ge.sizes)==null?void 0:V2.sm.field)!=null?j2:{},md:(H2=(U2=Ge.sizes)==null?void 0:U2.md.field)!=null?H2:{},lg:(q2=(G2=Ge.sizes)==null?void 0:G2.lg.field)!=null?q2:{}},wW={baseStyle:yW,sizes:xW,variants:bW,defaultProps:{size:"md",variant:"outline"}},vf=zt("tooltip-bg"),Qm=zt("tooltip-fg"),SW=zt("popper-arrow-bg"),CW={bg:vf.reference,color:Qm.reference,[vf.variable]:"colors.gray.700",[Qm.variable]:"colors.whiteAlpha.900",_dark:{[vf.variable]:"colors.gray.300",[Qm.variable]:"colors.gray.900"},[SW.variable]:vf.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},_W={baseStyle:CW},{defineMultiStyleConfig:EW,definePartsStyle:Bl}=nt(Bz.keys),kW=e=>{const{colorScheme:t,theme:n,isIndeterminate:r,hasStripe:o}=e,i=ye(I2(),I2("1rem","rgba(0,0,0,0.1)"))(e),a=ye(`${t}.500`,`${t}.200`)(e),s=`linear-gradient(
    to right,
    transparent 0%,
    ${En(n,a)} 50%,
    transparent 100%
  )`;return{...!r&&o&&i,...r?{bgImage:s}:{bgColor:a}}},TW={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},RW=e=>({bg:ye("gray.100","whiteAlpha.300")(e)}),PW=e=>({transitionProperty:"common",transitionDuration:"slow",...kW(e)}),IW=Bl(e=>({label:TW,filledTrack:PW(e),track:RW(e)})),AW={xs:Bl({track:{h:"1"}}),sm:Bl({track:{h:"2"}}),md:Bl({track:{h:"3"}}),lg:Bl({track:{h:"4"}})},DW=EW({sizes:AW,baseStyle:IW,defaultProps:{size:"md",colorScheme:"blue"}}),MW=e=>typeof e=="function";function Tn(e,...t){return MW(e)?e(...t):e}var{definePartsStyle:hh,defineMultiStyleConfig:OW}=nt(kz.keys),Zl=be("checkbox-size"),NW=e=>{const{colorScheme:t}=e;return{w:Zl.reference,h:Zl.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:ye(`${t}.500`,`${t}.200`)(e),borderColor:ye(`${t}.500`,`${t}.200`)(e),color:ye("white","gray.900")(e),_hover:{bg:ye(`${t}.600`,`${t}.300`)(e),borderColor:ye(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:ye("gray.200","transparent")(e),bg:ye("gray.200","whiteAlpha.300")(e),color:ye("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:ye(`${t}.500`,`${t}.200`)(e),borderColor:ye(`${t}.500`,`${t}.200`)(e),color:ye("white","gray.900")(e)},_disabled:{bg:ye("gray.100","whiteAlpha.100")(e),borderColor:ye("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:ye("red.500","red.300")(e)}}},FW={_disabled:{cursor:"not-allowed"}},BW={userSelect:"none",_disabled:{opacity:.4}},LW={transitionProperty:"transform",transitionDuration:"normal"},$W=hh(e=>({icon:LW,container:FW,control:Tn(NW,e),label:BW})),zW={sm:hh({control:{[Zl.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:hh({control:{[Zl.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:hh({control:{[Zl.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},np=OW({baseStyle:$W,sizes:zW,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:WW,definePartsStyle:ph}=nt(Lz.keys),VW=e=>{var t;const n=(t=Tn(np.baseStyle,e))==null?void 0:t.control;return{...n,borderRadius:"full",_checked:{...n==null?void 0:n._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},jW=ph(e=>{var t,n,r,o;return{label:(n=(t=np).baseStyle)==null?void 0:n.call(t,e).label,container:(o=(r=np).baseStyle)==null?void 0:o.call(r,e).container,control:VW(e)}}),UW={md:ph({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:ph({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:ph({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},HW=WW({baseStyle:jW,sizes:UW,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:GW,definePartsStyle:qW}=nt($z.keys),mf=be("select-bg"),K2,KW={...(K2=Ge.baseStyle)==null?void 0:K2.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:mf.reference,[mf.variable]:"colors.white",_dark:{[mf.variable]:"colors.gray.700"},"> option, > optgroup":{bg:mf.reference}},XW={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},YW=qW({field:KW,icon:XW}),gf={paddingInlineEnd:"8"},X2,Y2,Q2,J2,Z2,eC,tC,nC,QW={lg:{...(X2=Ge.sizes)==null?void 0:X2.lg,field:{...(Y2=Ge.sizes)==null?void 0:Y2.lg.field,...gf}},md:{...(Q2=Ge.sizes)==null?void 0:Q2.md,field:{...(J2=Ge.sizes)==null?void 0:J2.md.field,...gf}},sm:{...(Z2=Ge.sizes)==null?void 0:Z2.sm,field:{...(eC=Ge.sizes)==null?void 0:eC.sm.field,...gf}},xs:{...(tC=Ge.sizes)==null?void 0:tC.xs,field:{...(nC=Ge.sizes)==null?void 0:nC.xs.field,...gf},icon:{insetEnd:"1"}}},JW=GW({baseStyle:YW,sizes:QW,variants:Ge.variants,defaultProps:Ge.defaultProps}),Jm=be("skeleton-start-color"),Zm=be("skeleton-end-color"),ZW={[Jm.variable]:"colors.gray.100",[Zm.variable]:"colors.gray.400",_dark:{[Jm.variable]:"colors.gray.800",[Zm.variable]:"colors.gray.600"},background:Jm.reference,borderColor:Zm.reference,opacity:.7,borderRadius:"sm"},eV={baseStyle:ZW},eg=be("skip-link-bg"),tV={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[eg.variable]:"colors.white",_dark:{[eg.variable]:"colors.gray.700"},bg:eg.reference}},nV={baseStyle:tV},{defineMultiStyleConfig:rV,definePartsStyle:_v}=nt(zz.keys),Nc=be("slider-thumb-size"),Fc=be("slider-track-size"),$i=be("slider-bg"),oV=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...Nb({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}})}},iV=e=>({...Nb({orientation:e.orientation,horizontal:{h:Fc.reference},vertical:{w:Fc.reference}}),overflow:"hidden",borderRadius:"sm",[$i.variable]:"colors.gray.200",_dark:{[$i.variable]:"colors.whiteAlpha.200"},_disabled:{[$i.variable]:"colors.gray.300",_dark:{[$i.variable]:"colors.whiteAlpha.300"}},bg:$i.reference}),aV=e=>{const{orientation:t}=e;return{...Nb({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:Nc.reference,h:Nc.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},sV=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[$i.variable]:`colors.${t}.500`,_dark:{[$i.variable]:`colors.${t}.200`},bg:$i.reference}},uV=_v(e=>({container:oV(e),track:iV(e),thumb:aV(e),filledTrack:sV(e)})),lV=_v({container:{[Nc.variable]:"sizes.4",[Fc.variable]:"sizes.1"}}),cV=_v({container:{[Nc.variable]:"sizes.3.5",[Fc.variable]:"sizes.1"}}),dV=_v({container:{[Nc.variable]:"sizes.2.5",[Fc.variable]:"sizes.0.5"}}),fV={lg:lV,md:cV,sm:dV},hV=rV({baseStyle:uV,sizes:fV,defaultProps:{size:"md",colorScheme:"blue"}}),Ia=zt("spinner-size"),pV={width:[Ia.reference],height:[Ia.reference]},vV={xs:{[Ia.variable]:"sizes.3"},sm:{[Ia.variable]:"sizes.4"},md:{[Ia.variable]:"sizes.6"},lg:{[Ia.variable]:"sizes.8"},xl:{[Ia.variable]:"sizes.12"}},mV={baseStyle:pV,sizes:vV,defaultProps:{size:"md"}},{defineMultiStyleConfig:gV,definePartsStyle:dP}=nt(Wz.keys),yV={fontWeight:"medium"},bV={opacity:.8,marginBottom:"2"},xV={verticalAlign:"baseline",fontWeight:"semibold"},wV={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},SV=dP({container:{},label:yV,helpText:bV,number:xV,icon:wV}),CV={md:dP({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},_V=gV({baseStyle:SV,sizes:CV,defaultProps:{size:"md"}}),tg=be("kbd-bg"),EV={[tg.variable]:"colors.gray.100",_dark:{[tg.variable]:"colors.whiteAlpha.100"},bg:tg.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},kV={baseStyle:EV},TV={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},RV={baseStyle:TV},{defineMultiStyleConfig:PV,definePartsStyle:IV}=nt(Dz.keys),AV={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},DV=IV({icon:AV}),MV=PV({baseStyle:DV}),{defineMultiStyleConfig:OV,definePartsStyle:NV}=nt(Mz.keys),fo=be("menu-bg"),ng=be("menu-shadow"),FV={[fo.variable]:"#fff",[ng.variable]:"shadows.sm",_dark:{[fo.variable]:"colors.gray.700",[ng.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:fo.reference,boxShadow:ng.reference},BV={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[fo.variable]:"colors.gray.100",_dark:{[fo.variable]:"colors.whiteAlpha.100"}},_active:{[fo.variable]:"colors.gray.200",_dark:{[fo.variable]:"colors.whiteAlpha.200"}},_expanded:{[fo.variable]:"colors.gray.100",_dark:{[fo.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:fo.reference},LV={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},$V={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},zV={opacity:.6},WV={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},VV={transitionProperty:"common",transitionDuration:"normal"},jV=NV({button:VV,list:FV,item:BV,groupTitle:LV,icon:$V,command:zV,divider:WV}),UV=OV({baseStyle:jV}),{defineMultiStyleConfig:HV,definePartsStyle:Sy}=nt(Oz.keys),rg=be("modal-bg"),og=be("modal-shadow"),GV={bg:"blackAlpha.600",zIndex:"modal"},qV=e=>{const{isCentered:t,scrollBehavior:n}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:n==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},KV=e=>{const{isCentered:t,scrollBehavior:n}=e;return{borderRadius:"md",color:"inherit",my:t?"auto":"16",mx:t?"auto":void 0,zIndex:"modal",maxH:n==="inside"?"calc(100% - 7.5rem)":void 0,[rg.variable]:"colors.white",[og.variable]:"shadows.lg",_dark:{[rg.variable]:"colors.gray.700",[og.variable]:"shadows.dark-lg"},bg:rg.reference,boxShadow:og.reference}},XV={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},YV={position:"absolute",top:"2",insetEnd:"3"},QV=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:t==="inside"?"auto":void 0}},JV={px:"6",py:"4"},ZV=Sy(e=>({overlay:GV,dialogContainer:Tn(qV,e),dialog:Tn(KV,e),header:XV,closeButton:YV,body:Tn(QV,e),footer:JV}));function Hr(e){return Sy(e==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var ej={xs:Hr("xs"),sm:Hr("sm"),md:Hr("md"),lg:Hr("lg"),xl:Hr("xl"),"2xl":Hr("2xl"),"3xl":Hr("3xl"),"4xl":Hr("4xl"),"5xl":Hr("5xl"),"6xl":Hr("6xl"),full:Hr("full")},tj=HV({baseStyle:ZV,sizes:ej,defaultProps:{size:"md"}}),{defineMultiStyleConfig:nj,definePartsStyle:fP}=nt(Nz.keys),Bb=zt("number-input-stepper-width"),hP=zt("number-input-input-padding"),rj=Jo(Bb).add("0.5rem").toString(),ig=zt("number-input-bg"),ag=zt("number-input-color"),sg=zt("number-input-border-color"),oj={[Bb.variable]:"sizes.6",[hP.variable]:rj},ij=e=>{var t,n;return(n=(t=Tn(Ge.baseStyle,e))==null?void 0:t.field)!=null?n:{}},aj={width:Bb.reference},sj={borderStart:"1px solid",borderStartColor:sg.reference,color:ag.reference,bg:ig.reference,[ag.variable]:"colors.chakra-body-text",[sg.variable]:"colors.chakra-border-color",_dark:{[ag.variable]:"colors.whiteAlpha.800",[sg.variable]:"colors.whiteAlpha.300"},_active:{[ig.variable]:"colors.gray.200",_dark:{[ig.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},uj=fP(e=>{var t;return{root:oj,field:(t=Tn(ij,e))!=null?t:{},stepperGroup:aj,stepper:sj}});function yf(e){var t,n,r;const o=(t=Ge.sizes)==null?void 0:t[e],i={lg:"md",md:"md",sm:"sm",xs:"sm"},a=(r=(n=o.field)==null?void 0:n.fontSize)!=null?r:"md",s=aP.fontSizes[a];return fP({field:{...o.field,paddingInlineEnd:hP.reference,verticalAlign:"top"},stepper:{fontSize:Jo(s).multiply(.75).toString(),_first:{borderTopEndRadius:i[e]},_last:{borderBottomEndRadius:i[e],mt:"-1px",borderTopWidth:1}}})}var lj={xs:yf("xs"),sm:yf("sm"),md:yf("md"),lg:yf("lg")},cj=nj({baseStyle:uj,sizes:lj,variants:Ge.variants,defaultProps:Ge.defaultProps}),rC,dj={...(rC=Ge.baseStyle)==null?void 0:rC.field,textAlign:"center"},fj={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},oC,iC,hj={outline:e=>{var t,n,r;return(r=(n=Tn((t=Ge.variants)==null?void 0:t.outline,e))==null?void 0:n.field)!=null?r:{}},flushed:e=>{var t,n,r;return(r=(n=Tn((t=Ge.variants)==null?void 0:t.flushed,e))==null?void 0:n.field)!=null?r:{}},filled:e=>{var t,n,r;return(r=(n=Tn((t=Ge.variants)==null?void 0:t.filled,e))==null?void 0:n.field)!=null?r:{}},unstyled:(iC=(oC=Ge.variants)==null?void 0:oC.unstyled.field)!=null?iC:{}},pj={baseStyle:dj,sizes:fj,variants:hj,defaultProps:Ge.defaultProps},{defineMultiStyleConfig:vj,definePartsStyle:mj}=nt(Fz.keys),bf=zt("popper-bg"),gj=zt("popper-arrow-bg"),aC=zt("popper-arrow-shadow-color"),yj={zIndex:10},bj={[bf.variable]:"colors.white",bg:bf.reference,[gj.variable]:bf.reference,[aC.variable]:"colors.gray.200",_dark:{[bf.variable]:"colors.gray.700",[aC.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},xj={px:3,py:2,borderBottomWidth:"1px"},wj={px:3,py:2},Sj={px:3,py:2,borderTopWidth:"1px"},Cj={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},_j=mj({popper:yj,content:bj,header:xj,body:wj,footer:Sj,closeButton:Cj}),Ej=vj({baseStyle:_j}),{definePartsStyle:Cy,defineMultiStyleConfig:kj}=nt(Tz.keys),ug=be("drawer-bg"),lg=be("drawer-box-shadow");function bs(e){return Cy(e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var Tj={bg:"blackAlpha.600",zIndex:"modal"},Rj={display:"flex",zIndex:"modal",justifyContent:"center"},Pj=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[ug.variable]:"colors.white",[lg.variable]:"shadows.lg",_dark:{[ug.variable]:"colors.gray.700",[lg.variable]:"shadows.dark-lg"},bg:ug.reference,boxShadow:lg.reference}},Ij={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Aj={position:"absolute",top:"2",insetEnd:"3"},Dj={px:"6",py:"2",flex:"1",overflow:"auto"},Mj={px:"6",py:"4"},Oj=Cy(e=>({overlay:Tj,dialogContainer:Rj,dialog:Tn(Pj,e),header:Ij,closeButton:Aj,body:Dj,footer:Mj})),Nj={xs:bs("xs"),sm:bs("md"),md:bs("lg"),lg:bs("2xl"),xl:bs("4xl"),full:bs("full")},Fj=kj({baseStyle:Oj,sizes:Nj,defaultProps:{size:"xs"}}),{definePartsStyle:Bj,defineMultiStyleConfig:Lj}=nt(Rz.keys),$j={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},zj={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},Wj={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},Vj=Bj({preview:$j,input:zj,textarea:Wj}),jj=Lj({baseStyle:Vj}),{definePartsStyle:Uj,defineMultiStyleConfig:Hj}=nt(Pz.keys),du=be("form-control-color"),Gj={marginStart:"1",[du.variable]:"colors.red.500",_dark:{[du.variable]:"colors.red.300"},color:du.reference},qj={mt:"2",[du.variable]:"colors.gray.600",_dark:{[du.variable]:"colors.whiteAlpha.600"},color:du.reference,lineHeight:"normal",fontSize:"sm"},Kj=Uj({container:{width:"100%",position:"relative"},requiredIndicator:Gj,helperText:qj}),Xj=Hj({baseStyle:Kj}),{definePartsStyle:Yj,defineMultiStyleConfig:Qj}=nt(Iz.keys),fu=be("form-error-color"),Jj={[fu.variable]:"colors.red.500",_dark:{[fu.variable]:"colors.red.300"},color:fu.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},Zj={marginEnd:"0.5em",[fu.variable]:"colors.red.500",_dark:{[fu.variable]:"colors.red.300"},color:fu.reference},e6=Yj({text:Jj,icon:Zj}),t6=Qj({baseStyle:e6}),n6={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},r6={baseStyle:n6},o6={fontFamily:"heading",fontWeight:"bold"},i6={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},a6={baseStyle:o6,sizes:i6,defaultProps:{size:"xl"}},{defineMultiStyleConfig:s6,definePartsStyle:u6}=nt(Ez.keys),cg=be("breadcrumb-link-decor"),l6={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:cg.reference,[cg.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[cg.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},c6=u6({link:l6}),d6=s6({baseStyle:c6}),f6={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},pP=e=>{const{colorScheme:t,theme:n}=e;if(t==="gray")return{color:ye("gray.800","whiteAlpha.900")(e),_hover:{bg:ye("gray.100","whiteAlpha.200")(e)},_active:{bg:ye("gray.200","whiteAlpha.300")(e)}};const r=Mu(`${t}.200`,.12)(n),o=Mu(`${t}.200`,.24)(n);return{color:ye(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:ye(`${t}.50`,r)(e)},_active:{bg:ye(`${t}.100`,o)(e)}}},h6=e=>{const{colorScheme:t}=e,n=ye("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:t==="gray"?n:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Tn(pP,e)}},p6={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},v6=e=>{var t;const{colorScheme:n}=e;if(n==="gray"){const u=ye("gray.100","whiteAlpha.200")(e);return{bg:u,color:ye("gray.800","whiteAlpha.900")(e),_hover:{bg:ye("gray.200","whiteAlpha.300")(e),_disabled:{bg:u}},_active:{bg:ye("gray.300","whiteAlpha.400")(e)}}}const{bg:r=`${n}.500`,color:o="white",hoverBg:i=`${n}.600`,activeBg:a=`${n}.700`}=(t=p6[n])!=null?t:{},s=ye(r,`${n}.200`)(e);return{bg:s,color:ye(o,"gray.800")(e),_hover:{bg:ye(i,`${n}.300`)(e),_disabled:{bg:s}},_active:{bg:ye(a,`${n}.400`)(e)}}},m6=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:ye(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:ye(`${t}.700`,`${t}.500`)(e)}}},g6={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},y6={ghost:pP,outline:h6,solid:v6,link:m6,unstyled:g6},b6={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},x6={baseStyle:f6,variants:y6,sizes:b6,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:ja,defineMultiStyleConfig:w6}=nt(Gz.keys),rp=be("card-bg"),ii=be("card-padding"),vP=be("card-shadow"),vh=be("card-radius"),mP=be("card-border-width","0"),gP=be("card-border-color"),S6=ja({container:{[rp.variable]:"colors.chakra-body-bg",backgroundColor:rp.reference,boxShadow:vP.reference,borderRadius:vh.reference,color:"chakra-body-text",borderWidth:mP.reference,borderColor:gP.reference},body:{padding:ii.reference,flex:"1 1 0%"},header:{padding:ii.reference},footer:{padding:ii.reference}}),C6={sm:ja({container:{[vh.variable]:"radii.base",[ii.variable]:"space.3"}}),md:ja({container:{[vh.variable]:"radii.md",[ii.variable]:"space.5"}}),lg:ja({container:{[vh.variable]:"radii.xl",[ii.variable]:"space.7"}})},_6={elevated:ja({container:{[vP.variable]:"shadows.base",_dark:{[rp.variable]:"colors.gray.700"}}}),outline:ja({container:{[mP.variable]:"1px",[gP.variable]:"colors.chakra-border-color"}}),filled:ja({container:{[rp.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[ii.variable]:0},header:{[ii.variable]:0},footer:{[ii.variable]:0}}},E6=w6({baseStyle:S6,variants:_6,sizes:C6,defaultProps:{variant:"elevated",size:"md"}}),ec=zt("close-button-size"),yl=zt("close-button-bg"),k6={w:[ec.reference],h:[ec.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[yl.variable]:"colors.blackAlpha.100",_dark:{[yl.variable]:"colors.whiteAlpha.100"}},_active:{[yl.variable]:"colors.blackAlpha.200",_dark:{[yl.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:yl.reference},T6={lg:{[ec.variable]:"sizes.10",fontSize:"md"},md:{[ec.variable]:"sizes.8",fontSize:"xs"},sm:{[ec.variable]:"sizes.6",fontSize:"2xs"}},R6={baseStyle:k6,sizes:T6,defaultProps:{size:"md"}},{variants:P6,defaultProps:I6}=Jl,A6={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:Tt.bg.reference,color:Tt.color.reference,boxShadow:Tt.shadow.reference},D6={baseStyle:A6,variants:P6,defaultProps:I6},M6={w:"100%",mx:"auto",maxW:"prose",px:"4"},O6={baseStyle:M6},N6={opacity:.6,borderColor:"inherit"},F6={borderStyle:"solid"},B6={borderStyle:"dashed"},L6={solid:F6,dashed:B6},$6={baseStyle:N6,variants:L6,defaultProps:{variant:"solid"}},{definePartsStyle:z6,defineMultiStyleConfig:W6}=nt(Sz.keys),V6={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},j6={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},U6={pt:"2",px:"4",pb:"5"},H6={fontSize:"1.25em"},G6=z6({container:V6,button:j6,panel:U6,icon:H6}),q6=W6({baseStyle:G6}),{definePartsStyle:fd,defineMultiStyleConfig:K6}=nt(Cz.keys),fr=be("alert-fg"),hi=be("alert-bg"),X6=fd({container:{bg:hi.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:fr.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:fr.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function Lb(e){const{theme:t,colorScheme:n}=e,r=Mu(`${n}.200`,.16)(t);return{light:`colors.${n}.100`,dark:r}}var Y6=fd(e=>{const{colorScheme:t}=e,n=Lb(e);return{container:{[fr.variable]:`colors.${t}.600`,[hi.variable]:n.light,_dark:{[fr.variable]:`colors.${t}.200`,[hi.variable]:n.dark}}}}),Q6=fd(e=>{const{colorScheme:t}=e,n=Lb(e);return{container:{[fr.variable]:`colors.${t}.600`,[hi.variable]:n.light,_dark:{[fr.variable]:`colors.${t}.200`,[hi.variable]:n.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:fr.reference}}}),J6=fd(e=>{const{colorScheme:t}=e,n=Lb(e);return{container:{[fr.variable]:`colors.${t}.600`,[hi.variable]:n.light,_dark:{[fr.variable]:`colors.${t}.200`,[hi.variable]:n.dark},pt:"2",borderTopWidth:"4px",borderTopColor:fr.reference}}}),Z6=fd(e=>{const{colorScheme:t}=e;return{container:{[fr.variable]:"colors.white",[hi.variable]:`colors.${t}.600`,_dark:{[fr.variable]:"colors.gray.900",[hi.variable]:`colors.${t}.200`},color:fr.reference}}}),eU={subtle:Y6,"left-accent":Q6,"top-accent":J6,solid:Z6},tU=K6({baseStyle:X6,variants:eU,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:yP,defineMultiStyleConfig:nU}=nt(_z.keys),hu=be("avatar-border-color"),tc=be("avatar-bg"),Bc=be("avatar-font-size"),Ou=be("avatar-size"),rU={borderRadius:"full",border:"0.2em solid",borderColor:hu.reference,[hu.variable]:"white",_dark:{[hu.variable]:"colors.gray.800"}},oU={bg:tc.reference,fontSize:Bc.reference,width:Ou.reference,height:Ou.reference,lineHeight:"1",[tc.variable]:"colors.gray.200",_dark:{[tc.variable]:"colors.whiteAlpha.400"}},iU=e=>{const{name:t,theme:n}=e,r=t?f5({string:t}):"colors.gray.400",o=c5(r)(n);let i="white";return o||(i="gray.800"),{bg:tc.reference,fontSize:Bc.reference,color:i,borderColor:hu.reference,verticalAlign:"top",width:Ou.reference,height:Ou.reference,"&:not([data-loaded])":{[tc.variable]:r},[hu.variable]:"colors.white",_dark:{[hu.variable]:"colors.gray.800"}}},aU={fontSize:Bc.reference,lineHeight:"1"},sU=yP(e=>({badge:Tn(rU,e),excessLabel:Tn(oU,e),container:Tn(iU,e),label:aU}));function Ti(e){const t=e!=="100%"?uP[e]:void 0;return yP({container:{[Ou.variable]:t??e,[Bc.variable]:`calc(${t??e} / 2.5)`},excessLabel:{[Ou.variable]:t??e,[Bc.variable]:`calc(${t??e} / 2.5)`}})}var uU={"2xs":Ti(4),xs:Ti(6),sm:Ti(8),md:Ti(12),lg:Ti(16),xl:Ti(24),"2xl":Ti(32),full:Ti("100%")},lU=nU({baseStyle:sU,sizes:uU,defaultProps:{size:"md"}}),cU={Accordion:q6,Alert:tU,Avatar:lU,Badge:Jl,Breadcrumb:d6,Button:x6,Checkbox:np,CloseButton:R6,Code:D6,Container:O6,Divider:$6,Drawer:Fj,Editable:jj,Form:Xj,FormError:t6,FormLabel:r6,Heading:a6,Input:Ge,Kbd:kV,Link:RV,List:MV,Menu:UV,Modal:tj,NumberInput:cj,PinInput:pj,Popover:Ej,Progress:DW,Radio:HW,Select:JW,Skeleton:eV,SkipLink:nV,Slider:hV,Spinner:mV,Stat:_V,Switch:R5,Table:N5,Tabs:Y5,Tag:lW,Textarea:wW,Tooltip:_W,Card:E6,Stepper:wz},dU={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},fU={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},hU="ltr",pU={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},bP={semanticTokens:dU,direction:hU,...yz,components:cU,styles:fU,config:pU};function Ll(e){return typeof e=="function"}function vU(...e){return t=>e.reduce((n,r)=>r(n),t)}var mU=e=>function(...n){let r=[...n],o=n[n.length-1];return K$(o)&&r.length>1?r=r.slice(0,r.length-1):o=e,vU(...r.map(i=>a=>Ll(i)?i(a):yU(a,i)))(o)},gU=mU(bP);function yU(...e){return Dr({},...e,xP)}function xP(e,t,n,r){if((Ll(e)||Ll(t))&&Object.prototype.hasOwnProperty.call(r,n))return(...o)=>{const i=Ll(e)?e(...o):e,a=Ll(t)?t(...o):t;return Dr({},i,a,xP)}}function bU(e,t){const n={};return Object.keys(e).forEach(r=>{t.includes(r)||(n[r]=e[r])}),n}function xU(e,t,n,r){const o=typeof t=="string"?t.split("."):[t];for(r=0;r<o.length&&e;r+=1)e=e[o[r]];return e===void 0?n:e}var wU=e=>{const t=new WeakMap;return(r,o,i,a)=>{if(typeof r>"u")return e(r,o,i);t.has(r)||t.set(r,new Map);const s=t.get(r);if(s.has(o))return s.get(o);const u=e(r,o,i,a);return s.set(o,u),u}},wP=wU(xU);function SP(e,t){const n={};return Object.keys(e).forEach(r=>{const o=e[r];t(o,r,e)&&(n[r]=o)}),n}var CP=e=>SP(e,t=>t!=null);function SU(e){return typeof e=="function"}function _P(e,...t){return SU(e)?e(...t):e}var CU=typeof Element<"u",_U=typeof Map=="function",EU=typeof Set=="function",kU=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function mh(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,o;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!mh(e[r],t[r]))return!1;return!0}var i;if(_U&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(r=i.next()).done;)if(!t.has(r.value[0]))return!1;for(i=e.entries();!(r=i.next()).done;)if(!mh(r.value[1],t.get(r.value[0])))return!1;return!0}if(EU&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(r=i.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(kU&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;if(CU&&e instanceof Element)return!1;for(r=n;r--!==0;)if(!((o[r]==="_owner"||o[r]==="__v"||o[r]==="__o")&&e.$$typeof)&&!mh(e[o[r]],t[o[r]]))return!1;return!0}return e!==e&&t!==t}var TU=function(t,n){try{return mh(t,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const RU=Up(TU);function EP(e,t={}){var n;const{styleConfig:r,...o}=t,{theme:i,colorMode:a}=JR(),s=e?wP(i,`components.${e}`):void 0,u=r||s,l=Dr({theme:i,colorMode:a},(n=u==null?void 0:u.defaultProps)!=null?n:{},CP(bU(o,["children"]))),c=T.useRef({});if(u){const f=G$(u)(l);RU(c.current,f)||(c.current=f)}return c.current}function hd(e,t={}){return EP(e,t)}function is(e,t={}){return EP(e,t)}var PU=new Set([...O$,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),IU=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function AU(e){return IU.has(e)||!PU.has(e)}function DU(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const n={...e};for(const r of t)if(r!=null)for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&(o in n&&delete n[o],n[o]=r[o]);return n}function MU(e){const t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}var OU=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,NU=NR(function(e){return OU.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),FU=NU,BU=function(t){return t!=="theme"},sC=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?FU:BU},uC=function(t,n,r){var o;if(n){var i=n.shouldForwardProp;o=t.__emotion_forwardProp&&i?function(a){return t.__emotion_forwardProp(a)&&i(a)}:i}return typeof o!="function"&&r&&(o=t.__emotion_forwardProp),o},LU=function(t){var n=t.cache,r=t.serialized,o=t.isStringTag;return WR(n,r,o),uL(function(){return VR(n,r,o)}),null},$U=function e(t,n){var r=t.__emotion_real===t,o=r&&t.__emotion_base||t,i,a;n!==void 0&&(i=n.label,a=n.target);var s=uC(t,n,r),u=s||sC(o),l=!u("as");return function(){var c=arguments,d=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&d.push("label:"+i+";"),c[0]==null||c[0].raw===void 0)d.push.apply(d,c);else{d.push(c[0][0]);for(var f=c.length,h=1;h<f;h++)d.push(c[h],c[0][h])}var p=GR(function(v,y,m){var g=l&&v.as||o,b="",x=[],w=v;if(v.theme==null){w={};for(var S in v)w[S]=v[S];w.theme=T.useContext(Dc)}typeof v.className=="string"?b=tL(y.registered,x,v.className):v.className!=null&&(b=v.className+" ");var C=Tb(d.concat(x),y.registered,w);b+=y.key+"-"+C.name,a!==void 0&&(b+=" "+a);var _=l&&s===void 0?sC(g):u,k={};for(var E in v)l&&E==="as"||_(E)&&(k[E]=v[E]);return k.className=b,k.ref=m,T.createElement(T.Fragment,null,T.createElement(LU,{cache:y,serialized:C,isStringTag:typeof g=="string"}),T.createElement(g,k))});return p.displayName=i!==void 0?i:"Styled("+(typeof o=="string"?o:o.displayName||o.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=o,p.__emotion_styles=d,p.__emotion_forwardProp=s,Object.defineProperty(p,"toString",{value:function(){return"."+a}}),p.withComponent=function(v,y){return e(v,Za({},n,y,{shouldForwardProp:uC(p,y,!0)})).apply(void 0,d)},p}},zU=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],op=$U.bind();zU.forEach(function(e){op[e]=op(e)});var lC,WU=(lC=op.default)!=null?lC:op,VU=({baseStyle:e})=>t=>{const{theme:n,css:r,__css:o,sx:i,...a}=t,s=SP(a,(d,f)=>F$(f)),u=_P(e,t),l=DU({},o,u,CP(s),i),c=iP(l)(t.theme);return r?[c,r]:c};function dg(e,t){const{baseStyle:n,...r}=t??{};r.shouldForwardProp||(r.shouldForwardProp=AU);const o=VU({baseStyle:n}),i=WU(e,r)(o);return lr.forwardRef(function(u,l){const{colorMode:c,forced:d}=Ib();return lr.createElement(i,{ref:l,"data-theme":d?c:void 0,...u})})}function jU(){const e=new Map;return new Proxy(dg,{apply(t,n,r){return dg(...r)},get(t,n){return e.has(n)||e.set(n,dg(n)),e.get(n)}})}var Te=jU();function Le(e){return T.forwardRef(e)}function UU(e={}){const{strict:t=!0,errorMessage:n="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=e,o=T.createContext(void 0);o.displayName=r;function i(){var a;const s=T.useContext(o);if(!s&&t){const u=new Error(n);throw u.name="ContextError",(a=Error.captureStackTrace)==null||a.call(Error,u,i),u}return s}return[o.Provider,i,o]}function HU(e){const{cssVarsRoot:t,theme:n,children:r}=e,o=T.useMemo(()=>A$(n),[n]);return L.jsxs(dL,{theme:o,children:[L.jsx(GU,{root:t}),r]})}function GU({root:e=":host, :root"}){const t=[e,"[data-theme]"].join(",");return L.jsx(xv,{styles:n=>({[t]:n.__cssVars})})}UU({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function qU(){const{colorMode:e}=Ib();return L.jsx(xv,{styles:t=>{const n=wP(t,"styles.global"),r=_P(n,{theme:t,colorMode:e});return r?iP(r)(t):void 0}})}var $b=T.createContext({getDocument(){return document},getWindow(){return window}});$b.displayName="EnvironmentContext";function KU({defer:e}={}){const[,t]=T.useReducer(n=>n+1,0);return Mc(()=>{e&&t()},[e]),T.useContext($b)}function kP(e){const{children:t,environment:n,disabled:r}=e,o=T.useRef(null),i=T.useMemo(()=>n||{getDocument:()=>{var s,u;return(u=(s=o.current)==null?void 0:s.ownerDocument)!=null?u:document},getWindow:()=>{var s,u;return(u=(s=o.current)==null?void 0:s.ownerDocument.defaultView)!=null?u:window}},[n]),a=!r||!n;return L.jsxs($b.Provider,{value:i,children:[t,a&&L.jsx("span",{id:"__chakra_env",hidden:!0,ref:o})]})}kP.displayName="EnvironmentProvider";var XU=e=>{const{children:t,colorModeManager:n,portalZIndex:r,resetScope:o,resetCSS:i=!0,theme:a={},environment:s,cssVarsRoot:u,disableEnvironment:l,disableGlobalStyle:c}=e,d=L.jsx(kP,{environment:s,disabled:l,children:t});return L.jsx(HU,{theme:a,cssVarsRoot:u,children:L.jsxs(QR,{colorModeManager:n,options:a.config,children:[i?L.jsx(vL,{scope:o}):L.jsx(pL,{}),!c&&L.jsx(qU,{}),r?L.jsx(XR,{zIndex:r,children:d}):d]})})},YU=(e,t)=>e.find(n=>n.id===t);function cC(e,t){const n=TP(e,t),r=n?e[n].findIndex(o=>o.id===t):-1;return{position:n,index:r}}function TP(e,t){for(const[n,r]of Object.entries(e))if(YU(r,t))return n}function QU(e){const t=e.includes("right"),n=e.includes("left");let r="center";return t&&(r="flex-end"),n&&(r="flex-start"),{display:"flex",flexDirection:"column",alignItems:r}}function JU(e){const n=e==="top"||e==="bottom"?"0 auto":void 0,r=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,o=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,i=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",a=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:n,top:r,bottom:o,right:i,left:a}}function Lc(e,t=[]){const n=T.useRef(e);return T.useEffect(()=>{n.current=e}),T.useCallback((...r)=>{var o;return(o=n.current)==null?void 0:o.call(n,...r)},t)}function ZU(e,t){const n=Lc(e);T.useEffect(()=>{if(t==null)return;let r=null;return r=window.setTimeout(()=>{n()},t),()=>{r&&window.clearTimeout(r)}},[t,n])}function $c(e,t){const n=T.useRef(!1),r=T.useRef(!1);T.useEffect(()=>{if(n.current&&r.current)return e();r.current=!0},t),T.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[])}const RP=T.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Ev=T.createContext({}),pd=T.createContext(null),kv=typeof document<"u",zb=kv?T.useLayoutEffect:T.useEffect,PP=T.createContext({strict:!1}),Wb=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),eH="framerAppearId",IP="data-"+Wb(eH),AP={skipAnimations:!1,useManualTiming:!1};class dC{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function tH(e){let t=new dC,n=new dC,r=0,o=!1,i=!1;const a=new WeakSet,s={schedule:(u,l=!1,c=!1)=>{const d=c&&o,f=d?t:n;return l&&a.add(u),f.add(u)&&d&&o&&(r=t.order.length),u},cancel:u=>{n.remove(u),a.delete(u)},process:u=>{if(o){i=!0;return}if(o=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let l=0;l<r;l++){const c=t.order[l];a.has(c)&&(s.schedule(c),e()),c(u)}o=!1,i&&(i=!1,s.process(u))}};return s}const xf=["prepare","read","update","preRender","render","postRender"],nH=40;function DP(e,t){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},i=xf.reduce((d,f)=>(d[f]=tH(()=>n=!0),d),{}),a=d=>{i[d].process(o)},s=()=>{const d=performance.now();n=!1,o.delta=r?1e3/60:Math.max(Math.min(d-o.timestamp,nH),1),o.timestamp=d,o.isProcessing=!0,xf.forEach(a),o.isProcessing=!1,n&&t&&(r=!1,e(s))},u=()=>{n=!0,r=!0,o.isProcessing||e(s)};return{schedule:xf.reduce((d,f)=>{const h=i[f];return d[f]=(p,v=!1,y=!1)=>(n||u(),h.schedule(p,v,y)),d},{}),cancel:d=>xf.forEach(f=>i[f].cancel(d)),state:o,steps:i}}const{schedule:Vb,cancel:mle}=DP(queueMicrotask,!1);function rH(e,t,n,r){const{visualElement:o}=T.useContext(Ev),i=T.useContext(PP),a=T.useContext(pd),s=T.useContext(RP).reducedMotion,u=T.useRef();r=r||i.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:o,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:s}));const l=u.current;T.useInsertionEffect(()=>{l&&l.update(n,a)});const c=T.useRef(!!(n[IP]&&!window.HandoffComplete));return zb(()=>{l&&(Vb.postRender(l.render),c.current&&l.animationState&&l.animationState.animateChanges())}),T.useEffect(()=>{l&&(l.updateFeatures(),!c.current&&l.animationState&&l.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),l}function Ys(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function oH(e,t,n){return T.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Ys(n)&&(n.current=r))},[t])}function zc(e){return typeof e=="string"||Array.isArray(e)}function Tv(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const jb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ub=["initial",...jb];function Rv(e){return Tv(e.animate)||Ub.some(t=>zc(e[t]))}function MP(e){return!!(Rv(e)||e.variants)}function iH(e,t){if(Rv(e)){const{initial:n,animate:r}=e;return{initial:n===!1||zc(n)?n:void 0,animate:zc(r)?r:void 0}}return e.inherit!==!1?t:{}}function aH(e){const{initial:t,animate:n}=iH(e,T.useContext(Ev));return T.useMemo(()=>({initial:t,animate:n}),[fC(t),fC(n)])}function fC(e){return Array.isArray(e)?e.join(" "):e}const hC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wc={};for(const e in hC)Wc[e]={isEnabled:t=>hC[e].some(n=>!!t[n])};function sH(e){for(const t in e)Wc[t]={...Wc[t],...e[t]}}const Hb=T.createContext({}),OP=T.createContext({}),uH=Symbol.for("motionComponentSymbol");function lH({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:o}){e&&sH(e);function i(s,u){let l;const c={...T.useContext(RP),...s,layoutId:cH(s)},{isStatic:d}=c,f=aH(s),h=r(s,d);if(!d&&kv){f.visualElement=rH(o,h,c,t);const p=T.useContext(OP),v=T.useContext(PP).strict;f.visualElement&&(l=f.visualElement.loadFeatures(c,v,e,p))}return T.createElement(Ev.Provider,{value:f},l&&f.visualElement?T.createElement(l,{visualElement:f.visualElement,...c}):null,n(o,s,oH(h,f.visualElement,u),h,d,f.visualElement))}const a=T.forwardRef(i);return a[uH]=o,a}function cH({layoutId:e}){const t=T.useContext(Hb).id;return t&&e!==void 0?t+"-"+e:e}function dH(e){function t(r,o={}){return lH(e(r,o))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,o)=>(n.has(o)||n.set(o,t(o)),n.get(o))})}const fH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Gb(e){return typeof e!="string"||e.includes("-")?!1:!!(fH.indexOf(e)>-1||/[A-Z]/.test(e))}const ip={};function hH(e){Object.assign(ip,e)}const vd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],as=new Set(vd);function NP(e,{layout:t,layoutId:n}){return as.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!ip[e]||e==="opacity")}const Gn=e=>!!(e&&e.getVelocity),pH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},vH=vd.length;function mH(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,o){let i="";for(let a=0;a<vH;a++){const s=vd[a];if(e[s]!==void 0){const u=pH[s]||s;i+=`${u}(${e[s]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),o?i=o(e,r?"":i):n&&r&&(i="none"),i}const FP=e=>t=>typeof t=="string"&&t.startsWith(e),BP=FP("--"),_y=FP("var(--"),gH=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,yH=(e,t)=>t&&typeof e=="number"?t.transform(e):e,ia=(e,t,n)=>Math.min(Math.max(n,e),t),ss={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},nc={...ss,transform:e=>ia(0,1,e)},wf={...ss,default:1},rc=e=>Math.round(e*1e5)/1e5,Pv=/(-)?([\d]*\.?[\d])+/g,LP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,bH=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function md(e){return typeof e=="string"}const gd=e=>({test:t=>md(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Mi=gd("deg"),Po=gd("%"),xe=gd("px"),xH=gd("vh"),wH=gd("vw"),pC={...Po,parse:e=>Po.parse(e)/100,transform:e=>Po.transform(e*100)},vC={...ss,transform:Math.round},$P={borderWidth:xe,borderTopWidth:xe,borderRightWidth:xe,borderBottomWidth:xe,borderLeftWidth:xe,borderRadius:xe,radius:xe,borderTopLeftRadius:xe,borderTopRightRadius:xe,borderBottomRightRadius:xe,borderBottomLeftRadius:xe,width:xe,maxWidth:xe,height:xe,maxHeight:xe,size:xe,top:xe,right:xe,bottom:xe,left:xe,padding:xe,paddingTop:xe,paddingRight:xe,paddingBottom:xe,paddingLeft:xe,margin:xe,marginTop:xe,marginRight:xe,marginBottom:xe,marginLeft:xe,rotate:Mi,rotateX:Mi,rotateY:Mi,rotateZ:Mi,scale:wf,scaleX:wf,scaleY:wf,scaleZ:wf,skew:Mi,skewX:Mi,skewY:Mi,distance:xe,translateX:xe,translateY:xe,translateZ:xe,x:xe,y:xe,z:xe,perspective:xe,transformPerspective:xe,opacity:nc,originX:pC,originY:pC,originZ:xe,zIndex:vC,fillOpacity:nc,strokeOpacity:nc,numOctaves:vC};function qb(e,t,n,r){const{style:o,vars:i,transform:a,transformOrigin:s}=e;let u=!1,l=!1,c=!0;for(const d in t){const f=t[d];if(BP(d)){i[d]=f;continue}const h=$P[d],p=yH(f,h);if(as.has(d)){if(u=!0,a[d]=p,!c)continue;f!==(h.default||0)&&(c=!1)}else d.startsWith("origin")?(l=!0,s[d]=p):o[d]=p}if(t.transform||(u||r?o.transform=mH(e.transform,n,c,r):o.transform&&(o.transform="none")),l){const{originX:d="50%",originY:f="50%",originZ:h=0}=s;o.transformOrigin=`${d} ${f} ${h}`}}const Kb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function zP(e,t,n){for(const r in t)!Gn(t[r])&&!NP(r,n)&&(e[r]=t[r])}function SH({transformTemplate:e},t,n){return T.useMemo(()=>{const r=Kb();return qb(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function CH(e,t,n){const r=e.style||{},o={};return zP(o,r,e),Object.assign(o,SH(e,t,n)),o}function _H(e,t,n){const r={},o=CH(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=o,r}const EH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ap(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||EH.has(e)}let WP=e=>!ap(e);function kH(e){e&&(WP=t=>t.startsWith("on")?!ap(t):e(t))}try{kH(require("@emotion/is-prop-valid").default)}catch{}function TH(e,t,n){const r={};for(const o in e)o==="values"&&typeof e.values=="object"||(WP(o)||n===!0&&ap(o)||!t&&!ap(o)||e.draggable&&o.startsWith("onDrag"))&&(r[o]=e[o]);return r}function mC(e,t,n){return typeof e=="string"?e:xe.transform(t+n*e)}function RH(e,t,n){const r=mC(t,e.x,e.width),o=mC(n,e.y,e.height);return`${r} ${o}`}const PH={offset:"stroke-dashoffset",array:"stroke-dasharray"},IH={offset:"strokeDashoffset",array:"strokeDasharray"};function AH(e,t,n=1,r=0,o=!0){e.pathLength=1;const i=o?PH:IH;e[i.offset]=xe.transform(-r);const a=xe.transform(t),s=xe.transform(n);e[i.array]=`${a} ${s}`}function Xb(e,{attrX:t,attrY:n,attrScale:r,originX:o,originY:i,pathLength:a,pathSpacing:s=1,pathOffset:u=0,...l},c,d,f){if(qb(e,l,c,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:p,dimensions:v}=e;h.transform&&(v&&(p.transform=h.transform),delete h.transform),v&&(o!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=RH(v,o!==void 0?o:.5,i!==void 0?i:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&AH(h,a,s,u,!1)}const VP=()=>({...Kb(),attrs:{}}),Yb=e=>typeof e=="string"&&e.toLowerCase()==="svg";function DH(e,t,n,r){const o=T.useMemo(()=>{const i=VP();return Xb(i,t,{enableHardwareAcceleration:!1},Yb(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};zP(i,e.style,e),o.style={...i,...o.style}}return o}function MH(e=!1){return(n,r,o,{latestValues:i},a)=>{const u=(Gb(n)?DH:_H)(r,i,a,n),c={...TH(r,typeof n=="string",e),...u,ref:o},{children:d}=r,f=T.useMemo(()=>Gn(d)?d.get():d,[d]);return T.createElement(n,{...c,children:f})}}function jP(e,{style:t,vars:n},r,o){Object.assign(e.style,t,o&&o.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const UP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function HP(e,t,n,r){jP(e,t,void 0,r);for(const o in t.attrs)e.setAttribute(UP.has(o)?o:Wb(o),t.attrs[o])}function Qb(e,t){const{style:n}=e,r={};for(const o in n)(Gn(n[o])||t.style&&Gn(t.style[o])||NP(o,e))&&(r[o]=n[o]);return r}function GP(e,t){const n=Qb(e,t);for(const r in e)if(Gn(e[r])||Gn(t[r])){const o=vd.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[o]=e[r]}return n}function Jb(e,t,n,r={},o={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,o)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,o)),t}function qP(e){const t=T.useRef(null);return t.current===null&&(t.current=e()),t.current}const sp=e=>Array.isArray(e),OH=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),NH=e=>sp(e)?e[e.length-1]||0:e;function gh(e){const t=Gn(e)?e.get():e;return OH(t)?t.toValue():t}function FH({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,o,i){const a={latestValues:BH(r,o,i,e),renderState:t()};return n&&(a.mount=s=>n(r,s,a)),a}const KP=e=>(t,n)=>{const r=T.useContext(Ev),o=T.useContext(pd),i=()=>FH(e,t,r,o);return n?i():qP(i)};function BH(e,t,n,r){const o={},i=r(e,{});for(const f in i)o[f]=gh(i[f]);let{initial:a,animate:s}=e;const u=Rv(e),l=MP(e);t&&l&&!u&&e.inherit!==!1&&(a===void 0&&(a=t.initial),s===void 0&&(s=t.animate));let c=n?n.initial===!1:!1;c=c||a===!1;const d=c?s:a;return d&&typeof d!="boolean"&&!Tv(d)&&(Array.isArray(d)?d:[d]).forEach(h=>{const p=Jb(e,h);if(!p)return;const{transitionEnd:v,transition:y,...m}=p;for(const g in m){let b=m[g];if(Array.isArray(b)){const x=c?b.length-1:0;b=b[x]}b!==null&&(o[g]=b)}for(const g in v)o[g]=v[g]}),o}const kt=e=>e,{schedule:ct,cancel:pi,state:Zt,steps:fg}=DP(typeof requestAnimationFrame<"u"?requestAnimationFrame:kt,!0),LH={useVisualState:KP({scrapeMotionValuesFromProps:GP,createRenderState:VP,onMount:(e,t,{renderState:n,latestValues:r})=>{ct.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ct.render(()=>{Xb(n,r,{enableHardwareAcceleration:!1},Yb(t.tagName),e.transformTemplate),HP(t,n)})}})},$H={useVisualState:KP({scrapeMotionValuesFromProps:Qb,createRenderState:Kb})};function zH(e,{forwardMotionProps:t=!1},n,r){return{...Gb(e)?LH:$H,preloadedFeatures:n,useRender:MH(t),createVisualElement:r,Component:e}}function ri(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const XP=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Iv(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const WH=e=>t=>XP(t)&&e(t,Iv(t));function ai(e,t,n,r){return ri(e,t,WH(n),r)}const VH=(e,t)=>n=>t(e(n)),Ji=(...e)=>e.reduce(VH);function YP(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const gC=YP("dragHorizontal"),yC=YP("dragVertical");function QP(e){let t=!1;if(e==="y")t=yC();else if(e==="x")t=gC();else{const n=gC(),r=yC();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function JP(){const e=QP(!0);return e?(e(),!1):!0}class fa{constructor(t){this.isMounted=!1,this.node=t}update(){}}function bC(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),o=(i,a)=>{if(i.pointerType==="touch"||JP())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t),s[r]&&ct.update(()=>s[r](i,a))};return ai(e.current,n,o,{passive:!e.getProps()[r]})}class jH extends fa{mount(){this.unmount=Ji(bC(this.node,!0),bC(this.node,!1))}unmount(){}}class UH extends fa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ji(ri(this.node.current,"focus",()=>this.onFocus()),ri(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const ZP=(e,t)=>t?e===t?!0:ZP(e,t.parentElement):!1;function hg(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Iv(n))}class HH extends fa{constructor(){super(...arguments),this.removeStartListeners=kt,this.removeEndListeners=kt,this.removeAccessibleListeners=kt,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=ai(window,"pointerup",(s,u)=>{if(!this.checkPressEnd())return;const{onTap:l,onTapCancel:c,globalTapTarget:d}=this.node.getProps();ct.update(()=>{!d&&!ZP(this.node.current,s.target)?c&&c(s,u):l&&l(s,u)})},{passive:!(r.onTap||r.onPointerUp)}),a=ai(window,"pointercancel",(s,u)=>this.cancelPress(s,u),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Ji(i,a),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=s=>{s.key!=="Enter"||!this.checkPressEnd()||hg("up",(u,l)=>{const{onTap:c}=this.node.getProps();c&&ct.update(()=>c(u,l))})};this.removeEndListeners(),this.removeEndListeners=ri(this.node.current,"keyup",a),hg("down",(s,u)=>{this.startPress(s,u)})},n=ri(this.node.current,"keydown",t),r=()=>{this.isPressing&&hg("cancel",(i,a)=>this.cancelPress(i,a))},o=ri(this.node.current,"blur",r);this.removeAccessibleListeners=Ji(n,o)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&ct.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!JP()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&ct.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=ai(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=ri(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ji(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Ey=new WeakMap,pg=new WeakMap,GH=e=>{const t=Ey.get(e.target);t&&t(e)},qH=e=>{e.forEach(GH)};function KH({root:e,...t}){const n=e||document;pg.has(n)||pg.set(n,{});const r=pg.get(n),o=JSON.stringify(t);return r[o]||(r[o]=new IntersectionObserver(qH,{root:e,...t})),r[o]}function XH(e,t,n){const r=KH(t);return Ey.set(e,n),r.observe(e),()=>{Ey.delete(e),r.unobserve(e)}}const YH={some:0,all:1};class QH extends fa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:YH[o]},s=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,i&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),f=l?c:d;f&&f(u)};return XH(this.node.current,a,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(JH(t,n))&&this.startObserver()}unmount(){}}function JH({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const ZH={inView:{Feature:QH},tap:{Feature:HH},focus:{Feature:UH},hover:{Feature:jH}};function eI(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function e8(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function t8(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function Av(e,t,n){const r=e.getProps();return Jb(r,t,n!==void 0?n:r.custom,e8(e),t8(e))}let Zb=kt;const Ua=e=>e*1e3,si=e=>e/1e3,n8={current:!1},tI=e=>Array.isArray(e)&&typeof e[0]=="number";function nI(e){return!!(!e||typeof e=="string"&&rI[e]||tI(e)||Array.isArray(e)&&e.every(nI))}const $l=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,rI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$l([0,.65,.55,1]),circOut:$l([.55,0,1,.45]),backIn:$l([.31,.01,.66,-.59]),backOut:$l([.33,1.53,.69,.99])};function oI(e){if(e)return tI(e)?$l(e):Array.isArray(e)?e.map(oI):rI[e]}function r8(e,t,n,{delay:r=0,duration:o,repeat:i=0,repeatType:a="loop",ease:s,times:u}={}){const l={[t]:n};u&&(l.offset=u);const c=oI(s);return Array.isArray(c)&&(l.easing=c),e.animate(l,{delay:r,duration:o,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function o8(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const iI=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,i8=1e-7,a8=12;function s8(e,t,n,r,o){let i,a,s=0;do a=t+(n-t)/2,i=iI(a,r,o)-e,i>0?n=a:t=a;while(Math.abs(i)>i8&&++s<a8);return a}function yd(e,t,n,r){if(e===t&&n===r)return kt;const o=i=>s8(i,0,1,e,n);return i=>i===0||i===1?i:iI(o(i),t,r)}const u8=yd(.42,0,1,1),l8=yd(0,0,.58,1),aI=yd(.42,0,.58,1),c8=e=>Array.isArray(e)&&typeof e[0]!="number",sI=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,uI=e=>t=>1-e(1-t),ex=e=>1-Math.sin(Math.acos(e)),lI=uI(ex),d8=sI(ex),cI=yd(.33,1.53,.69,.99),tx=uI(cI),f8=sI(tx),h8=e=>(e*=2)<1?.5*tx(e):.5*(2-Math.pow(2,-10*(e-1))),p8={linear:kt,easeIn:u8,easeInOut:aI,easeOut:l8,circIn:ex,circInOut:d8,circOut:lI,backIn:tx,backInOut:f8,backOut:cI,anticipate:h8},xC=e=>{if(Array.isArray(e)){Zb(e.length===4);const[t,n,r,o]=e;return yd(t,n,r,o)}else if(typeof e=="string")return p8[e];return e},nx=(e,t)=>n=>!!(md(n)&&bH.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),dI=(e,t,n)=>r=>{if(!md(r))return r;const[o,i,a,s]=r.match(Pv);return{[e]:parseFloat(o),[t]:parseFloat(i),[n]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},v8=e=>ia(0,255,e),vg={...ss,transform:e=>Math.round(v8(e))},Fa={test:nx("rgb","red"),parse:dI("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+vg.transform(e)+", "+vg.transform(t)+", "+vg.transform(n)+", "+rc(nc.transform(r))+")"};function m8(e){let t="",n="",r="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const ky={test:nx("#"),parse:m8,transform:Fa.transform},Qs={test:nx("hsl","hue"),parse:dI("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Po.transform(rc(t))+", "+Po.transform(rc(n))+", "+rc(nc.transform(r))+")"},Cn={test:e=>Fa.test(e)||ky.test(e)||Qs.test(e),parse:e=>Fa.test(e)?Fa.parse(e):Qs.test(e)?Qs.parse(e):ky.parse(e),transform:e=>md(e)?e:e.hasOwnProperty("red")?Fa.transform(e):Qs.transform(e)},ht=(e,t,n)=>-n*e+n*t+e;function mg(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function g8({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let o=0,i=0,a=0;if(!t)o=i=a=n;else{const s=n<.5?n*(1+t):n+t-n*t,u=2*n-s;o=mg(u,s,e+1/3),i=mg(u,s,e),a=mg(u,s,e-1/3)}return{red:Math.round(o*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}const gg=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},y8=[ky,Fa,Qs],b8=e=>y8.find(t=>t.test(e));function wC(e){const t=b8(e);let n=t.parse(e);return t===Qs&&(n=g8(n)),n}const fI=(e,t)=>{const n=wC(e),r=wC(t),o={...n};return i=>(o.red=gg(n.red,r.red,i),o.green=gg(n.green,r.green,i),o.blue=gg(n.blue,r.blue,i),o.alpha=ht(n.alpha,r.alpha,i),Fa.transform(o))};function x8(e){var t,n;return isNaN(e)&&md(e)&&(((t=e.match(Pv))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(LP))===null||n===void 0?void 0:n.length)||0)>0}const hI={regex:gH,countKey:"Vars",token:"${v}",parse:kt},pI={regex:LP,countKey:"Colors",token:"${c}",parse:Cn.parse},vI={regex:Pv,countKey:"Numbers",token:"${n}",parse:ss.parse};function yg(e,{regex:t,countKey:n,token:r,parse:o}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...i.map(o)))}function up(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&yg(n,hI),yg(n,pI),yg(n,vI),n}function mI(e){return up(e).values}function gI(e){const{values:t,numColors:n,numVars:r,tokenised:o}=up(e),i=t.length;return a=>{let s=o;for(let u=0;u<i;u++)u<r?s=s.replace(hI.token,a[u]):u<r+n?s=s.replace(pI.token,Cn.transform(a[u])):s=s.replace(vI.token,rc(a[u]));return s}}const w8=e=>typeof e=="number"?0:e;function S8(e){const t=mI(e);return gI(e)(t.map(w8))}const aa={test:x8,parse:mI,createTransformer:gI,getAnimatableNone:S8},yI=(e,t)=>n=>`${n>0?t:e}`;function bI(e,t){return typeof e=="number"?n=>ht(e,t,n):Cn.test(e)?fI(e,t):e.startsWith("var(")?yI(e,t):wI(e,t)}const xI=(e,t)=>{const n=[...e],r=n.length,o=e.map((i,a)=>bI(i,t[a]));return i=>{for(let a=0;a<r;a++)n[a]=o[a](i);return n}},C8=(e,t)=>{const n={...e,...t},r={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(r[o]=bI(e[o],t[o]));return o=>{for(const i in r)n[i]=r[i](o);return n}},wI=(e,t)=>{const n=aa.createTransformer(t),r=up(e),o=up(t);return r.numVars===o.numVars&&r.numColors===o.numColors&&r.numNumbers>=o.numNumbers?Ji(xI(r.values,o.values),n):yI(e,t)},Vc=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},SC=(e,t)=>n=>ht(e,t,n);function _8(e){return typeof e=="number"?SC:typeof e=="string"?Cn.test(e)?fI:wI:Array.isArray(e)?xI:typeof e=="object"?C8:SC}function E8(e,t,n){const r=[],o=n||_8(e[0]),i=e.length-1;for(let a=0;a<i;a++){let s=o(e[a],e[a+1]);if(t){const u=Array.isArray(t)?t[a]||kt:t;s=Ji(u,s)}r.push(s)}return r}function SI(e,t,{clamp:n=!0,ease:r,mixer:o}={}){const i=e.length;if(Zb(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=E8(t,r,o),s=a.length,u=l=>{let c=0;if(s>1)for(;c<e.length-2&&!(l<e[c+1]);c++);const d=Vc(e[c],e[c+1],l);return a[c](d)};return n?l=>u(ia(e[0],e[i-1],l)):u}function k8(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const o=Vc(0,t,r);e.push(ht(n,1,o))}}function T8(e){const t=[0];return k8(t,e.length-1),t}function R8(e,t){return e.map(n=>n*t)}function P8(e,t){return e.map(()=>t||aI).splice(0,e.length-1)}function lp({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const o=c8(r)?r.map(xC):xC(r),i={done:!1,value:t[0]},a=R8(n&&n.length===t.length?n:T8(t),e),s=SI(a,t,{ease:Array.isArray(o)?o:P8(t,o)});return{calculatedDuration:e,next:u=>(i.value=s(u),i.done=u>=e,i)}}function CI(e,t){return t?e*(1e3/t):0}const I8=5;function _I(e,t,n){const r=Math.max(t-I8,0);return CI(n-e(r),t-r)}const bg=.001,A8=.01,D8=10,M8=.05,O8=1;function N8({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let o,i,a=1-t;a=ia(M8,O8,a),e=ia(A8,D8,si(e)),a<1?(o=l=>{const c=l*a,d=c*e,f=c-n,h=Ty(l,a),p=Math.exp(-d);return bg-f/h*p},i=l=>{const d=l*a*e,f=d*n+n,h=Math.pow(a,2)*Math.pow(l,2)*e,p=Math.exp(-d),v=Ty(Math.pow(l,2),a);return(-o(l)+bg>0?-1:1)*((f-h)*p)/v}):(o=l=>{const c=Math.exp(-l*e),d=(l-n)*e+1;return-bg+c*d},i=l=>{const c=Math.exp(-l*e),d=(n-l)*(e*e);return c*d});const s=5/e,u=B8(o,i,s);if(e=Ua(e),isNaN(u))return{stiffness:100,damping:10,duration:e};{const l=Math.pow(u,2)*r;return{stiffness:l,damping:a*2*Math.sqrt(r*l),duration:e}}}const F8=12;function B8(e,t,n){let r=n;for(let o=1;o<F8;o++)r=r-e(r)/t(r);return r}function Ty(e,t){return e*Math.sqrt(1-t*t)}const L8=["duration","bounce"],$8=["stiffness","damping","mass"];function CC(e,t){return t.some(n=>e[n]!==void 0)}function z8(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!CC(e,$8)&&CC(e,L8)){const n=N8(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function EI({keyframes:e,restDelta:t,restSpeed:n,...r}){const o=e[0],i=e[e.length-1],a={done:!1,value:o},{stiffness:s,damping:u,mass:l,duration:c,velocity:d,isResolvedFromDuration:f}=z8({...r,velocity:-si(r.velocity||0)}),h=d||0,p=u/(2*Math.sqrt(s*l)),v=i-o,y=si(Math.sqrt(s/l)),m=Math.abs(v)<5;n||(n=m?.01:2),t||(t=m?.005:.5);let g;if(p<1){const b=Ty(y,p);g=x=>{const w=Math.exp(-p*y*x);return i-w*((h+p*y*v)/b*Math.sin(b*x)+v*Math.cos(b*x))}}else if(p===1)g=b=>i-Math.exp(-y*b)*(v+(h+y*v)*b);else{const b=y*Math.sqrt(p*p-1);g=x=>{const w=Math.exp(-p*y*x),S=Math.min(b*x,300);return i-w*((h+p*y*v)*Math.sinh(S)+b*v*Math.cosh(S))/b}}return{calculatedDuration:f&&c||null,next:b=>{const x=g(b);if(f)a.done=b>=c;else{let w=h;b!==0&&(p<1?w=_I(g,b,x):w=0);const S=Math.abs(w)<=n,C=Math.abs(i-x)<=t;a.done=S&&C}return a.value=a.done?i:x,a}}}function _C({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:i=500,modifyTarget:a,min:s,max:u,restDelta:l=.5,restSpeed:c}){const d=e[0],f={done:!1,value:d},h=_=>s!==void 0&&_<s||u!==void 0&&_>u,p=_=>s===void 0?u:u===void 0||Math.abs(s-_)<Math.abs(u-_)?s:u;let v=n*t;const y=d+v,m=a===void 0?y:a(y);m!==y&&(v=m-d);const g=_=>-v*Math.exp(-_/r),b=_=>m+g(_),x=_=>{const k=g(_),E=b(_);f.done=Math.abs(k)<=l,f.value=f.done?m:E};let w,S;const C=_=>{h(f.value)&&(w=_,S=EI({keyframes:[f.value,p(f.value)],velocity:_I(b,_,f.value),damping:o,stiffness:i,restDelta:l,restSpeed:c}))};return C(0),{calculatedDuration:null,next:_=>{let k=!1;return!S&&w===void 0&&(k=!0,x(_),C(_)),w!==void 0&&_>w?S.next(_-w):(!k&&x(_),f)}}}let yh;function W8(){yh=void 0}const Ha={now:()=>(yh===void 0&&Ha.set(Zt.isProcessing||AP.useManualTiming?Zt.timestamp:performance.now()),yh),set:e=>{yh=e,queueMicrotask(W8)}},V8=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ct.update(t,!0),stop:()=>pi(t),now:()=>Zt.isProcessing?Zt.timestamp:Ha.now()}},EC=2e4;function kC(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<EC;)t+=n,r=e.next(t);return t>=EC?1/0:t}const j8={decay:_C,inertia:_C,tween:lp,keyframes:lp,spring:EI};function cp({autoplay:e=!0,delay:t=0,driver:n=V8,keyframes:r,type:o="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",onPlay:u,onStop:l,onComplete:c,onUpdate:d,...f}){let h=1,p=!1,v,y;const m=()=>{y=new Promise(G=>{v=G})};m();let g;const b=j8[o]||lp;let x;b!==lp&&typeof r[0]!="number"&&(x=SI([0,100],r,{clamp:!1}),r=[0,100]);const w=b({...f,keyframes:r});let S;s==="mirror"&&(S=b({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let C="idle",_=null,k=null,E=null;w.calculatedDuration===null&&i&&(w.calculatedDuration=kC(w));const{calculatedDuration:A}=w;let D=1/0,U=1/0;A!==null&&(D=A+a,U=D*(i+1)-a);let H=0;const B=G=>{if(k===null)return;h>0&&(k=Math.min(k,G)),h<0&&(k=Math.min(G-U/h,k)),_!==null?H=_:H=Math.round(G-k)*h;const Q=H-t*(h>=0?1:-1),J=h>=0?Q<0:Q>U;H=Math.max(Q,0),C==="finished"&&_===null&&(H=U);let ne=H,oe=w;if(i){const we=Math.min(H,U)/D;let De=Math.floor(we),ge=we%1;!ge&&we>=1&&(ge=1),ge===1&&De--,De=Math.min(De,i+1),!!(De%2)&&(s==="reverse"?(ge=1-ge,a&&(ge-=a/D)):s==="mirror"&&(oe=S)),ne=ia(0,1,ge)*D}const ae=J?{done:!1,value:r[0]}:oe.next(ne);x&&(ae.value=x(ae.value));let{done:me}=ae;!J&&A!==null&&(me=h>=0?H>=U:H<=0);const ve=_===null&&(C==="finished"||C==="running"&&me);return d&&d(ae.value),ve&&O(),ae},V=()=>{g&&g.stop(),g=void 0},M=()=>{C="idle",V(),v(),m(),k=E=null},O=()=>{C="finished",c&&c(),V(),v()},F=()=>{if(p)return;g||(g=n(B));const G=g.now();u&&u(),_!==null?k=G-_:(!k||C==="finished")&&(k=G),C==="finished"&&m(),E=k,_=null,C="running",g.start()};e&&F();const $={then(G,Q){return y.then(G,Q)},get time(){return si(H)},set time(G){G=Ua(G),H=G,_!==null||!g||h===0?_=G:k=g.now()-G/h},get duration(){const G=w.calculatedDuration===null?kC(w):w.calculatedDuration;return si(G)},get speed(){return h},set speed(G){G===h||!g||(h=G,$.time=si(H))},get state(){return C},play:F,pause:()=>{C="paused",_=H},stop:()=>{p=!0,C!=="idle"&&(C="idle",l&&l(),M())},cancel:()=>{E!==null&&B(E),M()},complete:()=>{C="finished"},sample:G=>(k=0,B(G))};return $}function U8(e){let t;return()=>(t===void 0&&(t=e()),t)}const H8=U8(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),G8=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Sf=10,q8=2e4,K8=(e,t)=>t.type==="spring"||e==="backgroundColor"||!nI(t.ease);function X8(e,t,{onUpdate:n,onComplete:r,...o}){if(!(H8()&&G8.has(t)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let a=!1,s,u,l=!1;const c=()=>{u=new Promise(b=>{s=b})};c();let{keyframes:d,duration:f=300,ease:h,times:p}=o;if(K8(t,o)){const b=cp({...o,repeat:0,delay:0});let x={done:!1,value:d[0]};const w=[];let S=0;for(;!x.done&&S<q8;)x=b.sample(S),w.push(x.value),S+=Sf;p=void 0,d=w,f=S-Sf,h="linear"}const v=r8(e.owner.current,t,d,{...o,duration:f,ease:h,times:p}),y=()=>{l=!1,v.cancel()},m=()=>{l=!0,ct.update(y),s(),c()};return v.onfinish=()=>{l||(e.set(o8(d,o)),r&&r(),m())},{then(b,x){return u.then(b,x)},attachTimeline(b){return v.timeline=b,v.onfinish=null,kt},get time(){return si(v.currentTime||0)},set time(b){v.currentTime=Ua(b)},get speed(){return v.playbackRate},set speed(b){v.playbackRate=b},get duration(){return si(f)},play:()=>{a||(v.play(),pi(y))},pause:()=>v.pause(),stop:()=>{if(a=!0,v.playState==="idle")return;const{currentTime:b}=v;if(b){const x=cp({...o,autoplay:!1});e.setWithVelocity(x.sample(b-Sf).value,x.sample(b).value,Sf)}m()},complete:()=>{l||v.finish()},cancel:m}}function Y8({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const o=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:kt,pause:kt,stop:kt,then:i=>(i(),Promise.resolve()),cancel:kt,complete:kt});return t?cp({keyframes:[0,1],duration:0,delay:t,onComplete:o}):o()}const Q8={type:"spring",stiffness:500,damping:25,restSpeed:10},J8=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Z8={type:"keyframes",duration:.8},eG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tG=(e,{keyframes:t})=>t.length>2?Z8:as.has(e)?e.startsWith("scale")?J8(t[1]):Q8:eG,Ry=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(aa.test(t)||t==="0")&&!t.startsWith("url(")),nG=new Set(["brightness","contrast","saturate","opacity"]);function rG(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Pv)||[];if(!r)return e;const o=n.replace(r,"");let i=nG.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+o+")"}const oG=/([a-z-]*)\(.*?\)/g,Py={...aa,getAnimatableNone:e=>{const t=e.match(oG);return t?t.map(rG).join(" "):e}},iG={...$P,color:Cn,backgroundColor:Cn,outlineColor:Cn,fill:Cn,stroke:Cn,borderColor:Cn,borderTopColor:Cn,borderRightColor:Cn,borderBottomColor:Cn,borderLeftColor:Cn,filter:Py,WebkitFilter:Py},rx=e=>iG[e];function kI(e,t){let n=rx(e);return n!==Py&&(n=aa),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const TI=e=>/^0[^.\s]+$/.test(e);function aG(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||TI(e)}function sG(e,t,n,r){const o=Ry(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const a=r.from!==void 0?r.from:e.get();let s;const u=[];for(let l=0;l<i.length;l++)i[l]===null&&(i[l]=l===0?a:i[l-1]),aG(i[l])&&u.push(l),typeof i[l]=="string"&&i[l]!=="none"&&i[l]!=="0"&&(s=i[l]);if(o&&u.length&&s)for(let l=0;l<u.length;l++){const c=u[l];i[c]=kI(t,s)}return i}function uG({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:i,repeatType:a,repeatDelay:s,from:u,elapsed:l,...c}){return!!Object.keys(c).length}function ox(e,t){return e[t]||e.default||e}const ix=(e,t,n,r={})=>o=>{const i=ox(r,e)||{},a=i.delay||r.delay||0;let{elapsed:s=0}=r;s=s-Ua(a);const u=sG(t,e,n,i),l=u[0],c=u[u.length-1],d=Ry(e,l),f=Ry(e,c);let h={keyframes:u,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-s,onUpdate:p=>{t.set(p),i.onUpdate&&i.onUpdate(p)},onComplete:()=>{o(),i.onComplete&&i.onComplete()}};if(uG(i)||(h={...h,...tG(e,h)}),h.duration&&(h.duration=Ua(h.duration)),h.repeatDelay&&(h.repeatDelay=Ua(h.repeatDelay)),!d||!f||n8.current||i.type===!1||AP.skipAnimations)return Y8(h);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const p=X8(t,e,h);if(p)return p}return cp(h)};function dp(e){return!!(Gn(e)&&e.add)}const RI=e=>/^\-?\d*\.?\d+$/.test(e);function ax(e,t){e.indexOf(t)===-1&&e.push(t)}function sx(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class ux{constructor(){this.subscriptions=[]}add(t){return ax(this.subscriptions,t),()=>sx(this.subscriptions,t)}notify(t,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,r);else for(let i=0;i<o;i++){const a=this.subscriptions[i];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const TC=30,lG=e=>!isNaN(parseFloat(e));class cG{constructor(t,n={}){this.version="11.0.3",this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,o=!0)=>{const i=Ha.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.canTrackVelocity=lG(this.current),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ha.now()}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ux);const r=this.events[t].add(n);return t==="change"?()=>{r(),ct.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ha.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>TC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,TC);return CI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nu(e,t){return new cG(e,t)}const PI=e=>t=>t.test(e),dG={test:e=>e==="auto",parse:e=>e},II=[ss,xe,Po,Mi,wH,xH,dG],bl=e=>II.find(PI(e)),fG=[...II,Cn,aa],hG=e=>fG.find(PI(e));function pG(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Nu(n))}function vG(e,t){const n=Av(e,t);let{transitionEnd:r={},transition:o={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const a in i){const s=NH(i[a]);pG(e,a,s)}}function mG(e,t,n){var r,o;const i=Object.keys(t).filter(s=>!e.hasValue(s)),a=i.length;if(a)for(let s=0;s<a;s++){const u=i[s],l=t[u];let c=null;Array.isArray(l)&&(c=l[0]),c===null&&(c=(o=(r=n[u])!==null&&r!==void 0?r:e.readValue(u))!==null&&o!==void 0?o:t[u]),c!=null&&(typeof c=="string"&&(RI(c)||TI(c))?c=parseFloat(c):!hG(c)&&aa.test(l)&&(c=kI(u,l)),e.addValue(u,Nu(c,{owner:e})),n[u]===void 0&&(n[u]=c),c!==null&&e.setBaseTarget(u,c))}}function gG(e,t){return t?(t[e]||t.default||t).from:void 0}function yG(e,t,n){const r={};for(const o in e){const i=gG(o,t);if(i!==void 0)r[o]=i;else{const a=n.getValue(o);a&&(r[o]=a.get())}}return r}function bG({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function xG(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function AI(e,t,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...s}=e.makeTargetAnimatable(t);const u=e.getValue("willChange");r&&(i=r);const l=[],c=o&&e.animationState&&e.animationState.getState()[o];for(const d in s){const f=e.getValue(d),h=s[d];if(!f||h===void 0||c&&bG(c,d))continue;const p={delay:n,elapsed:0,...ox(i||{},d)};if(window.HandoffAppearAnimations){const m=e.getProps()[IP];if(m){const g=window.HandoffAppearAnimations(m,d,f,ct);g!==null&&(p.elapsed=g,p.isHandoff=!0)}}let v=!p.isHandoff&&!xG(f,h);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(v=!1),f.animation&&(v=!1),v)continue;f.start(ix(d,f,h,e.shouldReduceMotion&&as.has(d)?{type:!1}:p));const y=f.animation;dp(u)&&(u.add(d),y.then(()=>u.remove(d))),l.push(y)}return a&&Promise.all(l).then(()=>{a&&vG(e,a)}),l}function Iy(e,t,n={}){const r=Av(e,t,n.custom);let{transition:o=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const i=r?()=>Promise.all(AI(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:l=0,staggerChildren:c,staggerDirection:d}=o;return wG(e,t,l+u,c,d,n)}:()=>Promise.resolve(),{when:s}=o;if(s){const[u,l]=s==="beforeChildren"?[i,a]:[a,i];return u().then(()=>l())}else return Promise.all([i(),a(n.delay)])}function wG(e,t,n=0,r=0,o=1,i){const a=[],s=(e.variantChildren.size-1)*r,u=o===1?(l=0)=>l*r:(l=0)=>s-l*r;return Array.from(e.variantChildren).sort(SG).forEach((l,c)=>{l.notify("AnimationStart",t),a.push(Iy(l,t,{...i,delay:n+u(c)}).then(()=>l.notify("AnimationComplete",t)))}),Promise.all(a)}function SG(e,t){return e.sortNodePosition(t)}function CG(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const o=t.map(i=>Iy(e,i,n));r=Promise.all(o)}else if(typeof t=="string")r=Iy(e,t,n);else{const o=typeof t=="function"?Av(e,t,n.custom):t;r=Promise.all(AI(e,o,n))}return r.then(()=>e.notify("AnimationComplete",t))}const _G=[...jb].reverse(),EG=jb.length;function kG(e){return t=>Promise.all(t.map(({animation:n,options:r})=>CG(e,n,r)))}function TG(e){let t=kG(e);const n=PG();let r=!0;const o=(u,l)=>{const c=Av(e,l);if(c){const{transition:d,transitionEnd:f,...h}=c;u={...u,...h,...f}}return u};function i(u){t=u(e)}function a(u,l){const c=e.getProps(),d=e.getVariantContext(!0)||{},f=[],h=new Set;let p={},v=1/0;for(let m=0;m<EG;m++){const g=_G[m],b=n[g],x=c[g]!==void 0?c[g]:d[g],w=zc(x),S=g===l?b.isActive:null;S===!1&&(v=m);let C=x===d[g]&&x!==c[g]&&w;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),b.protectedKeys={...p},!b.isActive&&S===null||!x&&!b.prevProp||Tv(x)||typeof x=="boolean")continue;let k=RG(b.prevProp,x)||g===l&&b.isActive&&!C&&w||m>v&&w,E=!1;const A=Array.isArray(x)?x:[x];let D=A.reduce(o,{});S===!1&&(D={});const{prevResolvedValues:U={}}=b,H={...U,...D},B=V=>{k=!0,h.has(V)&&(E=!0,h.delete(V)),b.needsAnimating[V]=!0};for(const V in H){const M=D[V],O=U[V];if(p.hasOwnProperty(V))continue;let F=!1;sp(M)&&sp(O)?F=!eI(M,O):F=M!==O,F?M!==void 0?B(V):h.add(V):M!==void 0&&h.has(V)?B(V):b.protectedKeys[V]=!0}b.prevProp=x,b.prevResolvedValues=D,b.isActive&&(p={...p,...D}),r&&e.blockInitialAnimation&&(k=!1),k&&(!C||E)&&f.push(...A.map(V=>({animation:V,options:{type:g,...u}})))}if(h.size){const m={};h.forEach(g=>{const b=e.getBaseTarget(g);b!==void 0&&(m[g]=b)}),f.push({animation:m})}let y=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(f):Promise.resolve()}function s(u,l,c){var d;if(n[u].isActive===l)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(u,l)}),n[u].isActive=l;const f=a(c,u);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:a,setActive:s,setAnimateFunction:i,getState:()=>n}}function RG(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!eI(t,e):!1}function xa(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function PG(){return{animate:xa(!0),whileInView:xa(),whileHover:xa(),whileTap:xa(),whileDrag:xa(),whileFocus:xa(),exit:xa()}}class IG extends fa{constructor(t){super(t),t.animationState||(t.animationState=TG(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Tv(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let AG=0;class DG extends fa{constructor(){super(...arguments),this.id=AG++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===o)return;const i=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const MG={animation:{Feature:IG},exit:{Feature:DG}},RC=(e,t)=>Math.abs(e-t);function OG(e,t){const n=RC(e.x,t.x),r=RC(e.y,t.y);return Math.sqrt(n**2+r**2)}class DI{constructor(t,n,{transformPagePoint:r,contextWindow:o,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=wg(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=OG(d.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:p}=d,{timestamp:v}=Zt;this.history.push({...p,timestamp:v});const{onStart:y,onMove:m}=this.handlers;f||(y&&y(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=xg(f,this.transformPagePoint),ct.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=wg(d.type==="pointercancel"?this.lastMoveEventInfo:xg(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(d,y),p&&p(d,y)},!XP(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=o||window;const a=Iv(t),s=xg(a,this.transformPagePoint),{point:u}=s,{timestamp:l}=Zt;this.history=[{...u,timestamp:l}];const{onSessionStart:c}=n;c&&c(t,wg(s,this.history)),this.removeListeners=Ji(ai(this.contextWindow,"pointermove",this.handlePointerMove),ai(this.contextWindow,"pointerup",this.handlePointerUp),ai(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),pi(this.updatePoint)}}function xg(e,t){return t?{point:t(e.point)}:e}function PC(e,t){return{x:e.x-t.x,y:e.y-t.y}}function wg({point:e},t){return{point:e,delta:PC(e,MI(t)),offset:PC(e,NG(t)),velocity:FG(t,.1)}}function NG(e){return e[0]}function MI(e){return e[e.length-1]}function FG(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const o=MI(e);for(;n>=0&&(r=e[n],!(o.timestamp-r.timestamp>Ua(t)));)n--;if(!r)return{x:0,y:0};const i=si(o.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(o.x-r.x)/i,y:(o.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function mr(e){return e.max-e.min}function Ay(e,t=0,n=.01){return Math.abs(e-t)<=n}function IC(e,t,n,r=.5){e.origin=r,e.originPoint=ht(t.min,t.max,e.origin),e.scale=mr(n)/mr(t),(Ay(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ht(n.min,n.max,e.origin)-e.originPoint,(Ay(e.translate)||isNaN(e.translate))&&(e.translate=0)}function oc(e,t,n,r){IC(e.x,t.x,n.x,r?r.originX:void 0),IC(e.y,t.y,n.y,r?r.originY:void 0)}function AC(e,t,n){e.min=n.min+t.min,e.max=e.min+mr(t)}function BG(e,t,n){AC(e.x,t.x,n.x),AC(e.y,t.y,n.y)}function DC(e,t,n){e.min=t.min-n.min,e.max=e.min+mr(t)}function ic(e,t,n){DC(e.x,t.x,n.x),DC(e.y,t.y,n.y)}function LG(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ht(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ht(n,e,r.max):Math.min(e,n)),e}function MC(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function $G(e,{top:t,left:n,bottom:r,right:o}){return{x:MC(e.x,n,o),y:MC(e.y,t,r)}}function OC(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function zG(e,t){return{x:OC(e.x,t.x),y:OC(e.y,t.y)}}function WG(e,t){let n=.5;const r=mr(e),o=mr(t);return o>r?n=Vc(t.min,t.max-r,e.min):r>o&&(n=Vc(e.min,e.max-o,t.min)),ia(0,1,n)}function VG(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Dy=.35;function jG(e=Dy){return e===!1?e=0:e===!0&&(e=Dy),{x:NC(e,"left","right"),y:NC(e,"top","bottom")}}function NC(e,t,n){return{min:FC(e,t),max:FC(e,n)}}function FC(e,t){return typeof e=="number"?e:e[t]||0}const BC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Js=()=>({x:BC(),y:BC()}),LC=()=>({min:0,max:0}),_t=()=>({x:LC(),y:LC()});function Er(e){return[e("x"),e("y")]}function OI({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function UG({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function HG(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Sg(e){return e===void 0||e===1}function My({scale:e,scaleX:t,scaleY:n}){return!Sg(e)||!Sg(t)||!Sg(n)}function _a(e){return My(e)||NI(e)||e.z||e.rotate||e.rotateX||e.rotateY}function NI(e){return $C(e.x)||$C(e.y)}function $C(e){return e&&e!=="0%"}function fp(e,t,n){const r=e-n,o=t*r;return n+o}function zC(e,t,n,r,o){return o!==void 0&&(e=fp(e,o,r)),fp(e,n,r)+t}function Oy(e,t=0,n=1,r,o){e.min=zC(e.min,t,n,r,o),e.max=zC(e.max,t,n,r,o)}function FI(e,{x:t,y:n}){Oy(e.x,t.translate,t.scale,t.originPoint),Oy(e.y,n.translate,n.scale,n.originPoint)}function GG(e,t,n,r=!1){const o=n.length;if(!o)return;t.x=t.y=1;let i,a;for(let s=0;s<o;s++){i=n[s],a=i.projectionDelta;const u=i.instance;u&&u.style&&u.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Zs(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,FI(e,a)),r&&_a(i.latestValues)&&Zs(e,i.latestValues))}t.x=WC(t.x),t.y=WC(t.y)}function WC(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Fi(e,t){e.min=e.min+t,e.max=e.max+t}function VC(e,t,[n,r,o]){const i=t[o]!==void 0?t[o]:.5,a=ht(e.min,e.max,i);Oy(e,t[n],t[r],a,t.scale)}const qG=["x","scaleX","originX"],KG=["y","scaleY","originY"];function Zs(e,t){VC(e.x,t,qG),VC(e.y,t,KG)}function BI(e,t){return OI(HG(e.getBoundingClientRect(),t))}function XG(e,t,n){const r=BI(e,n),{scroll:o}=t;return o&&(Fi(r.x,o.offset.x),Fi(r.y,o.offset.y)),r}const LI=({current:e})=>e?e.ownerDocument.defaultView:null,YG=new WeakMap;class QG{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_t(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Iv(c,"page").point)},i=(c,d)=>{const{drag:f,dragPropagation:h,onDragStart:p}=this.getProps();if(f&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=QP(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Er(y=>{let m=this.getAxisMotionValue(y).get()||0;if(Po.test(m)){const{projection:g}=this.visualElement;if(g&&g.layout){const b=g.layout.layoutBox[y];b&&(m=mr(b)*(parseFloat(m)/100))}}this.originPoint[y]=m}),p&&ct.update(()=>p(c,d),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},a=(c,d)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:p,onDrag:v}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:y}=d;if(h&&this.currentDirection===null){this.currentDirection=JG(y),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,y),this.updateAxis("y",d.point,y),this.visualElement.render(),v&&v(c,d)},s=(c,d)=>this.stop(c,d),u=()=>Er(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:l}=this.getProps();this.panSession=new DI(t,{onSessionStart:o,onStart:i,onMove:a,onSessionEnd:s,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:LI(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:i}=this.getProps();i&&ct.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:o}=this.getProps();if(!r||!Cf(t,o,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=LG(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&Ys(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&o?this.constraints=$G(o.layoutBox,n):this.constraints=!1,this.elastic=jG(r),i!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&Er(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=VG(o.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Ys(t))return!1;const r=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const i=XG(r,o.root,this.visualElement.getTransformPagePoint());let a=zG(o.layout.layoutBox,i);if(n){const s=n(UG(a));this.hasMutatedConstraints=!!s,s&&(a=OI(s))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),u=this.constraints||{},l=Er(c=>{if(!Cf(c,n,this.currentDirection))return;let d=u&&u[c]||{};a&&(d={min:0,max:0});const f=o?200:1e6,h=o?40:1e7,p={type:"inertia",velocity:r?t[c]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(c,p)});return Promise.all(l).then(s)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(ix(t,r,0,n))}stopAnimation(){Er(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Er(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Er(n=>{const{drag:r}=this.getProps();if(!Cf(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,i=this.getAxisMotionValue(n);if(o&&o.layout){const{min:a,max:s}=o.layout.layoutBox[n];i.set(t[n]-ht(a,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ys(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Er(a=>{const s=this.getAxisMotionValue(a);if(s){const u=s.get();o[a]=WG({min:u,max:u},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Er(a=>{if(!Cf(a,t,null))return;const s=this.getAxisMotionValue(a),{min:u,max:l}=this.constraints[a];s.set(ht(u,l,o[a]))})}addListeners(){if(!this.visualElement.current)return;YG.set(this.visualElement,this);const t=this.visualElement.current,n=ai(t,"pointerdown",u=>{const{drag:l,dragListener:c=!0}=this.getProps();l&&c&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Ys(u)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,i=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),r();const a=ri(window,"resize",()=>this.scalePositionWithinConstraints()),s=o.addEventListener("didUpdate",({delta:u,hasLayoutChanged:l})=>{this.isDragging&&l&&(Er(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=u[c].translate,d.set(d.get()+u[c].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:i=!1,dragElastic:a=Dy,dragMomentum:s=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:i,dragElastic:a,dragMomentum:s}}}function Cf(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function JG(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class ZG extends fa{constructor(t){super(t),this.removeGroupControls=kt,this.removeListeners=kt,this.controls=new QG(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kt}unmount(){this.removeGroupControls(),this.removeListeners()}}const jC=e=>(t,n)=>{e&&ct.update(()=>e(t,n))};class e9 extends fa{constructor(){super(...arguments),this.removePointerDownListener=kt}onPointerDown(t){this.session=new DI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:LI(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:jC(t),onStart:jC(n),onMove:r,onEnd:(i,a)=>{delete this.session,o&&ct.update(()=>o(i,a))}}}mount(){this.removePointerDownListener=ai(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function $I(){const e=T.useContext(pd);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,o=T.useId();return T.useEffect(()=>r(o),[]),!t&&n?[!1,()=>n&&n(o)]:[!0]}function t9(){return n9(T.useContext(pd))}function n9(e){return e===null?!0:e.isPresent}const bh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function UC(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const xl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(xe.test(e))e=parseFloat(e);else return e;const n=UC(e,t.target.x),r=UC(e,t.target.y);return`${n}% ${r}%`}},r9={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,o=aa.parse(e);if(o.length>5)return r;const i=aa.createTransformer(e),a=typeof o[0]!="number"?1:0,s=n.x.scale*t.x,u=n.y.scale*t.y;o[0+a]/=s,o[1+a]/=u;const l=ht(s,u,.5);return typeof o[2+a]=="number"&&(o[2+a]/=l),typeof o[3+a]=="number"&&(o[3+a]/=l),i(o)}};class o9 extends lr.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:i}=t;hH(i9),i&&(n.group&&n.group.add(i),r&&r.register&&o&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),bh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:o,isPresent:i}=this.props,a=r.projection;return a&&(a.isPresent=i,o||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||ct.postRender(()=>{const s=a.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Vb.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=t;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function zI(e){const[t,n]=$I(),r=T.useContext(Hb);return lr.createElement(o9,{...e,layoutGroup:r,switchLayoutGroup:T.useContext(OP),isPresent:t,safeToRemove:n})}const i9={borderRadius:{...xl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xl,borderTopRightRadius:xl,borderBottomLeftRadius:xl,borderBottomRightRadius:xl,boxShadow:r9},WI=["TopLeft","TopRight","BottomLeft","BottomRight"],a9=WI.length,HC=e=>typeof e=="string"?parseFloat(e):e,GC=e=>typeof e=="number"||xe.test(e);function s9(e,t,n,r,o,i){o?(e.opacity=ht(0,n.opacity!==void 0?n.opacity:1,u9(r)),e.opacityExit=ht(t.opacity!==void 0?t.opacity:1,0,l9(r))):i&&(e.opacity=ht(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<a9;a++){const s=`border${WI[a]}Radius`;let u=qC(t,s),l=qC(n,s);if(u===void 0&&l===void 0)continue;u||(u=0),l||(l=0),u===0||l===0||GC(u)===GC(l)?(e[s]=Math.max(ht(HC(u),HC(l),r),0),(Po.test(l)||Po.test(u))&&(e[s]+="%")):e[s]=l}(t.rotate||n.rotate)&&(e.rotate=ht(t.rotate||0,n.rotate||0,r))}function qC(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const u9=VI(0,.5,lI),l9=VI(.5,.95,kt);function VI(e,t,n){return r=>r<e?0:r>t?1:n(Vc(e,t,r))}function KC(e,t){e.min=t.min,e.max=t.max}function Cr(e,t){KC(e.x,t.x),KC(e.y,t.y)}function XC(e,t,n,r,o){return e-=t,e=fp(e,1/n,r),o!==void 0&&(e=fp(e,1/o,r)),e}function c9(e,t=0,n=1,r=.5,o,i=e,a=e){if(Po.test(t)&&(t=parseFloat(t),t=ht(a.min,a.max,t/100)-a.min),typeof t!="number")return;let s=ht(i.min,i.max,r);e===i&&(s-=t),e.min=XC(e.min,t,n,s,o),e.max=XC(e.max,t,n,s,o)}function YC(e,t,[n,r,o],i,a){c9(e,t[n],t[r],t[o],t.scale,i,a)}const d9=["x","scaleX","originX"],f9=["y","scaleY","originY"];function QC(e,t,n,r){YC(e.x,t,d9,n?n.x:void 0,r?r.x:void 0),YC(e.y,t,f9,n?n.y:void 0,r?r.y:void 0)}function JC(e){return e.translate===0&&e.scale===1}function jI(e){return JC(e.x)&&JC(e.y)}function h9(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function UI(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function ZC(e){return mr(e.x)/mr(e.y)}class p9{constructor(){this.members=[]}add(t){ax(this.members,t),t.scheduleRender()}remove(t){if(sx(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const i=this.members[o];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function e_(e,t,n){let r="";const o=e.x.translate/t.x,i=e.y.translate/t.y;if((o||i)&&(r=`translate3d(${o}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:u,rotateX:l,rotateY:c}=n;u&&(r+=`rotate(${u}deg) `),l&&(r+=`rotateX(${l}deg) `),c&&(r+=`rotateY(${c}deg) `)}const a=e.x.scale*t.x,s=e.y.scale*t.y;return(a!==1||s!==1)&&(r+=`scale(${a}, ${s})`),r||"none"}const v9=(e,t)=>e.depth-t.depth;class m9{constructor(){this.children=[],this.isDirty=!1}add(t){ax(this.children,t),this.isDirty=!0}remove(t){sx(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(v9),this.isDirty=!1,this.children.forEach(t)}}function g9(e,t){const n=Ha.now(),r=({timestamp:o})=>{const i=o-n;i>=t&&(pi(r),e(i-t))};return ct.read(r,!0),()=>pi(r)}function y9(e){window.MotionDebug&&window.MotionDebug.record(e)}function b9(e){return e instanceof SVGElement&&e.tagName!=="svg"}function x9(e,t,n){const r=Gn(e)?e:Nu(e);return r.start(ix("",r,t,n)),r.animation}const t_=["","X","Y","Z"],w9={visibility:"hidden"},n_=1e3;let S9=0;const Ea={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function HI({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(a={},s=t==null?void 0:t()){this.id=S9++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ea.totalNodes=Ea.resolvedTargetDeltas=Ea.recalculatedProjection=0,this.nodes.forEach(E9),this.nodes.forEach(I9),this.nodes.forEach(A9),this.nodes.forEach(k9),y9(Ea)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new m9)}addEventListener(a,s){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new ux),this.eventHandlers.get(a).add(s)}notifyListeners(a,...s){const u=this.eventHandlers.get(a);u&&u.notify(...s)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=b9(a),this.instance=a;const{layoutId:u,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(l||u)&&(this.isLayoutDirty=!0),e){let d;const f=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=g9(f,250),bh.hasAnimatedSinceResize&&(bh.hasAnimatedSinceResize=!1,this.nodes.forEach(o_))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&c&&(u||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||F9,{onLayoutAnimationStart:y,onLayoutAnimationComplete:m}=c.getProps(),g=!this.targetLayout||!UI(this.targetLayout,p)||h,b=!f&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,b);const x={...ox(v,"layout"),onPlay:y,onComplete:m};(c.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x)}else f||o_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,pi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(D9),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:s,layout:u}=this.options;if(s===void 0&&!u)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(r_);return}this.isUpdating||this.nodes.forEach(R9),this.isUpdating=!1,this.nodes.forEach(P9),this.nodes.forEach(C9),this.nodes.forEach(_9),this.clearAllSnapshots();const s=Ha.now();Zt.delta=ia(0,1e3/60,s-Zt.timestamp),Zt.timestamp=s,Zt.isProcessing=!0,fg.update.process(Zt),fg.preRender.process(Zt),fg.render.process(Zt),Zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Vb.read(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(T9),this.sharedNodes.forEach(M9)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ct.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ct.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_t(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let s=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(s=!1),s&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!o)return;const a=this.isLayoutDirty||this.shouldResetTransform,s=this.projectionDelta&&!jI(this.projectionDelta),u=this.getTransformTemplate(),l=u?u(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;a&&(s||_a(this.latestValues)||c)&&(o(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const s=this.measurePageBox();let u=this.removeElementScroll(s);return a&&(u=this.removeTransform(u)),B9(u),{animationId:this.root.animationId,measuredBox:s,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return _t();const s=a.measureViewportBox(),{scroll:u}=this.root;return u&&(Fi(s.x,u.offset.x),Fi(s.y,u.offset.y)),s}removeElementScroll(a){const s=_t();Cr(s,a);for(let u=0;u<this.path.length;u++){const l=this.path[u],{scroll:c,options:d}=l;if(l!==this.root&&c&&d.layoutScroll){if(c.isRoot){Cr(s,a);const{scroll:f}=this.root;f&&(Fi(s.x,-f.offset.x),Fi(s.y,-f.offset.y))}Fi(s.x,c.offset.x),Fi(s.y,c.offset.y)}}return s}applyTransform(a,s=!1){const u=_t();Cr(u,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];!s&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Zs(u,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),_a(c.latestValues)&&Zs(u,c.latestValues)}return _a(this.latestValues)&&Zs(u,this.latestValues),u}removeTransform(a){const s=_t();Cr(s,a);for(let u=0;u<this.path.length;u++){const l=this.path[u];if(!l.instance||!_a(l.latestValues))continue;My(l.latestValues)&&l.updateSnapshot();const c=_t(),d=l.measurePageBox();Cr(c,d),QC(s,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return _a(this.latestValues)&&QC(s,this.latestValues),s}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var s;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==u;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Zt.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_t(),this.relativeTargetOrigin=_t(),ic(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),Cr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=_t(),this.targetWithTransforms=_t()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),BG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Cr(this.target,this.layout.layoutBox),FI(this.target,this.targetDelta)):Cr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_t(),this.relativeTargetOrigin=_t(),ic(this.relativeTargetOrigin,this.target,h.target),Cr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ea.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||My(this.parent.latestValues)||NI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const s=this.getLead(),u=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(l=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Zt.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;Cr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;GG(this.layoutCorrected,this.treeScale,this.path,u),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=_t());const{target:p}=s;if(!p){this.projectionTransform&&(this.projectionDelta=Js(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Js(),this.projectionDeltaWithTransform=Js());const v=this.projectionTransform;oc(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=e_(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==f||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),Ea.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const s=this.getStack();s&&s.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,s=!1){const u=this.snapshot,l=u?u.latestValues:{},c={...this.latestValues},d=Js();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const f=_t(),h=u?u.source:void 0,p=this.layout?this.layout.source:void 0,v=h!==p,y=this.getStack(),m=!y||y.members.length<=1,g=!!(v&&!m&&this.options.crossfade===!0&&!this.path.some(N9));this.animationProgress=0;let b;this.mixTargetDelta=x=>{const w=x/1e3;i_(d.x,a.x,w),i_(d.y,a.y,w),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ic(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),O9(this.relativeTarget,this.relativeTargetOrigin,f,w),b&&h9(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=_t()),Cr(b,this.relativeTarget)),v&&(this.animationValues=c,s9(c,l,this.latestValues,w,g,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(pi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ct.update(()=>{bh.hasAnimatedSinceResize=!0,this.currentAnimation=x9(0,n_,{...a,onUpdate:s=>{this.mixTargetDelta(s),a.onUpdate&&a.onUpdate(s)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(n_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:s,target:u,layout:l,latestValues:c}=a;if(!(!s||!u||!l)){if(this!==a&&this.layout&&l&&GI(this.options.animationType,this.layout.layoutBox,l.layoutBox)){u=this.target||_t();const d=mr(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+d;const f=mr(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+f}Cr(s,u),Zs(s,c),oc(this.projectionDeltaWithTransform,this.layoutCorrected,s,c)}}registerSharedNode(a,s){this.sharedNodes.has(a)||this.sharedNodes.set(a,new p9),this.sharedNodes.get(a).add(s);const l=s.options.initialPromotionConfig;s.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(s):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:s}=this.options;return s?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:s}=this.options;return s?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:s,preserveFollowOpacity:u}={}){const l=this.getStack();l&&l.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let s=!1;const{latestValues:u}=a;if((u.rotate||u.rotateX||u.rotateY||u.rotateZ)&&(s=!0),!s)return;const l={};for(let c=0;c<t_.length;c++){const d="rotate"+t_[c];u[d]&&(l[d]=u[d],a.setStaticValue(d,0))}a.render();for(const c in l)a.setStaticValue(c,l[c]);a.scheduleRender()}getProjectionStyles(a){var s,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return w9;const l={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=gh(a==null?void 0:a.pointerEvents)||"",l.transform=c?c(this.latestValues,""):"none",l;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=gh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!_a(this.latestValues)&&(v.transform=c?c({},""):"none",this.hasProjected=!1),v}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),l.transform=e_(this.projectionDeltaWithTransform,this.treeScale,f),c&&(l.transform=c(f,l.transform));const{x:h,y:p}=this.projectionDelta;l.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,d.animationValues?l.opacity=d===this?(u=(s=f.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:l.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in ip){if(f[v]===void 0)continue;const{correct:y,applyTo:m}=ip[v],g=l.transform==="none"?f[v]:y(f[v],d);if(m){const b=m.length;for(let x=0;x<b;x++)l[m[x]]=g}else l[v]=g}return this.options.layoutId&&(l.pointerEvents=d===this?gh(a==null?void 0:a.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var s;return(s=a.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(r_),this.root.sharedNodes.clear()}}}function C9(e){e.updateLayout()}function _9(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=e.layout,{animationType:i}=e.options,a=n.source!==e.layout.source;i==="size"?Er(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],h=mr(f);f.min=r[d].min,f.max=f.min+h}):GI(i,n.layoutBox,r)&&Er(d=>{const f=a?n.measuredBox[d]:n.layoutBox[d],h=mr(r[d]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+h)});const s=Js();oc(s,r,n.layoutBox);const u=Js();a?oc(u,e.applyTransform(o,!0),n.measuredBox):oc(u,r,n.layoutBox);const l=!jI(s);let c=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const p=_t();ic(p,n.layoutBox,f.layoutBox);const v=_t();ic(v,r,h.layoutBox),UI(p,v)||(c=!0),d.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=p,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:s,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function E9(e){Ea.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function k9(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function T9(e){e.clearSnapshot()}function r_(e){e.clearMeasurements()}function R9(e){e.isLayoutDirty=!1}function P9(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function o_(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function I9(e){e.resolveTargetDelta()}function A9(e){e.calcProjection()}function D9(e){e.resetRotation()}function M9(e){e.removeLeadSnapshot()}function i_(e,t,n){e.translate=ht(t.translate,0,n),e.scale=ht(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function a_(e,t,n,r){e.min=ht(t.min,n.min,r),e.max=ht(t.max,n.max,r)}function O9(e,t,n,r){a_(e.x,t.x,n.x,r),a_(e.y,t.y,n.y,r)}function N9(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const F9={duration:.45,ease:[.4,0,.1,1]},s_=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),u_=s_("applewebkit/")&&!s_("chrome/")?Math.round:kt;function l_(e){e.min=u_(e.min),e.max=u_(e.max)}function B9(e){l_(e.x),l_(e.y)}function GI(e,t,n){return e==="position"||e==="preserve-aspect"&&!Ay(ZC(t),ZC(n),.2)}const L9=HI({attachResizeListener:(e,t)=>ri(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Cg={current:void 0},qI=HI({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Cg.current){const e=new L9({});e.mount(window),e.setOptions({layoutScroll:!0}),Cg.current=e}return Cg.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),$9={pan:{Feature:e9},drag:{Feature:ZG,ProjectionNode:qI,MeasureLayout:zI}},z9=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function W9(e){const t=z9.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function Ny(e,t,n=1){const[r,o]=W9(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const a=i.trim();return RI(a)?parseFloat(a):a}else return _y(o)?Ny(o,t,n+1):o}function V9(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(o=>{const i=o.get();if(!_y(i))return;const a=Ny(i,r);a&&o.set(a)});for(const o in t){const i=t[o];if(!_y(i))continue;const a=Ny(i,r);a&&(t[o]=a,n||(n={}),n[o]===void 0&&(n[o]=i))}return{target:t,transitionEnd:n}}const j9=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),KI=e=>j9.has(e),U9=e=>Object.keys(e).some(KI),c_=e=>e===ss||e===xe,d_=(e,t)=>parseFloat(e.split(", ")[t]),f_=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/);if(o)return d_(o[1],t);{const i=r.match(/^matrix\((.+)\)$/);return i?d_(i[1],e):0}},H9=new Set(["x","y","z"]),G9=vd.filter(e=>!H9.has(e));function q9(e){const t=[];return G9.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Fu={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:f_(4,13),y:f_(5,14)};Fu.translateX=Fu.x;Fu.translateY=Fu.y;const K9=(e,t,n)=>{const r=t.measureViewportBox(),o=t.current,i=getComputedStyle(o),{display:a}=i,s={};a==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(l=>{s[l]=Fu[l](r,i)}),t.render();const u=t.measureViewportBox();return n.forEach(l=>{const c=t.getValue(l);c&&c.jump(s[l]),e[l]=Fu[l](u,i)}),e},X9=(e,t,n={},r={})=>{t={...t},r={...r};const o=Object.keys(t).filter(KI);let i=[],a=!1;const s=[];if(o.forEach(u=>{const l=e.getValue(u);if(!e.hasValue(u))return;let c=n[u],d=bl(c);const f=t[u];let h;if(sp(f)){const p=f.length,v=f[0]===null?1:0;c=f[v],d=bl(c);for(let y=v;y<p&&f[y]!==null;y++)h?Zb(bl(f[y])===h):h=bl(f[y])}else h=bl(f);if(d!==h)if(c_(d)&&c_(h)){const p=l.get();typeof p=="string"&&l.set(parseFloat(p)),typeof f=="string"?t[u]=parseFloat(f):Array.isArray(f)&&h===xe&&(t[u]=f.map(parseFloat))}else d!=null&&d.transform&&(h!=null&&h.transform)&&(c===0||f===0)?c===0?l.set(h.transform(c)):t[u]=d.transform(f):(a||(i=q9(e),a=!0),s.push(u),r[u]=r[u]!==void 0?r[u]:t[u],l.jump(f))}),s.length){const u=s.indexOf("height")>=0?window.pageYOffset:null,l=K9(t,e,s);return i.length&&i.forEach(([c,d])=>{e.getValue(c).set(d)}),e.render(),kv&&u!==null&&window.scrollTo({top:u}),{target:l,transitionEnd:r}}else return{target:t,transitionEnd:r}};function Y9(e,t,n,r){return U9(t)?X9(e,t,n,r):{target:t,transitionEnd:r}}const Q9=(e,t,n,r)=>{const o=V9(e,t,r);return t=o.target,r=o.transitionEnd,Y9(e,t,n,r)},Fy={current:null},XI={current:!1};function J9(){if(XI.current=!0,!!kv)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Fy.current=e.matches;e.addListener(t),t()}else Fy.current=!1}function Z9(e,t,n){const{willChange:r}=t;for(const o in t){const i=t[o],a=n[o];if(Gn(i))e.addValue(o,i),dp(r)&&r.add(o);else if(Gn(a))e.addValue(o,Nu(i,{owner:e})),dp(r)&&r.remove(o);else if(a!==i)if(e.hasValue(o)){const s=e.getValue(o);!s.hasAnimated&&s.set(i)}else{const s=e.getStaticValue(o);e.addValue(o,Nu(s!==void 0?s:i,{owner:e}))}}for(const o in n)t[o]===void 0&&e.removeValue(o);return t}const h_=new WeakMap,YI=Object.keys(Wc),e7=YI.length,p_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],t7=Ub.length;class n7{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:o,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ct.render(this.render,!1,!0);const{latestValues:s,renderState:u}=i;this.latestValues=s,this.baseTarget={...s},this.initialValues=n.initial?{...s}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=a,this.isControllingVariants=Rv(n),this.isVariantNode=MP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:l,...c}=this.scrapeMotionValuesFromProps(n,{});for(const d in c){const f=c[d];s[d]!==void 0&&Gn(f)&&(f.set(s[d],!1),dp(l)&&l.add(d))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,h_.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),XI.current||J9(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Fy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){h_.delete(this.current),this.projection&&this.projection.unmount(),pi(this.notifyUpdate),pi(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=as.has(t),o=n.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&ct.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{o(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,o,i){let a,s;for(let u=0;u<e7;u++){const l=YI[u],{isEnabled:c,Feature:d,ProjectionNode:f,MeasureLayout:h}=Wc[l];f&&(a=f),c(n)&&(!this.features[l]&&d&&(this.features[l]=new d(this)),h&&(s=h))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:l,drag:c,dragConstraints:d,layoutScroll:f,layoutRoot:h}=n;this.projection.setOptions({layoutId:u,layout:l,alwaysMeasureLayout:!!c||d&&Ys(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof l=="string"?l:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:h})}return s}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_t()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<p_.length;r++){const o=p_[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const i=t["on"+o];i&&(this.propEventSubscriptions[o]=this.on(o,i))}this.prevMotionValues=Z9(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<t7;r++){const o=Ub[r],i=this.props[o];(zc(i)||i===!1)&&(n[o]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Nu(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,o=typeof r=="string"||typeof r=="object"?(n=Jb(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&o!==void 0)return o;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Gn(i)?i:this.initialValues[t]!==void 0&&o===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ux),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class QI extends n7{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},o){const i=yG(r,t||{},this);if(o){mG(this,r,i);const a=Q9(this,r,i,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function r7(e){return window.getComputedStyle(e)}class o7 extends QI{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(as.has(n)){const r=rx(n);return r&&r.default||0}else{const r=r7(t),o=(BP(n)?r.getPropertyValue(n):r[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(t,{transformPagePoint:n}){return BI(t,n)}build(t,n,r,o){qb(t,n,r,o.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Qb(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Gn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,o){jP(t,n,r,o)}}class i7 extends QI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(as.has(n)){const r=rx(n);return r&&r.default||0}return n=UP.has(n)?n:Wb(n),t.getAttribute(n)}measureInstanceViewportBox(){return _t()}scrapeMotionValuesFromProps(t,n){return GP(t,n)}build(t,n,r,o){Xb(t,n,r,this.isSVGTag,o.transformTemplate)}renderInstance(t,n,r,o){HP(t,n,r,o)}mount(t){this.isSVGTag=Yb(t.tagName),super.mount(t)}}const a7=(e,t)=>Gb(e)?new i7(t,{enableHardwareAcceleration:!1}):new o7(t,{enableHardwareAcceleration:!0}),s7={layout:{ProjectionNode:qI,MeasureLayout:zI}},u7={...MG,...ZH,...$9,...s7},bd=dH((e,t)=>zH(e,t,u7,a7));function JI(){const e=T.useRef(!1);return zb(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function l7(){const e=JI(),[t,n]=T.useState(0),r=T.useCallback(()=>{e.current&&n(t+1)},[t]);return[T.useCallback(()=>ct.postRender(r),[r]),t]}class c7 extends T.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d7({children:e,isPresent:t}){const n=T.useId(),r=T.useRef(null),o=T.useRef({width:0,height:0,top:0,left:0});return T.useInsertionEffect(()=>{const{width:i,height:a,top:s,left:u}=o.current;if(t||!r.current||!i||!a)return;r.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${s}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[t]),T.createElement(c7,{isPresent:t,childRef:r,sizeRef:o},T.cloneElement(e,{ref:r}))}const _g=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:i,mode:a})=>{const s=qP(f7),u=T.useId(),l=T.useMemo(()=>({id:u,initial:t,isPresent:n,custom:o,onExitComplete:c=>{s.set(c,!0);for(const d of s.values())if(!d)return;r&&r()},register:c=>(s.set(c,!1),()=>s.delete(c))}),i?void 0:[n]);return T.useMemo(()=>{s.forEach((c,d)=>s.set(d,!1))},[n]),T.useEffect(()=>{!n&&!s.size&&r&&r()},[n]),a==="popLayout"&&(e=T.createElement(d7,{isPresent:n},e)),T.createElement(pd.Provider,{value:l},e)};function f7(){return new Map}function h7(e){return T.useEffect(()=>()=>e(),[])}const ka=e=>e.key||"";function p7(e,t){e.forEach(n=>{const r=ka(n);t.set(r,n)})}function v7(e){const t=[];return T.Children.forEach(e,n=>{T.isValidElement(n)&&t.push(n)}),t}const Dv=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:o,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const s=T.useContext(Hb).forceRender||l7()[0],u=JI(),l=v7(e);let c=l;const d=T.useRef(new Map).current,f=T.useRef(c),h=T.useRef(new Map).current,p=T.useRef(!0);if(zb(()=>{p.current=!1,p7(l,h),f.current=c}),h7(()=>{p.current=!0,h.clear(),d.clear()}),p.current)return T.createElement(T.Fragment,null,c.map(g=>T.createElement(_g,{key:ka(g),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:a},g)));c=[...c];const v=f.current.map(ka),y=l.map(ka),m=v.length;for(let g=0;g<m;g++){const b=v[g];y.indexOf(b)===-1&&!d.has(b)&&d.set(b,void 0)}return a==="wait"&&d.size&&(c=[]),d.forEach((g,b)=>{if(y.indexOf(b)!==-1)return;const x=h.get(b);if(!x)return;const w=v.indexOf(b);let S=g;if(!S){const C=()=>{d.delete(b);const _=Array.from(h.keys()).filter(k=>!y.includes(k));if(_.forEach(k=>h.delete(k)),f.current=l.filter(k=>{const E=ka(k);return E===b||_.includes(E)}),!d.size){if(u.current===!1)return;s(),r&&r()}};S=T.createElement(_g,{key:ka(x),isPresent:!1,onExitComplete:C,custom:t,presenceAffectsLayout:i,mode:a},x),d.set(b,S)}c.splice(w,0,S)}),c=c.map(g=>{const b=g.key;return d.has(b)?g:T.createElement(_g,{key:ka(g),isPresent:!0,presenceAffectsLayout:i,mode:a},g)}),T.createElement(T.Fragment,null,d.size?c:c.map(g=>T.cloneElement(g)))};var m7={initial:e=>{const{position:t}=e,n=["top","bottom"].includes(t)?"y":"x";let r=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(r=1),{opacity:0,[n]:r*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},ZI=T.memo(e=>{const{id:t,message:n,onCloseComplete:r,onRequestRemove:o,requestClose:i=!1,position:a="bottom",duration:s=5e3,containerStyle:u,motionVariants:l=m7,toastSpacing:c="0.5rem"}=e,[d,f]=T.useState(s),h=t9();$c(()=>{h||r==null||r()},[h]),$c(()=>{f(s)},[s]);const p=()=>f(null),v=()=>f(s),y=()=>{h&&o()};T.useEffect(()=>{h&&i&&o()},[h,i,o]),ZU(y,d);const m=T.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:c,...u}),[u,c]),g=T.useMemo(()=>QU(a),[a]);return L.jsx(bd.div,{layout:!0,className:"chakra-toast",variants:l,initial:"initial",animate:"animate",exit:"exit",onHoverStart:p,onHoverEnd:v,custom:{position:a},style:g,children:L.jsx(Te.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:m,children:Jr(n,{id:t,onClose:y})})})});ZI.displayName="ToastComponent";function g7(e,t){var n;const r=e??"bottom",i={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[r];return(n=i==null?void 0:i[t])!=null?n:r}var v_={path:L.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[L.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),L.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),L.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},Qu=Le((e,t)=>{const{as:n,viewBox:r,color:o="currentColor",focusable:i=!1,children:a,className:s,__css:u,...l}=e,c=Ze("chakra-icon",s),d=hd("Icon",e),f={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:o,...u,...d},h={ref:t,focusable:i,className:c,__css:f},p=r??v_.viewBox;if(n&&typeof n!="string")return L.jsx(Te.svg,{as:n,...h,...l});const v=a??v_.path;return L.jsx(Te.svg,{verticalAlign:"middle",viewBox:p,...h,...l,children:v})});Qu.displayName="Icon";function y7(e){return L.jsx(Qu,{viewBox:"0 0 24 24",...e,children:L.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function b7(e){return L.jsx(Qu,{viewBox:"0 0 24 24",...e,children:L.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function m_(e){return L.jsx(Qu,{viewBox:"0 0 24 24",...e,children:L.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var x7=hL({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Mv=Le((e,t)=>{const n=hd("Spinner",e),{label:r="Loading...",thickness:o="2px",speed:i="0.45s",emptyColor:a="transparent",className:s,...u}=Fo(e),l=Ze("chakra-spinner",s),c={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:o,borderBottomColor:a,borderLeftColor:a,animation:`${x7} ${i} linear infinite`,...n};return L.jsx(Te.div,{ref:t,__css:c,className:l,...u,children:r&&L.jsx(Te.span,{srOnly:!0,children:r})})});Mv.displayName="Spinner";var[w7,lx]=In({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[S7,cx]=In({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),eA={info:{icon:b7,colorScheme:"blue"},warning:{icon:m_,colorScheme:"orange"},success:{icon:y7,colorScheme:"green"},error:{icon:m_,colorScheme:"red"},loading:{icon:Mv,colorScheme:"blue"}};function C7(e){return eA[e].colorScheme}function _7(e){return eA[e].icon}var tA=Le(function(t,n){const r=cx(),{status:o}=lx(),i={display:"inline",...r.description};return L.jsx(Te.div,{ref:n,"data-status":o,...t,className:Ze("chakra-alert__desc",t.className),__css:i})});tA.displayName="AlertDescription";function nA(e){const{status:t}=lx(),n=_7(t),r=cx(),o=t==="loading"?r.spinner:r.icon;return L.jsx(Te.span,{display:"inherit","data-status":t,...e,className:Ze("chakra-alert__icon",e.className),__css:o,children:e.children||L.jsx(n,{h:"100%",w:"100%"})})}nA.displayName="AlertIcon";var rA=Le(function(t,n){const r=cx(),{status:o}=lx();return L.jsx(Te.div,{ref:n,"data-status":o,...t,className:Ze("chakra-alert__title",t.className),__css:r.title})});rA.displayName="AlertTitle";var oA=Le(function(t,n){var r;const{status:o="info",addRole:i=!0,...a}=Fo(t),s=(r=t.colorScheme)!=null?r:C7(o),u=is("Alert",{...t,colorScheme:s}),l={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...u.container};return L.jsx(w7,{value:{status:o},children:L.jsx(S7,{value:u,children:L.jsx(Te.div,{"data-status":o,role:i?"alert":void 0,ref:n,...a,className:Ze("chakra-alert",t.className),__css:l})})})});oA.displayName="Alert";function E7(e){return L.jsx(Qu,{focusable:"false","aria-hidden":!0,...e,children:L.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var dx=Le(function(t,n){const r=hd("CloseButton",t),{children:o,isDisabled:i,__css:a,...s}=Fo(t),u={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return L.jsx(Te.button,{type:"button","aria-label":"Close",ref:n,disabled:i,__css:{...u,...r,...a},...s,children:o||L.jsx(E7,{width:"1em",height:"1em"})})});dx.displayName="CloseButton";var k7={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},go=T7(k7);function T7(e){let t=e;const n=new Set,r=o=>{t=o(t),n.forEach(i=>i())};return{getState:()=>t,subscribe:o=>(n.add(o),()=>{r(()=>e),n.delete(o)}),removeToast:(o,i)=>{r(a=>({...a,[i]:a[i].filter(s=>s.id!=o)}))},notify:(o,i)=>{const a=R7(o,i),{position:s,id:u}=a;return r(l=>{var c,d;const h=s.includes("top")?[a,...(c=l[s])!=null?c:[]]:[...(d=l[s])!=null?d:[],a];return{...l,[s]:h}}),u},update:(o,i)=>{o&&r(a=>{const s={...a},{position:u,index:l}=cC(s,o);return u&&l!==-1&&(s[u][l]={...s[u][l],...i,message:iA(i)}),s})},closeAll:({positions:o}={})=>{r(i=>(o??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((u,l)=>(u[l]=i[l].map(c=>({...c,requestClose:!0})),u),{...i}))},close:o=>{r(i=>{const a=TP(i,o);return a?{...i,[a]:i[a].map(s=>s.id==o?{...s,requestClose:!0}:s)}:i})},isActive:o=>!!cC(go.getState(),o).position}}var g_=0;function R7(e,t={}){var n,r;g_+=1;const o=(n=t.id)!=null?n:g_,i=(r=t.position)!=null?r:"bottom";return{id:o,message:e,position:i,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>go.removeToast(String(o),i),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}var P7=e=>{const{status:t,variant:n="solid",id:r,title:o,isClosable:i,onClose:a,description:s,colorScheme:u,icon:l}=e,c=r?{root:`toast-${r}`,title:`toast-${r}-title`,description:`toast-${r}-description`}:void 0;return L.jsxs(oA,{addRole:!1,status:t,variant:n,id:c==null?void 0:c.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:u,children:[L.jsx(nA,{children:l}),L.jsxs(Te.div,{flex:"1",maxWidth:"100%",children:[o&&L.jsx(rA,{id:c==null?void 0:c.title,children:o}),s&&L.jsx(tA,{id:c==null?void 0:c.description,display:"block",children:s})]}),i&&L.jsx(dx,{size:"sm",onClick:a,position:"absolute",insetEnd:1,top:1})]})};function iA(e={}){const{render:t,toastComponent:n=P7}=e;return o=>typeof t=="function"?t({...o,...e}):L.jsx(n,{...o,...e})}function I7(e,t){const n=o=>{var i;return{...t,...o,position:g7((i=o==null?void 0:o.position)!=null?i:t==null?void 0:t.position,e)}},r=o=>{const i=n(o),a=iA(i);return go.notify(a,i)};return r.update=(o,i)=>{go.update(o,n(i))},r.promise=(o,i)=>{const a=r({...i.loading,status:"loading",duration:null});o.then(s=>r.update(a,{status:"success",duration:5e3,...Jr(i.success,s)})).catch(s=>r.update(a,{status:"error",duration:5e3,...Jr(i.error,s)}))},r.closeAll=go.closeAll,r.close=go.close,r.isActive=go.isActive,r}var[A7,D7]=In({name:"ToastOptionsContext",strict:!1}),M7=e=>{const t=T.useSyncExternalStore(go.subscribe,go.getState,go.getState),{motionVariants:n,component:r=ZI,portalProps:o}=e,a=Object.keys(t).map(s=>{const u=t[s];return L.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${s}`,id:`chakra-toast-manager-${s}`,style:JU(s),children:L.jsx(Dv,{initial:!1,children:u.map(l=>L.jsx(r,{motionVariants:n,...l},l.id))})},s)});return L.jsx(cd,{...o,children:a})};function aA(e){const{theme:t}=JR(),n=D7();return T.useMemo(()=>I7(t.direction,{...n,...e}),[e,t.direction,n])}var O7=e=>function({children:n,theme:r=e,toastOptions:o,...i}){return L.jsxs(XU,{theme:r,...i,children:[L.jsx(A7,{value:o==null?void 0:o.defaultOptions,children:n}),L.jsx(M7,{...o})]})},N7=O7(bP),F7=Object.defineProperty,B7=(e,t,n)=>t in e?F7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bt=(e,t,n)=>(B7(e,typeof t!="symbol"?t+"":t,n),n);function y_(e){return e.sort((t,n)=>{const r=t.compareDocumentPosition(n);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var L7=e=>typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function b_(e,t,n){let r=e+1;return n&&r>=t&&(r=0),r}function x_(e,t,n){let r=e-1;return n&&r<0&&(r=t),r}var By=typeof window<"u"?T.useLayoutEffect:T.useEffect,hp=e=>e,$7=class{constructor(){bt(this,"descendants",new Map),bt(this,"register",e=>{if(e!=null)return L7(e)?this.registerNode(e):t=>{this.registerNode(t,e)}}),bt(this,"unregister",e=>{this.descendants.delete(e);const t=y_(Array.from(this.descendants.keys()));this.assignIndex(t)}),bt(this,"destroy",()=>{this.descendants.clear()}),bt(this,"assignIndex",e=>{this.descendants.forEach(t=>{const n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()})}),bt(this,"count",()=>this.descendants.size),bt(this,"enabledCount",()=>this.enabledValues().length),bt(this,"values",()=>Array.from(this.descendants.values()).sort((t,n)=>t.index-n.index)),bt(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),bt(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),bt(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),bt(this,"first",()=>this.item(0)),bt(this,"firstEnabled",()=>this.enabledItem(0)),bt(this,"last",()=>this.item(this.descendants.size-1)),bt(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),bt(this,"indexOf",e=>{var t,n;return e&&(n=(t=this.descendants.get(e))==null?void 0:t.index)!=null?n:-1}),bt(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(e))),bt(this,"next",(e,t=!0)=>{const n=b_(e,this.count(),t);return this.item(n)}),bt(this,"nextEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),o=b_(r,this.enabledCount(),t);return this.enabledItem(o)}),bt(this,"prev",(e,t=!0)=>{const n=x_(e,this.count()-1,t);return this.item(n)}),bt(this,"prevEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),o=x_(r,this.enabledCount()-1,t);return this.enabledItem(o)}),bt(this,"registerNode",(e,t)=>{if(!e||this.descendants.has(e))return;const n=Array.from(this.descendants.keys()).concat(e),r=y_(n);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const o={node:e,index:-1,...t};this.descendants.set(e,o),this.assignIndex(r)})}};function z7(e,t){if(e!=null){if(typeof e=="function"){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function $r(...e){return t=>{e.forEach(n=>{z7(n,t)})}}function W7(...e){return T.useMemo(()=>$r(...e),e)}function V7(){const e=T.useRef(new $7);return By(()=>()=>e.current.destroy()),e.current}var[j7,sA]=In({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function U7(e){const t=sA(),[n,r]=T.useState(-1),o=T.useRef(null);By(()=>()=>{o.current&&t.unregister(o.current)},[]),By(()=>{if(!o.current)return;const a=Number(o.current.dataset.index);n!=a&&!Number.isNaN(a)&&r(a)});const i=hp(e?t.register(e):t.register);return{descendants:t,index:n,enabledIndex:t.enabledIndexOf(o.current),register:$r(i,o)}}function H7(){return[hp(j7),()=>hp(sA()),()=>V7(),o=>U7(o)]}var Ly={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},wl={scale:{enter:{scale:1},exit:{scale:.95}},fade:{enter:{opacity:1},exit:{opacity:0}},pushLeft:{enter:{x:"100%"},exit:{x:"-30%"}},pushRight:{enter:{x:"-100%"},exit:{x:"30%"}},pushUp:{enter:{y:"100%"},exit:{y:"-30%"}},pushDown:{enter:{y:"-100%"},exit:{y:"30%"}},slideLeft:{position:{left:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"-100%",y:0}},slideRight:{position:{right:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"100%",y:0}},slideUp:{position:{top:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"-100%"}},slideDown:{position:{bottom:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"100%"}}};function $y(e){var t;switch((t=e==null?void 0:e.direction)!=null?t:"right"){case"right":return wl.slideRight;case"left":return wl.slideLeft;case"bottom":return wl.slideDown;case"top":return wl.slideUp;default:return wl.slideRight}}var w_={enter:{duration:.2,ease:Ly.easeOut},exit:{duration:.1,ease:Ly.easeIn}},pp={enter:(e,t)=>({...e,delay:typeof t=="number"?t:t==null?void 0:t.enter}),exit:(e,t)=>({...e,delay:typeof t=="number"?t:t==null?void 0:t.exit})},G7={enter:({transition:e,transitionEnd:t,delay:n}={})=>{var r;return{opacity:1,transition:(r=e==null?void 0:e.enter)!=null?r:pp.enter(w_.enter,n),transitionEnd:t==null?void 0:t.enter}},exit:({transition:e,transitionEnd:t,delay:n}={})=>{var r;return{opacity:0,transition:(r=e==null?void 0:e.exit)!=null?r:pp.exit(w_.exit,n),transitionEnd:t==null?void 0:t.exit}}},uA={initial:"exit",animate:"enter",exit:"exit",variants:G7},q7=T.forwardRef(function(t,n){const{unmountOnExit:r,in:o,className:i,transition:a,transitionEnd:s,delay:u,...l}=t,c=o||r?"enter":"exit",d=r?o&&r:!0,f={transition:a,transitionEnd:s,delay:u};return L.jsx(Dv,{custom:f,children:d&&L.jsx(bd.div,{ref:n,className:Ze("chakra-fade",i),custom:f,...uA,animate:c,...l})})});q7.displayName="Fade";var S_={exit:{duration:.15,ease:Ly.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},K7={exit:({direction:e,transition:t,transitionEnd:n,delay:r})=>{var o;const{exit:i}=$y({direction:e});return{...i,transition:(o=t==null?void 0:t.exit)!=null?o:pp.exit(S_.exit,r),transitionEnd:n==null?void 0:n.exit}},enter:({direction:e,transitionEnd:t,transition:n,delay:r})=>{var o;const{enter:i}=$y({direction:e});return{...i,transition:(o=n==null?void 0:n.enter)!=null?o:pp.enter(S_.enter,r),transitionEnd:t==null?void 0:t.enter}}},lA=T.forwardRef(function(t,n){const{direction:r="right",style:o,unmountOnExit:i,in:a,className:s,transition:u,transitionEnd:l,delay:c,motionProps:d,...f}=t,h=$y({direction:r}),p=Object.assign({position:"fixed"},h.position,o),v=i?a&&i:!0,y=a||i?"enter":"exit",m={transitionEnd:l,transition:u,direction:r,delay:c};return L.jsx(Dv,{custom:m,children:v&&L.jsx(bd.div,{...f,ref:n,initial:"exit",className:Ze("chakra-slide",s),animate:y,exit:"exit",custom:m,variants:K7,style:p,...d})})});lA.displayName="Slide";function cA(e){return T.Children.toArray(e).filter(t=>T.isValidElement(t))}var[yle,X7]=In({strict:!1,name:"ButtonGroupContext"});function Y7(e){const[t,n]=T.useState(!e);return{ref:T.useCallback(i=>{i&&n(i.tagName==="BUTTON")},[]),type:t?"button":void 0}}function zy(e){const{children:t,className:n,...r}=e,o=T.isValidElement(t)?T.cloneElement(t,{"aria-hidden":!0,focusable:!1}):t,i=Ze("chakra-button__icon",n);return L.jsx(Te.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...r,className:i,children:o})}zy.displayName="ButtonIcon";function Wy(e){const{label:t,placement:n,spacing:r="0.5rem",children:o=L.jsx(Mv,{color:"currentColor",width:"1em",height:"1em"}),className:i,__css:a,...s}=e,u=Ze("chakra-button__spinner",i),l=n==="start"?"marginEnd":"marginStart",c=T.useMemo(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[l]:t?r:0,fontSize:"1em",lineHeight:"normal",...a}),[a,t,l,r]);return L.jsx(Te.div,{className:u,...s,__css:c,children:o})}Wy.displayName="ButtonSpinner";var Bu=Le((e,t)=>{const n=X7(),r=hd("Button",{...n,...e}),{isDisabled:o=n==null?void 0:n.isDisabled,isLoading:i,isActive:a,children:s,leftIcon:u,rightIcon:l,loadingText:c,iconSpacing:d="0.5rem",type:f,spinner:h,spinnerPlacement:p="start",className:v,as:y,...m}=Fo(e),g=T.useMemo(()=>{const S={...r==null?void 0:r._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...r,...!!n&&{_focus:S}}},[r,n]),{ref:b,type:x}=Y7(y),w={rightIcon:l,leftIcon:u,iconSpacing:d,children:s};return L.jsxs(Te.button,{ref:W7(t,b),as:y,type:f??x,"data-active":Zn(a),"data-loading":Zn(i),__css:g,className:Ze("chakra-button",v),...m,disabled:o||i,children:[i&&p==="start"&&L.jsx(Wy,{className:"chakra-button__spinner--start",label:c,placement:"start",spacing:d,children:h}),i?c||L.jsx(Te.span,{opacity:0,children:L.jsx(C_,{...w})}):L.jsx(C_,{...w}),i&&p==="end"&&L.jsx(Wy,{className:"chakra-button__spinner--end",label:c,placement:"end",spacing:d,children:h})]})});Bu.displayName="Button";function C_(e){const{leftIcon:t,rightIcon:n,children:r,iconSpacing:o}=e;return L.jsxs(L.Fragment,{children:[t&&L.jsx(zy,{marginEnd:o,children:t}),r,n&&L.jsx(zy,{marginStart:o,children:n})]})}var[Q7,J7]=In({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[Z7,dA]=In({strict:!1,name:"FormControlContext"});function eq(e){const{id:t,isRequired:n,isInvalid:r,isDisabled:o,isReadOnly:i,...a}=e,s=T.useId(),u=t||`field-${s}`,l=`${u}-label`,c=`${u}-feedback`,d=`${u}-helptext`,[f,h]=T.useState(!1),[p,v]=T.useState(!1),[y,m]=T.useState(!1),g=T.useCallback((C={},_=null)=>({id:d,...C,ref:$r(_,k=>{k&&v(!0)})}),[d]),b=T.useCallback((C={},_=null)=>({...C,ref:_,"data-focus":Zn(y),"data-disabled":Zn(o),"data-invalid":Zn(r),"data-readonly":Zn(i),id:C.id!==void 0?C.id:l,htmlFor:C.htmlFor!==void 0?C.htmlFor:u}),[u,o,y,r,i,l]),x=T.useCallback((C={},_=null)=>({id:c,...C,ref:$r(_,k=>{k&&h(!0)}),"aria-live":"polite"}),[c]),w=T.useCallback((C={},_=null)=>({...C,...a,ref:_,role:"group","data-focus":Zn(y),"data-disabled":Zn(o),"data-invalid":Zn(r),"data-readonly":Zn(i)}),[a,o,y,r,i]),S=T.useCallback((C={},_=null)=>({...C,ref:_,role:"presentation","aria-hidden":!0,children:C.children||"*"}),[]);return{isRequired:!!n,isInvalid:!!r,isReadOnly:!!i,isDisabled:!!o,isFocused:!!y,onFocus:()=>m(!0),onBlur:()=>m(!1),hasFeedbackText:f,setHasFeedbackText:h,hasHelpText:p,setHasHelpText:v,id:u,labelId:l,feedbackId:c,helpTextId:d,htmlProps:a,getHelpTextProps:g,getErrorMessageProps:x,getRootProps:w,getLabelProps:b,getRequiredIndicatorProps:S}}var tq=Le(function(t,n){const r=is("Form",t),o=Fo(t),{getRootProps:i,htmlProps:a,...s}=eq(o),u=Ze("chakra-form-control",t.className);return L.jsx(Z7,{value:s,children:L.jsx(Q7,{value:r,children:L.jsx(Te.div,{...i({},n),className:u,__css:r.container})})})});tq.displayName="FormControl";var nq=Le(function(t,n){const r=dA(),o=J7(),i=Ze("chakra-form__helper-text",t.className);return L.jsx(Te.div,{...r==null?void 0:r.getHelpTextProps(t,n),__css:o.helperText,className:i})});nq.displayName="FormHelperText";function fA(e){const{isDisabled:t,isInvalid:n,isReadOnly:r,isRequired:o,...i}=rq(e);return{...i,disabled:t,readOnly:r,required:o,"aria-invalid":qm(n),"aria-required":qm(o),"aria-readonly":qm(r)}}function rq(e){var t,n,r;const o=dA(),{id:i,disabled:a,readOnly:s,required:u,isRequired:l,isInvalid:c,isReadOnly:d,isDisabled:f,onFocus:h,onBlur:p,...v}=e,y=e["aria-describedby"]?[e["aria-describedby"]]:[];return o!=null&&o.hasFeedbackText&&(o!=null&&o.isInvalid)&&y.push(o.feedbackId),o!=null&&o.hasHelpText&&y.push(o.helpTextId),{...v,"aria-describedby":y.join(" ")||void 0,id:i??(o==null?void 0:o.id),isDisabled:(t=a??f)!=null?t:o==null?void 0:o.isDisabled,isReadOnly:(n=s??d)!=null?n:o==null?void 0:o.isReadOnly,isRequired:(r=u??l)!=null?r:o==null?void 0:o.isRequired,isInvalid:c??(o==null?void 0:o.isInvalid),onFocus:So(o==null?void 0:o.onFocus,h),onBlur:So(o==null?void 0:o.onBlur,p)}}function oq(e,t,n,r){const o=Lc(n);return T.useEffect(()=>{const i=typeof e=="function"?e():e??document;if(!(!n||!i))return i.addEventListener(t,o,r),()=>{i.removeEventListener(t,o,r)}},[t,e,r,o,n]),()=>{const i=typeof e=="function"?e():e??document;i==null||i.removeEventListener(t,o,r)}}function iq(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var hA={exports:{}},aq="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",sq=aq,uq=sq;function pA(){}function vA(){}vA.resetWarningCache=pA;var lq=function(){function e(r,o,i,a,s,u){if(u!==uq){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:vA,resetWarningCache:pA};return n.PropTypes=n,n};hA.exports=lq();var mA=hA.exports,Vy="data-focus-lock",gA="data-focus-lock-disabled",cq="data-no-focus-lock",dq="data-autofocus-inside",fq="data-no-autofocus";function Eg(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function hq(e,t){var n=T.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var __=new WeakMap;function yA(e,t){var n=hq(t||null,function(r){return e.forEach(function(o){return Eg(o,r)})});return T.useLayoutEffect(function(){var r=__.get(n);if(r){var o=new Set(r),i=new Set(e),a=n.current;o.forEach(function(s){i.has(s)||Eg(s,null)}),i.forEach(function(s){o.has(s)||Eg(s,a)})}__.set(n,e)},[e]),n}var kg={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},yo=function(){return yo=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yo.apply(this,arguments)};function bA(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function pq(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function xA(e){return e}function wA(e,t){t===void 0&&(t=xA);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var a=t(i,r);return n.push(a),function(){n=n.filter(function(s){return s!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(s){return i(s)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var s=n;n=[],s.forEach(i),a=n}var u=function(){var c=a;a=[],c.forEach(i)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){a.push(c),l()},filter:function(c){return a=a.filter(c),n}}}};return o}function fx(e,t){return t===void 0&&(t=xA),wA(e,t)}function SA(e){e===void 0&&(e={});var t=wA(null);return t.options=yo({async:!0,ssr:!1},e),t}var CA=function(e){var t=e.sideCar,n=bA(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,yo({},n))};CA.isSideCarExport=!0;function vq(e,t){return e.useMedium(t),CA}var _A=fx({},function(e){var t=e.target,n=e.currentTarget;return{target:t,currentTarget:n}}),EA=fx(),mq=fx(),gq=SA({async:!0}),yq=[],kA=T.forwardRef(function(t,n){var r,o=T.useState(),i=o[0],a=o[1],s=T.useRef(),u=T.useRef(!1),l=T.useRef(null),c=t.children,d=t.disabled,f=d===void 0?!1:d,h=t.noFocusGuards,p=h===void 0?!1:h,v=t.persistentFocus,y=v===void 0?!1:v,m=t.crossFrame,g=m===void 0?!0:m,b=t.autoFocus,x=b===void 0?!0:b;t.allowTextSelection;var w=t.group,S=t.className,C=t.whiteList,_=t.hasPositiveIndices,k=t.shards,E=k===void 0?yq:k,A=t.as,D=A===void 0?"div":A,U=t.lockProps,H=U===void 0?{}:U,B=t.sideCar,V=t.returnFocus,M=V===void 0?!1:V,O=t.focusOptions,F=t.onActivation,$=t.onDeactivation,G=T.useState({}),Q=G[0],J=T.useCallback(function(){l.current=l.current||document&&document.activeElement,s.current&&F&&F(s.current),u.current=!0},[F]),ne=T.useCallback(function(){u.current=!1,$&&$(s.current)},[$]);T.useEffect(function(){f||(l.current=null)},[]);var oe=T.useCallback(function(_e){var ze=l.current;if(ze&&ze.focus){var We=typeof M=="function"?M(ze):M;if(We){var Ve=typeof We=="object"?We:void 0;l.current=null,_e?Promise.resolve().then(function(){return ze.focus(Ve)}):ze.focus(Ve)}}},[M]),ae=T.useCallback(function(_e){u.current&&_A.useMedium(_e)},[]),me=EA.useMedium,ve=T.useCallback(function(_e){s.current!==_e&&(s.current=_e,a(_e))},[]),we=Za((r={},r[gA]=f&&"disabled",r[Vy]=w,r),H),De=p!==!0,ge=De&&p!=="tail",Ie=yA([n,ve]);return T.createElement(T.Fragment,null,De&&[T.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:f?-1:0,style:kg}),_?T.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:f?-1:1,style:kg}):null],!f&&T.createElement(B,{id:Q,sideCar:gq,observed:i,disabled:f,persistentFocus:y,crossFrame:g,autoFocus:x,whiteList:C,shards:E,onActivation:J,onDeactivation:ne,returnFocus:oe,focusOptions:O}),T.createElement(D,Za({ref:Ie},we,{className:S,onBlur:me,onFocus:ae}),c),ge&&T.createElement("div",{"data-focus-guard":!0,tabIndex:f?-1:0,style:kg}))});kA.propTypes={};const TA=kA;function jy(e,t){return jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},jy(e,t)}function bq(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,jy(e,t)}function jc(e){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jc(e)}function xq(e,t){if(jc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(jc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wq(e){var t=xq(e,"string");return jc(t)=="symbol"?t:String(t)}function Sq(e,t,n){return t=wq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cq(e,t){function n(r){return r.displayName||r.name||"Component"}return function(o){var i=[],a;function s(){a=e(i.map(function(l){return l.props})),t(a)}var u=function(l){bq(c,l);function c(){return l.apply(this,arguments)||this}c.peek=function(){return a};var d=c.prototype;return d.componentDidMount=function(){i.push(this),s()},d.componentDidUpdate=function(){s()},d.componentWillUnmount=function(){var h=i.indexOf(this);i.splice(h,1),s()},d.render=function(){return lr.createElement(o,this.props)},c}(T.PureComponent);return Sq(u,"displayName","SideEffect("+n(o)+")"),u}}var Bo=function(e){for(var t=Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t},vp=function(e){return Array.isArray(e)?e:[e]},RA=function(e){return Array.isArray(e)?e[0]:e},_q=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!t||!t.getPropertyValue?!1:t.getPropertyValue("display")==="none"||t.getPropertyValue("visibility")==="hidden"},PA=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},IA=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},Eq=function(e,t){return!e||IA(e)||!_q(e)&&t(PA(e))},AA=function(e,t){var n=e.get(t);if(n!==void 0)return n;var r=Eq(t,AA.bind(void 0,e));return e.set(t,r),r},kq=function(e,t){return e&&!IA(e)?Pq(e)?t(PA(e)):!1:!0},DA=function(e,t){var n=e.get(t);if(n!==void 0)return n;var r=kq(t,DA.bind(void 0,e));return e.set(t,r),r},MA=function(e){return e.dataset},Tq=function(e){return e.tagName==="BUTTON"},OA=function(e){return e.tagName==="INPUT"},NA=function(e){return OA(e)&&e.type==="radio"},Rq=function(e){return!((OA(e)||Tq(e))&&(e.type==="hidden"||e.disabled))},Pq=function(e){var t=e.getAttribute(fq);return![!0,"true",""].includes(t)},hx=function(e){var t;return!!(e&&(!((t=MA(e))===null||t===void 0)&&t.focusGuard))},mp=function(e){return!hx(e)},Iq=function(e){return!!e},Aq=function(e,t){var n=e.tabIndex-t.tabIndex,r=e.index-t.index;if(n){if(!e.tabIndex)return 1;if(!t.tabIndex)return-1}return n||r},FA=function(e,t,n){return Bo(e).map(function(r,o){return{node:r,index:o,tabIndex:n&&r.tabIndex===-1?(r.dataset||{}).focusGuard?0:-1:r.tabIndex}}).filter(function(r){return!t||r.tabIndex>=0}).sort(Aq)},Dq=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],px=Dq.join(","),Mq="".concat(px,", [data-focus-guard]"),BA=function(e,t){return Bo((e.shadowRoot||e).children).reduce(function(n,r){return n.concat(r.matches(t?Mq:px)?[r]:[],BA(r))},[])},Oq=function(e,t){var n;return e instanceof HTMLIFrameElement&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?Ov([e.contentDocument.body],t):[e]},Ov=function(e,t){return e.reduce(function(n,r){var o,i=BA(r,t),a=(o=[]).concat.apply(o,i.map(function(s){return Oq(s,t)}));return n.concat(a,r.parentNode?Bo(r.parentNode.querySelectorAll(px)).filter(function(s){return s===r}):[])},[])},Nq=function(e){var t=e.querySelectorAll("[".concat(dq,"]"));return Bo(t).map(function(n){return Ov([n])}).reduce(function(n,r){return n.concat(r)},[])},vx=function(e,t){return Bo(e).filter(function(n){return AA(t,n)}).filter(function(n){return Rq(n)})},E_=function(e,t){return t===void 0&&(t=new Map),Bo(e).filter(function(n){return DA(t,n)})},Uy=function(e,t,n){return FA(vx(Ov(e,n),t),!0,n)},k_=function(e,t){return FA(vx(Ov(e),t),!1)},Fq=function(e,t){return vx(Nq(e),t)},pu=function(e,t){return e.shadowRoot?pu(e.shadowRoot,t):Object.getPrototypeOf(e).contains!==void 0&&Object.getPrototypeOf(e).contains.call(e,t)?!0:Bo(e.children).some(function(n){var r;if(n instanceof HTMLIFrameElement){var o=(r=n.contentDocument)===null||r===void 0?void 0:r.body;return o?pu(o,t):!1}return pu(n,t)})},Bq=function(e){for(var t=new Set,n=e.length,r=0;r<n;r+=1)for(var o=r+1;o<n;o+=1){var i=e[r].compareDocumentPosition(e[o]);(i&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(o),(i&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(r)}return e.filter(function(a,s){return!t.has(s)})},LA=function(e){return e.parentNode?LA(e.parentNode):e},mx=function(e){var t=vp(e);return t.filter(Boolean).reduce(function(n,r){var o=r.getAttribute(Vy);return n.push.apply(n,o?Bq(Bo(LA(r).querySelectorAll("[".concat(Vy,'="').concat(o,'"]:not([').concat(gA,'="disabled"])')))):[r]),n},[])},Lq=function(e){try{return e()}catch{return}},Uc=function(e){if(e===void 0&&(e=document),!(!e||!e.activeElement)){var t=e.activeElement;return t.shadowRoot?Uc(t.shadowRoot):t instanceof HTMLIFrameElement&&Lq(function(){return t.contentWindow.document})?Uc(t.contentWindow.document):t}},$q=function(e,t){return e===t},zq=function(e,t){return!!Bo(e.querySelectorAll("iframe")).some(function(n){return $q(n,t)})},$A=function(e,t){return t===void 0&&(t=Uc(RA(e).ownerDocument)),!t||t.dataset&&t.dataset.focusGuard?!1:mx(e).some(function(n){return pu(n,t)||zq(n,t)})},Wq=function(e){e===void 0&&(e=document);var t=Uc(e);return t?Bo(e.querySelectorAll("[".concat(cq,"]"))).some(function(n){return pu(n,t)}):!1},Vq=function(e,t){return t.filter(NA).filter(function(n){return n.name===e.name}).filter(function(n){return n.checked})[0]||e},gx=function(e,t){return NA(e)&&e.name?Vq(e,t):e},jq=function(e){var t=new Set;return e.forEach(function(n){return t.add(gx(n,e))}),e.filter(function(n){return t.has(n)})},T_=function(e){return e[0]&&e.length>1?gx(e[0],e):e[0]},R_=function(e,t){return e.length>1?e.indexOf(gx(e[t],e)):t},zA="NEW_FOCUS",Uq=function(e,t,n,r){var o=e.length,i=e[0],a=e[o-1],s=hx(n);if(!(n&&e.indexOf(n)>=0)){var u=n!==void 0?t.indexOf(n):-1,l=r?t.indexOf(r):u,c=r?e.indexOf(r):-1,d=u-l,f=t.indexOf(i),h=t.indexOf(a),p=jq(t),v=n!==void 0?p.indexOf(n):-1,y=v-(r?p.indexOf(r):u),m=R_(e,0),g=R_(e,o-1);if(u===-1||c===-1)return zA;if(!d&&c>=0)return c;if(u<=f&&s&&Math.abs(d)>1)return g;if(u>=h&&s&&Math.abs(d)>1)return m;if(d&&Math.abs(y)>1)return c;if(u<=f)return g;if(u>h)return m;if(d)return Math.abs(d)>1?c:(o+c+d)%o}},Hq=function(e){return function(t){var n,r=(n=MA(t))===null||n===void 0?void 0:n.autofocus;return t.autofocus||r!==void 0&&r!=="false"||e.indexOf(t)>=0}},Gq=function(e,t,n){var r=e.map(function(i){var a=i.node;return a}),o=E_(r.filter(Hq(n)));return o&&o.length?T_(o):T_(E_(t))},Hy=function(e,t){return t===void 0&&(t=[]),t.push(e),e.parentNode&&Hy(e.parentNode.host||e.parentNode,t),t},Tg=function(e,t){for(var n=Hy(e),r=Hy(t),o=0;o<n.length;o+=1){var i=n[o];if(r.indexOf(i)>=0)return i}return!1},WA=function(e,t,n){var r=vp(e),o=vp(t),i=r[0],a=!1;return o.filter(Boolean).forEach(function(s){a=Tg(a||s,s)||a,n.filter(Boolean).forEach(function(u){var l=Tg(i,u);l&&(!a||pu(l,a)?a=l:a=Tg(l,a))})}),a},qq=function(e,t){return e.reduce(function(n,r){return n.concat(Fq(r,t))},[])},Kq=function(e,t){var n=new Map;return t.forEach(function(r){return n.set(r.node,r)}),e.map(function(r){return n.get(r)}).filter(Iq)},Xq=function(e,t){var n=Uc(vp(e).length>0?document:RA(e).ownerDocument),r=mx(e).filter(mp),o=WA(n||e,e,r),i=new Map,a=k_(r,i),s=Uy(r,i).filter(function(h){var p=h.node;return mp(p)});if(!(!s[0]&&(s=a,!s[0]))){var u=k_([o],i).map(function(h){var p=h.node;return p}),l=Kq(u,s),c=l.map(function(h){var p=h.node;return p}),d=Uq(c,u,n,t);if(d===zA){var f=Gq(a,c,qq(r,i));if(f)return{node:f};console.warn("focus-lock: cannot find any node to move focus into");return}return d===void 0?d:l[d]}},Yq=function(e){var t=mx(e).filter(mp),n=WA(e,e,t),r=new Map,o=Uy([n],r,!0),i=Uy(t,r).filter(function(a){var s=a.node;return mp(s)}).map(function(a){var s=a.node;return s});return o.map(function(a){var s=a.node,u=a.index;return{node:s,index:u,lockItem:i.indexOf(s)>=0,guard:hx(s)}})},Qq=function(e,t){"focus"in e&&e.focus(t),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus()},Rg=0,Pg=!1,VA=function(e,t,n){n===void 0&&(n={});var r=Xq(e,t);if(!Pg&&r){if(Rg>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),Pg=!0,setTimeout(function(){Pg=!1},1);return}Rg++,Qq(r.node,n.focusOptions),Rg--}};function yx(e){setTimeout(e,1)}var Jq=function(){return document&&document.activeElement===document.body},Zq=function(){return Jq()||Wq()},vu=null,eu=null,mu=null,Hc=!1,eK=function(){return!0},tK=function(t){return(vu.whiteList||eK)(t)},nK=function(t,n){mu={observerNode:t,portaledElement:n}},rK=function(t){return mu&&mu.portaledElement===t};function P_(e,t,n,r){var o=null,i=e;do{var a=r[i];if(a.guard)a.node.dataset.focusAutoGuard&&(o=a);else if(a.lockItem){if(i!==e)return;o=null}else break}while((i+=n)!==t);o&&(o.node.tabIndex=0)}var oK=function(t){return t&&"current"in t?t.current:t},iK=function(t){return t?!!Hc:Hc==="meanwhile"},aK=function e(t,n,r){return n&&(n.host===t&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&e(t,n.parentNode,r))},sK=function(t,n){return n.some(function(r){return aK(t,r,r)})},gp=function(){var t=!1;if(vu){var n=vu,r=n.observed,o=n.persistentFocus,i=n.autoFocus,a=n.shards,s=n.crossFrame,u=n.focusOptions,l=r||mu&&mu.portaledElement,c=document&&document.activeElement;if(l){var d=[l].concat(a.map(oK).filter(Boolean));if((!c||tK(c))&&(o||iK(s)||!Zq()||!eu&&i)&&(l&&!($A(d)||c&&sK(c,d)||rK(c))&&(document&&!eu&&c&&!i?(c.blur&&c.blur(),document.body.focus()):(t=VA(d,eu,{focusOptions:u}),mu={})),Hc=!1,eu=document&&document.activeElement),document){var f=document&&document.activeElement,h=Yq(d),p=h.map(function(v){var y=v.node;return y}).indexOf(f);p>-1&&(h.filter(function(v){var y=v.guard,m=v.node;return y&&m.dataset.focusAutoGuard}).forEach(function(v){var y=v.node;return y.removeAttribute("tabIndex")}),P_(p,h.length,1,h),P_(p,-1,-1,h))}}}return t},jA=function(t){gp()&&t&&(t.stopPropagation(),t.preventDefault())},bx=function(){return yx(gp)},uK=function(t){var n=t.target,r=t.currentTarget;r.contains(n)||nK(r,n)},lK=function(){return null},UA=function(){Hc="just",yx(function(){Hc="meanwhile"})},cK=function(){document.addEventListener("focusin",jA),document.addEventListener("focusout",bx),window.addEventListener("blur",UA)},dK=function(){document.removeEventListener("focusin",jA),document.removeEventListener("focusout",bx),window.removeEventListener("blur",UA)};function fK(e){return e.filter(function(t){var n=t.disabled;return!n})}function hK(e){var t=e.slice(-1)[0];t&&!vu&&cK();var n=vu,r=n&&t&&t.id===n.id;vu=t,n&&!r&&(n.onDeactivation(),e.filter(function(o){var i=o.id;return i===n.id}).length||n.returnFocus(!t)),t?(eu=null,(!r||n.observed!==t.observed)&&t.onActivation(),gp(),yx(gp)):(dK(),eu=null)}_A.assignSyncMedium(uK);EA.assignMedium(bx);mq.assignMedium(function(e){return e({moveFocusInside:VA,focusInside:$A})});const pK=Cq(fK,hK)(lK);var Gy=T.forwardRef(function(t,n){return T.createElement(TA,Za({sideCar:pK,ref:n},t))}),HA=TA.propTypes||{};HA.sideCar;iq(HA,["sideCar"]);Gy.propTypes={};function GA(e){return e!=null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function qA(e){var t;if(!GA(e))return!1;const n=(t=e.ownerDocument.defaultView)!=null?t:window;return e instanceof n.HTMLElement}function vK(e){var t,n;return(n=(t=KA(e))==null?void 0:t.defaultView)!=null?n:window}function KA(e){return GA(e)?e.ownerDocument:document}function mK(e){return KA(e).activeElement}var XA=e=>e.hasAttribute("tabindex"),gK=e=>XA(e)&&e.tabIndex===-1;function yK(e){return!!e.getAttribute("disabled")||!!e.getAttribute("aria-disabled")}function YA(e){return e.parentElement&&YA(e.parentElement)?!0:e.hidden}function bK(e){const t=e.getAttribute("contenteditable");return t!=="false"&&t!=null}function QA(e){if(!qA(e)||YA(e)||yK(e))return!1;const{localName:t}=e;if(["input","select","textarea","button"].indexOf(t)>=0)return!0;const r={a:()=>e.hasAttribute("href"),audio:()=>e.hasAttribute("controls"),video:()=>e.hasAttribute("controls")};return t in r?r[t]():bK(e)?!0:XA(e)}function xK(e){return e?qA(e)&&QA(e)&&!gK(e):!1}var wK=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"],SK=wK.join(),CK=e=>e.offsetWidth>0&&e.offsetHeight>0;function _K(e){const t=Array.from(e.querySelectorAll(SK));return t.unshift(e),t.filter(n=>QA(n)&&CK(n))}var I_,EK=(I_=Gy.default)!=null?I_:Gy,JA=e=>{const{initialFocusRef:t,finalFocusRef:n,contentRef:r,restoreFocus:o,children:i,isDisabled:a,autoFocus:s,persistentFocus:u,lockFocusAcrossFrames:l}=e,c=T.useCallback(()=>{t!=null&&t.current?t.current.focus():r!=null&&r.current&&_K(r.current).length===0&&requestAnimationFrame(()=>{var p;(p=r.current)==null||p.focus()})},[t,r]),d=T.useCallback(()=>{var h;(h=n==null?void 0:n.current)==null||h.focus()},[n]),f=o&&!n;return L.jsx(EK,{crossFrame:l,persistentFocus:u,autoFocus:s,disabled:a,onActivation:c,onDeactivation:d,returnFocus:f,children:i})};JA.displayName="FocusLock";var xx=Le(function(t,n){const{htmlSize:r,...o}=t,i=is("Input",o),a=Fo(o),s=fA(a),u=Ze("chakra-input",t.className);return L.jsx(Te.input,{size:r,...s,__css:i.field,ref:n,className:u})});xx.displayName="Input";xx.id="Input";var[kK,ZA]=In({name:"ListStylesContext",errorMessage:`useListStyles returned is 'undefined'. Seems you forgot to wrap the components in "<List />" `}),Nv=Le(function(t,n){const r=is("List",t),{children:o,styleType:i="none",stylePosition:a,spacing:s,...u}=Fo(t),l=cA(o),d=s?{["& > *:not(style) ~ *:not(style)"]:{mt:s}}:{};return L.jsx(kK,{value:r,children:L.jsx(Te.ul,{ref:n,listStyleType:i,listStylePosition:a,role:"list",__css:{...r.container,...d},...u,children:l})})});Nv.displayName="List";var TK=Le((e,t)=>{const{as:n,...r}=e;return L.jsx(Nv,{ref:t,as:"ol",styleType:"decimal",marginStart:"1em",...r})});TK.displayName="OrderedList";var RK=Le(function(t,n){const{as:r,...o}=t;return L.jsx(Nv,{ref:n,as:"ul",styleType:"initial",marginStart:"1em",...o})});RK.displayName="UnorderedList";var eD=Le(function(t,n){const r=ZA();return L.jsx(Te.li,{ref:n,...t,__css:r.item})});eD.displayName="ListItem";var PK=Le(function(t,n){const r=ZA();return L.jsx(Qu,{ref:n,role:"presentation",...t,__css:r.icon})});PK.displayName="ListIcon";var tD=Object.freeze(["base","sm","md","lg","xl","2xl"]);function IK(e,t){return Array.isArray(e)?e.map(n=>n===null?null:t(n)):Wn(e)?Object.keys(e).reduce((n,r)=>(n[r]=t(e[r]),n),{}):e!=null?t(e):null}function AK(e,t=tD){const n={};return e.forEach((r,o)=>{const i=t[o];r!=null&&(n[i]=r)}),n}var bo=Le(function(t,n){const r=hd("Text",t),{className:o,align:i,decoration:a,casing:s,...u}=Fo(t),l=MU({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return L.jsx(Te.p,{ref:n,className:Ze("chakra-text",t.className),...l,...u,__css:r})});bo.displayName="Text";var nD=e=>L.jsx(Te.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});nD.displayName="StackItem";function DK(e){const{spacing:t,direction:n}=e,r={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":IK(n,o=>r[o])}}var wx=Le((e,t)=>{const{isInline:n,direction:r,align:o,justify:i,spacing:a="0.5rem",wrap:s,children:u,divider:l,className:c,shouldWrapChildren:d,...f}=e,h=n?"row":r??"column",p=T.useMemo(()=>DK({spacing:a,direction:h}),[a,h]),v=!!l,y=!d&&!v,m=T.useMemo(()=>{const b=cA(u);return y?b:b.map((x,w)=>{const S=typeof x.key<"u"?x.key:w,C=w+1===b.length,k=d?L.jsx(nD,{children:x},S):x;if(!v)return k;const E=T.cloneElement(l,{__css:p}),A=C?null:E;return L.jsxs(T.Fragment,{children:[k,A]},S)})},[l,p,v,y,d,u]),g=Ze("chakra-stack",c);return L.jsx(Te.div,{ref:t,display:"flex",alignItems:o,justifyContent:i,flexDirection:h,flexWrap:s,gap:v?void 0:a,className:g,...f,children:m})});wx.displayName="Stack";var qy=Le((e,t)=>L.jsx(wx,{align:"center",...e,direction:"column",ref:t}));qy.displayName="VStack";var xh=Le((e,t)=>L.jsx(wx,{align:"center",...e,direction:"row",ref:t}));xh.displayName="HStack";var Rr=Te("div");Rr.displayName="Box";var rD=Le(function(t,n){const{size:r,centerContent:o=!0,...i}=t,a=o?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return L.jsx(Rr,{ref:n,boxSize:r,__css:{...a,flexShrink:0,flexGrow:0},...i})});rD.displayName="Square";var MK=Le(function(t,n){const{size:r,...o}=t;return L.jsx(rD,{size:r,ref:n,borderRadius:"9999px",...o})});MK.displayName="Circle";function OK(e,t={}){const{ssr:n=!0,fallback:r}=t,{getWindow:o}=KU(),i=Array.isArray(e)?e:[e];let a=Array.isArray(r)?r:[r];a=a.filter(l=>l!=null);const[s,u]=T.useState(()=>i.map((l,c)=>({media:l,matches:n?!!a[c]:o().matchMedia(l).matches})));return T.useEffect(()=>{const l=o();u(i.map(f=>({media:f,matches:l.matchMedia(f).matches})));const c=i.map(f=>l.matchMedia(f)),d=f=>{u(h=>h.slice().map(p=>p.media===f.media?{...p,matches:f.matches}:p))};return c.forEach(f=>{typeof f.addListener=="function"?f.addListener(d):f.addEventListener("change",d)}),()=>{c.forEach(f=>{typeof f.removeListener=="function"?f.removeListener(d):f.removeEventListener("change",d)})}},[o]),s.map(l=>l.matches)}function NK(e,t,n=tD){let r=Object.keys(e).indexOf(t);if(r!==-1)return e[t];let o=n.indexOf(t);for(;o>=0;){const i=n[o];if(e.hasOwnProperty(i)){r=o;break}o-=1}if(r!==-1){const i=n[r];return e[i]}}function FK(e){var t,n;const r=Wn(e)?e:{fallback:e??"base"},i=dd().__breakpoints.details.map(({minMaxQuery:l,breakpoint:c})=>({breakpoint:c,query:l.replace("@media screen and ","")})),a=i.map(l=>l.breakpoint===r.fallback),u=OK(i.map(l=>l.query),{fallback:a,ssr:r.ssr}).findIndex(l=>l==!0);return(n=(t=i[u])==null?void 0:t.breakpoint)!=null?n:r.fallback}function A_(e,t){var n;const r=Wn(t)?t:{fallback:t??"base"},o=FK(r),i=dd();if(!o)return;const a=Array.from(((n=i.__breakpoints)==null?void 0:n.keys)||[]),s=Array.isArray(e)?Object.fromEntries(Object.entries(AK(e,a)).map(([u,l])=>[u,l])):e;return NK(s,o,a)}function BK(e){const{key:t}=e;return t.length===1||t.length>1&&/[^a-zA-Z0-9]/.test(t)}function LK(e={}){const{timeout:t=300,preventDefault:n=()=>!0}=e,[r,o]=T.useState([]),i=T.useRef(),a=()=>{i.current&&(clearTimeout(i.current),i.current=null)},s=()=>{a(),i.current=setTimeout(()=>{o([]),i.current=null},t)};T.useEffect(()=>a,[]);function u(l){return c=>{if(c.key==="Backspace"){const d=[...r];d.pop(),o(d);return}if(BK(c)){const d=r.concat(c.key);n(c)&&(c.preventDefault(),c.stopPropagation()),o(d),l(d.join("")),s()}}}return u}function $K(e,t,n,r){if(t==null)return r;if(!r)return e.find(a=>n(a).toLowerCase().startsWith(t.toLowerCase()));const o=e.filter(i=>n(i).toLowerCase().startsWith(t.toLowerCase()));if(o.length>0){let i;return o.includes(r)?(i=o.indexOf(r)+1,i===o.length&&(i=0),o[i]):(i=e.indexOf(o[0]),e[i])}return r}function zK(){const e=T.useRef(new Map),t=e.current,n=T.useCallback((o,i,a,s)=>{e.current.set(a,{type:i,el:o,options:s}),o.addEventListener(i,a,s)},[]),r=T.useCallback((o,i,a,s)=>{o.removeEventListener(i,a,s),e.current.delete(a)},[]);return T.useEffect(()=>()=>{t.forEach((o,i)=>{r(o.el,o.type,i,o.options)})},[r,t]),{add:n,remove:r}}function Ig(e){const t=e.target,{tagName:n,isContentEditable:r}=t;return n!=="INPUT"&&n!=="TEXTAREA"&&r!==!0}function WK(e={}){const{ref:t,isDisabled:n,isFocusable:r,clickOnEnter:o=!0,clickOnSpace:i=!0,onMouseDown:a,onMouseUp:s,onClick:u,onKeyDown:l,onKeyUp:c,tabIndex:d,onMouseOver:f,onMouseLeave:h,...p}=e,[v,y]=T.useState(!0),[m,g]=T.useState(!1),b=zK(),x=M=>{M&&M.tagName!=="BUTTON"&&y(!1)},w=v?d:d||0,S=n&&!r,C=T.useCallback(M=>{if(n){M.stopPropagation(),M.preventDefault();return}M.currentTarget.focus(),u==null||u(M)},[n,u]),_=T.useCallback(M=>{m&&Ig(M)&&(M.preventDefault(),M.stopPropagation(),g(!1),b.remove(document,"keyup",_,!1))},[m,b]),k=T.useCallback(M=>{if(l==null||l(M),n||M.defaultPrevented||M.metaKey||!Ig(M.nativeEvent)||v)return;const O=o&&M.key==="Enter";i&&M.key===" "&&(M.preventDefault(),g(!0)),O&&(M.preventDefault(),M.currentTarget.click()),b.add(document,"keyup",_,!1)},[n,v,l,o,i,b,_]),E=T.useCallback(M=>{if(c==null||c(M),n||M.defaultPrevented||M.metaKey||!Ig(M.nativeEvent)||v)return;i&&M.key===" "&&(M.preventDefault(),g(!1),M.currentTarget.click())},[i,v,n,c]),A=T.useCallback(M=>{M.button===0&&(g(!1),b.remove(document,"mouseup",A,!1))},[b]),D=T.useCallback(M=>{if(M.button!==0)return;if(n){M.stopPropagation(),M.preventDefault();return}v||g(!0),M.currentTarget.focus({preventScroll:!0}),b.add(document,"mouseup",A,!1),a==null||a(M)},[n,v,a,b,A]),U=T.useCallback(M=>{M.button===0&&(v||g(!1),s==null||s(M))},[s,v]),H=T.useCallback(M=>{if(n){M.preventDefault();return}f==null||f(M)},[n,f]),B=T.useCallback(M=>{m&&(M.preventDefault(),g(!1)),h==null||h(M)},[m,h]),V=$r(t,x);return v?{...p,ref:V,type:"button","aria-disabled":S?void 0:n,disabled:S,onClick:C,onMouseDown:a,onMouseUp:s,onKeyUp:c,onKeyDown:l,onMouseOver:f,onMouseLeave:h}:{...p,ref:V,role:"button","data-active":Zn(m),"aria-disabled":n?"true":void 0,tabIndex:S?void 0:w,onClick:C,onMouseDown:D,onMouseUp:U,onKeyUp:E,onKeyDown:k,onMouseOver:H,onMouseLeave:B}}function VK(e){const t=e.current;if(!t)return!1;const n=mK(t);return!n||t.contains(n)?!1:!!xK(n)}function jK(e,t){const{shouldFocus:n,visible:r,focusRef:o}=t,i=n&&!r;$c(()=>{if(!i||VK(e))return;const a=(o==null?void 0:o.current)||e.current;let s;if(a)return s=requestAnimationFrame(()=>{a.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(s)}},[i,e,o])}var xs=(e,t)=>({var:e,varRef:t?`var(${e}, ${t})`:`var(${e})`}),nr={arrowShadowColor:xs("--popper-arrow-shadow-color"),arrowSize:xs("--popper-arrow-size","8px"),arrowSizeHalf:xs("--popper-arrow-size-half"),arrowBg:xs("--popper-arrow-bg"),transformOrigin:xs("--popper-transform-origin"),arrowOffset:xs("--popper-arrow-offset")};function UK(e){if(e.includes("top"))return"1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(e.includes("bottom"))return"-1px -1px 0px 0 var(--popper-arrow-shadow-color)";if(e.includes("right"))return"-1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(e.includes("left"))return"1px -1px 0px 0 var(--popper-arrow-shadow-color)"}var HK={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},GK=e=>HK[e],D_={scroll:!0,resize:!0};function qK(e){let t;return typeof e=="object"?t={enabled:!0,options:{...D_,...e}}:t={enabled:e,options:D_},t}var KK={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`},effect:({state:e})=>()=>{const t=e.elements.reference;e.elements.popper.style.width=`${t.offsetWidth}px`}},XK={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:e})=>{M_(e)},effect:({state:e})=>()=>{M_(e)}},M_=e=>{e.elements.popper.style.setProperty(nr.transformOrigin.var,GK(e.placement))},YK={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:e})=>{QK(e)}},QK=e=>{var t;if(!e.placement)return;const n=JK(e.placement);if((t=e.elements)!=null&&t.arrow&&n){Object.assign(e.elements.arrow.style,{[n.property]:n.value,width:nr.arrowSize.varRef,height:nr.arrowSize.varRef,zIndex:-1});const r={[nr.arrowSizeHalf.var]:`calc(${nr.arrowSize.varRef} / 2 - 1px)`,[nr.arrowOffset.var]:`calc(${nr.arrowSizeHalf.varRef} * -1)`};for(const o in r)e.elements.arrow.style.setProperty(o,r[o])}},JK=e=>{if(e.startsWith("top"))return{property:"bottom",value:nr.arrowOffset.varRef};if(e.startsWith("bottom"))return{property:"top",value:nr.arrowOffset.varRef};if(e.startsWith("left"))return{property:"right",value:nr.arrowOffset.varRef};if(e.startsWith("right"))return{property:"left",value:nr.arrowOffset.varRef}},ZK={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:e})=>{O_(e)},effect:({state:e})=>()=>{O_(e)}},O_=e=>{if(!e.elements.arrow)return;const t=e.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!t)return;const n=UK(e.placement);n&&t.style.setProperty("--popper-arrow-default-shadow",n),Object.assign(t.style,{transform:"rotate(45deg)",background:nr.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},eX={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},tX={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function nX(e,t="ltr"){var n,r;const o=((n=eX[e])==null?void 0:n[t])||e;return t==="ltr"?o:(r=tX[e])!=null?r:o}var Vn="top",zr="bottom",Wr="right",jn="left",Sx="auto",xd=[Vn,zr,Wr,jn],Lu="start",Gc="end",rX="clippingParents",oD="viewport",Sl="popper",oX="reference",N_=xd.reduce(function(e,t){return e.concat([t+"-"+Lu,t+"-"+Gc])},[]),iD=[].concat(xd,[Sx]).reduce(function(e,t){return e.concat([t,t+"-"+Lu,t+"-"+Gc])},[]),iX="beforeRead",aX="read",sX="afterRead",uX="beforeMain",lX="main",cX="afterMain",dX="beforeWrite",fX="write",hX="afterWrite",pX=[iX,aX,sX,uX,lX,cX,dX,fX,hX];function Oo(e){return e?(e.nodeName||"").toLowerCase():null}function gr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function es(e){var t=gr(e).Element;return e instanceof t||e instanceof Element}function Nr(e){var t=gr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Cx(e){if(typeof ShadowRoot>"u")return!1;var t=gr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function vX(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},o=t.attributes[n]||{},i=t.elements[n];!Nr(i)||!Oo(i)||(Object.assign(i.style,r),Object.keys(o).forEach(function(a){var s=o[a];s===!1?i.removeAttribute(a):i.setAttribute(a,s===!0?"":s)}))})}function mX(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var o=t.elements[r],i=t.attributes[r]||{},a=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),s=a.reduce(function(u,l){return u[l]="",u},{});!Nr(o)||!Oo(o)||(Object.assign(o.style,s),Object.keys(i).forEach(function(u){o.removeAttribute(u)}))})}}const gX={name:"applyStyles",enabled:!0,phase:"write",fn:vX,effect:mX,requires:["computeStyles"]};function Io(e){return e.split("-")[0]}var Ga=Math.max,yp=Math.min,$u=Math.round;function Ky(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function aD(){return!/^((?!chrome|android).)*safari/i.test(Ky())}function zu(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),o=1,i=1;t&&Nr(e)&&(o=e.offsetWidth>0&&$u(r.width)/e.offsetWidth||1,i=e.offsetHeight>0&&$u(r.height)/e.offsetHeight||1);var a=es(e)?gr(e):window,s=a.visualViewport,u=!aD()&&n,l=(r.left+(u&&s?s.offsetLeft:0))/o,c=(r.top+(u&&s?s.offsetTop:0))/i,d=r.width/o,f=r.height/i;return{width:d,height:f,top:c,right:l+d,bottom:c+f,left:l,x:l,y:c}}function _x(e){var t=zu(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function sD(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Cx(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function vi(e){return gr(e).getComputedStyle(e)}function yX(e){return["table","td","th"].indexOf(Oo(e))>=0}function ha(e){return((es(e)?e.ownerDocument:e.document)||window.document).documentElement}function Fv(e){return Oo(e)==="html"?e:e.assignedSlot||e.parentNode||(Cx(e)?e.host:null)||ha(e)}function F_(e){return!Nr(e)||vi(e).position==="fixed"?null:e.offsetParent}function bX(e){var t=/firefox/i.test(Ky()),n=/Trident/i.test(Ky());if(n&&Nr(e)){var r=vi(e);if(r.position==="fixed")return null}var o=Fv(e);for(Cx(o)&&(o=o.host);Nr(o)&&["html","body"].indexOf(Oo(o))<0;){var i=vi(o);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return o;o=o.parentNode}return null}function wd(e){for(var t=gr(e),n=F_(e);n&&yX(n)&&vi(n).position==="static";)n=F_(n);return n&&(Oo(n)==="html"||Oo(n)==="body"&&vi(n).position==="static")?t:n||bX(e)||t}function Ex(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ac(e,t,n){return Ga(e,yp(t,n))}function xX(e,t,n){var r=ac(e,t,n);return r>n?n:r}function uD(){return{top:0,right:0,bottom:0,left:0}}function lD(e){return Object.assign({},uD(),e)}function cD(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var wX=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,lD(typeof t!="number"?t:cD(t,xd))};function SX(e){var t,n=e.state,r=e.name,o=e.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,s=Io(n.placement),u=Ex(s),l=[jn,Wr].indexOf(s)>=0,c=l?"height":"width";if(!(!i||!a)){var d=wX(o.padding,n),f=_x(i),h=u==="y"?Vn:jn,p=u==="y"?zr:Wr,v=n.rects.reference[c]+n.rects.reference[u]-a[u]-n.rects.popper[c],y=a[u]-n.rects.reference[u],m=wd(i),g=m?u==="y"?m.clientHeight||0:m.clientWidth||0:0,b=v/2-y/2,x=d[h],w=g-f[c]-d[p],S=g/2-f[c]/2+b,C=ac(x,S,w),_=u;n.modifiersData[r]=(t={},t[_]=C,t.centerOffset=C-S,t)}}function CX(e){var t=e.state,n=e.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||sD(t.elements.popper,o)&&(t.elements.arrow=o))}const _X={name:"arrow",enabled:!0,phase:"main",fn:SX,effect:CX,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Wu(e){return e.split("-")[1]}var EX={top:"auto",right:"auto",bottom:"auto",left:"auto"};function kX(e,t){var n=e.x,r=e.y,o=t.devicePixelRatio||1;return{x:$u(n*o)/o||0,y:$u(r*o)/o||0}}function B_(e){var t,n=e.popper,r=e.popperRect,o=e.placement,i=e.variation,a=e.offsets,s=e.position,u=e.gpuAcceleration,l=e.adaptive,c=e.roundOffsets,d=e.isFixed,f=a.x,h=f===void 0?0:f,p=a.y,v=p===void 0?0:p,y=typeof c=="function"?c({x:h,y:v}):{x:h,y:v};h=y.x,v=y.y;var m=a.hasOwnProperty("x"),g=a.hasOwnProperty("y"),b=jn,x=Vn,w=window;if(l){var S=wd(n),C="clientHeight",_="clientWidth";if(S===gr(n)&&(S=ha(n),vi(S).position!=="static"&&s==="absolute"&&(C="scrollHeight",_="scrollWidth")),S=S,o===Vn||(o===jn||o===Wr)&&i===Gc){x=zr;var k=d&&S===w&&w.visualViewport?w.visualViewport.height:S[C];v-=k-r.height,v*=u?1:-1}if(o===jn||(o===Vn||o===zr)&&i===Gc){b=Wr;var E=d&&S===w&&w.visualViewport?w.visualViewport.width:S[_];h-=E-r.width,h*=u?1:-1}}var A=Object.assign({position:s},l&&EX),D=c===!0?kX({x:h,y:v},gr(n)):{x:h,y:v};if(h=D.x,v=D.y,u){var U;return Object.assign({},A,(U={},U[x]=g?"0":"",U[b]=m?"0":"",U.transform=(w.devicePixelRatio||1)<=1?"translate("+h+"px, "+v+"px)":"translate3d("+h+"px, "+v+"px, 0)",U))}return Object.assign({},A,(t={},t[x]=g?v+"px":"",t[b]=m?h+"px":"",t.transform="",t))}function TX(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=r===void 0?!0:r,i=n.adaptive,a=i===void 0?!0:i,s=n.roundOffsets,u=s===void 0?!0:s,l={placement:Io(t.placement),variation:Wu(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,B_(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:u})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,B_(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const RX={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:TX,data:{}};var _f={passive:!0};function PX(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,i=o===void 0?!0:o,a=r.resize,s=a===void 0?!0:a,u=gr(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&l.forEach(function(c){c.addEventListener("scroll",n.update,_f)}),s&&u.addEventListener("resize",n.update,_f),function(){i&&l.forEach(function(c){c.removeEventListener("scroll",n.update,_f)}),s&&u.removeEventListener("resize",n.update,_f)}}const IX={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:PX,data:{}};var AX={left:"right",right:"left",bottom:"top",top:"bottom"};function wh(e){return e.replace(/left|right|bottom|top/g,function(t){return AX[t]})}var DX={start:"end",end:"start"};function L_(e){return e.replace(/start|end/g,function(t){return DX[t]})}function kx(e){var t=gr(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Tx(e){return zu(ha(e)).left+kx(e).scrollLeft}function MX(e,t){var n=gr(e),r=ha(e),o=n.visualViewport,i=r.clientWidth,a=r.clientHeight,s=0,u=0;if(o){i=o.width,a=o.height;var l=aD();(l||!l&&t==="fixed")&&(s=o.offsetLeft,u=o.offsetTop)}return{width:i,height:a,x:s+Tx(e),y:u}}function OX(e){var t,n=ha(e),r=kx(e),o=(t=e.ownerDocument)==null?void 0:t.body,i=Ga(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=Ga(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-r.scrollLeft+Tx(e),u=-r.scrollTop;return vi(o||n).direction==="rtl"&&(s+=Ga(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:s,y:u}}function Rx(e){var t=vi(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function dD(e){return["html","body","#document"].indexOf(Oo(e))>=0?e.ownerDocument.body:Nr(e)&&Rx(e)?e:dD(Fv(e))}function sc(e,t){var n;t===void 0&&(t=[]);var r=dD(e),o=r===((n=e.ownerDocument)==null?void 0:n.body),i=gr(r),a=o?[i].concat(i.visualViewport||[],Rx(r)?r:[]):r,s=t.concat(a);return o?s:s.concat(sc(Fv(a)))}function Xy(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function NX(e,t){var n=zu(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function $_(e,t,n){return t===oD?Xy(MX(e,n)):es(t)?NX(t,n):Xy(OX(ha(e)))}function FX(e){var t=sc(Fv(e)),n=["absolute","fixed"].indexOf(vi(e).position)>=0,r=n&&Nr(e)?wd(e):e;return es(r)?t.filter(function(o){return es(o)&&sD(o,r)&&Oo(o)!=="body"}):[]}function BX(e,t,n,r){var o=t==="clippingParents"?FX(e):[].concat(t),i=[].concat(o,[n]),a=i[0],s=i.reduce(function(u,l){var c=$_(e,l,r);return u.top=Ga(c.top,u.top),u.right=yp(c.right,u.right),u.bottom=yp(c.bottom,u.bottom),u.left=Ga(c.left,u.left),u},$_(e,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function fD(e){var t=e.reference,n=e.element,r=e.placement,o=r?Io(r):null,i=r?Wu(r):null,a=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,u;switch(o){case Vn:u={x:a,y:t.y-n.height};break;case zr:u={x:a,y:t.y+t.height};break;case Wr:u={x:t.x+t.width,y:s};break;case jn:u={x:t.x-n.width,y:s};break;default:u={x:t.x,y:t.y}}var l=o?Ex(o):null;if(l!=null){var c=l==="y"?"height":"width";switch(i){case Lu:u[l]=u[l]-(t[c]/2-n[c]/2);break;case Gc:u[l]=u[l]+(t[c]/2-n[c]/2);break}}return u}function qc(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=r===void 0?e.placement:r,i=n.strategy,a=i===void 0?e.strategy:i,s=n.boundary,u=s===void 0?rX:s,l=n.rootBoundary,c=l===void 0?oD:l,d=n.elementContext,f=d===void 0?Sl:d,h=n.altBoundary,p=h===void 0?!1:h,v=n.padding,y=v===void 0?0:v,m=lD(typeof y!="number"?y:cD(y,xd)),g=f===Sl?oX:Sl,b=e.rects.popper,x=e.elements[p?g:f],w=BX(es(x)?x:x.contextElement||ha(e.elements.popper),u,c,a),S=zu(e.elements.reference),C=fD({reference:S,element:b,strategy:"absolute",placement:o}),_=Xy(Object.assign({},b,C)),k=f===Sl?_:S,E={top:w.top-k.top+m.top,bottom:k.bottom-w.bottom+m.bottom,left:w.left-k.left+m.left,right:k.right-w.right+m.right},A=e.modifiersData.offset;if(f===Sl&&A){var D=A[o];Object.keys(E).forEach(function(U){var H=[Wr,zr].indexOf(U)>=0?1:-1,B=[Vn,zr].indexOf(U)>=0?"y":"x";E[U]+=D[B]*H})}return E}function LX(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=n.boundary,i=n.rootBoundary,a=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,l=u===void 0?iD:u,c=Wu(r),d=c?s?N_:N_.filter(function(p){return Wu(p)===c}):xd,f=d.filter(function(p){return l.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,v){return p[v]=qc(e,{placement:v,boundary:o,rootBoundary:i,padding:a})[Io(v)],p},{});return Object.keys(h).sort(function(p,v){return h[p]-h[v]})}function $X(e){if(Io(e)===Sx)return[];var t=wh(e);return[L_(e),t,L_(t)]}function zX(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,i=o===void 0?!0:o,a=n.altAxis,s=a===void 0?!0:a,u=n.fallbackPlacements,l=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,v=n.allowedAutoPlacements,y=t.options.placement,m=Io(y),g=m===y,b=u||(g||!p?[wh(y)]:$X(y)),x=[y].concat(b).reduce(function(ne,oe){return ne.concat(Io(oe)===Sx?LX(t,{placement:oe,boundary:c,rootBoundary:d,padding:l,flipVariations:p,allowedAutoPlacements:v}):oe)},[]),w=t.rects.reference,S=t.rects.popper,C=new Map,_=!0,k=x[0],E=0;E<x.length;E++){var A=x[E],D=Io(A),U=Wu(A)===Lu,H=[Vn,zr].indexOf(D)>=0,B=H?"width":"height",V=qc(t,{placement:A,boundary:c,rootBoundary:d,altBoundary:f,padding:l}),M=H?U?Wr:jn:U?zr:Vn;w[B]>S[B]&&(M=wh(M));var O=wh(M),F=[];if(i&&F.push(V[D]<=0),s&&F.push(V[M]<=0,V[O]<=0),F.every(function(ne){return ne})){k=A,_=!1;break}C.set(A,F)}if(_)for(var $=p?3:1,G=function(oe){var ae=x.find(function(me){var ve=C.get(me);if(ve)return ve.slice(0,oe).every(function(we){return we})});if(ae)return k=ae,"break"},Q=$;Q>0;Q--){var J=G(Q);if(J==="break")break}t.placement!==k&&(t.modifiersData[r]._skip=!0,t.placement=k,t.reset=!0)}}const WX={name:"flip",enabled:!0,phase:"main",fn:zX,requiresIfExists:["offset"],data:{_skip:!1}};function z_(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function W_(e){return[Vn,Wr,zr,jn].some(function(t){return e[t]>=0})}function VX(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,a=qc(t,{elementContext:"reference"}),s=qc(t,{altBoundary:!0}),u=z_(a,r),l=z_(s,o,i),c=W_(u),d=W_(l);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:l,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const jX={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:VX};function UX(e,t,n){var r=Io(e),o=[jn,Vn].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,[jn,Wr].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function HX(e){var t=e.state,n=e.options,r=e.name,o=n.offset,i=o===void 0?[0,0]:o,a=iD.reduce(function(c,d){return c[d]=UX(d,t.rects,i),c},{}),s=a[t.placement],u=s.x,l=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=l),t.modifiersData[r]=a}const GX={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:HX};function qX(e){var t=e.state,n=e.name;t.modifiersData[n]=fD({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const KX={name:"popperOffsets",enabled:!0,phase:"read",fn:qX,data:{}};function XX(e){return e==="x"?"y":"x"}function YX(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=o===void 0?!0:o,a=n.altAxis,s=a===void 0?!1:a,u=n.boundary,l=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,v=p===void 0?0:p,y=qc(t,{boundary:u,rootBoundary:l,padding:d,altBoundary:c}),m=Io(t.placement),g=Wu(t.placement),b=!g,x=Ex(m),w=XX(x),S=t.modifiersData.popperOffsets,C=t.rects.reference,_=t.rects.popper,k=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,E=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(S){if(i){var U,H=x==="y"?Vn:jn,B=x==="y"?zr:Wr,V=x==="y"?"height":"width",M=S[x],O=M+y[H],F=M-y[B],$=h?-_[V]/2:0,G=g===Lu?C[V]:_[V],Q=g===Lu?-_[V]:-C[V],J=t.elements.arrow,ne=h&&J?_x(J):{width:0,height:0},oe=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:uD(),ae=oe[H],me=oe[B],ve=ac(0,C[V],ne[V]),we=b?C[V]/2-$-ve-ae-E.mainAxis:G-ve-ae-E.mainAxis,De=b?-C[V]/2+$+ve+me+E.mainAxis:Q+ve+me+E.mainAxis,ge=t.elements.arrow&&wd(t.elements.arrow),Ie=ge?x==="y"?ge.clientTop||0:ge.clientLeft||0:0,_e=(U=A==null?void 0:A[x])!=null?U:0,ze=M+we-_e-Ie,We=M+De-_e,Ve=ac(h?yp(O,ze):O,M,h?Ga(F,We):F);S[x]=Ve,D[x]=Ve-M}if(s){var xn,An=x==="x"?Vn:jn,Yt=x==="x"?zr:Wr,Dt=S[w],Vt=w==="y"?"height":"width",sn=Dt+y[An],yt=Dt-y[Yt],Xn=[Vn,jn].indexOf(m)!==-1,wn=(xn=A==null?void 0:A[w])!=null?xn:0,Ci=Xn?sn:Dt-C[Vt]-_[Vt]-wn+E.altAxis,jr=Xn?Dt+C[Vt]+_[Vt]-wn-E.altAxis:yt,jt=h&&Xn?xX(Ci,Dt,jr):ac(h?Ci:sn,Dt,h?jr:yt);S[w]=jt,D[w]=jt-Dt}t.modifiersData[r]=D}}const QX={name:"preventOverflow",enabled:!0,phase:"main",fn:YX,requiresIfExists:["offset"]};function JX(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function ZX(e){return e===gr(e)||!Nr(e)?kx(e):JX(e)}function eY(e){var t=e.getBoundingClientRect(),n=$u(t.width)/e.offsetWidth||1,r=$u(t.height)/e.offsetHeight||1;return n!==1||r!==1}function tY(e,t,n){n===void 0&&(n=!1);var r=Nr(t),o=Nr(t)&&eY(t),i=ha(t),a=zu(e,o,n),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&((Oo(t)!=="body"||Rx(i))&&(s=ZX(t)),Nr(t)?(u=zu(t,!0),u.x+=t.clientLeft,u.y+=t.clientTop):i&&(u.x=Tx(i))),{x:a.left+s.scrollLeft-u.x,y:a.top+s.scrollTop-u.y,width:a.width,height:a.height}}function nY(e){var t=new Map,n=new Set,r=[];e.forEach(function(i){t.set(i.name,i)});function o(i){n.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var u=t.get(s);u&&o(u)}}),r.push(i)}return e.forEach(function(i){n.has(i.name)||o(i)}),r}function rY(e){var t=nY(e);return pX.reduce(function(n,r){return n.concat(t.filter(function(o){return o.phase===r}))},[])}function oY(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function iY(e){var t=e.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var V_={placement:"bottom",modifiers:[],strategy:"absolute"};function j_(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function aY(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,o=t.defaultOptions,i=o===void 0?V_:o;return function(s,u,l){l===void 0&&(l=i);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},V_,i),modifiersData:{},elements:{reference:s,popper:u},attributes:{},styles:{}},d=[],f=!1,h={state:c,setOptions:function(m){var g=typeof m=="function"?m(c.options):m;v(),c.options=Object.assign({},i,c.options,g),c.scrollParents={reference:es(s)?sc(s):s.contextElement?sc(s.contextElement):[],popper:sc(u)};var b=rY(iY([].concat(r,c.options.modifiers)));return c.orderedModifiers=b.filter(function(x){return x.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var m=c.elements,g=m.reference,b=m.popper;if(j_(g,b)){c.rects={reference:tY(g,wd(b),c.options.strategy==="fixed"),popper:_x(b)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(E){return c.modifiersData[E.name]=Object.assign({},E.data)});for(var x=0;x<c.orderedModifiers.length;x++){if(c.reset===!0){c.reset=!1,x=-1;continue}var w=c.orderedModifiers[x],S=w.fn,C=w.options,_=C===void 0?{}:C,k=w.name;typeof S=="function"&&(c=S({state:c,options:_,name:k,instance:h})||c)}}}},update:oY(function(){return new Promise(function(y){h.forceUpdate(),y(c)})}),destroy:function(){v(),f=!0}};if(!j_(s,u))return h;h.setOptions(l).then(function(y){!f&&l.onFirstUpdate&&l.onFirstUpdate(y)});function p(){c.orderedModifiers.forEach(function(y){var m=y.name,g=y.options,b=g===void 0?{}:g,x=y.effect;if(typeof x=="function"){var w=x({state:c,name:m,instance:h,options:b}),S=function(){};d.push(w||S)}})}function v(){d.forEach(function(y){return y()}),d=[]}return h}}var sY=[IX,KX,RX,gX,GX,WX,QX,_X,jX],uY=aY({defaultModifiers:sY});function lY(e={}){const{enabled:t=!0,modifiers:n,placement:r="bottom",strategy:o="absolute",arrowPadding:i=8,eventListeners:a=!0,offset:s,gutter:u=8,flip:l=!0,boundary:c="clippingParents",preventOverflow:d=!0,matchWidth:f,direction:h="ltr"}=e,p=T.useRef(null),v=T.useRef(null),y=T.useRef(null),m=nX(r,h),g=T.useRef(()=>{}),b=T.useCallback(()=>{var E;!t||!p.current||!v.current||((E=g.current)==null||E.call(g),y.current=uY(p.current,v.current,{placement:m,modifiers:[ZK,YK,XK,{...KK,enabled:!!f},{name:"eventListeners",...qK(a)},{name:"arrow",options:{padding:i}},{name:"offset",options:{offset:s??[0,u]}},{name:"flip",enabled:!!l,options:{padding:8}},{name:"preventOverflow",enabled:!!d,options:{boundary:c}},...n??[]],strategy:o}),y.current.forceUpdate(),g.current=y.current.destroy)},[m,t,n,f,a,i,s,u,l,d,c,o]);T.useEffect(()=>()=>{var E;!p.current&&!v.current&&((E=y.current)==null||E.destroy(),y.current=null)},[]);const x=T.useCallback(E=>{p.current=E,b()},[b]),w=T.useCallback((E={},A=null)=>({...E,ref:$r(x,A)}),[x]),S=T.useCallback(E=>{v.current=E,b()},[b]),C=T.useCallback((E={},A=null)=>({...E,ref:$r(S,A),style:{...E.style,position:o,minWidth:f?void 0:"max-content",inset:"0 auto auto 0"}}),[o,S,f]),_=T.useCallback((E={},A=null)=>{const{size:D,shadowColor:U,bg:H,style:B,...V}=E;return{...V,ref:A,"data-popper-arrow":"",style:cY(E)}},[]),k=T.useCallback((E={},A=null)=>({...E,ref:A,"data-popper-arrow-inner":""}),[]);return{update(){var E;(E=y.current)==null||E.update()},forceUpdate(){var E;(E=y.current)==null||E.forceUpdate()},transformOrigin:nr.transformOrigin.varRef,referenceRef:x,popperRef:S,getPopperProps:C,getArrowProps:_,getArrowInnerProps:k,getReferenceProps:w}}function cY(e){const{size:t,shadowColor:n,bg:r,style:o}=e,i={...o,position:"absolute"};return t&&(i["--popper-arrow-size"]=t),n&&(i["--popper-arrow-shadow-color"]=n),r&&(i["--popper-arrow-bg"]=r),i}function dY(e={}){const{onClose:t,onOpen:n,isOpen:r,id:o}=e,i=Lc(n),a=Lc(t),[s,u]=T.useState(e.defaultIsOpen||!1),l=r!==void 0?r:s,c=r!==void 0,d=T.useId(),f=o??`disclosure-${d}`,h=T.useCallback(()=>{c||u(!1),a==null||a()},[c,a]),p=T.useCallback(()=>{c||u(!0),i==null||i()},[c,i]),v=T.useCallback(()=>{l?h():p()},[l,p,h]);function y(g={}){return{...g,"aria-expanded":l,"aria-controls":f,onClick(b){var x;(x=g.onClick)==null||x.call(g,b),v()}}}function m(g={}){return{...g,hidden:!l,id:f}}return{isOpen:l,onOpen:p,onClose:h,onToggle:v,isControlled:c,getButtonProps:y,getDisclosureProps:m}}function fY(e){const{ref:t,handler:n,enabled:r=!0}=e,o=Lc(n),a=T.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;T.useEffect(()=>{if(!r)return;const s=d=>{Ag(d,t)&&(a.isPointerDown=!0)},u=d=>{if(a.ignoreEmulatedMouseEvents){a.ignoreEmulatedMouseEvents=!1;return}a.isPointerDown&&n&&Ag(d,t)&&(a.isPointerDown=!1,o(d))},l=d=>{a.ignoreEmulatedMouseEvents=!0,n&&a.isPointerDown&&Ag(d,t)&&(a.isPointerDown=!1,o(d))},c=hD(t.current);return c.addEventListener("mousedown",s,!0),c.addEventListener("mouseup",u,!0),c.addEventListener("touchstart",s,!0),c.addEventListener("touchend",l,!0),()=>{c.removeEventListener("mousedown",s,!0),c.removeEventListener("mouseup",u,!0),c.removeEventListener("touchstart",s,!0),c.removeEventListener("touchend",l,!0)}},[n,t,o,a,r])}function Ag(e,t){var n;const r=e.target;return r&&!hD(r).contains(r)?!1:!((n=t.current)!=null&&n.contains(r))}function hD(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function hY(e){const{isOpen:t,ref:n}=e,[r,o]=T.useState(t),[i,a]=T.useState(!1);return T.useEffect(()=>{i||(o(t),a(!0))},[t,i,r]),oq(()=>n.current,"animationend",()=>{o(t)}),{present:!(t?!1:!r),onComplete(){var u;const l=vK(n.current),c=new l.CustomEvent("animationend",{bubbles:!0});(u=n.current)==null||u.dispatchEvent(c)}}}function pY(e){const{wasSelected:t,enabled:n,isSelected:r,mode:o="unmount"}=e;return!!(!n||r||o==="keepMounted"&&t)}var[vY,mY,gY,yY]=H7(),[bY,Sd]=In({strict:!1,name:"MenuContext"});function xY(e,...t){const n=T.useId(),r=e||n;return T.useMemo(()=>t.map(o=>`${o}-${r}`),[r,t])}function pD(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function U_(e){return pD(e).activeElement===e}function wY(e={}){const{id:t,closeOnSelect:n=!0,closeOnBlur:r=!0,initialFocusRef:o,autoSelect:i=!0,isLazy:a,isOpen:s,defaultIsOpen:u,onClose:l,onOpen:c,placement:d="bottom-start",lazyBehavior:f="unmount",direction:h,computePositionOnMount:p=!1,...v}=e,y=T.useRef(null),m=T.useRef(null),g=gY(),b=T.useCallback(()=>{requestAnimationFrame(()=>{var J;(J=y.current)==null||J.focus({preventScroll:!1})})},[]),x=T.useCallback(()=>{const J=setTimeout(()=>{var ne;if(o)(ne=o.current)==null||ne.focus();else{const oe=g.firstEnabled();oe&&U(oe.index)}});O.current.add(J)},[g,o]),w=T.useCallback(()=>{const J=setTimeout(()=>{const ne=g.lastEnabled();ne&&U(ne.index)});O.current.add(J)},[g]),S=T.useCallback(()=>{c==null||c(),i?x():b()},[i,x,b,c]),{isOpen:C,onOpen:_,onClose:k,onToggle:E}=dY({isOpen:s,defaultIsOpen:u,onClose:l,onOpen:S});fY({enabled:C&&r,ref:y,handler:J=>{var ne;(ne=m.current)!=null&&ne.contains(J.target)||k()}});const A=lY({...v,enabled:C||p,placement:d,direction:h}),[D,U]=T.useState(-1);$c(()=>{C||U(-1)},[C]),jK(y,{focusRef:m,visible:C,shouldFocus:!0});const H=hY({isOpen:C,ref:y}),[B,V]=xY(t,"menu-button","menu-list"),M=T.useCallback(()=>{_(),b()},[_,b]),O=T.useRef(new Set([]));T.useEffect(()=>{const J=O.current;return()=>{J.forEach(ne=>clearTimeout(ne)),J.clear()}},[]);const F=T.useCallback(()=>{_(),x()},[x,_]),$=T.useCallback(()=>{_(),w()},[_,w]),G=T.useCallback(()=>{var J,ne;const oe=pD(y.current),ae=(J=y.current)==null?void 0:J.contains(oe.activeElement);if(!(C&&!ae))return;const ve=(ne=g.item(D))==null?void 0:ne.node;ve==null||ve.focus({preventScroll:!0})},[C,D,g]),Q=T.useRef(null);return{openAndFocusMenu:M,openAndFocusFirstItem:F,openAndFocusLastItem:$,onTransitionEnd:G,unstable__animationState:H,descendants:g,popper:A,buttonId:B,menuId:V,forceUpdate:A.forceUpdate,orientation:"vertical",isOpen:C,onToggle:E,onOpen:_,onClose:k,menuRef:y,buttonRef:m,focusedIndex:D,closeOnSelect:n,closeOnBlur:r,autoSelect:i,setFocusedIndex:U,isLazy:a,lazyBehavior:f,initialFocusRef:o,rafId:Q}}function SY(e={},t=null){const n=Sd(),{onToggle:r,popper:o,openAndFocusFirstItem:i,openAndFocusLastItem:a}=n,s=T.useCallback(u=>{const l=u.key,d={Enter:i,ArrowDown:i,ArrowUp:a}[l];d&&(u.preventDefault(),u.stopPropagation(),d(u))},[i,a]);return{...e,ref:$r(n.buttonRef,t,o.referenceRef),id:n.buttonId,"data-active":Zn(n.isOpen),"aria-expanded":n.isOpen,"aria-haspopup":"menu","aria-controls":n.menuId,onClick:So(e.onClick,r),onKeyDown:So(e.onKeyDown,s)}}function Yy(e){var t;return kY(e)&&!!((t=e==null?void 0:e.getAttribute("role"))!=null&&t.startsWith("menuitem"))}function CY(e={},t=null){const n=Sd();if(!n)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:r,setFocusedIndex:o,menuRef:i,isOpen:a,onClose:s,menuId:u,isLazy:l,lazyBehavior:c,unstable__animationState:d}=n,f=mY(),h=LK({preventDefault:m=>m.key!==" "&&Yy(m.target)}),p=T.useCallback(m=>{if(!m.currentTarget.contains(m.target))return;const g=m.key,x={Tab:S=>S.preventDefault(),Escape:s,ArrowDown:()=>{const S=f.nextEnabled(r);S&&o(S.index)},ArrowUp:()=>{const S=f.prevEnabled(r);S&&o(S.index)}}[g];if(x){m.preventDefault(),x(m);return}const w=h(S=>{const C=$K(f.values(),S,_=>{var k,E;return(E=(k=_==null?void 0:_.node)==null?void 0:k.textContent)!=null?E:""},f.item(r));if(C){const _=f.indexOf(C.node);o(_)}});Yy(m.target)&&w(m)},[f,r,h,s,o]),v=T.useRef(!1);a&&(v.current=!0);const y=pY({wasSelected:v.current,enabled:l,mode:c,isSelected:d.present});return{...e,ref:$r(i,t),children:y?e.children:null,tabIndex:-1,role:"menu",id:u,style:{...e.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:So(e.onKeyDown,p)}}function _Y(e={}){const{popper:t,isOpen:n}=Sd();return t.getPopperProps({...e,style:{visibility:n?"visible":"hidden",...e.style}})}function EY(e={},t=null){const{onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onClick:i,onFocus:a,isDisabled:s,isFocusable:u,closeOnSelect:l,type:c,...d}=e,f=Sd(),{setFocusedIndex:h,focusedIndex:p,closeOnSelect:v,onClose:y,menuRef:m,isOpen:g,menuId:b,rafId:x}=f,w=T.useRef(null),S=`${b}-menuitem-${T.useId()}`,{index:C,register:_}=yY({disabled:s&&!u}),k=T.useCallback(M=>{n==null||n(M),!s&&h(C)},[h,C,s,n]),E=T.useCallback(M=>{r==null||r(M),w.current&&!U_(w.current)&&k(M)},[k,r]),A=T.useCallback(M=>{o==null||o(M),!s&&h(-1)},[h,s,o]),D=T.useCallback(M=>{i==null||i(M),Yy(M.currentTarget)&&(l??v)&&y()},[y,i,v,l]),U=T.useCallback(M=>{a==null||a(M),h(C)},[h,a,C]),H=C===p,B=s&&!u;$c(()=>{if(g)return H&&!B&&w.current?(x.current&&cancelAnimationFrame(x.current),x.current=requestAnimationFrame(()=>{var M;(M=w.current)==null||M.focus({preventScroll:!0}),x.current=null})):m.current&&!U_(m.current)&&m.current.focus({preventScroll:!0}),()=>{x.current&&cancelAnimationFrame(x.current)}},[H,B,m,g]);const V=WK({onClick:D,onFocus:U,onMouseEnter:k,onMouseMove:E,onMouseLeave:A,ref:$r(_,w,t),isDisabled:s,isFocusable:u});return{...d,...V,type:c??V.type,id:S,role:"menuitem",tabIndex:H?0:-1}}function kY(e){var t;if(!TY(e))return!1;const n=(t=e.ownerDocument.defaultView)!=null?t:window;return e instanceof n.HTMLElement}function TY(e){return e!=null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}var[RY,Cd]=In({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),vD=e=>{const{children:t}=e,n=is("Menu",e),r=Fo(e),{direction:o}=dd(),{descendants:i,...a}=wY({...r,direction:o}),s=T.useMemo(()=>a,[a]),{isOpen:u,onClose:l,forceUpdate:c}=s;return L.jsx(vY,{value:i,children:L.jsx(bY,{value:s,children:L.jsx(RY,{value:n,children:Jr(t,{isOpen:u,onClose:l,forceUpdate:c})})})})};vD.displayName="Menu";var mD=Le((e,t)=>{const n=Cd();return L.jsx(Te.span,{ref:t,...e,__css:n.command,className:"chakra-menu__command"})});mD.displayName="MenuCommand";var PY=Le((e,t)=>{const{type:n,...r}=e,o=Cd(),i=r.as||n?n??void 0:"button",a=T.useMemo(()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...o.item}),[o.item]);return L.jsx(Te.button,{ref:t,type:i,...r,__css:a})}),gD=e=>{const{className:t,children:n,...r}=e,o=Cd(),i=T.Children.only(n),a=T.isValidElement(i)?T.cloneElement(i,{focusable:"false","aria-hidden":!0,className:Ze("chakra-menu__icon",i.props.className)}):null,s=Ze("chakra-menu__icon-wrapper",t);return L.jsx(Te.span,{className:s,...r,__css:o.icon,children:a})};gD.displayName="MenuIcon";var yD=Le((e,t)=>{const{icon:n,iconSpacing:r="0.75rem",command:o,commandSpacing:i="0.75rem",children:a,...s}=e,u=EY(s,t),c=n||o?L.jsx("span",{style:{pointerEvents:"none",flex:1},children:a}):a;return L.jsxs(PY,{...u,className:Ze("chakra-menu__menuitem",u.className),children:[n&&L.jsx(gD,{fontSize:"0.8em",marginEnd:r,children:n}),c,o&&L.jsx(mD,{marginStart:i,children:o})]})});yD.displayName="MenuItem";var IY={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},AY=Te(bd.div),bD=Le(function(t,n){var r,o;const{rootProps:i,motionProps:a,...s}=t,{isOpen:u,onTransitionEnd:l,unstable__animationState:c}=Sd(),d=CY(s,n),f=_Y(i),h=Cd();return L.jsx(Te.div,{...f,__css:{zIndex:(o=t.zIndex)!=null?o:(r=h.list)==null?void 0:r.zIndex},children:L.jsx(AY,{variants:IY,initial:!1,animate:u?"enter":"exit",__css:{outline:0,...h.list},...a,className:Ze("chakra-menu__menu-list",d.className),...d,onUpdate:l,onAnimationComplete:PL(c.onComplete,d.onAnimationComplete)})})});bD.displayName="MenuList";var DY=Le((e,t)=>{const n=Cd();return L.jsx(Te.button,{ref:t,...e,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...n.button}})}),xD=Le((e,t)=>{const{children:n,as:r,...o}=e,i=SY(o,t),a=r||DY;return L.jsx(a,{...i,className:Ze("chakra-menu__menu-button",e.className),children:L.jsx(Te.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:e.children})})});xD.displayName="MenuButton";var MY=Object.defineProperty,OY=(e,t,n)=>t in e?MY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,NY=(e,t,n)=>(OY(e,typeof t!="symbol"?t+"":t,n),n),FY=class{constructor(){NY(this,"modals"),this.modals=new Map}add(e){return this.modals.set(e,this.modals.size+1),this.modals.size}remove(e){this.modals.delete(e)}isTopModal(e){return e?this.modals.get(e)===this.modals.size:!1}},Qy=new FY;function wD(e,t){const[n,r]=T.useState(0);return T.useEffect(()=>{const o=e.current;if(o){if(t){const i=Qy.add(o);r(i)}return()=>{Qy.remove(o),r(0)}}},[t,e]),n}var BY=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ws=new WeakMap,Ef=new WeakMap,kf={},Dg=0,SD=function(e){return e&&(e.host||SD(e.parentNode))},LY=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=SD(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},$Y=function(e,t,n,r){var o=LY(t,Array.isArray(e)?e:[e]);kf[n]||(kf[n]=new WeakMap);var i=kf[n],a=[],s=new Set,u=new Set(o),l=function(d){!d||s.has(d)||(s.add(d),l(d.parentNode))};o.forEach(l);var c=function(d){!d||u.has(d)||Array.prototype.forEach.call(d.children,function(f){if(s.has(f))c(f);else{var h=f.getAttribute(r),p=h!==null&&h!=="false",v=(ws.get(f)||0)+1,y=(i.get(f)||0)+1;ws.set(f,v),i.set(f,y),a.push(f),v===1&&p&&Ef.set(f,!0),y===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}})};return c(t),s.clear(),Dg++,function(){a.forEach(function(d){var f=ws.get(d)-1,h=i.get(d)-1;ws.set(d,f),i.set(d,h),f||(Ef.has(d)||d.removeAttribute(r),Ef.delete(d)),h||d.removeAttribute(n)}),Dg--,Dg||(ws=new WeakMap,ws=new WeakMap,Ef=new WeakMap,kf={})}},zY=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=t||BY(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),$Y(r,o,n,"aria-hidden")):function(){return null}};function WY(e){const{isOpen:t,onClose:n,id:r,closeOnOverlayClick:o=!0,closeOnEsc:i=!0,useInert:a=!0,onOverlayClick:s,onEsc:u}=e,l=T.useRef(null),c=T.useRef(null),[d,f,h]=jY(r,"chakra-modal","chakra-modal--header","chakra-modal--body");VY(l,t&&a);const p=wD(l,t),v=T.useRef(null),y=T.useCallback(k=>{v.current=k.target},[]),m=T.useCallback(k=>{k.key==="Escape"&&(k.stopPropagation(),i&&(n==null||n()),u==null||u())},[i,n,u]),[g,b]=T.useState(!1),[x,w]=T.useState(!1),S=T.useCallback((k={},E=null)=>({role:"dialog",...k,ref:$r(E,l),id:d,tabIndex:-1,"aria-modal":!0,"aria-labelledby":g?f:void 0,"aria-describedby":x?h:void 0,onClick:So(k.onClick,A=>A.stopPropagation())}),[h,x,d,f,g]),C=T.useCallback(k=>{k.stopPropagation(),v.current===k.target&&Qy.isTopModal(l.current)&&(o&&(n==null||n()),s==null||s())},[n,o,s]),_=T.useCallback((k={},E=null)=>({...k,ref:$r(E,c),onClick:So(k.onClick,C),onKeyDown:So(k.onKeyDown,m),onMouseDown:So(k.onMouseDown,y)}),[m,y,C]);return{isOpen:t,onClose:n,headerId:f,bodyId:h,setBodyMounted:w,setHeaderMounted:b,dialogRef:l,overlayRef:c,getDialogProps:S,getDialogContainerProps:_,index:p}}function VY(e,t){const n=e.current;T.useEffect(()=>{if(!(!e.current||!t))return zY(e.current)},[t,e,n])}function jY(e,...t){const n=T.useId(),r=e||n;return T.useMemo(()=>t.map(o=>`${o}-${r}`),[r,t])}var[UY,_d]=In({name:"ModalStylesContext",errorMessage:`useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Modal />" `}),[HY,Ju]=In({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),CD=e=>{const t={scrollBehavior:"outside",autoFocus:!0,trapFocus:!0,returnFocusOnClose:!0,blockScrollOnMount:!0,allowPinchZoom:!1,motionPreset:"scale",lockFocusAcrossFrames:!0,...e},{portalProps:n,children:r,autoFocus:o,trapFocus:i,initialFocusRef:a,finalFocusRef:s,returnFocusOnClose:u,blockScrollOnMount:l,allowPinchZoom:c,preserveScrollBarGap:d,motionPreset:f,lockFocusAcrossFrames:h,onCloseComplete:p}=t,v=is("Modal",t),m={...WY(t),autoFocus:o,trapFocus:i,initialFocusRef:a,finalFocusRef:s,returnFocusOnClose:u,blockScrollOnMount:l,allowPinchZoom:c,preserveScrollBarGap:d,motionPreset:f,lockFocusAcrossFrames:h};return L.jsx(HY,{value:m,children:L.jsx(UY,{value:v,children:L.jsx(Dv,{onExitComplete:p,children:m.isOpen&&L.jsx(cd,{...n,children:r})})})})};CD.displayName="Modal";var Sh="right-scroll-bar-position",Ch="width-before-scroll-bar",GY="with-scroll-bars-hidden",qY="--removed-body-scroll-bar-size",_D=SA(),Mg=function(){},Bv=T.forwardRef(function(e,t){var n=T.useRef(null),r=T.useState({onScrollCapture:Mg,onWheelCapture:Mg,onTouchMoveCapture:Mg}),o=r[0],i=r[1],a=e.forwardProps,s=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,p=e.inert,v=e.allowPinchZoom,y=e.as,m=y===void 0?"div":y,g=e.gapMode,b=bA(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=f,w=yA([n,t]),S=yo(yo({},b),o);return T.createElement(T.Fragment,null,c&&T.createElement(x,{sideCar:_D,removeScrollBar:l,shards:d,noIsolation:h,inert:p,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:g}),a?T.cloneElement(T.Children.only(s),yo(yo({},S),{ref:w})):T.createElement(m,yo({},S,{className:u,ref:w}),s))});Bv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Bv.classNames={fullWidth:Ch,zeroRight:Sh};var KY=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function XY(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=KY();return t&&e.setAttribute("nonce",t),e}function YY(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function QY(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var JY=function(){var e=0,t=null;return{add:function(n){e==0&&(t=XY())&&(YY(t,n),QY(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ZY=function(){var e=JY();return function(t,n){T.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},ED=function(){var e=ZY(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},eQ={left:0,top:0,right:0,gap:0},Og=function(e){return parseInt(e||"",10)||0},tQ=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[Og(n),Og(r),Og(o)]},nQ=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return eQ;var t=tQ(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},rQ=ED(),oQ=function(e,t,n,r){var o=e.left,i=e.top,a=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(GY,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Sh,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(Ch,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(Sh," .").concat(Sh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ch," .").concat(Ch,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(qY,": ").concat(s,`px;
  }
`)},iQ=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r,i=T.useMemo(function(){return nQ(o)},[o]);return T.createElement(rQ,{styles:oQ(i,!t,o,n?"":"!important")})},Jy=!1;if(typeof window<"u")try{var Tf=Object.defineProperty({},"passive",{get:function(){return Jy=!0,!0}});window.addEventListener("test",Tf,Tf),window.removeEventListener("test",Tf,Tf)}catch{Jy=!1}var Ss=Jy?{passive:!1}:!1,aQ=function(e){return e.tagName==="TEXTAREA"},kD=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!aQ(e)&&n[t]==="visible")},sQ=function(e){return kD(e,"overflowY")},uQ=function(e){return kD(e,"overflowX")},H_=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=TD(e,r);if(o){var i=RD(e,r),a=i[1],s=i[2];if(a>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},lQ=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},cQ=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},TD=function(e,t){return e==="v"?sQ(t):uQ(t)},RD=function(e,t){return e==="v"?lQ(t):cQ(t)},dQ=function(e,t){return e==="h"&&t==="rtl"?-1:1},fQ=function(e,t,n,r,o){var i=dQ(e,window.getComputedStyle(t).direction),a=i*r,s=n.target,u=t.contains(s),l=!1,c=a>0,d=0,f=0;do{var h=RD(e,s),p=h[0],v=h[1],y=h[2],m=v-y-i*p;(p||m)&&TD(e,s)&&(d+=m,f+=p),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return(c&&(o&&Math.abs(d)<1||!o&&a>d)||!c&&(o&&Math.abs(f)<1||!o&&-a>f))&&(l=!0),l},Rf=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},G_=function(e){return[e.deltaX,e.deltaY]},q_=function(e){return e&&"current"in e?e.current:e},hQ=function(e,t){return e[0]===t[0]&&e[1]===t[1]},pQ=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},vQ=0,Cs=[];function mQ(e){var t=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),o=T.useState(vQ++)[0],i=T.useState(ED)[0],a=T.useRef(e);T.useEffect(function(){a.current=e},[e]),T.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var v=pq([e.lockRef.current],(e.shards||[]).map(q_),!0).filter(Boolean);return v.forEach(function(y){return y.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),v.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var s=T.useCallback(function(v,y){if("touches"in v&&v.touches.length===2)return!a.current.allowPinchZoom;var m=Rf(v),g=n.current,b="deltaX"in v?v.deltaX:g[0]-m[0],x="deltaY"in v?v.deltaY:g[1]-m[1],w,S=v.target,C=Math.abs(b)>Math.abs(x)?"h":"v";if("touches"in v&&C==="h"&&S.type==="range")return!1;var _=H_(C,S);if(!_)return!0;if(_?w=C:(w=C==="v"?"h":"v",_=H_(C,S)),!_)return!1;if(!r.current&&"changedTouches"in v&&(b||x)&&(r.current=w),!w)return!0;var k=r.current||w;return fQ(k,y,v,k==="h"?b:x,!0)},[]),u=T.useCallback(function(v){var y=v;if(!(!Cs.length||Cs[Cs.length-1]!==i)){var m="deltaY"in y?G_(y):Rf(y),g=t.current.filter(function(w){return w.name===y.type&&(w.target===y.target||y.target===w.shadowParent)&&hQ(w.delta,m)})[0];if(g&&g.should){y.cancelable&&y.preventDefault();return}if(!g){var b=(a.current.shards||[]).map(q_).filter(Boolean).filter(function(w){return w.contains(y.target)}),x=b.length>0?s(y,b[0]):!a.current.noIsolation;x&&y.cancelable&&y.preventDefault()}}},[]),l=T.useCallback(function(v,y,m,g){var b={name:v,delta:y,target:m,should:g,shadowParent:gQ(m)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(x){return x!==b})},1)},[]),c=T.useCallback(function(v){n.current=Rf(v),r.current=void 0},[]),d=T.useCallback(function(v){l(v.type,G_(v),v.target,s(v,e.lockRef.current))},[]),f=T.useCallback(function(v){l(v.type,Rf(v),v.target,s(v,e.lockRef.current))},[]);T.useEffect(function(){return Cs.push(i),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",u,Ss),document.addEventListener("touchmove",u,Ss),document.addEventListener("touchstart",c,Ss),function(){Cs=Cs.filter(function(v){return v!==i}),document.removeEventListener("wheel",u,Ss),document.removeEventListener("touchmove",u,Ss),document.removeEventListener("touchstart",c,Ss)}},[]);var h=e.removeScrollBar,p=e.inert;return T.createElement(T.Fragment,null,p?T.createElement(i,{styles:pQ(o)}):null,h?T.createElement(iQ,{gapMode:e.gapMode}):null)}function gQ(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const yQ=vq(_D,mQ);var PD=T.forwardRef(function(e,t){return T.createElement(Bv,yo({},e,{ref:t,sideCar:yQ}))});PD.classNames=Bv.classNames;const bQ=PD;function xQ(e){const{autoFocus:t,trapFocus:n,dialogRef:r,initialFocusRef:o,blockScrollOnMount:i,allowPinchZoom:a,finalFocusRef:s,returnFocusOnClose:u,preserveScrollBarGap:l,lockFocusAcrossFrames:c,isOpen:d}=Ju(),[f,h]=$I();T.useEffect(()=>{!f&&h&&setTimeout(h)},[f,h]);const p=wD(r,d);return L.jsx(JA,{autoFocus:t,isDisabled:!n,initialFocusRef:o,finalFocusRef:s,restoreFocus:u,contentRef:r,lockFocusAcrossFrames:c,children:L.jsx(bQ,{removeScrollBar:!l,allowPinchZoom:a,enabled:p===1&&i,forwardProps:!0,children:e.children})})}var[wQ,SQ]=In(),CQ={start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}};function _Q(e,t){var n,r;if(e)return(r=(n=CQ[e])==null?void 0:n[t])!=null?r:e}function EQ(e){var t;const{isOpen:n,onClose:r,placement:o="right",children:i,...a}=e,s=dd(),u=(t=s.components)==null?void 0:t.Drawer,l=_Q(o,s.direction);return L.jsx(wQ,{value:{placement:l},children:L.jsx(CD,{isOpen:n,onClose:r,styleConfig:u,...a,children:i})})}var kQ=Te(lA),ID=Le((e,t)=>{const{className:n,children:r,motionProps:o,containerProps:i,...a}=e,{getDialogProps:s,getDialogContainerProps:u,isOpen:l}=Ju(),c=s(a,t),d=u(i),f=Ze("chakra-modal__content",n),h=_d(),p={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...h.dialog},v={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...h.dialogContainer},{placement:y}=SQ();return L.jsx(xQ,{children:L.jsx(Te.div,{...d,className:"chakra-modal__content-container",__css:v,children:L.jsx(kQ,{motionProps:o,direction:y,in:l,className:f,...c,__css:p,children:r})})})});ID.displayName="DrawerContent";var AD=Le((e,t)=>{const{className:n,...r}=e,{headerId:o,setHeaderMounted:i}=Ju();T.useEffect(()=>(i(!0),()=>i(!1)),[i]);const a=Ze("chakra-modal__header",n),u={flex:0,..._d().header};return L.jsx(Te.header,{ref:t,className:a,id:o,...r,__css:u})});AD.displayName="ModalHeader";var TQ=Te(bd.div),DD=Le((e,t)=>{const{className:n,transition:r,motionProps:o,...i}=e,a=Ze("chakra-modal__overlay",n),u={pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh",..._d().overlay},{motionPreset:l}=Ju(),d=o||(l==="none"?{}:uA);return L.jsx(TQ,{...d,__css:u,ref:t,className:a,...i})});DD.displayName="ModalOverlay";var MD=Le((e,t)=>{const{className:n,...r}=e,{bodyId:o,setBodyMounted:i}=Ju();T.useEffect(()=>(i(!0),()=>i(!1)),[i]);const a=Ze("chakra-modal__body",n),s=_d();return L.jsx(Te.div,{ref:t,className:a,id:o,...r,__css:s.body})});MD.displayName="ModalBody";var OD=Le((e,t)=>{const{onClick:n,className:r,...o}=e,{onClose:i}=Ju(),a=Ze("chakra-modal__close-btn",r),s=_d();return L.jsx(dx,{ref:t,__css:s.closeButton,className:a,onClick:So(n,u=>{u.stopPropagation(),i()}),...o})});OD.displayName="ModalCloseButton";var ND=Le(function(t,n){const{children:r,placeholder:o,className:i,...a}=t;return L.jsxs(Te.select,{...a,ref:n,className:Ze("chakra-select",i),children:[o&&L.jsx("option",{value:"",children:o}),r]})});ND.displayName="SelectField";function RQ(e,t){const n={},r={};for(const[o,i]of Object.entries(e))t.includes(o)?n[o]=i:r[o]=i;return[n,r]}var FD=Le((e,t)=>{var n;const r=is("Select",e),{rootProps:o,placeholder:i,icon:a,color:s,height:u,h:l,minH:c,minHeight:d,iconColor:f,iconSize:h,...p}=Fo(e),[v,y]=RQ(p,M$),m=fA(y),g={width:"100%",height:"fit-content",position:"relative",color:s},b={paddingEnd:"2rem",...r.field,_focus:{zIndex:"unset",...(n=r.field)==null?void 0:n._focus}};return L.jsxs(Te.div,{className:"chakra-select__wrapper",__css:g,...v,...o,children:[L.jsx(ND,{ref:t,height:l??u,minH:c??d,placeholder:i,...m,__css:b,children:e.children}),L.jsx(BD,{"data-disabled":Zn(m.disabled),...(f||s)&&{color:f||s},__css:r.icon,...h&&{fontSize:h},children:a})]})});FD.displayName="Select";var PQ=e=>L.jsx("svg",{viewBox:"0 0 24 24",...e,children:L.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),IQ=Te("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),BD=e=>{const{children:t=L.jsx(PQ,{}),...n}=e,r=T.cloneElement(t,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return L.jsx(IQ,{...n,className:"chakra-select__icon-wrapper",children:T.isValidElement(t)?r:null})};BD.displayName="SelectIcon";function AQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function X_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K_(Object(n),!0).forEach(function(r){AQ(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DQ(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function MQ(e,t){if(e==null)return{};var n=DQ(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function OQ(e,t){return NQ(e)||FQ(e,t)||BQ(e,t)||LQ()}function NQ(e){if(Array.isArray(e))return e}function FQ(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,o=!1,i=void 0;try{for(var a=e[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(t&&n.length===t));r=!0);}catch(u){o=!0,i=u}finally{try{!r&&a.return!=null&&a.return()}finally{if(o)throw i}}return n}}function BQ(e,t){if(e){if(typeof e=="string")return Y_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y_(e,t)}}function Y_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function LQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function J_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q_(Object(n),!0).forEach(function(r){$Q(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zQ(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(function(o,i){return i(o)},r)}}function zl(e){return function t(){for(var n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return o.length>=e.length?e.apply(this,o):function(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return t.apply(n,[].concat(o,s))}}}function bp(e){return{}.toString.call(e).includes("Object")}function WQ(e){return!Object.keys(e).length}function Kc(e){return typeof e=="function"}function VQ(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function jQ(e,t){return bp(t)||Zi("changeType"),Object.keys(t).some(function(n){return!VQ(e,n)})&&Zi("changeField"),t}function UQ(e){Kc(e)||Zi("selectorType")}function HQ(e){Kc(e)||bp(e)||Zi("handlerType"),bp(e)&&Object.values(e).some(function(t){return!Kc(t)})&&Zi("handlersType")}function GQ(e){e||Zi("initialIsRequired"),bp(e)||Zi("initialType"),WQ(e)&&Zi("initialContent")}function qQ(e,t){throw new Error(e[t]||e.default)}var KQ={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Zi=zl(qQ)(KQ),Pf={changes:jQ,selector:UQ,handler:HQ,initial:GQ};function XQ(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Pf.initial(e),Pf.handler(t);var n={current:e},r=zl(JQ)(n,t),o=zl(QQ)(n),i=zl(Pf.changes)(e),a=zl(YQ)(n);function s(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(c){return c};return Pf.selector(l),l(n.current)}function u(l){zQ(r,o,i,a)(l)}return[s,u]}function YQ(e,t){return Kc(t)?t(e.current):t}function QQ(e,t){return e.current=J_(J_({},e.current),t),t}function JQ(e,t,n){return Kc(t)?t(e.current):Object.keys(n).forEach(function(r){var o;return(o=t[r])===null||o===void 0?void 0:o.call(t,e.current[r])}),n}var ZQ={create:XQ},eJ={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function tJ(e){return function t(){for(var n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return o.length>=e.length?e.apply(this,o):function(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return t.apply(n,[].concat(o,s))}}}function nJ(e){return{}.toString.call(e).includes("Object")}function rJ(e){return e||Z_("configIsRequired"),nJ(e)||Z_("configType"),e.urls?(oJ(),{paths:{vs:e.urls.monacoBase}}):e}function oJ(){console.warn(LD.deprecation)}function iJ(e,t){throw new Error(e[t]||e.default)}var LD={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Z_=tJ(iJ)(LD),aJ={config:rJ},sJ=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(o){return n.reduceRight(function(i,a){return a(i)},o)}};function $D(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],$D(e[n],t[n]))}),X_(X_({},e),t)}var uJ={type:"cancelation",msg:"operation is manually canceled"};function Ng(e){var t=!1,n=new Promise(function(r,o){e.then(function(i){return t?o(uJ):r(i)}),e.catch(o)});return n.cancel=function(){return t=!0},n}var lJ=ZQ.create({config:eJ,isInitialized:!1,resolve:null,reject:null,monaco:null}),zD=OQ(lJ,2),Ed=zD[0],Lv=zD[1];function cJ(e){var t=aJ.config(e),n=t.monaco,r=MQ(t,["monaco"]);Lv(function(o){return{config:$D(o.config,r),monaco:n}})}function dJ(){var e=Ed(function(t){var n=t.monaco,r=t.isInitialized,o=t.resolve;return{monaco:n,isInitialized:r,resolve:o}});if(!e.isInitialized){if(Lv({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Ng(Fg);if(window.monaco&&window.monaco.editor)return WD(window.monaco),e.resolve(window.monaco),Ng(Fg);sJ(fJ,pJ)(vJ)}return Ng(Fg)}function fJ(e){return document.body.appendChild(e)}function hJ(e){var t=document.createElement("script");return e&&(t.src=e),t}function pJ(e){var t=Ed(function(r){var o=r.config,i=r.reject;return{config:o,reject:i}}),n=hJ("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function vJ(){var e=Ed(function(n){var r=n.config,o=n.resolve,i=n.reject;return{config:r,resolve:o,reject:i}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){WD(n),e.resolve(n)},function(n){e.reject(n)})}function WD(e){Ed().monaco||Lv({monaco:e})}function mJ(){return Ed(function(e){var t=e.monaco;return t})}var Fg=new Promise(function(e,t){return Lv({resolve:e,reject:t})}),VD={config:cJ,init:dJ,__getMonacoInstance:mJ},gJ={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Bg=gJ,yJ={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},bJ=yJ;function xJ({children:e}){return lr.createElement("div",{style:bJ.container},e)}var wJ=xJ,SJ=wJ;function CJ({width:e,height:t,isEditorReady:n,loading:r,_ref:o,className:i,wrapperProps:a}){return lr.createElement("section",{style:{...Bg.wrapper,width:e,height:t},...a},!n&&lr.createElement(SJ,null,r),lr.createElement("div",{ref:o,style:{...Bg.fullWidth,...!n&&Bg.hide},className:i}))}var _J=CJ,jD=T.memo(_J);function EJ(e){T.useEffect(e,[])}var UD=EJ;function kJ(e,t,n=!0){let r=T.useRef(!0);T.useEffect(r.current||!n?()=>{r.current=!1}:e,t)}var er=kJ;function uc(){}function tu(e,t,n,r){return TJ(e,r)||RJ(e,t,n,r)}function TJ(e,t){return e.editor.getModel(HD(e,t))}function RJ(e,t,n,r){return e.editor.createModel(t,n,r?HD(e,r):void 0)}function HD(e,t){return e.Uri.parse(t)}function PJ({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:o,originalModelPath:i,modifiedModelPath:a,keepCurrentOriginalModel:s=!1,keepCurrentModifiedModel:u=!1,theme:l="light",loading:c="Loading...",options:d={},height:f="100%",width:h="100%",className:p,wrapperProps:v={},beforeMount:y=uc,onMount:m=uc}){let[g,b]=T.useState(!1),[x,w]=T.useState(!0),S=T.useRef(null),C=T.useRef(null),_=T.useRef(null),k=T.useRef(m),E=T.useRef(y),A=T.useRef(!1);UD(()=>{let B=VD.init();return B.then(V=>(C.current=V)&&w(!1)).catch(V=>(V==null?void 0:V.type)!=="cancelation"&&console.error("Monaco initialization: error:",V)),()=>S.current?H():B.cancel()}),er(()=>{if(S.current&&C.current){let B=S.current.getOriginalEditor(),V=tu(C.current,e||"",r||n||"text",i||"");V!==B.getModel()&&B.setModel(V)}},[i],g),er(()=>{if(S.current&&C.current){let B=S.current.getModifiedEditor(),V=tu(C.current,t||"",o||n||"text",a||"");V!==B.getModel()&&B.setModel(V)}},[a],g),er(()=>{let B=S.current.getModifiedEditor();B.getOption(C.current.editor.EditorOption.readOnly)?B.setValue(t||""):t!==B.getValue()&&(B.executeEdits("",[{range:B.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),B.pushUndoStop())},[t],g),er(()=>{var B,V;(V=(B=S.current)==null?void 0:B.getModel())==null||V.original.setValue(e||"")},[e],g),er(()=>{let{original:B,modified:V}=S.current.getModel();C.current.editor.setModelLanguage(B,r||n||"text"),C.current.editor.setModelLanguage(V,o||n||"text")},[n,r,o],g),er(()=>{var B;(B=C.current)==null||B.editor.setTheme(l)},[l],g),er(()=>{var B;(B=S.current)==null||B.updateOptions(d)},[d],g);let D=T.useCallback(()=>{var M;if(!C.current)return;E.current(C.current);let B=tu(C.current,e||"",r||n||"text",i||""),V=tu(C.current,t||"",o||n||"text",a||"");(M=S.current)==null||M.setModel({original:B,modified:V})},[n,t,o,e,r,i,a]),U=T.useCallback(()=>{var B;!A.current&&_.current&&(S.current=C.current.editor.createDiffEditor(_.current,{automaticLayout:!0,...d}),D(),(B=C.current)==null||B.editor.setTheme(l),b(!0),A.current=!0)},[d,l,D]);T.useEffect(()=>{g&&k.current(S.current,C.current)},[g]),T.useEffect(()=>{!x&&!g&&U()},[x,g,U]);function H(){var V,M,O,F;let B=(V=S.current)==null?void 0:V.getModel();s||((M=B==null?void 0:B.original)==null||M.dispose()),u||((O=B==null?void 0:B.modified)==null||O.dispose()),(F=S.current)==null||F.dispose()}return lr.createElement(jD,{width:h,height:f,isEditorReady:g,loading:c,_ref:_,className:p,wrapperProps:v})}var IJ=PJ;T.memo(IJ);function AJ(e){let t=T.useRef();return T.useEffect(()=>{t.current=e},[e]),t.current}var DJ=AJ,If=new Map;function MJ({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:o,path:i,theme:a="light",line:s,loading:u="Loading...",options:l={},overrideServices:c={},saveViewState:d=!0,keepCurrentModel:f=!1,width:h="100%",height:p="100%",className:v,wrapperProps:y={},beforeMount:m=uc,onMount:g=uc,onChange:b,onValidate:x=uc}){let[w,S]=T.useState(!1),[C,_]=T.useState(!0),k=T.useRef(null),E=T.useRef(null),A=T.useRef(null),D=T.useRef(g),U=T.useRef(m),H=T.useRef(),B=T.useRef(r),V=DJ(i),M=T.useRef(!1),O=T.useRef(!1);UD(()=>{let G=VD.init();return G.then(Q=>(k.current=Q)&&_(!1)).catch(Q=>(Q==null?void 0:Q.type)!=="cancelation"&&console.error("Monaco initialization: error:",Q)),()=>E.current?$():G.cancel()}),er(()=>{var Q,J,ne,oe;let G=tu(k.current,e||r||"",t||o||"",i||n||"");G!==((Q=E.current)==null?void 0:Q.getModel())&&(d&&If.set(V,(J=E.current)==null?void 0:J.saveViewState()),(ne=E.current)==null||ne.setModel(G),d&&((oe=E.current)==null||oe.restoreViewState(If.get(i))))},[i],w),er(()=>{var G;(G=E.current)==null||G.updateOptions(l)},[l],w),er(()=>{!E.current||r===void 0||(E.current.getOption(k.current.editor.EditorOption.readOnly)?E.current.setValue(r):r!==E.current.getValue()&&(O.current=!0,E.current.executeEdits("",[{range:E.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),E.current.pushUndoStop(),O.current=!1))},[r],w),er(()=>{var Q,J;let G=(Q=E.current)==null?void 0:Q.getModel();G&&o&&((J=k.current)==null||J.editor.setModelLanguage(G,o))},[o],w),er(()=>{var G;s!==void 0&&((G=E.current)==null||G.revealLine(s))},[s],w),er(()=>{var G;(G=k.current)==null||G.editor.setTheme(a)},[a],w);let F=T.useCallback(()=>{var G;if(!(!A.current||!k.current)&&!M.current){U.current(k.current);let Q=i||n,J=tu(k.current,r||e||"",t||o||"",Q||"");E.current=(G=k.current)==null?void 0:G.editor.create(A.current,{model:J,automaticLayout:!0,...l},c),d&&E.current.restoreViewState(If.get(Q)),k.current.editor.setTheme(a),s!==void 0&&E.current.revealLine(s),S(!0),M.current=!0}},[e,t,n,r,o,i,l,c,d,a,s]);T.useEffect(()=>{w&&D.current(E.current,k.current)},[w]),T.useEffect(()=>{!C&&!w&&F()},[C,w,F]),B.current=r,T.useEffect(()=>{var G,Q;w&&b&&((G=H.current)==null||G.dispose(),H.current=(Q=E.current)==null?void 0:Q.onDidChangeModelContent(J=>{O.current||b(E.current.getValue(),J)}))},[w,b]),T.useEffect(()=>{if(w){let G=k.current.editor.onDidChangeMarkers(Q=>{var ne;let J=(ne=E.current.getModel())==null?void 0:ne.uri;if(J&&Q.find(oe=>oe.path===J.path)){let oe=k.current.editor.getModelMarkers({resource:J});x==null||x(oe)}});return()=>{G==null||G.dispose()}}return()=>{}},[w,x]);function $(){var G,Q;(G=H.current)==null||G.dispose(),f?d&&If.set(i,E.current.saveViewState()):(Q=E.current.getModel())==null||Q.dispose(),E.current.dispose()}return lr.createElement(jD,{width:h,height:p,isEditorReady:w,loading:u,_ref:A,className:v,wrapperProps:y})}var OJ=MJ,NJ=T.memo(OJ),$v={exports:{}},GD={};function qD(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=qD(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function eE(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=qD(e))&&(r&&(r+=" "),r+=t);return r}const FJ=Object.freeze(Object.defineProperty({__proto__:null,clsx:eE,default:eE},Symbol.toStringTag,{value:"Module"})),BJ=GF(FJ);var Ct={},Lo={};Object.defineProperty(Lo,"__esModule",{value:!0});Lo.dontSetMe=VJ;Lo.findInArray=LJ;Lo.int=WJ;Lo.isFunction=$J;Lo.isNum=zJ;function LJ(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function $J(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function zJ(e){return typeof e=="number"&&!isNaN(e)}function WJ(e){return parseInt(e,10)}function VJ(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))}var us={};Object.defineProperty(us,"__esModule",{value:!0});us.browserPrefixToKey=XD;us.browserPrefixToStyle=jJ;us.default=void 0;us.getPrefix=KD;const Lg=["Moz","Webkit","O","ms"];function KD(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(e=window.document)===null||e===void 0||(e=e.documentElement)===null||e===void 0?void 0:e.style;if(!n||t in n)return"";for(let r=0;r<Lg.length;r++)if(XD(t,Lg[r])in n)return Lg[r];return""}function XD(e,t){return t?"".concat(t).concat(UJ(e)):e}function jJ(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function UJ(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):e[r]==="-"?n=!0:t+=e[r];return t}us.default=KD();Object.defineProperty(Ct,"__esModule",{value:!0});Ct.addClassName=JD;Ct.addEvent=qJ;Ct.addUserSelectStyles=oZ;Ct.createCSSTransform=eZ;Ct.createSVGTransform=tZ;Ct.getTouch=nZ;Ct.getTouchIdentifier=rZ;Ct.getTranslation=Px;Ct.innerHeight=QJ;Ct.innerWidth=JJ;Ct.matchesSelector=QD;Ct.matchesSelectorAndParentsTo=GJ;Ct.offsetXYFromParent=ZJ;Ct.outerHeight=XJ;Ct.outerWidth=YJ;Ct.removeClassName=ZD;Ct.removeEvent=KJ;Ct.removeUserSelectStyles=iZ;var hr=Lo,tE=HJ(us);function YD(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(YD=function(r){return r?n:t})(e)}function HJ(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=YD(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}let Af="";function QD(e,t){return Af||(Af=(0,hr.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,hr.isFunction)(e[n])})),(0,hr.isFunction)(e[Af])?e[Af](t):!1}function GJ(e,t,n){let r=e;do{if(QD(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function qJ(e,t,n,r){if(!e)return;const o={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function KJ(e,t,n,r){if(!e)return;const o={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function XJ(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,hr.int)(n.borderTopWidth),t+=(0,hr.int)(n.borderBottomWidth),t}function YJ(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,hr.int)(n.borderLeftWidth),t+=(0,hr.int)(n.borderRightWidth),t}function QJ(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,hr.int)(n.paddingTop),t-=(0,hr.int)(n.paddingBottom),t}function JJ(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,hr.int)(n.paddingLeft),t-=(0,hr.int)(n.paddingRight),t}function ZJ(e,t,n){const o=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-o.left)/n,a=(e.clientY+t.scrollTop-o.top)/n;return{x:i,y:a}}function eZ(e,t){const n=Px(e,t,"px");return{[(0,tE.browserPrefixToKey)("transform",tE.default)]:n}}function tZ(e,t){return Px(e,t,"")}function Px(e,t,n){let{x:r,y:o}=e,i="translate(".concat(r).concat(n,",").concat(o).concat(n,")");if(t){const a="".concat(typeof t.x=="string"?t.x:t.x+n),s="".concat(typeof t.y=="string"?t.y:t.y+n);i="translate(".concat(a,", ").concat(s,")")+i}return i}function nZ(e,t){return e.targetTouches&&(0,hr.findInArray)(e.targetTouches,n=>t===n.identifier)||e.changedTouches&&(0,hr.findInArray)(e.changedTouches,n=>t===n.identifier)}function rZ(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function oZ(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&JD(e.body,"react-draggable-transparent-selection")}function iZ(e){if(e)try{if(e.body&&ZD(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function JD(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function ZD(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var $o={};Object.defineProperty($o,"__esModule",{value:!0});$o.canDragX=uZ;$o.canDragY=lZ;$o.createCoreData=dZ;$o.createDraggableData=fZ;$o.getBoundPosition=aZ;$o.getControlPosition=cZ;$o.snapToGrid=sZ;var Qn=Lo,nu=Ct;function aZ(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:r}=e.props;r=typeof r=="string"?r:hZ(r);const o=Ix(e);if(typeof r=="string"){const{ownerDocument:i}=o,a=i.defaultView;let s;if(r==="parent"?s=o.parentNode:s=i.querySelector(r),!(s instanceof a.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const u=s,l=a.getComputedStyle(o),c=a.getComputedStyle(u);r={left:-o.offsetLeft+(0,Qn.int)(c.paddingLeft)+(0,Qn.int)(l.marginLeft),top:-o.offsetTop+(0,Qn.int)(c.paddingTop)+(0,Qn.int)(l.marginTop),right:(0,nu.innerWidth)(u)-(0,nu.outerWidth)(o)-o.offsetLeft+(0,Qn.int)(c.paddingRight)-(0,Qn.int)(l.marginRight),bottom:(0,nu.innerHeight)(u)-(0,nu.outerHeight)(o)-o.offsetTop+(0,Qn.int)(c.paddingBottom)-(0,Qn.int)(l.marginBottom)}}return(0,Qn.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,Qn.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Qn.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,Qn.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]}function sZ(e,t,n){const r=Math.round(t/e[0])*e[0],o=Math.round(n/e[1])*e[1];return[r,o]}function uZ(e){return e.props.axis==="both"||e.props.axis==="x"}function lZ(e){return e.props.axis==="both"||e.props.axis==="y"}function cZ(e,t,n){const r=typeof t=="number"?(0,nu.getTouch)(e,t):null;if(typeof t=="number"&&!r)return null;const o=Ix(n),i=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,nu.offsetXYFromParent)(r||e,i,n.props.scale)}function dZ(e,t,n){const r=!(0,Qn.isNum)(e.lastX),o=Ix(e);return r?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:o,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}}function fZ(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function hZ(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function Ix(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var zv={},Wv={};Object.defineProperty(Wv,"__esModule",{value:!0});Wv.default=pZ;function pZ(){}Object.defineProperty(zv,"__esModule",{value:!0});zv.default=void 0;var $g=mZ(T),Dn=Ax(mA),vZ=Ax(ud),cn=Ct,Ri=$o,zg=Lo,Cl=Ax(Wv);function Ax(e){return e&&e.__esModule?e:{default:e}}function eM(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(eM=function(r){return r?n:t})(e)}function mZ(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=eM(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}function Sn(e,t,n){return t=gZ(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gZ(e){var t=yZ(e,"string");return typeof t=="symbol"?t:String(t)}function yZ(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Gr={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Pi=Gr.mouse,Vv=class extends $g.Component{constructor(){super(...arguments),Sn(this,"dragging",!1),Sn(this,"lastX",NaN),Sn(this,"lastY",NaN),Sn(this,"touchIdentifier",null),Sn(this,"mounted",!1),Sn(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(t.target instanceof r.defaultView.Node)||this.props.handle&&!(0,cn.matchesSelectorAndParentsTo)(t.target,this.props.handle,n)||this.props.cancel&&(0,cn.matchesSelectorAndParentsTo)(t.target,this.props.cancel,n))return;t.type==="touchstart"&&t.preventDefault();const o=(0,cn.getTouchIdentifier)(t);this.touchIdentifier=o;const i=(0,Ri.getControlPosition)(t,o,this);if(i==null)return;const{x:a,y:s}=i,u=(0,Ri.createCoreData)(this,a,s);(0,Cl.default)("DraggableCore: handleDragStart: %j",u),(0,Cl.default)("calling",this.props.onStart),!(this.props.onStart(t,u)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,cn.addUserSelectStyles)(r),this.dragging=!0,this.lastX=a,this.lastY=s,(0,cn.addEvent)(r,Pi.move,this.handleDrag),(0,cn.addEvent)(r,Pi.stop,this.handleDragStop))}),Sn(this,"handleDrag",t=>{const n=(0,Ri.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:o}=n;if(Array.isArray(this.props.grid)){let s=r-this.lastX,u=o-this.lastY;if([s,u]=(0,Ri.snapToGrid)(this.props.grid,s,u),!s&&!u)return;r=this.lastX+s,o=this.lastY+u}const i=(0,Ri.createCoreData)(this,r,o);if((0,Cl.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(t,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const u=document.createEvent("MouseEvents");u.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(u)}return}this.lastX=r,this.lastY=o}),Sn(this,"handleDragStop",t=>{if(!this.dragging)return;const n=(0,Ri.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:r,y:o}=n;if(Array.isArray(this.props.grid)){let u=r-this.lastX||0,l=o-this.lastY||0;[u,l]=(0,Ri.snapToGrid)(this.props.grid,u,l),r=this.lastX+u,o=this.lastY+l}const i=(0,Ri.createCoreData)(this,r,o);if(this.props.onStop(t,i)===!1||this.mounted===!1)return!1;const s=this.findDOMNode();s&&this.props.enableUserSelectHack&&(0,cn.removeUserSelectStyles)(s.ownerDocument),(0,Cl.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,s&&((0,Cl.default)("DraggableCore: Removing handlers"),(0,cn.removeEvent)(s.ownerDocument,Pi.move,this.handleDrag),(0,cn.removeEvent)(s.ownerDocument,Pi.stop,this.handleDragStop))}),Sn(this,"onMouseDown",t=>(Pi=Gr.mouse,this.handleDragStart(t))),Sn(this,"onMouseUp",t=>(Pi=Gr.mouse,this.handleDragStop(t))),Sn(this,"onTouchStart",t=>(Pi=Gr.touch,this.handleDragStart(t))),Sn(this,"onTouchEnd",t=>(Pi=Gr.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,cn.addEvent)(t,Gr.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:n}=t;(0,cn.removeEvent)(n,Gr.mouse.move,this.handleDrag),(0,cn.removeEvent)(n,Gr.touch.move,this.handleDrag),(0,cn.removeEvent)(n,Gr.mouse.stop,this.handleDragStop),(0,cn.removeEvent)(n,Gr.touch.stop,this.handleDragStop),(0,cn.removeEvent)(t,Gr.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,cn.removeUserSelectStyles)(n)}}findDOMNode(){var t,n;return(t=this.props)!==null&&t!==void 0&&t.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:vZ.default.findDOMNode(this)}render(){return $g.cloneElement($g.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};zv.default=Vv;Sn(Vv,"displayName","DraggableCore");Sn(Vv,"propTypes",{allowAnyClick:Dn.default.bool,children:Dn.default.node.isRequired,disabled:Dn.default.bool,enableUserSelectHack:Dn.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Dn.default.arrayOf(Dn.default.number),handle:Dn.default.string,cancel:Dn.default.string,nodeRef:Dn.default.object,onStart:Dn.default.func,onDrag:Dn.default.func,onStop:Dn.default.func,onMouseDown:Dn.default.func,scale:Dn.default.number,className:zg.dontSetMe,style:zg.dontSetMe,transform:zg.dontSetMe});Sn(Vv,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),e.default=void 0;var t=f(T),n=c(mA),r=c(ud),o=c(BJ),i=Ct,a=$o,s=Lo,u=c(zv),l=c(Wv);function c(g){return g&&g.__esModule?g:{default:g}}function d(g){if(typeof WeakMap!="function")return null;var b=new WeakMap,x=new WeakMap;return(d=function(w){return w?x:b})(g)}function f(g,b){if(!b&&g&&g.__esModule)return g;if(g===null||typeof g!="object"&&typeof g!="function")return{default:g};var x=d(b);if(x&&x.has(g))return x.get(g);var w={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in g)if(C!=="default"&&Object.prototype.hasOwnProperty.call(g,C)){var _=S?Object.getOwnPropertyDescriptor(g,C):null;_&&(_.get||_.set)?Object.defineProperty(w,C,_):w[C]=g[C]}return w.default=g,x&&x.set(g,w),w}function h(){return h=Object.assign?Object.assign.bind():function(g){for(var b=1;b<arguments.length;b++){var x=arguments[b];for(var w in x)Object.prototype.hasOwnProperty.call(x,w)&&(g[w]=x[w])}return g},h.apply(this,arguments)}function p(g,b,x){return b=v(b),b in g?Object.defineProperty(g,b,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[b]=x,g}function v(g){var b=y(g,"string");return typeof b=="symbol"?b:String(b)}function y(g,b){if(typeof g!="object"||g===null)return g;var x=g[Symbol.toPrimitive];if(x!==void 0){var w=x.call(g,b||"default");if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(g)}class m extends t.Component{static getDerivedStateFromProps(b,x){let{position:w}=b,{prevPropsPosition:S}=x;return w&&(!S||w.x!==S.x||w.y!==S.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:w,prevPropsPosition:S}),{x:w.x,y:w.y,prevPropsPosition:{...w}}):null}constructor(b){super(b),p(this,"onDragStart",(x,w)=>{if((0,l.default)("Draggable: onDragStart: %j",w),this.props.onStart(x,(0,a.createDraggableData)(this,w))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(x,w)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",w);const S=(0,a.createDraggableData)(this,w),C={x:S.x,y:S.y,slackX:0,slackY:0};if(this.props.bounds){const{x:k,y:E}=C;C.x+=this.state.slackX,C.y+=this.state.slackY;const[A,D]=(0,a.getBoundPosition)(this,C.x,C.y);C.x=A,C.y=D,C.slackX=this.state.slackX+(k-C.x),C.slackY=this.state.slackY+(E-C.y),S.x=C.x,S.y=C.y,S.deltaX=C.x-this.state.x,S.deltaY=C.y-this.state.y}if(this.props.onDrag(x,S)===!1)return!1;this.setState(C)}),p(this,"onDragStop",(x,w)=>{if(!this.state.dragging||this.props.onStop(x,(0,a.createDraggableData)(this,w))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",w);const C={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:k,y:E}=this.props.position;C.x=k,C.y=E}this.setState(C)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var b,x;return(b=(x=this.props)===null||x===void 0||(x=x.nodeRef)===null||x===void 0?void 0:x.current)!==null&&b!==void 0?b:r.default.findDOMNode(this)}render(){const{axis:b,bounds:x,children:w,defaultPosition:S,defaultClassName:C,defaultClassNameDragging:_,defaultClassNameDragged:k,position:E,positionOffset:A,scale:D,...U}=this.props;let H={},B=null;const M=!!!E||this.state.dragging,O=E||S,F={x:(0,a.canDragX)(this)&&M?this.state.x:O.x,y:(0,a.canDragY)(this)&&M?this.state.y:O.y};this.state.isElementSVG?B=(0,i.createSVGTransform)(F,A):H=(0,i.createCSSTransform)(F,A);const $=(0,o.default)(w.props.className||"",C,{[_]:this.state.dragging,[k]:this.state.dragged});return t.createElement(u.default,h({},U,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(w),{className:$,style:{...w.props.style,...H},transform:B}))}}e.default=m,p(m,"displayName","Draggable"),p(m,"propTypes",{...u.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe}),p(m,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(GD);const{default:tM,DraggableCore:bZ}=GD;$v.exports=tM;$v.exports.default=tM;$v.exports.DraggableCore=bZ;var xZ=$v.exports;const wZ=Up(xZ),SZ={javascript:"18.15.0",typescript:"5.0.3",python:"3.10.0",java:"15.0.2",csharp:"6.12.0",php:"8.2.3",c:"C17",cpp:"C++17"},Wg={javascript:`
function Main(name) {
	console.log("Hello, " + name + "!");
}

Main("Test");
`,typescript:`
type Params = {
	name: string;
}

function Main(data: Params) {
	console.log("Hello, " + data.name + "!");
}

Main({ name: "Test" });
`,python:`
def Main(name):
	print("Hello, " + name + "!")

Main("Test")
`,java:`
public class Main {
	public static void main(String[] args) {
		System.out.println("Hello World");
	}
}
`,csharp:`using System;

namespace Main
{
	class Hello { 
		static void Main(string[] args) {
			Console.WriteLine("Hello World in C#");
		}
	}
}
`,php:`<?php

$name = 'Test';
echo $name;
`,c:`#include <stdio.h>

int main() {
	printf("Hello, world!\\n");
	return 0;
}`,cpp:`#include <iostream>
using namespace std;

int main() {
    cout << "Hello, World!" << endl;
	
    return 0;
}
`},CZ=Object.entries(SZ),nE="blue.400",_Z=({language:e,onSelect:t})=>L.jsxs(Rr,{ml:2,mb:9,mr:5,children:[L.jsx(bo,{mb:2,fontSize:"lg",children:"Language:"}),L.jsxs(vD,{isLazy:!0,p:5,children:[L.jsx(xD,{as:Bu,children:e}),L.jsx(bD,{bg:"#110c1b",children:CZ.map(([n,r])=>L.jsxs(yD,{color:n===e?nE:"",bg:n===e?"gray.900":"transparent",_hover:{color:nE,bg:"gray.900"},onClick:()=>t(n),children:[n," ",L.jsxs(bo,{as:"span",color:"gray.600",fontSize:"sm",children:["(",r,")"]})]},n))})]})]});function nM(e,t){return function(){return e.apply(t,arguments)}}const{toString:EZ}=Object.prototype,{getPrototypeOf:Dx}=Object,jv=(e=>t=>{const n=EZ.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),zo=e=>(e=e.toLowerCase(),t=>jv(t)===e),Uv=e=>t=>typeof t===e,{isArray:Zu}=Array,Xc=Uv("undefined");function kZ(e){return e!==null&&!Xc(e)&&e.constructor!==null&&!Xc(e.constructor)&&Fr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const rM=zo("ArrayBuffer");function TZ(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&rM(e.buffer),t}const RZ=Uv("string"),Fr=Uv("function"),oM=Uv("number"),Hv=e=>e!==null&&typeof e=="object",PZ=e=>e===!0||e===!1,_h=e=>{if(jv(e)!=="object")return!1;const t=Dx(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},IZ=zo("Date"),AZ=zo("File"),DZ=zo("Blob"),MZ=zo("FileList"),OZ=e=>Hv(e)&&Fr(e.pipe),NZ=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Fr(e.append)&&((t=jv(e))==="formdata"||t==="object"&&Fr(e.toString)&&e.toString()==="[object FormData]"))},FZ=zo("URLSearchParams"),BZ=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kd(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),Zu(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length;let s;for(r=0;r<a;r++)s=i[r],t.call(null,e[s],s,e)}}function iM(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,o;for(;r-- >0;)if(o=n[r],t===o.toLowerCase())return o;return null}const aM=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sM=e=>!Xc(e)&&e!==aM;function Zy(){const{caseless:e}=sM(this)&&this||{},t={},n=(r,o)=>{const i=e&&iM(t,o)||o;_h(t[i])&&_h(r)?t[i]=Zy(t[i],r):_h(r)?t[i]=Zy({},r):Zu(r)?t[i]=r.slice():t[i]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&kd(arguments[r],n);return t}const LZ=(e,t,n,{allOwnKeys:r}={})=>(kd(t,(o,i)=>{n&&Fr(o)?e[i]=nM(o,n):e[i]=o},{allOwnKeys:r}),e),$Z=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),zZ=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},WZ=(e,t,n,r)=>{let o,i,a;const s={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],(!r||r(a,e,t))&&!s[a]&&(t[a]=e[a],s[a]=!0);e=n!==!1&&Dx(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},VZ=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},jZ=e=>{if(!e)return null;if(Zu(e))return e;let t=e.length;if(!oM(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},UZ=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Dx(Uint8Array)),HZ=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=r.next())&&!o.done;){const i=o.value;t.call(e,i[0],i[1])}},GZ=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},qZ=zo("HTMLFormElement"),KZ=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,o){return r.toUpperCase()+o}),rE=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),XZ=zo("RegExp"),uM=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};kd(n,(o,i)=>{let a;(a=t(o,i,e))!==!1&&(r[i]=a||o)}),Object.defineProperties(e,r)},YZ=e=>{uM(e,(t,n)=>{if(Fr(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Fr(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},QZ=(e,t)=>{const n={},r=o=>{o.forEach(i=>{n[i]=!0})};return Zu(e)?r(e):r(String(e).split(t)),n},JZ=()=>{},ZZ=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Vg="abcdefghijklmnopqrstuvwxyz",oE="0123456789",lM={DIGIT:oE,ALPHA:Vg,ALPHA_DIGIT:Vg+Vg.toUpperCase()+oE},eee=(e=16,t=lM.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function tee(e){return!!(e&&Fr(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const nee=e=>{const t=new Array(10),n=(r,o)=>{if(Hv(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[o]=r;const i=Zu(r)?[]:{};return kd(r,(a,s)=>{const u=n(a,o+1);!Xc(u)&&(i[s]=u)}),t[o]=void 0,i}}return r};return n(e,0)},ree=zo("AsyncFunction"),oee=e=>e&&(Hv(e)||Fr(e))&&Fr(e.then)&&Fr(e.catch),Z={isArray:Zu,isArrayBuffer:rM,isBuffer:kZ,isFormData:NZ,isArrayBufferView:TZ,isString:RZ,isNumber:oM,isBoolean:PZ,isObject:Hv,isPlainObject:_h,isUndefined:Xc,isDate:IZ,isFile:AZ,isBlob:DZ,isRegExp:XZ,isFunction:Fr,isStream:OZ,isURLSearchParams:FZ,isTypedArray:UZ,isFileList:MZ,forEach:kd,merge:Zy,extend:LZ,trim:BZ,stripBOM:$Z,inherits:zZ,toFlatObject:WZ,kindOf:jv,kindOfTest:zo,endsWith:VZ,toArray:jZ,forEachEntry:HZ,matchAll:GZ,isHTMLForm:qZ,hasOwnProperty:rE,hasOwnProp:rE,reduceDescriptors:uM,freezeMethods:YZ,toObjectSet:QZ,toCamelCase:KZ,noop:JZ,toFiniteNumber:ZZ,findKey:iM,global:aM,isContextDefined:sM,ALPHABET:lM,generateString:eee,isSpecCompliantForm:tee,toJSONObject:nee,isAsyncFn:ree,isThenable:oee};function Fe(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}Z.inherits(Fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const cM=Fe.prototype,dM={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{dM[e]={value:e}});Object.defineProperties(Fe,dM);Object.defineProperty(cM,"isAxiosError",{value:!0});Fe.from=(e,t,n,r,o,i)=>{const a=Object.create(cM);return Z.toFlatObject(e,a,function(u){return u!==Error.prototype},s=>s!=="isAxiosError"),Fe.call(a,e.message,t,n,r,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const iee=null;function e1(e){return Z.isPlainObject(e)||Z.isArray(e)}function fM(e){return Z.endsWith(e,"[]")?e.slice(0,-2):e}function iE(e,t,n){return e?e.concat(t).map(function(o,i){return o=fM(o),!n&&i?"["+o+"]":o}).join(n?".":""):t}function aee(e){return Z.isArray(e)&&!e.some(e1)}const see=Z.toFlatObject(Z,{},null,function(t){return/^is[A-Z]/.test(t)});function Gv(e,t,n){if(!Z.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Z.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,y){return!Z.isUndefined(y[v])});const r=n.metaTokens,o=n.visitor||c,i=n.dots,a=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(t);if(!Z.isFunction(o))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(Z.isDate(p))return p.toISOString();if(!u&&Z.isBlob(p))throw new Fe("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(p)||Z.isTypedArray(p)?u&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,v,y){let m=p;if(p&&!y&&typeof p=="object"){if(Z.endsWith(v,"{}"))v=r?v:v.slice(0,-2),p=JSON.stringify(p);else if(Z.isArray(p)&&aee(p)||(Z.isFileList(p)||Z.endsWith(v,"[]"))&&(m=Z.toArray(p)))return v=fM(v),m.forEach(function(b,x){!(Z.isUndefined(b)||b===null)&&t.append(a===!0?iE([v],x,i):a===null?v:v+"[]",l(b))}),!1}return e1(p)?!0:(t.append(iE(y,v,i),l(p)),!1)}const d=[],f=Object.assign(see,{defaultVisitor:c,convertValue:l,isVisitable:e1});function h(p,v){if(!Z.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+v.join("."));d.push(p),Z.forEach(p,function(m,g){(!(Z.isUndefined(m)||m===null)&&o.call(t,m,Z.isString(g)?g.trim():g,v,f))===!0&&h(m,v?v.concat(g):[g])}),d.pop()}}if(!Z.isObject(e))throw new TypeError("data must be an object");return h(e),t}function aE(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Mx(e,t){this._pairs=[],e&&Gv(e,this,t)}const hM=Mx.prototype;hM.append=function(t,n){this._pairs.push([t,n])};hM.toString=function(t){const n=t?function(r){return t.call(this,r,aE)}:aE;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function uee(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pM(e,t,n){if(!t)return e;const r=n&&n.encode||uee,o=n&&n.serialize;let i;if(o?i=o(t,n):i=Z.isURLSearchParams(t)?t.toString():new Mx(t,n).toString(r),i){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class sE{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Z.forEach(this.handlers,function(r){r!==null&&t(r)})}}const vM={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lee=typeof URLSearchParams<"u"?URLSearchParams:Mx,cee=typeof FormData<"u"?FormData:null,dee=typeof Blob<"u"?Blob:null,fee={isBrowser:!0,classes:{URLSearchParams:lee,FormData:cee,Blob:dee},protocols:["http","https","file","blob","url","data"]},mM=typeof window<"u"&&typeof document<"u",hee=(e=>mM&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),pee=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",vee=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mM,hasStandardBrowserEnv:hee,hasStandardBrowserWebWorkerEnv:pee},Symbol.toStringTag,{value:"Module"})),Co={...vee,...fee};function mee(e,t){return Gv(e,new Co.classes.URLSearchParams,Object.assign({visitor:function(n,r,o,i){return Co.isNode&&Z.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function gee(e){return Z.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function yee(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}function gM(e){function t(n,r,o,i){let a=n[i++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),u=i>=n.length;return a=!a&&Z.isArray(o)?o.length:a,u?(Z.hasOwnProp(o,a)?o[a]=[o[a],r]:o[a]=r,!s):((!o[a]||!Z.isObject(o[a]))&&(o[a]=[]),t(n,r,o[a],i)&&Z.isArray(o[a])&&(o[a]=yee(o[a])),!s)}if(Z.isFormData(e)&&Z.isFunction(e.entries)){const n={};return Z.forEachEntry(e,(r,o)=>{t(gee(r),o,n,0)}),n}return null}function bee(e,t,n){if(Z.isString(e))try{return(t||JSON.parse)(e),Z.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const Ox={transitional:vM,adapter:["xhr","http"],transformRequest:[function(t,n){const r=n.getContentType()||"",o=r.indexOf("application/json")>-1,i=Z.isObject(t);if(i&&Z.isHTMLForm(t)&&(t=new FormData(t)),Z.isFormData(t))return o?JSON.stringify(gM(t)):t;if(Z.isArrayBuffer(t)||Z.isBuffer(t)||Z.isStream(t)||Z.isFile(t)||Z.isBlob(t))return t;if(Z.isArrayBufferView(t))return t.buffer;if(Z.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return mee(t,this.formSerializer).toString();if((s=Z.isFileList(t))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Gv(s?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||o?(n.setContentType("application/json",!1),bee(t)):t}],transformResponse:[function(t){const n=this.transitional||Ox.transitional,r=n&&n.forcedJSONParsing,o=this.responseType==="json";if(t&&Z.isString(t)&&(r&&!this.responseType||o)){const a=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(s){if(a)throw s.name==="SyntaxError"?Fe.from(s,Fe.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Co.classes.FormData,Blob:Co.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],e=>{Ox.headers[e]={}});const Nx=Ox,xee=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wee=e=>{const t={};let n,r,o;return e&&e.split(`
`).forEach(function(a){o=a.indexOf(":"),n=a.substring(0,o).trim().toLowerCase(),r=a.substring(o+1).trim(),!(!n||t[n]&&xee[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},uE=Symbol("internals");function _l(e){return e&&String(e).trim().toLowerCase()}function Eh(e){return e===!1||e==null?e:Z.isArray(e)?e.map(Eh):String(e)}function See(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Cee=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function jg(e,t,n,r,o){if(Z.isFunction(r))return r.call(this,t,n);if(o&&(t=n),!!Z.isString(t)){if(Z.isString(r))return t.indexOf(r)!==-1;if(Z.isRegExp(r))return r.test(t)}}function _ee(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function Eee(e,t){const n=Z.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(o,i,a){return this[r].call(this,t,o,i,a)},configurable:!0})})}class qv{constructor(t){t&&this.set(t)}set(t,n,r){const o=this;function i(s,u,l){const c=_l(u);if(!c)throw new Error("header name must be a non-empty string");const d=Z.findKey(o,c);(!d||o[d]===void 0||l===!0||l===void 0&&o[d]!==!1)&&(o[d||u]=Eh(s))}const a=(s,u)=>Z.forEach(s,(l,c)=>i(l,c,u));return Z.isPlainObject(t)||t instanceof this.constructor?a(t,n):Z.isString(t)&&(t=t.trim())&&!Cee(t)?a(wee(t),n):t!=null&&i(n,t,r),this}get(t,n){if(t=_l(t),t){const r=Z.findKey(this,t);if(r){const o=this[r];if(!n)return o;if(n===!0)return See(o);if(Z.isFunction(n))return n.call(this,o,r);if(Z.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=_l(t),t){const r=Z.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||jg(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let o=!1;function i(a){if(a=_l(a),a){const s=Z.findKey(r,a);s&&(!n||jg(r,r[s],s,n))&&(delete r[s],o=!0)}}return Z.isArray(t)?t.forEach(i):i(t),o}clear(t){const n=Object.keys(this);let r=n.length,o=!1;for(;r--;){const i=n[r];(!t||jg(this,this[i],i,t,!0))&&(delete this[i],o=!0)}return o}normalize(t){const n=this,r={};return Z.forEach(this,(o,i)=>{const a=Z.findKey(r,i);if(a){n[a]=Eh(o),delete n[i];return}const s=t?_ee(i):String(i).trim();s!==i&&delete n[i],n[s]=Eh(o),r[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return Z.forEach(this,(r,o)=>{r!=null&&r!==!1&&(n[o]=t&&Z.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(o=>r.set(o)),r}static accessor(t){const r=(this[uE]=this[uE]={accessors:{}}).accessors,o=this.prototype;function i(a){const s=_l(a);r[s]||(Eee(o,a),r[s]=!0)}return Z.isArray(t)?t.forEach(i):i(t),this}}qv.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(qv.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});Z.freezeMethods(qv);const ui=qv;function Ug(e,t){const n=this||Nx,r=t||n,o=ui.from(r.headers);let i=r.data;return Z.forEach(e,function(s){i=s.call(n,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}function yM(e){return!!(e&&e.__CANCEL__)}function Td(e,t,n){Fe.call(this,e??"canceled",Fe.ERR_CANCELED,t,n),this.name="CanceledError"}Z.inherits(Td,Fe,{__CANCEL__:!0});function kee(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Fe("Request failed with status code "+n.status,[Fe.ERR_BAD_REQUEST,Fe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Tee=Co.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const a=[e+"="+encodeURIComponent(t)];Z.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Z.isString(r)&&a.push("path="+r),Z.isString(o)&&a.push("domain="+o),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ree(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Pee(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function bM(e,t){return e&&!Ree(t)?Pee(e,t):t}const Iee=Co.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function o(i){let a=i;return t&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=o(window.location.href),function(a){const s=Z.isString(a)?o(a):a;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}();function Aee(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Dee(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o=0,i=0,a;return t=t!==void 0?t:1e3,function(u){const l=Date.now(),c=r[i];a||(a=l),n[o]=u,r[o]=l;let d=i,f=0;for(;d!==o;)f+=n[d++],d=d%e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(f*1e3/h):void 0}}function lE(e,t){let n=0;const r=Dee(50,250);return o=>{const i=o.loaded,a=o.lengthComputable?o.total:void 0,s=i-n,u=r(s),l=i<=a;n=i;const c={loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&l?(a-i)/u:void 0,event:o};c[t?"download":"upload"]=!0,e(c)}}const Mee=typeof XMLHttpRequest<"u",Oee=Mee&&function(e){return new Promise(function(n,r){let o=e.data;const i=ui.from(e.headers).normalize();let{responseType:a,withXSRFToken:s}=e,u;function l(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}let c;if(Z.isFormData(o)){if(Co.hasStandardBrowserEnv||Co.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((c=i.getContentType())!==!1){const[v,...y]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];i.setContentType([v||"multipart/form-data",...y].join("; "))}}let d=new XMLHttpRequest;if(e.auth){const v=e.auth.username||"",y=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(v+":"+y))}const f=bM(e.baseURL,e.url);d.open(e.method.toUpperCase(),pM(f,e.params,e.paramsSerializer),!0),d.timeout=e.timeout;function h(){if(!d)return;const v=ui.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),m={data:!a||a==="text"||a==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:v,config:e,request:d};kee(function(b){n(b),l()},function(b){r(b),l()},m),d=null}if("onloadend"in d?d.onloadend=h:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(h)},d.onabort=function(){d&&(r(new Fe("Request aborted",Fe.ECONNABORTED,e,d)),d=null)},d.onerror=function(){r(new Fe("Network Error",Fe.ERR_NETWORK,e,d)),d=null},d.ontimeout=function(){let y=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const m=e.transitional||vM;e.timeoutErrorMessage&&(y=e.timeoutErrorMessage),r(new Fe(y,m.clarifyTimeoutError?Fe.ETIMEDOUT:Fe.ECONNABORTED,e,d)),d=null},Co.hasStandardBrowserEnv&&(s&&Z.isFunction(s)&&(s=s(e)),s||s!==!1&&Iee(f))){const v=e.xsrfHeaderName&&e.xsrfCookieName&&Tee.read(e.xsrfCookieName);v&&i.set(e.xsrfHeaderName,v)}o===void 0&&i.setContentType(null),"setRequestHeader"in d&&Z.forEach(i.toJSON(),function(y,m){d.setRequestHeader(m,y)}),Z.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),a&&a!=="json"&&(d.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&d.addEventListener("progress",lE(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",lE(e.onUploadProgress)),(e.cancelToken||e.signal)&&(u=v=>{d&&(r(!v||v.type?new Td(null,e,d):v),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u)));const p=Aee(f);if(p&&Co.protocols.indexOf(p)===-1){r(new Fe("Unsupported protocol "+p+":",Fe.ERR_BAD_REQUEST,e));return}d.send(o||null)})},t1={http:iee,xhr:Oee};Z.forEach(t1,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const cE=e=>`- ${e}`,Nee=e=>Z.isFunction(e)||e===null||e===!1,xM={getAdapter:e=>{e=Z.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){n=e[i];let a;if(r=n,!Nee(n)&&(r=t1[(a=String(n)).toLowerCase()],r===void 0))throw new Fe(`Unknown adapter '${a}'`);if(r)break;o[a||"#"+i]=r}if(!r){const i=Object.entries(o).map(([s,u])=>`adapter ${s} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=t?i.length>1?`since :
`+i.map(cE).join(`
`):" "+cE(i[0]):"as no adapter specified";throw new Fe("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:t1};function Hg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Td(null,e)}function dE(e){return Hg(e),e.headers=ui.from(e.headers),e.data=Ug.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),xM.getAdapter(e.adapter||Nx.adapter)(e).then(function(r){return Hg(e),r.data=Ug.call(e,e.transformResponse,r),r.headers=ui.from(r.headers),r},function(r){return yM(r)||(Hg(e),r&&r.response&&(r.response.data=Ug.call(e,e.transformResponse,r.response),r.response.headers=ui.from(r.response.headers))),Promise.reject(r)})}const fE=e=>e instanceof ui?e.toJSON():e;function Vu(e,t){t=t||{};const n={};function r(l,c,d){return Z.isPlainObject(l)&&Z.isPlainObject(c)?Z.merge.call({caseless:d},l,c):Z.isPlainObject(c)?Z.merge({},c):Z.isArray(c)?c.slice():c}function o(l,c,d){if(Z.isUndefined(c)){if(!Z.isUndefined(l))return r(void 0,l,d)}else return r(l,c,d)}function i(l,c){if(!Z.isUndefined(c))return r(void 0,c)}function a(l,c){if(Z.isUndefined(c)){if(!Z.isUndefined(l))return r(void 0,l)}else return r(void 0,c)}function s(l,c,d){if(d in t)return r(l,c);if(d in e)return r(void 0,l)}const u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,c)=>o(fE(l),fE(c),!0)};return Z.forEach(Object.keys(Object.assign({},e,t)),function(c){const d=u[c]||o,f=d(e[c],t[c],c);Z.isUndefined(f)&&d!==s||(n[c]=f)}),n}const wM="1.6.7",Fx={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Fx[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const hE={};Fx.transitional=function(t,n,r){function o(i,a){return"[Axios v"+wM+"] Transitional option '"+i+"'"+a+(r?". "+r:"")}return(i,a,s)=>{if(t===!1)throw new Fe(o(a," has been removed"+(n?" in "+n:"")),Fe.ERR_DEPRECATED);return n&&!hE[a]&&(hE[a]=!0,console.warn(o(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,a,s):!0}};function Fee(e,t,n){if(typeof e!="object")throw new Fe("options must be an object",Fe.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],a=t[i];if(a){const s=e[i],u=s===void 0||a(s,i,e);if(u!==!0)throw new Fe("option "+i+" must be "+u,Fe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Fe("Unknown option "+i,Fe.ERR_BAD_OPTION)}}const n1={assertOptions:Fee,validators:Fx},Ii=n1.validators;class xp{constructor(t){this.defaults=t,this.interceptors={request:new sE,response:new sE}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const i=o.stack?o.stack.replace(/^.+\n/,""):"";r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Vu(this.defaults,n);const{transitional:r,paramsSerializer:o,headers:i}=n;r!==void 0&&n1.assertOptions(r,{silentJSONParsing:Ii.transitional(Ii.boolean),forcedJSONParsing:Ii.transitional(Ii.boolean),clarifyTimeoutError:Ii.transitional(Ii.boolean)},!1),o!=null&&(Z.isFunction(o)?n.paramsSerializer={serialize:o}:n1.assertOptions(o,{encode:Ii.function,serialize:Ii.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=i&&Z.merge(i.common,i[n.method]);i&&Z.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),n.headers=ui.concat(a,i);const s=[];let u=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(u=u&&v.synchronous,s.unshift(v.fulfilled,v.rejected))});const l=[];this.interceptors.response.forEach(function(v){l.push(v.fulfilled,v.rejected)});let c,d=0,f;if(!u){const p=[dE.bind(this),void 0];for(p.unshift.apply(p,s),p.push.apply(p,l),f=p.length,c=Promise.resolve(n);d<f;)c=c.then(p[d++],p[d++]);return c}f=s.length;let h=n;for(d=0;d<f;){const p=s[d++],v=s[d++];try{h=p(h)}catch(y){v.call(this,y);break}}try{c=dE.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,f=l.length;d<f;)c=c.then(l[d++],l[d++]);return c}getUri(t){t=Vu(this.defaults,t);const n=bM(t.baseURL,t.url);return pM(n,t.params,t.paramsSerializer)}}Z.forEach(["delete","get","head","options"],function(t){xp.prototype[t]=function(n,r){return this.request(Vu(r||{},{method:t,url:n,data:(r||{}).data}))}});Z.forEach(["post","put","patch"],function(t){function n(r){return function(i,a,s){return this.request(Vu(s||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}xp.prototype[t]=n(),xp.prototype[t+"Form"]=n(!0)});const kh=xp;class Bx{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(o=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](o);r._listeners=null}),this.promise.then=o=>{let i;const a=new Promise(s=>{r.subscribe(s),i=s}).then(o);return a.cancel=function(){r.unsubscribe(i)},a},t(function(i,a,s){r.reason||(r.reason=new Td(i,a,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Bx(function(o){t=o}),cancel:t}}}const Bee=Bx;function Lee(e){return function(n){return e.apply(null,n)}}function $ee(e){return Z.isObject(e)&&e.isAxiosError===!0}const r1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(r1).forEach(([e,t])=>{r1[t]=e});const zee=r1;function SM(e){const t=new kh(e),n=nM(kh.prototype.request,t);return Z.extend(n,kh.prototype,t,{allOwnKeys:!0}),Z.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return SM(Vu(e,o))},n}const At=SM(Nx);At.Axios=kh;At.CanceledError=Td;At.CancelToken=Bee;At.isCancel=yM;At.VERSION=wM;At.toFormData=Gv;At.AxiosError=Fe;At.Cancel=At.CanceledError;At.all=function(t){return Promise.all(t)};At.spread=Lee;At.isAxiosError=$ee;At.mergeConfig=Vu;At.AxiosHeaders=ui;At.formToJSON=e=>gM(Z.isHTMLForm(e)?new FormData(e):e);At.getAdapter=xM.getAdapter;At.HttpStatusCode=zee;At.default=At;const Wee=At.create({baseURL:"http://localhost:8090"}),Vee=async(e,t,n)=>{console.log({language:e,code:t,inputData:n}),console.log(JSON.stringify(t));try{const r=await Wee.post("/submit",{language:e,code:t,inputData:n});return console.log("res",r.data),r.data}catch(r){throw console.error("Error executing code:",r),r}},jee=({editorRef:e,language:t})=>{const n=aA(),[r,o]=T.useState(null),[i,a]=T.useState(""),[s,u]=T.useState(!1),[l,c]=T.useState(!1),[d,f]=T.useState([]),[h,p]=T.useState(!1),v=b=>{a(b.target.value)},y=b=>{b.key==="Enter"&&(b.preventDefault(),a(x=>x+`
`))},m=async()=>{const b=e.current.getValue();if(b)try{u(!0);const x=await Vee(t,b,i);console.log("result",x),o(x.output.split(`
`)),x.stderr?c(!0):c(!1)}catch(x){console.log(x),n({title:"An error occurred.",description:x.message||"Unable to run code",status:"error",duration:6e3})}finally{u(!1)}},g=()=>{p(!h)};return L.jsxs(Rr,{w:"100%",h:"fit-content",children:[L.jsx(bo,{mb:2,fontSize:"lg",children:"Output"}),L.jsx(Rr,{h:"fit-content",p:2,color:l?"red.400":"",border:"1px solid",borderRadius:4,borderColor:l?"red.500":"#333",children:r?r.map((b,x)=>L.jsx(bo,{children:b},x)):'Click "Run Code" to see the output here'}),L.jsx(xx,{placeholder:"Enter input here...",value:i,onChange:v,onKeyDown:y,mt:4,mb:4}),L.jsx(Bu,{variant:"outline",colorScheme:"green",isLoading:s,onClick:m,mr:2,children:"Run Code"}),L.jsx(Bu,{variant:"outline",colorScheme:"red",onClick:g,children:"Submit"}),L.jsxs(EQ,{placement:"right",onClose:g,isOpen:h,children:[L.jsx(DD,{}),L.jsxs(ID,{children:[L.jsx(OD,{}),L.jsx(AD,{children:"Test Cases Result"}),L.jsx(MD,{children:s?L.jsx(Mv,{}):L.jsx(Nv,{spacing:3,children:d.map((b,x)=>L.jsxs(eD,{color:b.passed?"green.500":"red.500",children:[b.description," -"," ",b.passed?"Passed":"Failed"," (Expected:"," ",b.expected,", Got: ",b.actual,")"]},x))})})]})]})]})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var CM=function(e,t){return(CM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])})(e,t)};function oo(e,t){function n(){this.constructor=e}CM(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function le(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(l){try{u(r.next(l))}catch(c){i(c)}}function s(l){try{u(r.throw(l))}catch(c){i(c)}}function u(l){l.done?o(l.value):new n(function(c){c(l.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function ce(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(c[0]===6&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(d){c=[6,d],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var Uee=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(t,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=t,this.platform=n},e.prototype.registerFlag=function(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){var o=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+o+"."),this.set(t,o)}},e.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(t,n){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,o=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return Hee(r,a[0],a[1]),a.join("=")}),r);"tfjsflags"in o&&o.tfjsflags.split(",").forEach(function(i){var a=i.split(":"),s=a[0],u=a[1];t.urlFlags[s]=function(l,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+l+".")}(s,u)})}},e}();function Hee(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function Y(){return _M}var _M=null,wp=new Map,o1=new Map;function EM(e,t){var n=TM(e,t);return wp.get(n)}function Gee(e){return o1.get(e)}function pE(e){for(var t=wp.entries(),n=[];;){var r=t.next(),o=r.done,i=r.value;if(o)break;var a=i[0],s=i[1];a.split("_")[0]===e&&n.push(s)}return n}function kM(e){var t=e.kernelName,n=e.backendName,r=TM(t,n);if(wp.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");wp.set(r,e)}function qee(e){var t=e.kernelName;o1.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),o1.set(t,e)}function TM(e,t){return t+"_"+e}function i1(e,t,n){return Math.max(e,Math.min(t,n))}function RM(e){return e%2==0?e:e+1}function Kee(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function P(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function Xe(e,t,n){n===void 0&&(n=""),P(qt(e,t),function(){return n+" Shapes "+e+" and "+t+" must match"})}function el(e){P(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function ju(e,t,n){if(t===void 0&&(t=[]),n===void 0&&(n=!1),t==null&&(t=[]),Array.isArray(e)||Ao(e)&&!n)for(var r=0;r<e.length;++r)ju(e[r],t,n);else t.push(e);return t}function de(e){if(e.length===0)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function qt(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function St(e){return e%1==0}function Xee(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function a1(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function gu(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function vE(e,t,n){return t===void 0&&(t=function(r){return 0}),new Promise(function(r,o){var i=0,a=function(){if(e())r();else{i++;var s=t(i);n!=null&&i>=n?o():setTimeout(a,s)}};a()})}function Yee(e,t){for(var n=1,r=-1,o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(e[o]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found "+e[o]+" at dim "+o);if(r===-1){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(n===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function Wt(e,t){var n=t.length;return P((e=e==null?t.map(function(r,o){return o}):[].concat(e)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e}),P(e.every(function(r){return St(r)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(r){return r<0?n+r:r})}function Aa(e,t){for(var n=[],r=[],o=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||o?null:Wt(t,e).sort(),a=0,s=0;s<e.length;++s){if(i!=null){if(i[a]===s&&e[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(i[a]==null||i[a]>s)&&e[s]===1&&(n.push(e[s]),r.push(s)),i[a]<=s&&a++}e[s]!==1&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Yc(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function Sp(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else{if(e!=="string")throw new Error("Unknown data type "+e);n=new Array(t)}return n}function Qee(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function Jee(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function Zee(e,t){return t!=="complex64"&&(t!=="float32"||e==="complex64")&&(t!=="int32"||e==="float32"||e==="complex64")&&(t!=="bool"||e!=="bool")}function Ao(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function PM(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function ete(e){if(e==null)return 0;var t=0;return e.forEach(function(n){return t+=n.length}),t}function Lx(e){return typeof e=="string"||e instanceof String}function tte(e){return typeof e=="boolean"}function nte(e){return typeof e=="number"}function Rd(e){return Array.isArray(e)?Rd(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":nte(e)?"float32":Lx(e)?"string":tte(e)?"bool":"float32"}function s1(e){return!!(e&&e.constructor&&e.call&&e.apply)}function u1(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function Do(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function IM(e,t,n){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=ju(e)),n&&Qee(e,t),function(i,a){return i instanceof Float32Array&&a==="float32"||i instanceof Int32Array&&a==="int32"||i instanceof Uint8Array&&a==="bool"}(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var r=new Uint8Array(e.length),o=0;o<r.length;++o)Math.round(e[o])!==0&&(r[o]=1);return r}throw new Error("Unknown data type "+t)}function mE(e,t){if(e.length===0)return t[0];var n=e.reduce(function(r,o){return r*o});if(n===0)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function r(o,i,a){var s=new Array;if(i.length===1)for(var u=i[0],l=0;l<u;l++)s[l]=a[o+l];else{u=i[0];var c=i.slice(1),d=c.reduce(function(f,h){return f*h});for(l=0;l<u;l++)s[l]=r(o+l*d,c,a)}return s}(0,e,t)}function AM(e,t){for(var n=Pd(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Pd(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+t)}function vo(){return Y().platform.now()}function DM(e){e.forEach(function(t){P(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function rte(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Y().platform.encode(e,t)}function Cp(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",Y().platform.decode(e,t)}function gE(e,t,n){if(t===0)return 0;if(t===1)return e[0];for(var r=e[e.length-1],o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function ote(e,t,n){if(t===0)return[];if(t===1)return[e];for(var r=new Array(t),o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}var ite=function(){function e(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new ate)}return e.prototype.profileKernel=function(t,n,r){var o,i=this,a=this.backendTimer.time(function(){o=r()});return o.forEach(function(s){s.data().then(function(u){(function(l,c,d){if(c!=="float32")return!1;for(var f=0;f<l.length;f++){var h=l[f];if(isNaN(h)||!isFinite(h))return console.warn("Found "+h+" in the result of '"+d+"'"),!0}})(u,s.dtype,t),a.then(function(l){var c="";l.getExtraProfileInfo!=null&&(c=l.getExtraProfileInfo()),i.logger.logKernelProfile(t,s,u,l.kernelMs,n,c)})})}),o},e}(),ate=function(){function e(){}return e.prototype.logKernelProfile=function(t,n,r,o,i,a){var s=typeof o=="number"?gu(o+"ms",9):o.error,u=gu(t,25),l=n.rank,c=n.size,d=gu(n.shape.toString(),14),f="";for(var h in i){var p=i[h].shape||n.shape,v=p.length;f+=h+": "+v+"D "+(v>0?p:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+d+"	%c"+c+"	%c"+f+"	%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),yE=20,El=3,Gg=7;function ste(e,t,n,r){var o=Do(t),i=function(l,c,d,f){var h=de(c),p=f[f.length-1],v=new Array(p).fill(0),y=c.length,m=d==="complex64"?Tl(l):l;if(y>1)for(var g=0;g<h/p;g++)for(var b=g*p,x=0;x<p;x++)v[x]=Math.max(v[x],kl(m[b+x],0,d).length);return v}(e,t,n,o),a=t.length,s=function l(c,d,f,h,p,v){v===void 0&&(v=!0);var y=f==="complex64"?2:1,m=d[0],g=d.length;if(g===0)return f==="complex64"?[kl(Tl(c)[0],0,f)]:f==="bool"?[MM(c[0])]:[c[0].toString()];if(g===1){if(m>yE){var b=El*y,x=Array.from(c.slice(0,b)),w=Array.from(c.slice((m-El)*y,m*y));return f==="complex64"&&(x=Tl(x),w=Tl(w)),["["+x.map(function(B,V){return kl(B,p[V],f)}).join(", ")+", ..., "+w.map(function(B,V){return kl(B,p[m-El+V],f)}).join(", ")+"]"]}return["["+(f==="complex64"?Tl(c):Array.from(c)).map(function(B,V){return kl(B,p[V],f)}).join(", ")+"]"]}var S=d.slice(1),C=h.slice(1),_=h[0]*y,k=[];if(m>yE){for(var E=0;E<El;E++){var A=(D=E*_)+_;k.push.apply(k,l(c.slice(D,A),S,f,C,p,!1))}for(k.push("..."),E=m-El;E<m;E++)A=(D=E*_)+_,k.push.apply(k,l(c.slice(D,A),S,f,C,p,E===m-1))}else for(E=0;E<m;E++){var D;A=(D=E*_)+_,k.push.apply(k,l(c.slice(D,A),S,f,C,p,E===m-1))}var U=g===2?",":"";for(k[0]="["+k[0]+U,E=1;E<k.length-1;E++)k[E]=" "+k[E]+U;var H=`,
`;for(E=2;E<g;E++)H+=`
`;return k[k.length-1]=" "+k[k.length-1]+"]"+(v?"":H),k}(e,t,n,o,i),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+a),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function kl(e,t,n){return gu(Array.isArray(e)?parseFloat(e[0].toFixed(Gg))+" + "+parseFloat(e[1].toFixed(Gg))+"j":Lx(e)?"'"+e+"'":n==="bool"?MM(e):parseFloat(e.toFixed(Gg)).toString(),t)}function MM(e){return e===0?"false":"true"}function Tl(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Qc=function(){function e(t,n,r){var o=this;if(this.dtype=n,this.shape=t.slice(),this.size=de(t),r!=null){var i=r.length;P(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+o.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Sp(n,this.size),this.strides=Do(t)}return e.prototype.set=function(t){for(var n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];r.length===0&&(r=[0]),P(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var i=this.locToIndex(r);this.values[i]=t},e.prototype.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.length===0&&(t=[0]);for(var r=0,o=0,i=t;o<i.length;o++){var a=i[o];if(a<0||a>=this.shape[r]){var s="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=t[t.length-1],l=0;l<t.length-1;++l)u+=this.strides[l]*t[l];return this.values[u]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return xo().makeTensor(this.values,this.shape,this.dtype)},e}(),xo=null,X=null,OM=null,ft=function(){function e(t,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=de(t),this.strides=Do(t),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),P(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(t,n){return this.throwIfDisposed(),this.reshape([t,n])},e.prototype.as3D=function(t,n,r){return this.throwIfDisposed(),this.reshape([t,n,r])},e.prototype.as4D=function(t,n,r,o){return this.throwIfDisposed(),this.reshape([t,n,r,o])},e.prototype.as5D=function(t,n,r,o,i){return this.throwIfDisposed(),this.reshape([t,n,r,o,i])},e.prototype.asType=function(t){return this.throwIfDisposed(),X.cast(this,t)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return le(this,void 0,void 0,function(){var t;return ce(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,X.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return X.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return le(this,void 0,void 0,function(){var t;return ce(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,mE(this.shape,t)]}})})},e.prototype.arraySync=function(){return mE(this.shape,this.dataSync())},e.prototype.data=function(){return le(this,void 0,void 0,function(){var t,n;return ce(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=xo().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:n=r.sent();try{return[2,n.map(function(o){return Cp(o)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var t=xo().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(n){return Cp(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return le(this,void 0,void 0,function(){var t;return ce(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,xo().read(this.dataId)];case 1:return t=n.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(xo().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(t){return t===void 0&&(t=!1),X.print(this,t)},e.prototype.reshape=function(t){return this.throwIfDisposed(),X.reshape(this,t)},e.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},e.prototype.expandDims=function(t){return t===void 0&&(t=0),X.expandDims(this,t)},e.prototype.cumsum=function(t,n,r){return t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1),X.cumsum(this,t,n,r)},e.prototype.squeeze=function(t){return this.throwIfDisposed(),X.squeeze(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),X.clone(this)},e.prototype.oneHot=function(t,n,r){return this.throwIfDisposed(),X.oneHot(this,t,n,r)},e.prototype.toString=function(t){return t===void 0&&(t=!1),ste(this.dataSync(),this.shape,this.dtype,t)},e.prototype.tile=function(t){return this.throwIfDisposed(),X.tile(this,t)},e.prototype.gather=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),X.gather(this,t,n)},e.prototype.matMul=function(t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),X.matMul(this,t,n,r)},e.prototype.dot=function(t){return this.throwIfDisposed(),X.dot(this,t)},e.prototype.norm=function(t,n,r){return t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),X.norm(this,t,n,r)},e.prototype.slice=function(t,n){return this.throwIfDisposed(),X.slice(this,t,n)},e.prototype.reverse=function(t){return this.throwIfDisposed(),X.reverse(this,t)},e.prototype.concat=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),X.concat([this].concat(t),n)},e.prototype.split=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),X.split(this,t,n)},e.prototype.stack=function(t,n){return n===void 0&&(n=0),X.stack([this,t],n)},e.prototype.unstack=function(t){return t===void 0&&(t=0),X.unstack(this,t)},e.prototype.pad=function(t,n){return n===void 0&&(n=0),X.pad(this,t,n)},e.prototype.batchNormalization=function(t,n,r,o,i){return r===void 0&&(r=.001),OM("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,n,i,o,r)},e.prototype.batchNorm=function(t,n,r,o,i){return i===void 0&&(i=.001),this.throwIfDisposed(),X.batchNorm(this,t,n,r,o,i)},e.prototype.all=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),X.all(this,t,n)},e.prototype.any=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),X.any(this,t,n)},e.prototype.logSumExp=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),X.logSumExp(this,t,n)},e.prototype.sum=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),X.sum(this,t,n)},e.prototype.prod=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),X.prod(this,t,n)},e.prototype.mean=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),X.mean(this,t,n)},e.prototype.min=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),X.min(this,t,n)},e.prototype.max=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),X.max(this,t,n)},e.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),X.argMin(this,t)},e.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),X.argMax(this,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),X.cast(this,t)},e.prototype.add=function(t){return this.throwIfDisposed(),X.add(this,t)},e.prototype.addStrict=function(t){return this.throwIfDisposed(),X.addStrict(this,t)},e.prototype.atan2=function(t){return this.throwIfDisposed(),X.atan2(this,t)},e.prototype.sub=function(t){return this.throwIfDisposed(),X.sub(this,t)},e.prototype.subStrict=function(t){return this.throwIfDisposed(),X.subStrict(this,t)},e.prototype.pow=function(t){return this.throwIfDisposed(),X.pow(this,t)},e.prototype.powStrict=function(t){return this.throwIfDisposed(),X.powStrict(this,t)},e.prototype.mul=function(t){return this.throwIfDisposed(),X.mul(this,t)},e.prototype.mulStrict=function(t){return this.throwIfDisposed(),X.mulStrict(this,t)},e.prototype.div=function(t){return this.throwIfDisposed(),X.div(this,t)},e.prototype.divNoNan=function(t){return this.throwIfDisposed(),X.divNoNan(this,t)},e.prototype.floorDiv=function(t){return this.throwIfDisposed(),X.floorDiv(this,t)},e.prototype.divStrict=function(t){return this.throwIfDisposed(),X.divStrict(this,t)},e.prototype.minimum=function(t){return this.throwIfDisposed(),X.minimum(this,t)},e.prototype.minimumStrict=function(t){return this.throwIfDisposed(),X.minimumStrict(this,t)},e.prototype.maximum=function(t){return this.throwIfDisposed(),X.maximum(this,t)},e.prototype.maximumStrict=function(t){return this.throwIfDisposed(),X.maximumStrict(this,t)},e.prototype.mod=function(t){return this.throwIfDisposed(),X.mod(this,t)},e.prototype.modStrict=function(t){return this.throwIfDisposed(),X.modStrict(this,t)},e.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),X.squaredDifferenceStrict(this,t)},e.prototype.transpose=function(t){return this.throwIfDisposed(),X.transpose(this,t)},e.prototype.notEqual=function(t){return this.throwIfDisposed(),X.notEqual(this,t)},e.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),X.notEqualStrict(this,t)},e.prototype.less=function(t){return this.throwIfDisposed(),X.less(this,t)},e.prototype.lessStrict=function(t){return this.throwIfDisposed(),X.lessStrict(this,t)},e.prototype.equal=function(t){return this.throwIfDisposed(),X.equal(this,t)},e.prototype.equalStrict=function(t){return this.throwIfDisposed(),X.equalStrict(this,t)},e.prototype.lessEqual=function(t){return this.throwIfDisposed(),X.lessEqual(this,t)},e.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),X.lessEqualStrict(this,t)},e.prototype.greater=function(t){return this.throwIfDisposed(),X.greater(this,t)},e.prototype.greaterStrict=function(t){return this.throwIfDisposed(),X.greaterStrict(this,t)},e.prototype.greaterEqual=function(t){return this.throwIfDisposed(),X.greaterEqual(this,t)},e.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),X.greaterEqualStrict(this,t)},e.prototype.logicalAnd=function(t){return this.throwIfDisposed(),X.logicalAnd(this,t)},e.prototype.logicalOr=function(t){return this.throwIfDisposed(),X.logicalOr(this,t)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),X.logicalNot(this)},e.prototype.logicalXor=function(t){return this.throwIfDisposed(),X.logicalXor(this,t)},e.prototype.where=function(t,n){return this.throwIfDisposed(),X.where(t,this,n)},e.prototype.neg=function(){return this.throwIfDisposed(),X.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),X.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),X.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),X.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),X.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),X.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),X.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),X.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),X.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),X.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),X.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),X.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),X.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),X.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),X.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),X.abs(this)},e.prototype.clipByValue=function(t,n){return this.throwIfDisposed(),X.clipByValue(this,t,n)},e.prototype.relu=function(){return this.throwIfDisposed(),X.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),X.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),X.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),X.selu(this)},e.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),X.leakyRelu(this,t)},e.prototype.prelu=function(t){return this.throwIfDisposed(),X.prelu(this,t)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),X.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),X.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),X.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),X.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),X.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),X.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),X.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),X.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),X.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),X.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),X.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),X.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),X.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),X.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),X.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),X.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),X.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),X.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),X.round(this)},e.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),X.step(this,t)},e.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),X.softmax(this,t)},e.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),X.logSoftmax(this,t)},e.prototype.resizeBilinear=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),X.image.resizeBilinear(this,t,n)},e.prototype.resizeNearestNeighbor=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),X.image.resizeNearestNeighbor(this,t,n)},e.prototype.conv1d=function(t,n,r,o,i,a){return o===void 0&&(o="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),X.conv1d(this,t,n,r,o,i,a)},e.prototype.conv2d=function(t,n,r,o,i,a){return o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),X.conv2d(this,t,n,r,o,i,a)},e.prototype.conv2dTranspose=function(t,n,r,o,i){return this.throwIfDisposed(),X.conv2dTranspose(this,t,n,r,o,i)},e.prototype.depthwiseConv2D=function(t,n,r,o,i,a){return o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),X.depthwiseConv2d(this,t,n,r,o,i,a)},e.prototype.separableConv2d=function(t,n,r,o,i,a){return i===void 0&&(i=[1,1]),a===void 0&&(a="NHWC"),this.throwIfDisposed(),X.separableConv2d(this,t,n,r,o,i,a)},e.prototype.avgPool=function(t,n,r,o){return this.throwIfDisposed(),X.avgPool(this,t,n,r,o)},e.prototype.maxPool=function(t,n,r,o){return this.throwIfDisposed(),X.maxPool(this,t,n,r,o)},e.prototype.localResponseNormalization=function(t,n,r,o){return t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5),X.localResponseNormalization(this,t,n,r,o)},e.prototype.pool=function(t,n,r,o,i){return this.throwIfDisposed(),X.pool(this,t,n,r,o,i)},e.prototype.variable=function(t,n,r){return t===void 0&&(t=!0),this.throwIfDisposed(),xo().makeVariable(this,t,n,r)},e.prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),X.unsortedSegmentSum(this,t,n)},e.prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),X.batchToSpaceND(this,t,n)},e.prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),X.spaceToBatchND(this,t,n)},e.prototype.topk=function(t,n){return t===void 0&&(t=1),n===void 0&&(n=!0),this.throwIfDisposed(),X.topk(this,t,n)},e.prototype.stridedSlice=function(t,n,r,o,i,a,s,u){return o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),X.stridedSlice(this,t,n,r,o,i,a,s,u)},e.prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),X.depthToSpace(this,t,n)},e.prototype.fft=function(){return this.throwIfDisposed(),X.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),X.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),X.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),X.spectral.irfft(this)},e}();Object.defineProperty(ft,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var bE,l1,c1,d1,f1,Uu=function(e){function t(n,r,o,i){var a=e.call(this,n.shape,n.dtype,n.dataId,i)||this;return a.trainable=r,a.name=o,a}return oo(t,e),t.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!qt(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");xo().disposeTensor(this),this.dataId=n.dataId,xo().incRef(this,null)},t.prototype.dispose=function(){xo().disposeVariable(this),this.isDisposedInternal=!0},t}(ft);Object.defineProperty(Uu,Symbol.hasInstance,{value:function(e){return e instanceof ft&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(bE||(bE={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(l1||(l1={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(c1||(c1={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(d1||(d1={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(f1||(f1={}));var ute={float32:d1,int32:l1,bool:c1,complex64:f1};function tn(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast "+e+" with "+t)}return ute[e][t]}function qg(e){return tn(e,"int32")}function gt(e,t){if(e.dtype===t.dtype)return[e,t];var n=tn(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function lte(e,t){P(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function NM(e){var t=[];return function n(r,o,i){if(r!=null){if(r instanceof ft)return void o.push(r);if(a=r,!(!Array.isArray(a)&&typeof a!="object")){var a,s=r;for(var u in s){var l=s[u];i.has(l)||(i.add(l),n(l,o,i))}}}}(e,t,new Set),t}var Kg,xE=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),cte=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new xE}return e.prototype.ready=function(){return le(this,void 0,void 0,function(){var t,n,r;return ce(this,function(o){switch(o.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),n=0,o.label=1;case 1:return n<t.length?(r=t[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return o.sent()?[4,this.setBackend(r)]:[3,4];case 3:return o.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),n=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,n,r){return r===void 0&&(r=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:n,priority:r},!0)},e.prototype.setBackend=function(t){return le(this,void 0,void 0,function(){var n,r,o;return ce(this,function(i){switch(i.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return o=i.sent(),[3,3];case 2:o=r,i.label=3;case 3:if(!o)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new ite(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this;pE(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var n=this;pE(t).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[t])})},e.prototype.initializeBackend=function(t){var n=this,r=this.registryFactory[t];if(r==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var o=r.factory();if(Promise.resolve(o)===o){var i=++this.pendingBackendInitId,a=o.then(function(s){return!(i<n.pendingBackendInitId)&&(n.registry[t]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return!(i<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[t]=o,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return t.registryFactory[r].priority-t.registryFactory[n].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),n=0;n<t.length;n++){var r=t[n],o=this.initializeBackend(r),i=o.success,a=o.asyncInit;if(a||i)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,n){var r=this.state.tensorInfo.get(n),o=r.backend,i=this.readSync(n);o.disposeData(n),r.backend=t,t.move(n,i,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,n){var r,o=this,i=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun(function(){return o.startScope(i)},function(){return o.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},e.prototype.scopedRun=function(t,n,r){t();try{var o=r();return n(),o}catch(i){throw n(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var n=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),r={x:t};return this.addTapeNode(this.state.activeScope.name,r,[n],function(o){return{x:function(){return o.toFloat()}}},[]),n},e.prototype.runKernel=function(t,n,r,o,i){return this.runKernelFunc(null,n,null,t,r,o,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,n,r){var o=this.backend.numDataIds(),i=0;r.forEach(function(u){i+=u.dtype==="complex64"?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=o-n-i-a;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+t+"'")},e.prototype.runKernelFunc=function(t,n,r,o,i,a,s){var u,l=this;a===void 0&&(a=[]),s===void 0&&(s=[]);var c=[],d=this.isTapeOn();o==null&&(o=this.state.activeScope!=null?this.state.activeScope.name:"");var f,h=function(g){d&&(c=g.map(function(b){return l.keep(l.clone(b))}))},p=this.state.numBytes,v=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var y,m=EM(o,this.backendName);return f=m!=null?function(){var g=l.backend.numDataIds();y=m.kernelFunc({inputs:n,attrs:i,backend:l.backend});var b=Array.isArray(y)?y:[y];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(o,g,b);var x=b.map(function(S){var C=S.dataId,_=S.shape,k=S.dtype;return l.makeTensorFromDataId(C,_,k)}),w=x.filter(function(S,C){return s[C]});return h((a||[]).slice().concat(w)),x}:function(){var g=l.backend.numDataIds();y=l.tidy(function(){return t(l.backend,h)});var b=Array.isArray(y)?y:[y];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(o,g,b),b},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(o,n,function(){return f()}):f()}),d&&this.addTapeNode(o,n,u,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:o,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-v,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(g){return n[g].shape}),outputShapes:u.map(function(g){return g.shape})}),Array.isArray(y)?u:u[0]},e.prototype.makeTensor=function(t,n,r,o){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;var i=t;r==="string"&&Lx(t[0])&&(i=t.map(function(c){return rte(c)}));var a=o.write(i,n,r),s=new ft(n,r,a,this.nextTensorId());if(this.incRef(s,o),r==="string"){var u=this.state.tensorInfo.get(a),l=ete(i);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},e.prototype.makeTensorFromDataId=function(t,n,r,o){var i=new ft(n,r=r||"float32",t,this.nextTensorId());return this.incRef(i,o),i},e.prototype.makeVariable=function(t,n,r,o){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),o!=null&&o!==t.dtype&&(t=t.asType(o));var i=new Uu(t,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(t,n){var r=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var o=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(o=t.size*PM(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:o,refCount:0}),this.state.numBytes+=o}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof Uu||this.track(t)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(t.dataId);n.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var n=this.state.registeredVariables[t];this.disposeVariable(n)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return le(this,void 0,void 0,function(){var n,r;return ce(this,function(o){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,n,r,o,i){var a=this,s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:i},u=Gee(t);u!=null&&(o=u.gradFunc),o!=null&&(s.gradient=function(l){return l=l.map(function(c,d){if(c==null){var f=r[d],h=Pd(f.size,f.dtype);return a.makeTensor(h,f.shape,f.dtype)}return c}),o(l.length>1?l:l[0],i)}),this.state.activeTape.push(s)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n},e.prototype.endScope=function(t){for(var n=this,r=NM(t),o=new Set(r.map(function(u){return u.id})),i=0;i<this.state.activeScope.track.length;i++){var a=this.state.activeScope.track[i];a.kept||o.has(a.id)||a.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||n.track(u)})},e.prototype.gradients=function(t,n,r,o){var i=this;if(o===void 0&&(o=!1),P(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var a=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});P(a instanceof ft,function(){return"The result y returned by f() must be a tensor."});var s=function(u,l,c){for(var d={},f={},h=0;h<l.length;h++)d[l[h].id]=!0;for(h=0;h<u.length;h++){var p=(S=u[h]).inputs;for(var v in p){for(var y=p[v],m=!1,g=0;g<l.length;g++)if(d[y.id]){S.outputs.forEach(function(E){return d[E.id]=!0}),m=!0,f[S.id]=!0;break}if(m)break}}var b={};b[c.id]=!0;var x={};for(h=u.length-1;h>=0;h--)for(p=(S=u[h]).inputs,g=0;g<S.outputs.length;g++)if(b[S.outputs[g].id]){for(var v in p)b[p[v].id]=!0,x[S.id]=!0;break}var w=[];for(h=0;h<u.length;h++){var S;if(f[(S=u[h]).id]&&x[S.id]){var C={};for(var v in S.inputs){var _=S.inputs[v];d[_.id]&&(C[v]=_)}var k=Object.assign({},S);k.inputs=C,k.outputs=S.outputs,w.push(k)}}return w}(this.state.activeTape,n,a);if(!o&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,l,c={};c[a.id]=r??(u=a.shape,l=AM(de(u),"float32"),z.makeTensor(l,u,"float32")),function(f,h,p){for(var v=function(m){var g=h[m],b=[];if(g.outputs.forEach(function(C){var _=f[C.id];_!=null?b.push(_):b.push(null)}),g.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+g.kernelName+".");var x=g.gradient(b),w=function(C){if(!(C in x))throw new Error("Cannot backprop through input "+C+". Available gradients found: "+Object.keys(x)+".");var _=p(function(){return x[C]()});if(_.dtype!=="float32")throw new Error("Error in gradient for op "+g.kernelName+". The gradient of input "+C+" must have 'float32' dtype, but has '"+_.dtype+"'");var k=g.inputs[C];if(!qt(_.shape,k.shape))throw new Error("Error in gradient for op "+g.kernelName+". The gradient of input '"+C+"' has shape '"+_.shape+"', which does not match the shape of the input '"+k.shape+"'");if(f[k.id]==null)f[k.id]=_;else{var E=f[k.id];f[k.id]=E.add(_),E.dispose()}};for(var S in g.inputs)w(S)},y=h.length-1;y>=0;y--)v(y)}(c,s,function(f){return i.tidy(f)});var d=n.map(function(f){return c[f.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(f){for(var h=0,p=f.saved;h<p.length;h++)p[h].dispose()}),i.state.activeTape=null),{value:a,grads:d}})},e.prototype.customGrad=function(t){var n=this;return P(s1(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];P(o.every(function(s){return s instanceof ft}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return o.forEach(function(s,u){a[u]=s}),n.runKernelFunc(function(s,u){return P((r=t.apply(void 0,o.concat([u]))).value instanceof ft,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),P(s1(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},a,function(s,u){var l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];P(c.length===o.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),P(c.every(function(f){return f instanceof ft}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var d={};return c.forEach(function(f,h){d[h]=function(){return f}}),d})}},e.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},e.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},e.prototype.time=function(t){return le(this,void 0,void 0,function(){var n,r;return ce(this,function(o){switch(o.label){case 0:return n=vo(),[4,this.backend.time(t)];case 1:return(r=o.sent()).wallMs=vo()-n,[2,r]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new xE,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),z=function(){var e=function(){if(Kg==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}Kg=n}return Kg}();if(e._tfengine==null){var t=new Uee(e);e._tfengine=new cte(t)}return function(n){_M=n}(e._tfengine.ENV),xo=function(){return e._tfengine},e._tfengine}();function FM(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var qo=Y();qo.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),qo.registerFlag("IS_BROWSER",function(){return FM()}),qo.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),qo.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),qo.registerFlag("PROD",function(){return!1}),qo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return qo.getBool("DEBUG")}),qo.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),qo.registerFlag("IS_TEST",function(){return!1});var Jc,ir,rr,Ta={},Xg={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function dte(e,t){Ta[e]=t}function Wo(e){e in Ta||(Ta[e]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(o){if(typeof OffscreenCanvas<"u"&&o===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return r.addEventListener("webglcontextlost",function(o){o.preventDefault(),delete Ta[n]},!1),n===1?r.getContext("webgl",Xg)||r.getContext("experimental-webgl",Xg):r.getContext("webgl2",Xg)}(e));var t=Ta[e];return t.isContextLost()?(delete Ta[e],Wo(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Ta[e])}function Kv(e,t){return[t,e]}function lc(e){var t=de(e);return a1(Math.ceil(t/4))}function Id(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function $x(e,t){var n,r,o,i,a,s,u,l,c,d=e;return Y().getNumber("WEBGL_VERSION")===2?(n=d.R32F,r=d.R16F,o=d.RGBA16F,i=d.RGBA32F,a=d.RED,s=4,u=1,l=d.HALF_FLOAT,c=d.FLOAT):(n=e.RGBA,r=e.RGBA,o=e.RGBA,i=d.RGBA,a=e.RGBA,s=4,u=4,l=t!=null?t.HALF_FLOAT_OES:null,c=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function fe(e,t,n){var r=n();return t&&function(o){var i=o.getError();if(i!==o.NO_ERROR)throw new Error("WebGL Error: "+vte(o,i))}(e),r}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(Jc||(Jc={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(ir||(ir={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(rr||(rr={}));var fte=596e-10,hte=65504;function pte(e){return!!(Y().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||fte<Math.abs(e)&&Math.abs(e)<hte)}function vte(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Df(e,t,n){return gi(e,t,function(){return e.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function mte(e,t,n){var r=gi(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(fe(e,t,function(){return e.shaderSource(r,n)}),fe(e,t,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function gte(e,t,n){var r=gi(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(fe(e,t,function(){return e.shaderSource(r,n)}),fe(e,t,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw function(o,i){var a=yte.exec(i);if(a==null)return console.log("Couldn't parse line number in error: "+i),void console.log(o);for(var s=+a[1],u=o.split(`
`),l=u.length.toString().length+2,c=u.map(function(y,m){return gu((m+1).toString(),l)+y}),d=0,f=0;f<c.length;f++)d=Math.max(c[f].length,d);var h=c.slice(0,s-1),p=c.slice(s-1,s),v=c.slice(s);console.log(h.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+gu(p[0],d),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(v.join(`
`))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Yg,Qg,yte=/ERROR: [0-9]+:([0-9]+):/g;function bte(e,t){return gi(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function xte(e,t,n){if(fe(e,t,function(){return e.linkProgram(n)}),e.getProgramParameter(n,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Jg(e,t,n){if(fe(e,t,function(){return e.validateProgram(n)}),e.getProgramParameter(n,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function wte(e,t,n){var r=gi(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return fe(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),fe(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function Ste(e,t,n){var r=gi(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return fe(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),fe(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function Cte(e,t){return gi(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function _te(e,t){var n=Y().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function Ete(e,t){return gi(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function wE(e,t,n,r,o,i,a,s){var u=e.getAttribLocation(n,r);return u!==-1&&(fe(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,o)}),fe(e,t,function(){return e.vertexAttribPointer(u,i,e.FLOAT,!1,a,s)}),fe(e,t,function(){return e.enableVertexAttribArray(u)}),!0)}function kte(e,t,n,r){Ate(e,r),fe(e,t,function(){return e.activeTexture(e.TEXTURE0+r)}),fe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)})}function Tte(e,t,n,r){return gi(e,t,function(){return e.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function Rte(e,t,n){return e.getUniformLocation(t,n)}function Pte(e,t,n,r,o,i){fe(e,t,function(){return kte(e,t,r,i)}),fe(e,t,function(){return e.uniform1i(o,i)})}function Zg(e,t,n,r){fe(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),fe(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)})}function SE(e,t,n){fe(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),fe(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function Mf(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Ite(e,t))}function Ite(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function gi(e,t,n,r){var o=fe(e,t,function(){return n()});if(o==null)throw new Error(r);return o}function Ate(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function _p(e,t){return t===void 0&&(t=2),de(e.slice(0,e.length-t))}function Ep(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function e0(e){var t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[_p(e)].concat(Ep(e))),t}function Dte(e,t){var n;t===void 0&&(t=!1);var r=Y().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,(e=e.map(function(l,c){return c>=e.length-2?RM(e[c]):e[c]})).length===1&&(e=[2,e[0]])),e.length!==2){var o=Aa(e);e=o.newShape}var i=de(e);if(e.length<=1&&i<=r)return[1,i];if(e.length===2&&e[0]<=r&&e[1]<=r)return e;if(e.length===3&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var a=_p(e),s=2,u=2;return e.length&&(s=(n=Ep(e))[0],u=n[1]),a1(i=a*(s/2)*(u/2)).map(function(l){return 2*l})}return a1(i)}function Of(e){return e%2==0}function Nf(e,t){if(qt(e=e.slice(-2),t=t.slice(-2))||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r||Of(n)&&Of(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&Of(e[0])&&Of(t[0])}function Mte(e){if(Yg==null){var t=Wo(e);Yg=t.getParameter(t.MAX_TEXTURE_SIZE)}return Yg}function Ote(e){if(Qg==null){var t=Wo(e);Qg=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Qg)}function Nte(e){if(e===0)return 0;var t=Wo(e);return Mr(t,"EXT_disjoint_timer_query_webgl2")&&e===2?2:Mr(t,"EXT_disjoint_timer_query")?1:0}function Mr(e,t){return e.getExtension(t)!=null}function CE(e){try{if(Wo(e)!=null)return!0}catch{return!1}return!1}function Fte(e){if(e===0)return!1;var t=Wo(e);if(e===1){if(!Mr(t,"OES_texture_float"))return!1}else if(!Mr(t,"EXT_color_buffer_float"))return!1;return h1(t)}function Bte(e){if(e===0)return!1;var t=Wo(e);if(e!==1){if(Mr(t,"EXT_color_buffer_float"))return h1(t);if(Mr(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(r,o){var i=$x(r,o),a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(a),r.deleteFramebuffer(s),u}(t,n)}return!1}return!!Mr(t,"OES_texture_float")&&!!Mr(t,"WEBGL_color_buffer_float")&&h1(t)}function h1(e){var t=$x(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function Lte(e){return e===2&&Wo(e).fenceSync!=null}var Se=Y();function BM(e){Y().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function ie(e,t){return z.tidy(e,t)}function Un(e){NM(e).forEach(function(t){return t.dispose()})}function $te(e){return z.keep(e)}function kp(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Y().getBool("IS_TEST")||console.warn.apply(console,e)}function pa(e,t){var n=e;if(Ao(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Ao(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&Y().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function o(i,a,s){if(s=s||[],!Array.isArray(i)&&!Ao(i))return void P(a.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+a[0]+" elements"});P(a.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),P(i.length===a[0],function(){return"Element arr["+s.join("][")+"] should have "+a[0]+" elements, but has "+i.length+" elements"});for(var u=a.slice(1),l=0;l<i.length;++l)o(i[l],u,s.concat(l))}(e,r,[]),r}function _E(e,t,n,r){if(e!=null&&(e!=="numeric"&&e!==t||e==="numeric"&&t==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function R(e,t,n,r){if(r===void 0&&(r="numeric"),e instanceof ft)return _E(r,e.dtype,t,n),e;var o=Rd(e);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),_E(r,o,t,n),e==null||!Ao(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var a=pa(e,o);Ao(e)||Array.isArray(e)||(e=[e]);var s=o!=="string"?IM(e,o,Y().getBool("DEBUG")):ju(e,[],!0);return z.makeTensor(s,a,o)}function Tp(e,t,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(o,i){return R(o,t+"["+i+"]",n)},r)}function LM(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function zte(e,t,n){for(var r=e.length+t.length,o=[],i=0,a=0,s=0;s<r;s++)n.indexOf(s)===-1?o.push(e[i++]):o.push(t[a++]);return o}function fn(e,t){for(var n=[],r=e.length,o=0;o<r;o++)t.indexOf(o)===-1&&n.push(e[o]);return[n,t.map(function(i){return e[i]})]}function qn(e,t){return zte(e,t.map(function(n){return 1}),t)}function tr(e,t,n){P(LM(t,n),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."})}function Vo(e,t){if(LM(e,t))return null;for(var n=[],r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(function(o){return n.push(o)}),n}function zx(e){return e.map(function(t,n){return[n,t]}).sort(function(t,n){return t[1]-n[1]}).map(function(t){return t[0]})}function jo(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function Wte(e,t){var n=e[0].length;e.forEach(function(o,i){P(o.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+n+")"})}),P(t>=0&&t<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=e[0];e.forEach(function(o,i){for(var a=0;a<n;a++)P(a===t||o[a]===r[a],function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+o+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."})})}function Hu(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function N(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];z.startScope(n);try{var s=r.apply(void 0,i);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),z.endScope(s),s}catch(u){throw z.endScope(null),u}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}Se.registerFlag("HAS_WEBGL",function(){return Se.getNumber("WEBGL_VERSION")>0}),Se.registerFlag("WEBGL_VERSION",function(){return CE(2)?2:CE(1)?1:0}),Se.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Se.get("WEBGL_VERSION")===2}),Se.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Se.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Se.registerFlag("WEBGL_PACK",function(){return Se.getBool("HAS_WEBGL")}),Se.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Se.getBool("WEBGL_PACK")}),Se.registerFlag("WEBGL_PACK_CLIP",function(){return Se.getBool("WEBGL_PACK")}),Se.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Se.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Se.getBool("WEBGL_PACK")}),Se.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Se.getBool("WEBGL_PACK")}),Se.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Se.getBool("WEBGL_PACK")}),Se.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Se.getBool("WEBGL_PACK")}),Se.registerFlag("WEBGL_PACK_REDUCE",function(){return Se.getBool("WEBGL_PACK")}),Se.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Se.getBool("WEBGL_PACK")}),Se.registerFlag("WEBGL_CONV_IM2COL",function(){return Se.getBool("WEBGL_PACK")}),Se.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return Mte(Se.getNumber("WEBGL_VERSION"))}),Se.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return Ote(Se.getNumber("WEBGL_VERSION"))}),Se.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=Se.getNumber("WEBGL_VERSION");return e===0?0:Nte(e)}),Se.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Se.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),Se.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return Fte(Se.getNumber("WEBGL_VERSION"))}),Se.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Se.getBool("WEBGL_FORCE_F16_TEXTURES")&&Se.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Se.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return Bte(Se.getNumber("WEBGL_VERSION"))}),Se.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return Lte(Se.getNumber("WEBGL_VERSION"))}),Se.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Se.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),OM=BM;var en=N({complex_:function(e,t){var n=R(e,"real","complex"),r=R(t,"imag","complex");return Xe(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),z.runKernelFunc(function(o){return o.complex(n,r)},{$real:n,$imag:r})}}),Ir=N({real_:function(e){var t=R(e,"input","real");return z.runKernelFunc(function(n){return n.real(t)},{$input:t})}}),wo=N({imag_:function(e){var t=R(e,"input","imag");return z.runKernelFunc(function(n){return n.imag(t)},{$input:t})}});function rn(e,t,n){return va(e,t,pa(e,n),n)}function va(e,t,n,r){if(r==null&&(r=Rd(e)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ao(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){DM(t);var o=de(t),i=de(n);P(o===i,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+o+" values but has "+i});for(var a=0;a<n.length;++a){var s=n[a],u=a!==n.length-1||s!==de(t.slice(a));P(n[a]===t[a]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "})}}return Ao(e)||Array.isArray(e)||(e=[e]),t=t||n,e=r!=="string"?IM(e,r,Y().getBool("DEBUG")):ju(e,[],!0),z.makeTensor(e,t,r)}function re(e,t){if((Ao(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Ao(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return va(e,[],[],t)}function It(e,t){el(e);var n=pa(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return va(e,null,n,t)}function ea(e,t,n){if(el(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=pa(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return va(e,t,r,n)}function Wx(e,t,n){if(el(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=pa(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return va(e,t,r,n)}function On(e,t,n){if(el(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=pa(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return va(e,t,r,n)}function Vte(e,t,n){if(el(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=pa(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return va(e,t,r,n)}function jte(e,t,n){if(el(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=pa(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return va(e,t=t||r,r,n)}function Ute(e,t,n,r){return t===void 0&&(t=!0),z.makeVariable(e,t,n,r)}function tl(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=tl(e,"float32"),r=it(e,"float32");return en(n,r)}var o=AM(de(e),t);return z.makeTensor(o,e,t)}function it(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=it(e,"float32"),r=it(e,"float32");return en(n,r)}var o=Pd(de(e),t);return z.makeTensor(o,e,t)}function Mo(e,t,n){return z.runKernelFunc(function(r){return r.fill(e,t,n)},{})}function Hte(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return z.runKernelFunc(function(r){return r.linspace(e,t,n)},{})}function Rp(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return it([0],r);var o=Pd(Math.abs(Math.ceil((t-e)/n)),r);t<e&&n===1&&(n=-1),o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+n;return It(o,r)}var $M=N({onesLike_:function(e){var t=R(e,"x","onesLike");if(t.dtype==="complex64"){var n=$M(Ir(t)),r=Be(wo(t));return en(n,r)}return z.runKernelFunc(function(o){return o.onesLike(t)},{$x:t},function(o,i){return{$x:function(){return Be(o)}}})}}),Be=N({zerosLike_:function(e){var t=R(e,"x","zerosLike");return z.runKernelFunc(function(n){return n.zerosLike(t)},{$x:t},function(n,r){return{$x:function(){return Be(n)}}})}}),Ft=N({concat_:function(e,t){t===void 0&&(t=0),P(e.length>=1,function(){return"Pass at least one tensor to concat"});var n=Tp(e,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),t=Wt(t,n[0].shape)[0];var r=Hu(n.map(function(s){return s.shape}),t);if(de(r)===0)return rn([],r);if((n=n.filter(function(s){return s.size>0})).length===1)return n[0];var o=n.map(function(s){return s.shape});Wte(o,t);var i=n,a={axis:t};return z.runKernelFunc(function(s){return s.concat(n,t)},i,function(s){var u=o.map(function(l){return l[t]});return Vx(s,u,t).map(function(l){return function(){return l}})},"Concat",a)}}),Gte=N({concat1d_:function(e){return Ft(e,0)}}),qte=N({concat2d_:function(e,t){return Ft(e,t)}}),Kte=N({concat3d_:function(e,t){return Ft(e,t)}}),Xte=N({concat4d_:function(e,t){return Ft(e,t)}}),Vx=N({split_:function(e,t,n){n===void 0&&(n=0);var r,o=R(e,"x","split");return n=Wt(n,o.shape)[0],typeof t=="number"?(P(o.shape[n]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(o.shape[n]/t)):(P(o.shape[n]===t.reduce(function(i,a){return i+a}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),z.runKernelFunc(function(i){return i.split(o,r,n)},{$x:o},function(i){return{$x:function(){return Ft(i,n)}}})}});function ls(e,t){return e(t={exports:{}},t.exports),t.exports}var Yte=ls(function(e){(function(t,n,r){function o(s){var u,l=this,c=(u=4022871197,function(d){d=d.toString();for(var f=0;f<d.length;f++){var h=.02519603282416938*(u+=d.charCodeAt(f));h-=u=h>>>0,u=(h*=u)>>>0,u+=4294967296*(h-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var d=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=d-(l.c=0|d)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(s),l.s0<0&&(l.s0+=1),l.s1-=c(s),l.s1<0&&(l.s1+=1),l.s2-=c(s),l.s2<0&&(l.s2+=1),c=null}function i(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function a(s,u){var l=new o(s),c=u&&u.state,d=l.next;return d.int32=function(){return 4294967296*l.next()|0},d.double=function(){return d()+11102230246251565e-32*(2097152*d()|0)},d.quick=d,c&&(typeof c=="object"&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.alea=a})(0,e,!1)}),Qte=ls(function(e){(function(t,n,r){function o(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var d=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^d^d>>>8},s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function a(s,u){var l=new o(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xor128=a})(0,e,!1)}),Jte=ls(function(e){(function(t,n,r){function o(s){var u=this,l="";u.next=function(){var d=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^d^d<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function i(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function a(s,u){var l=new o(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xorwow=a})(0,e,!1)}),Zte=ls(function(e){(function(t,n,r){function o(s){var u=this;u.next=function(){var l,c,d=u.x,f=u.i;return l=d[f],c=(l^=l>>>7)^l<<24,c^=(l=d[f+1&7])^l>>>10,c^=(l=d[f+3&7])^l>>>3,c^=(l=d[f+4&7])^l<<7,l=d[f+7&7],c^=(l^=l<<13)^l<<9,d[f]=c,u.i=f+1&7,c},function(l,c){var d,f=[];if(c===(0|c))f[0]=c;else for(c=""+c,d=0;d<c.length;++d)f[7&d]=f[7&d]<<15^c.charCodeAt(d)+f[d+1&7]<<13;for(;f.length<8;)f.push(0);for(d=0;d<8&&f[d]===0;++d);for(d==8?f[7]=-1:f[d],l.x=f,l.i=0,d=256;d>0;--d)l.next()}(u,s)}function i(s,u){return u.x=s.x.slice(),u.i=s.i,u}function a(s,u){s==null&&(s=+new Date);var l=new o(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(c.x&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xorshift7=a})(0,e,!1)}),ene=ls(function(e){(function(t,n,r){function o(s){var u=this;u.next=function(){var l,c,d=u.w,f=u.X,h=u.i;return u.w=d=d+1640531527|0,c=f[h+34&127],l=f[h=h+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,c=f[h]=c^l,u.i=h,c+(d^d>>>16)|0},function(l,c){var d,f,h,p,v,y=[],m=128;for(c===(0|c)?(f=c,c=null):(c+="\0",f=0,m=Math.max(m,c.length)),h=0,p=-32;p<m;++p)c&&(f^=c.charCodeAt((p+32)%c.length)),p===0&&(v=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,p>=0&&(v=v+1640531527|0,h=(d=y[127&p]^=f+v)==0?h+1:0);for(h>=128&&(y[127&(c&&c.length||0)]=-1),h=127,p=512;p>0;--p)f=y[h+34&127],d=y[h=h+1&127],f^=f<<13,d^=d<<17,f^=f>>>15,d^=d>>>12,y[h]=f^d;l.w=v,l.X=y,l.i=h}(u,s)}function i(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function a(s,u){s==null&&(s=+new Date);var l=new o(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(c.X&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.xor4096=a})(0,e,!1)}),tne=ls(function(e){(function(t,n,r){function o(s){var u=this,l="";u.next=function(){var d=u.b,f=u.c,h=u.d,p=u.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,u.b=d=d<<20^d>>>12^f,u.c=f=f-h|0,u.d=h<<16^f>>>16^p,u.a=p-d|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var c=0;c<l.length+20;c++)u.b^=0|l.charCodeAt(c),u.next()}function i(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function a(s,u){var l=new o(s),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var f=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(f===0);return f},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&i(c,l),d.state=function(){return i(l,{})}),d}n&&n.exports?n.exports=a:r&&r.amd?r(function(){return a}):this.tychei=a})(0,e,!1)}),Ra=ls(function(e){(function(t,n){var r,o=this,i=256,a=6,s="random",u=n.pow(i,a),l=n.pow(2,52),c=2*l,d=i-1;function f(m,g,b){var x=[],w=v(function _(k,E){var A,D=[],U=typeof k;if(E&&U=="object")for(A in k)try{D.push(_(k[A],E-1))}catch{}return D.length?D:U=="string"?k:k+"\0"}((g=g==1?{entropy:!0}:g||{}).entropy?[m,y(t)]:m??function(){try{var _;return r&&(_=r.randomBytes)?_=_(i):(_=new Uint8Array(i),(o.crypto||o.msCrypto).getRandomValues(_)),y(_)}catch{var k=o.navigator,E=k&&k.plugins;return[+new Date,o,E,o.screen,y(t)]}}(),3),x),S=new h(x),C=function(){for(var _=S.g(a),k=u,E=0;_<l;)_=(_+E)*i,k*=i,E=S.g(1);for(;_>=c;)_/=2,k/=2,E>>>=1;return(_+E)/k};return C.int32=function(){return 0|S.g(4)},C.quick=function(){return S.g(4)/4294967296},C.double=C,v(y(S.S),t),(g.pass||b||function(_,k,E,A){return A&&(A.S&&p(A,S),_.state=function(){return p(S,{})}),E?(n[s]=_,k):_})(C,w,"global"in g?g.global:this==n,g.state)}function h(m){var g,b=m.length,x=this,w=0,S=x.i=x.j=0,C=x.S=[];for(b||(m=[b++]);w<i;)C[w]=w++;for(w=0;w<i;w++)C[w]=C[S=d&S+m[w%b]+(g=C[w])],C[S]=g;(x.g=function(_){for(var k,E=0,A=x.i,D=x.j,U=x.S;_--;)k=U[A=d&A+1],E=E*i+U[d&(U[A]=U[D=d&D+k])+(U[D]=k)];return x.i=A,x.j=D,E})(i)}function p(m,g){return g.i=m.i,g.j=m.j,g.S=m.S.slice(),g}function v(m,g){for(var b,x=m+"",w=0;w<x.length;)g[d&w]=d&(b^=19*g[d&w])+x.charCodeAt(w++);return y(g)}function y(m){return String.fromCharCode.apply(0,m)}if(n["seed"+s]=f,v(n.random(),t),e.exports){e.exports=f;try{r=require("crypto")}catch{}}})([],Math)});Ra.alea=Yte,Ra.xor128=Qte,Ra.xorwow=Jte,Ra.xorshift7=Zte,Ra.xor4096=ene,Ra.tychei=tne;var Xv=Ra.alea,jx=function(){function e(t,n,r,o,i){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=i||Math.random();this.random=Xv(a.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var n,r,o=!1;!o;){var i=void 0,a=void 0,s=void 0;do s=(i=2*this.random()-1)*i+(a=2*this.random()-1)*a;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*i*u,r=this.mean+this.stdDev*a*u,this.truncated&&!this.isValidTruncated(n)||(o=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e}(),nne=function(){function e(t,n,r,o){this.alpha=t,this.beta=1/n,this.dtype=r;var i=o||Math.random();this.randu=Xv(i.toString()),this.randn=new jx(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,n,r,o,i,a;;){do o=this.randn.nextValue(),a=1+this.c*o;while(a<=0);if(a*=a*a,n=1-.331*(t=o*o)*t,r=.5*t+this.d*(1-a+Math.log(a)),(i=this.randu())<n||Math.log(i)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e}(),rne=function(){function e(t,n,r,o){var i=this;if(t===void 0&&(t=0),n===void 0&&(n=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=t,this.range=n-t,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+n+" <= 1 and dtype is not float");this.random=Xv(o)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function Ee(e,t,n){return t===void 0&&(t="float32"),t=t||"float32",DM(e),new Qc(e,t,n)}function one(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}var zM=N({batchToSpaceND_:function(e,t,n){var r=R(e,"x","batchToSpaceND"),o=t.reduce(function(i,a){return i*a});return P(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),P(n.length===t.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length}),P(r.shape[0]%o==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+o}),z.runKernelFunc(function(i){return i.batchToSpaceND(r,t,n)},{$x:r},function(i){return{$x:function(){return i.spaceToBatchND(t,n)}}})}}),ine=N({broadcastTo_:function(e,t){var n=R(e,"broadcastTo","x"),r=n.shape;if(t.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var o=n.shape.slice();o.length<t.length;)o.unshift(1);n=n.reshape(o)}for(var i=Array.from(t),a=t.length-1;a>=0;a--)if(n.shape[a]===t[a])i[a]=1;else if(n.shape[a]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=i.map(function(u,l){return u>1?l:-1}).filter(function(u){return u>=0});return s.length===0?n.clone():z.runKernelFunc(function(u){return u.tile(n,i)},{input:n},function(u){return{input:function(){return u.sum(s,!0)}}})}}),ane=N({cast_:function(e,t){var n=R(e,"x","cast");if(!Jee(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:t};return z.runKernelFunc(function(o){return o.cast(n,t)},{x:n},function(o){return{x:function(){return o.clone()}}},"Cast",r)}}),sne=N({clone_:function(e){var t=R(e,"x","clone",null);return z.runKernelFunc(function(){return z.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(n){return{$x:function(){return n.toFloat()}}})}}),une=N({cumsum_:function(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var o=R(e,"x","cumsum"),i=Vo([t|=0],o.rank),a=o;i!=null&&(a=o.transpose(i));var s=jo(1,o.rank)[0],u=z.runKernelFunc(function(l){return l.cumsum(a,s,n,r)},{permutedX:a},function(l){return{permutedX:function(){return l.cumsum(t,n,!r)}}});return i!=null&&(u=u.transpose(i)),u}}),lne=N({depthToSpace_:function(e,t,n){n===void 0&&(n="NHWC");var r=R(e,"x","depthToSpace"),o=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];return P(o*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+t+`  for depthToSpace with input shape
      `+r.shape}),P(i*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+t+` for depthToSpace with input shape
          `+r.shape}),P(a%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+a+" for depthToSpace with input shape "+r.shape}),z.runKernelFunc(function(s){return s.depthToSpace(r,t,n)},{$x:r})}}),Pr=N({expandDims_:function(e,t){t===void 0&&(t=0);var n=R(e,"x","expandDims",null);P(t<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return t<0&&(P(-(n.rank+1)<=t,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),t=n.rank+t+1),r.splice(t,0,1),Zr(n,r)}}),WM=N({eye_:function(e,t,n,r){r===void 0&&(r="float32"),t==null&&(t=e);for(var o=Ee([e,t],r),i=e<=t?e:t,a=0;a<i;++a)o.set(1,a,a);var s=o.toTensor().as2D(e,t);if(n==null)return s;if(n.length===1)return yu(Pr(s,0),[n[0],1,1]);if(n.length===2)return yu(Pr(Pr(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return yu(Pr(Pr(Pr(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),cne=N({multinomial_:function(e,t,n,r){r===void 0&&(r=!1);var o=R(e,"logits","multinomial"),i=o.size,a=o.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var s=a===1?o.as2D(1,-1):o,u=z.runKernelFunc(function(l){return l.multinomial(s,r,t,n)},{logits2D:s});return a===1?u.as1D():u}}),p1=N({oneHot_:function(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var o=R(e,"indices","oneHot","int32"),i=o.shape.concat([t]);return o=o.flatten(),z.runKernelFunc(function(a){return a.oneHot(o,t,n,r)},{$indices:o},function(a){return{$indices:function(){return it(o.shape,"float32")}}}).reshape(i)}}),cs=N({pad_:function(e,t,n){n===void 0&&(n=0);var r=R(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:t,constantValue:n};return z.runKernelFunc(function(i){return i.pad(r,t,n)},{x:r},function(i){var a=t.map(function(s){return s[0]});return{x:function(){return i.slice(a,r.shape)}}},"PadV2",o)}}),dne=N({pad1d_:function(e,t,n){return n===void 0&&(n=0),P(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),cs(e,[t],n)}}),fne=N({pad2d_:function(e,t,n){return n===void 0&&(n=0),P(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),cs(e,t,n)}}),hne=N({pad3d_:function(e,t,n){return n===void 0&&(n=0),P(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),cs(e,t,n)}}),pne=N({pad4d_:function(e,t,n){return n===void 0&&(n=0),P(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),cs(e,t,n)}}),vne=N({rand_:function(e,t,n){var r=de(e),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var i=0;i<r;i++)o[i]=t();return z.makeTensor(o,e,n)}}),mne=N({randomNormal_:function(e,t,n,r,o){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new jx(t,n,r,!1,o),a=Ee(e,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),gne=N({randomGamma_:function(e,t,n,r,o){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var i=new nne(t,n,r,o),a=Ee(e,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),VM=N({randomUniform_:function(e,t,n,r,o){t===void 0&&(t=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var i=Ee(e,r),a=new rne(t,n,null,o),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),Zr=N({reshape_:function(e,t){var n=R(e,"x","reshape",null);t=Yee(t,n.size),P(n.size===de(t),function(){return"new shape and old shape must have the same number of elements."});var r={shape:t};return z.runKernelFunc(function(o){return o.reshape(n,t)},{x:n},function(o){return{x:function(){return o.reshape(n.shape)}}},"Reshape",r)}}),jM=N({spaceToBatchND_:function(e,t,n){var r=R(e,"x","spaceToBatchND");return P(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),P(n.length===t.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length}),P(r.shape.reduce(function(o,i,a){return a>0&&a<=t.length?o&&(i+n[a-1][0]+n[a-1][1])%t[a-1]==0:o},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()}),z.runKernelFunc(function(o){return o.spaceToBatchND(r,t,n)},{$x:r},function(o){return{$x:function(){return o.batchToSpaceND(t,n)}}})}}),UM=N({squeeze_:function(e,t){var n=R(e,"x","squeeze");return Zr(n,Aa(n.shape,t).newShape)}}),pr=N({stack_:function(e,t){t===void 0&&(t=0);var n=Tp(e,"tensors","stack");if(P(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(t);var r=n[0].rank,o=n[0].shape,i=n[0].dtype;P(t<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(s){Xe(o,s.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(s){P(i===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var a=n.map(function(s){return s.expandDims(t)});return Ft(a,t)}}),yu=N({tile_:function(e,t){var n=R(e,"x","tile",null);P(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."});var r=[n],o={reps:t};return z.runKernelFunc(function(i,a){var s=i.tile(n,t);return a([n]),s},{x:n},function(i,a){var s=a[0];return{x:function(){var u=Be(s);if(s.rank===1)for(var l=0;l<t[0];++l)u=u.add(i.slice([l*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(l=0;l<t[0];++l)for(var c=0;c<t[1];++c)u=u.add(i.slice([l*s.shape[0],c*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(l=0;l<t[0];++l)for(c=0;c<t[1];++c)for(var d=0;d<t[2];++d)u=u.add(i.slice([l*s.shape[0],c*s.shape[1],d*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(l=0;l<t[0];++l)for(c=0;c<t[1];++c)for(d=0;d<t[2];++d)for(var f=0;f<t[3];++f)u=u.add(i.slice([l*s.shape[0],c*s.shape[1],d*s.shape[2],f*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return u}}},"Tile",o,r)}}),yne=N({truncatedNormal_:function(e,t,n,r,o){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var i=new jx(t,n,r,!0,o),a=Ee(e,r),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),Bt=N({unstack_:function(e,t){t===void 0&&(t=0),t=t||0;var n=R(e,"x","unstack");P(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),t<0&&(t+=n.shape.length);var r={axis:t};return z.runKernelFunc(function(o){return o.unstack(n,t)},{x:n},function(o){return{x:function(){return pr(o,t)}}},"Unpack",r)}}),bne=function(e,t){return le(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c,d;return ce(this,function(f){switch(f.label){case 0:return n=R(e,"x","setdiff1d"),r=R(t,"y","setdiff1d"),P(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),P(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),P(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return o=f.sent(),[4,r.data()];case 2:for(i=f.sent(),a=new Set(i),s=0,c=0;c<o.length;c++)a.has(o[c])||s++;for(u=new Qc([s],n.dtype),l=new Qc([s],"int32"),c=0,d=0;c<o.length;c++)a.has(o[c])||(u.values[d]=o[c],l.values[d]=c,d++);return[2,[u.toTensor(),l.toTensor()]]}})})};function Pp(e,t,n,r){r===void 0&&(r=!0);var o=[];if(r)(o=o.concat(t.slice(0))).push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);for(var i=t.length,a=0;a<i;++a)o=o.concat([e[a+1]/t[a],t[a]]);o=o.concat(e.slice(i+1))}return o}function Ip(e,t,n){n===void 0&&(n=!0);var r=[];if(n){r.push(t);for(var o=t+1;o<e;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{var i=[],a=[];for(o=1;o<e;++o)o>=2*t+1||o%2==1?a.push(o):i.push(o);r.push.apply(r,i),r.push(0),r.push.apply(r,a)}return r}function Ap(e,t,n,r){r===void 0&&(r=!0);var o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?o.push(t[i-1]*e[i]):o.push(e[i]/t[i-1]):o.push(e[i]);return o}function HM(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function GM(e,t,n){for(var r=e.slice(0,1),o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function qM(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],o=1,i=0;i<n.length-1;++i)o*=n[i];var a=e.shape,s=n.slice();s.pop();var u=1;for(i=r;i<e.rank;++i)u*=a[i],s.push(a[i]);var l=Do(e.shape).map(function(c){return c/u}).concat([1]).slice(0,r);return[s,o,u,l]}var KM=30;function t0(e){return e<=KM?e:u1(e,Math.floor(Math.sqrt(e)))}function xne(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(i+" update.rank < "+o+". ");if(e.length<r+(n.rank-o))throw new Error(i+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+e.length-r)throw new Error(i+" update.rank != "+(o+e.length-r));for(var a=0;a<o;++a)if(n.shape[a]!==t.shape[a])throw new Error(i+" updates.shape["+a+"] ("+n.shape[a]+") != indices.shape["+a+"] ("+t.shape[a]+").");for(a=0;a<n.rank-o;++a)if(n.shape[a+o]!==e[a+r])throw new Error(i+" updates.shape["+(a+o)+"] ("+n.shape[a+o]+") != shape["+(a+o)+"] ("+e[a+o]+")")}function wne(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}xne(n,t,e)}function Dp(e,t,n){for(var r=t.shape.length,o=r>1?t.shape[r-1]:1,i=n.length,a=1,s=o;s<i;++s)a*=n[s];var u=o<1?1:o;return{sliceRank:o,numUpdates:de(t.shape)/u,sliceSize:a,strides:Do(n.slice(0,o)).concat([1]),outputSize:de(n)}}function Sne(e,t,n){P(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),P(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."});for(var r=function(i){P(t[i]+n[i]<=e.shape[i],function(){return"Error in slice"+e.rank+"D: begin["+i+"] + size["+i+"] ("+(t[i]+n[i])+") would overflow input.shape["+i+"] ("+e.shape[i]+")"})},o=0;o<e.rank;++o)r(o)}function EE(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Ux(e,t,n){for(var r=[],o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function Cne(e,t,n,r,o){var i=t[o],a=n[o]||1;(e&1<<o||i==null)&&(i=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return i<0&&(i+=s),i=i1(0,i,s-1)}function _ne(e,t,n,r,o){var i=t[o],a=n[o]||1;(e&1<<o||i==null)&&(i=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return i<0&&(i+=s),i=a>0?i1(0,i,s):i1(-1,i,s-1)}function XM(e,t,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function YM(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Ene(e,t){P(s1(e),function(){return"The f passed in variableGrads(f) must be a function"}),P(t==null||Array.isArray(t)&&t.every(function(c){return c instanceof Uu}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=t!=null;if(!n)for(var r in t=[],z.registeredVariables)t.push(z.registeredVariables[r]);var o=n?t.filter(function(c){return!c.trainable}):null,i=t.length;P((t=t.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var a=z.gradients(e,t,null,!0),s=a.value,u=a.grads;P(u.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),P(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var l={};return t.forEach(function(c,d){u[d]!=null&&(l[c.name]=u[d])}),o!=null&&o.forEach(function(c){return l[c.name]=null}),{value:s,grads:l}}function Yv(e){return z.customGrad(e)}var yi=N({softmax_:function(e,t){t===void 0&&(t=-1);var n=R(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return z.runKernelFunc(function(r,o){var i=r.softmax(n,t);return o([i]),i},{logits:n},function(r,o){var i=o[0],a=r.mul(i);return{logits:function(){return a.sub(a.sum([t],!0).mul(i))}}},"Softmax",{dim:t},[],[!0])}}),kne=N({logSoftmax_:function(e,t){t===void 0&&(t=-1);var n=R(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return Yv(function(r,o){var i=r.max(t,!0),a=r.sub(i),s=a.toFloat().sub(a.exp().sum(t,!0).log());return o([s]),{value:s,gradFunc:function(u,l){var c=l[0].exp();return u.sub(u.sum(t,!0).mul(c))}}})(n)}}),QM=function(){function e(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,n){this.dataIdsCount++,this.data.set(t,n)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),JM=function(){function e(){}return e.prototype.time=function(t){return q("time")},e.prototype.read=function(t){return q("read")},e.prototype.readSync=function(t){return q("readSync")},e.prototype.numDataIds=function(){return q("numDataIds")},e.prototype.disposeData=function(t){return q("disposeData")},e.prototype.write=function(t,n,r){return q("write")},e.prototype.move=function(t,n,r,o){return q("move")},e.prototype.memory=function(){return q("memory")},e.prototype.floatPrecision=function(){return q("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(t,n,r,o){return q("batchMatMul")},e.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,q("fusedBatchMatMul")},e.prototype.slice=function(t,n,r){return q("slice")},e.prototype.stridedSlice=function(t,n,r,o){return q("stridedSlice")},e.prototype.unstack=function(t,n){return q("unstack")},e.prototype.reverse=function(t,n){return q("reverse")},e.prototype.concat=function(t,n){return q("concat")},e.prototype.neg=function(t){return q("neg")},e.prototype.add=function(t,n){return q("add")},e.prototype.addN=function(t){return q("addN")},e.prototype.subtract=function(t,n){return q("subtract")},e.prototype.multiply=function(t,n){return q("multiply")},e.prototype.realDivide=function(t,n){return q("realDivide")},e.prototype.floorDiv=function(t,n){return q("floorDiv")},e.prototype.sum=function(t,n){return q("sum")},e.prototype.prod=function(t,n){return q("prod")},e.prototype.unsortedSegmentSum=function(t,n,r){return q("unsortedSegmentSum")},e.prototype.argMin=function(t,n){return q("argMin")},e.prototype.argMax=function(t,n){return q("argMax")},e.prototype.equal=function(t,n){return q("equal")},e.prototype.notEqual=function(t,n){return q("notEqual")},e.prototype.less=function(t,n){return q("less")},e.prototype.lessEqual=function(t,n){return q("lessEqual")},e.prototype.greater=function(t,n){return q("greater")},e.prototype.greaterEqual=function(t,n){return q("greaterEqual")},e.prototype.logicalNot=function(t){return q("logicalNot")},e.prototype.logicalAnd=function(t,n){return q("logicalAnd")},e.prototype.logicalOr=function(t,n){return q("logicalOr")},e.prototype.where=function(t){return q("where")},e.prototype.select=function(t,n,r){return q("select")},e.prototype.topk=function(t,n,r){return q("topk")},e.prototype.min=function(t,n){return q("min")},e.prototype.minimum=function(t,n){return q("minimum")},e.prototype.mod=function(t,n){return q("mod")},e.prototype.max=function(t,n){return q("max")},e.prototype.maximum=function(t,n){return q("maximum")},e.prototype.all=function(t,n){return q("all")},e.prototype.any=function(t,n){return q("any")},e.prototype.squaredDifference=function(t,n){return q("squaredDifference")},e.prototype.ceil=function(t){return q("ceil")},e.prototype.floor=function(t){return q("floor")},e.prototype.round=function(t){return q("round")},e.prototype.sign=function(t){return q("sign")},e.prototype.isNaN=function(t){return q("isNaN")},e.prototype.isInf=function(t){return q("isInf")},e.prototype.isFinite=function(t){return q("isFinite")},e.prototype.pow=function(t,n){return q("pow")},e.prototype.exp=function(t){return q("exp")},e.prototype.expm1=function(t){return q("expm1")},e.prototype.softmax=function(t,n){return q("softmax")},e.prototype.log=function(t){return q("log")},e.prototype.log1p=function(t){return q("log1p")},e.prototype.sqrt=function(t){return q("sqrt")},e.prototype.rsqrt=function(t){return q("rsqrt")},e.prototype.square=function(t){return q("square")},e.prototype.reciprocal=function(t){return q("reciprocal")},e.prototype.relu=function(t){return q("relu")},e.prototype.relu6=function(t){return q("relu6")},e.prototype.prelu=function(t,n){return q("prelu")},e.prototype.elu=function(t){return q("elu")},e.prototype.eluDer=function(t,n){return q("eluDer")},e.prototype.selu=function(t){return q("selu")},e.prototype.int=function(t){return q("int")},e.prototype.clip=function(t,n,r){return q("clip")},e.prototype.abs=function(t){return q("abs")},e.prototype.complexAbs=function(t){return q("complexAbs")},e.prototype.sigmoid=function(t){return q("sigmoid")},e.prototype.softplus=function(t){return q("softplus")},e.prototype.sin=function(t){return q("sin")},e.prototype.cos=function(t){return q("cos")},e.prototype.tan=function(t){return q("tan")},e.prototype.asin=function(t){return q("asin")},e.prototype.acos=function(t){return q("acos")},e.prototype.atan=function(t){return q("atan")},e.prototype.atan2=function(t,n){return q("atan2")},e.prototype.sinh=function(t){return q("sinh")},e.prototype.cosh=function(t){return q("cosh")},e.prototype.tanh=function(t){return q("tanh")},e.prototype.asinh=function(t){return q("asinh")},e.prototype.acosh=function(t){return q("acosh")},e.prototype.atanh=function(t){return q("atanh")},e.prototype.erf=function(t){return q("erf")},e.prototype.step=function(t,n){return q("step")},e.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,q("fusedConv2d")},e.prototype.conv2d=function(t,n,r){return q("conv2d")},e.prototype.conv2dDerInput=function(t,n,r){return q("conv2dDerInput")},e.prototype.conv2dDerFilter=function(t,n,r){return q("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,q("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(t,n,r){return q("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(t,n,r){return q("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(t,n,r){return q("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(t,n,r){return q("conv3d")},e.prototype.conv3dDerInput=function(t,n,r){return q("conv3dDerInput")},e.prototype.conv3dDerFilter=function(t,n,r){return q("conv3dDerFilter")},e.prototype.maxPool=function(t,n){return q("maxPool")},e.prototype.maxPoolBackprop=function(t,n,r,o){return q("maxPoolBackprop")},e.prototype.avgPool=function(t,n){return q("avgPool")},e.prototype.avgPoolBackprop=function(t,n,r){return q("avgPoolBackprop")},e.prototype.avgPool3d=function(t,n){return q("avgPool3d")},e.prototype.avgPool3dBackprop=function(t,n,r){return q("avgPool3dBackprop")},e.prototype.maxPool3d=function(t,n){return q("maxPool3d")},e.prototype.maxPool3dBackprop=function(t,n,r,o){return q("maxPool3dBackprop")},e.prototype.reshape=function(t,n){return q("reshape")},e.prototype.cast=function(t,n){return q("cast")},e.prototype.tile=function(t,n){return q("tile")},e.prototype.pad=function(t,n,r){return q("pad")},e.prototype.transpose=function(t,n){return q("transpose")},e.prototype.gather=function(t,n,r){return q("gather")},e.prototype.gatherND=function(t,n){return q("gatherND")},e.prototype.scatterND=function(t,n,r){return q("scatterND")},e.prototype.batchToSpaceND=function(t,n,r){return q("batchToSpaceND")},e.prototype.spaceToBatchND=function(t,n,r){return q("spaceToBatchND")},e.prototype.resizeBilinear=function(t,n,r,o){return q("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(t,n,r){return q("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(t,n,r,o){return q("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(t,n,r){return q("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(t,n,r,o,i,a){return q("batchNormalization")},e.prototype.localResponseNormalization4D=function(t,n,r,o,i){return q("localResponseNormalization4D")},e.prototype.LRNGrad=function(t,n,r,o,i,a,s){return q("LRNGrad")},e.prototype.multinomial=function(t,n,r,o){return q("multinomial")},e.prototype.oneHot=function(t,n,r,o){return q("oneHot")},e.prototype.cumsum=function(t,n,r,o){return q("cumsum")},e.prototype.nonMaxSuppression=function(t,n,r,o,i){return q("nonMaxSuppression")},e.prototype.fft=function(t){return q("fft")},e.prototype.ifft=function(t){return q("ifft")},e.prototype.complex=function(t,n){return q("complex")},e.prototype.real=function(t){return q("real")},e.prototype.imag=function(t){return q("imag")},e.prototype.cropAndResize=function(t,n,r,o,i,a){return q("cropAndResize")},e.prototype.depthToSpace=function(t,n,r){return q("depthToSpace")},e.prototype.split=function(t,n,r){return q("split")},e.prototype.sparseToDense=function(t,n,r,o){return q("sparseToDense")},e.prototype.diag=function(t){return q("diag")},e.prototype.fill=function(t,n,r){return q("fill")},e.prototype.onesLike=function(t){return q("onesLike")},e.prototype.zerosLike=function(t){return q("zerosLike")},e.prototype.linspace=function(t,n,r){return q("linspace")},e.prototype.dispose=function(){return q("dispose")},e}();function q(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Vi(e,t){for(var n=e.length,r=[],o=0;o<n;o++){var i=n-1-o,a=e[i]||1;(t[t.length-1-o]||1)>1&&a===1&&r.unshift(i)}return r}function Lt(e,t){for(var n=[],r=0;r<t.length;r++){var o=e[e.length-r-1],i=t.length-r-1,a=t[i];(o==null||o===1&&a>1)&&n.unshift(i)}return n}function Pe(e,t){for(var n=[],r=Math.max(e.length,t.length),o=0;o<r;o++){var i=e[e.length-o-1];i==null&&(i=1);var a=t[t.length-o-1];if(a==null&&(a=1),i===1)n.unshift(a);else if(a===1)n.unshift(i);else{if(i!==a)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}function Zc(e,t,n,r,o,i,a){a===void 0&&(a="channelsLast");var s,u=Np(t),l=u[0],c=u[1];if(a==="channelsLast")s=[l,c,e[3],e[3]];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);s=[l,c,e[1],e[1]]}return ds(e,s,n,r,o,i,!1,a)}function Mp(e,t,n,r,o,i,a){a===void 0&&(a="NDHWC");var s,u,l=v1(t),c=l[0],d=l[1],f=l[2];if(a==="NDHWC")u="channelsLast",s=[c,d,f,e[4],e[4]];else{if(a!=="NCDHW")throw new Error("Unknown dataFormat "+a);u="channelsFirst",s=[c,d,f,e[1],e[1]]}return Op(e,s,n,r,o,!1,u,i)}function ds(e,t,n,r,o,i,a,s){a===void 0&&(a=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],f=u[3];if(s==="channelsLast")l=e[0],c=e[1],d=e[2],f=e[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=e[0],f=e[1],c=e[2],d=e[3]}var h,p=t[0],v=t[1],y=t[3],m=Np(n),g=m[0],b=m[1],x=Np(r),w=x[0],S=x[1],C=bu(p,w),_=bu(v,S),k=function(H,B,V,M,O,F,$,G){var Q,J,ne;if(typeof H=="number"){Q={top:H,bottom:H,left:H,right:H,type:H===0?"VALID":"NUMBER"};var oe=function(ge,Ie,_e,ze,We){ze==null&&(ze=ZM(ge,Ie,_e));var Ve=ge[0],xn=ge[1],An=cc((Ve-Ie+2*ze)/_e+1,We);P(St(An),function(){return"The output # of rows ("+An+") must be an integer. Change the stride and/or zero pad parameters"});var Yt=cc((xn-Ie+2*ze)/_e+1,We);return P(St(Yt),function(){return"The output # of columns ("+Yt+") must be an integer. Change the stride and/or zero pad parameters"}),[An,Yt]}([B,V],F,M,H,G);J=oe[0],ne=oe[1]}else if(H==="same"){J=Math.ceil(B/M),ne=Math.ceil(V/O);var ae=Math.max(0,(J-1)*M+F-B),me=Math.max(0,(ne-1)*O+$-V),ve=Math.floor(ae/2),we=ae-ve,De=Math.floor(me/2);Q={top:ve,bottom:we,left:De,right:me-De,type:"SAME"}}else{if(H!=="valid")throw Error("Unknown padding parameter: "+H);Q={top:0,bottom:0,left:0,right:0,type:"VALID"},J=Math.ceil((B-F+1)/M),ne=Math.ceil((V-$+1)/O)}return{padInfo:Q,outHeight:J,outWidth:ne}}(o,c,d,g,b,C,_,i),E=k.padInfo,A=k.outHeight,D=k.outWidth,U=a?y*f:y;return s==="channelsFirst"?h=[l,U,A,D]:s==="channelsLast"&&(h=[l,A,D,U]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:d,inChannels:f,outHeight:A,outWidth:D,outChannels:U,padInfo:E,strideHeight:g,strideWidth:b,filterHeight:p,filterWidth:v,effectiveFilterHeight:C,effectiveFilterWidth:_,dilationHeight:w,dilationWidth:S,inShape:e,outShape:h,filterShape:t}}function Op(e,t,n,r,o,i,a,s){i===void 0&&(i=!1),a===void 0&&(a="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],f=u[3],h=u[4];if(a==="channelsLast")l=e[0],c=e[1],d=e[2],f=e[3],h=e[4];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);l=e[0],h=e[1],c=e[2],d=e[3],f=e[4]}var p,v=t[0],y=t[1],m=t[2],g=t[4],b=v1(n),x=b[0],w=b[1],S=b[2],C=v1(r),_=C[0],k=C[1],E=C[2],A=bu(v,_),D=bu(y,k),U=bu(m,E),H=function($,G,Q,J,ne,oe,ae,me,ve,we,De){var ge,Ie,_e,ze;if(typeof $=="number"){ge={top:$,bottom:$,left:$,right:$,front:$,back:$,type:$===0?"VALID":"NUMBER"};var We=function(Xn,wn,Ci,jr,jt,ps){jt==null&&(jt=ZM(Xn,wn,jr));var Ld=Xn[0],$d=Xn[1],zd=Xn[2],vs=cc((Ld-wn+2*jt)/jr+1,ps);P(St(vs),function(){return"The output # of depths ("+vs+") must be an integer. Change the stride and/or zero pad parameters"});var nl=cc(($d-wn+2*jt)/jr+1,ps);P(St(nl),function(){return"The output # of rows ("+nl+") must be an integer. Change the stride and/or zero pad parameters"});var rl=cc((zd-wn+2*jt)/jr+1,ps);return P(St(rl),function(){return"The output # of columns ("+rl+") must be an integer. Change the stride and/or zero pad parameters"}),[vs,nl,rl,Ci]}([G,Q,J,1],me,1,ne,$,De);Ie=We[0],_e=We[1],ze=We[2]}else if($==="same"){Ie=Math.ceil(G/ne),_e=Math.ceil(Q/oe),ze=Math.ceil(J/ae);var Ve=(Ie-1)*ne+me-G,xn=(_e-1)*oe+ve-Q,An=(ze-1)*ae+we-J,Yt=Math.floor(Ve/2),Dt=Ve-Yt,Vt=Math.floor(xn/2),sn=xn-Vt,yt=Math.floor(An/2);ge={top:Vt,bottom:sn,left:yt,right:An-yt,front:Yt,back:Dt,type:"SAME"}}else{if($!=="valid")throw Error("Unknown padding parameter: "+$);ge={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Ie=Math.ceil((G-me+1)/ne),_e=Math.ceil((Q-ve+1)/oe),ze=Math.ceil((J-we+1)/ae)}return{padInfo:ge,outDepth:Ie,outHeight:_e,outWidth:ze}}(o,c,d,f,x,w,S,A,D,U,s),B=H.padInfo,V=H.outDepth,M=H.outHeight,O=H.outWidth,F=i?g*h:g;return a==="channelsFirst"?p=[l,F,V,M,O]:a==="channelsLast"&&(p=[l,V,M,O,F]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:d,inWidth:f,inChannels:h,outDepth:V,outHeight:M,outWidth:O,outChannels:F,padInfo:B,strideDepth:x,strideHeight:w,strideWidth:S,filterDepth:v,filterHeight:y,filterWidth:m,effectiveFilterDepth:A,effectiveFilterHeight:D,effectiveFilterWidth:U,dilationDepth:_,dilationHeight:k,dilationWidth:E,inShape:e,outShape:p,filterShape:t}}function ZM(e,t,n,r){r===void 0&&(r=1);var o=bu(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function Np(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function v1(e){return typeof e=="number"?[e,e,e]:e}function bu(e,t){return t<=1?e:e+(e-1)*(t-1)}function cc(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function Gu(e){var t=Np(e),n=t[0],r=t[1],o=t[2];return n===1&&r===1&&o===1}function Kn(e,t){return Gu(e)||Gu(t)}function Hx(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function eO(e,t,n){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();var r=it(e.shape),o=e.toFloat(),i=n.complex(o,r);return r.dispose(),o.dispose(),i}if(!Zee(e.dtype,t))return z.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){var a=n.real(e);return i=a.cast(t),a.dispose(),i}if(t==="int32")return n.int(e);if(t==="bool"){var s=re(0,e.dtype);return i=n.notEqual(e,s),s.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function m1(e,t){return z.makeTensorFromDataId(e.dataId,t,e.dtype)}function tO(e,t,n){var r=(t-e)/(n-1),o=Pd(n,"float32");o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+r;return It(o,"float32")}function g1(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function kE(e,t){return{real:e[2*t],imag:e[2*t+1]}}function Tne(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Rne(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Pne(e,t,n){var r=function(i,a,s){return function(u,l,c){for(var d=0,f=u.length,h=0,p=!1;d<f;){var v=c(l,u[h=d+(f-d>>>1)]);v>0?d=h+1:(f=h,p=!v)}return p?d:-d-1}(i,a,s||Ine)}(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function Ine(e,t){return e>t?1:e<t?-1:0}function Gx(e,t,n,r,o){return nO(e,t,n,r,o,0).selectedIndices}function qx(e,t,n,r,o,i){var a=nO(e,t,n,r,o,i);return a.numValidOutputs.dispose(),{selectedIndices:a.selectedIndices,selectedScores:a.selectedScores}}function nO(e,t,n,r,o,i,a,s){s===void 0&&(s=!1);for(var u=Array.from(t).map(function(x,w){return{score:x,boxIndex:w,suppressBeginIndex:0}}).filter(function(x){return x.score>o}).sort(TE),l=i>0?-.5/i:0,c=[],d=[];c.length<n&&u.length>0;){var f=u.pop(),h=f.score,p=f.boxIndex,v=f.suppressBeginIndex;if(h<o)break;for(var y=!1,m=c.length-1;m>=v;--m){var g=Ane(e,p,c[m]);if(g>=r){y=!0;break}if(f.score=f.score*Dne(r,l,g),f.score<=o)break}f.suppressBeginIndex=c.length,y||(f.score===h?(c.push(p),d.push(f.score)):f.score>o&&Pne(u,f,TE))}var b=c.length;return s&&(c.fill(0,b),d.fill(0,b)),{selectedIndices:It(c,"int32"),selectedScores:It(d,"float32"),numValidOutputs:re(b,"int32")}}function Ane(e,t,n){var r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(s-i)*(u-a),p=(d-l)*(f-c);if(h<=0||p<=0)return 0;var v=Math.max(i,l),y=Math.max(a,c),m=Math.min(s,d),g=Math.min(u,f),b=Math.max(m-v,0)*Math.max(g-y,0);return b/(h+p-b)}function Dne(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function TE(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function rO(e,t,n){var r=new Array(e.rank).fill(0),o=e.shape.slice();return t.map(function(i){o[n]=i;var a=e.slice(r,o);return r[n]+=i,a})}function oO(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var o=Ee(n,e.dtype);for(r=0;r<o.values.length;++r){for(var i=o.indexToLoc(r),a=new Array(e.rank),s=0;s<a.length;s++)a[s]=i[s]%e.shape[s];var u=e.locToIndex(a);o.values[r]=e.values[u]}return o.toTensor()}function iO(e,t,n,r,o){for(var i=t[t.length-1],a=[e.length/i,i],s=a[0],u=a[1],l=Yc(n,s*r),c=Yc("int32",s*r),d=0;d<s;d++){for(var f=d*u,h=e.subarray(f,f+u),p=[],v=0;v<h.length;v++)p.push({value:h[v],index:v});p.sort(function(x,w){return w.value-x.value});var y=d*r,m=l.subarray(y,y+r),g=c.subarray(y,y+r);for(v=0;v<r;v++)m[v]=p[v].value,g[v]=p[v].index}var b=t.slice();return b[b.length-1]=r,[rn(l,b,n),rn(c,b,"int32")]}function Kx(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var o=Ee(e,"int32"),i=Ee([n.length,e.length],"int32");for(r=0;r<n.length;r++){var a=o.indexToLoc(n[r]),s=r*e.length;i.values.set(a,s)}return i.toTensor()}var Mne=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(o,i){return"T"+i});var n=[];this.variableNames.forEach(function(o){n.push("float v"+o+" = get"+o+"AtOutCoords();")});var r=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},One=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(o,i){return"T"+i});var n=[];this.variableNames.forEach(function(o){n.push("vec4 v"+o+" = get"+o+"AtOutCoords();")});var r=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},Nne=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,o=e.batchSize,i=e.inSize,a=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,a];var s=t==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function aO(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(n){return e+"."+n})}function Fn(e,t){return t===1?[e]:aO(e,t)}function vn(){var e,t,n,r,o,i,a,s,u,l;return Y().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",o="texture",i="outputColor",a="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",o="texture2D",i="gl_FragColor",a="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:i,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function Ba(e,t,n){n===void 0&&(n="index");var r=Do(t);return r.map(function(o,i){return"int "+e[i]+" = "+n+" / "+o+"; "+(i===r.length-1?"int "+e[i+1]+" = "+n+" - "+e[i]+" * "+o:"index -= "+e[i]+" * "+o)+";"}).join("")}function Xx(e){var t=Do(e).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var sO=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function Fne(e,t,n,r){var o=[];e.forEach(function(h){var p=de(h.shapeInfo.logicalShape);h.shapeInfo.isUniform?o.push("uniform float "+h.name+(p>1?"["+p+"]":"")+";"):(o.push("uniform sampler2D "+h.name+";"),o.push("uniform int offset"+h.name+";"))});var i,a,s=o.join(`
`),u=e.map(function(h){return function(p,v,y){y===void 0&&(y=!1);var m="";m+=y?uO(p):Rs(p);var g=p.shapeInfo.logicalShape,b=v.logicalShape;return g.length<=b.length&&(m+=y?function(x,w){var S,C=x.name,_=C.charAt(0).toUpperCase()+C.slice(1),k="get"+_+"AtOutCoords",E=x.shapeInfo.logicalShape.length,A=w.logicalShape.length,D=Vi(x.shapeInfo.logicalShape,w.logicalShape),U=tt(A),H=A-E,B=["x","y","z","w","u","v"];S=E===0?"":A<2&&D.length>=1?"coords = 0;":D.map(function(Q){return"coords."+B[Q+H]+" = 0;"}).join(`
`);var V="";V=A<2&&E>0?"coords":x.shapeInfo.logicalShape.map(function(Q,J){return"coords."+B[J+H]}).join(", ");var M="return outputValue;",O=de(x.shapeInfo.logicalShape)===1,F=de(w.logicalShape)===1;if(E!==1||O||F){if(O&&!F)M=A===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(D.length){var $=E-2,G=E-1;D.indexOf($)>-1&&D.indexOf(G)>-1?M="return vec4(outputValue.x);":D.indexOf($)>-1?M="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":D.indexOf(G)>-1&&(M="return vec4(outputValue.xx, outputValue.zz);")}}else M=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+k+`() {
      `+U+` coords = getOutputCoords();
      `+S+`
      vec4 outputValue = get`+_+"("+V+`);
      `+M+`
    }
  `}(p,v):function(x,w){var S=x.name,C=S.charAt(0).toUpperCase()+S.slice(1),_="get"+C+"AtOutCoords",k=w.texShape,E=x.shapeInfo.texShape,A=x.shapeInfo.logicalShape.length,D=w.logicalShape.length;if(!x.shapeInfo.isUniform&&A===D&&x.shapeInfo.flatOffset==null&&qt(E,k))return`
      float `+_+`() {
        return sampleTexture(`+S+`, resultUV);
      }
    `;var U,H=tt(D),B=Vi(x.shapeInfo.logicalShape,w.logicalShape),V=D-A,M=["x","y","z","w","u","v"];U=A===0?"":D<2&&B.length>=1?"coords = 0;":B.map(function(F){return"coords."+M[F+V]+" = 0;"}).join(`
`);var O="";return O=D<2&&A>0?"coords":x.shapeInfo.logicalShape.map(function(F,$){return"coords."+M[$+V]}).join(", "),`
    float `+_+`() {
      `+H+` coords = getOutputCoords();
      `+U+`
      return get`+C+"("+O+`);
    }
  `}(p,v)),m}(h,t,r)}).join(`
`),l=t.texShape,c=vn(),d=function(h){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+h.texture2D+`(textureSampler, uv).r;
    }
  `}(c),f=function(h){return h.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+h.varyingFs+` vec2 resultUV;
    `+h.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+h.defineSpecialNaN+`
    `+h.defineSpecialInf+`
    `+h.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+Bne+`
    `+Lne+`
    `+$ne+`
  `}(c);return t.isPacked?(i=function(h,p){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(x,w){var S=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)];return S[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return 2 * (resTexRC.x * `+S[1]+` + resTexRC.y);
    }
  `}(0,p);case 2:return function(x,w){var S=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)];if(qt(x,w))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `;var C=Math.ceil(x[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = 2 * (index / `+C+`);
      int c = imod(index, `+C+`) * 2;

      return ivec2(r, c);
    }
  `}(h,p);case 3:return v=h,y=p,m=[Math.ceil(y[0]/2),Math.ceil(y[1]/2)],g=Math.ceil(v[2]/2),b=g*Math.ceil(v[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;

      int b = index / `+b+`;
      index -= b * `+b+`;

      int r = 2 * (index / `+g+`);
      int c = imod(index, `+g+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(x,w){for(var S=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],C=Math.ceil(x[x.length-1]/2),_=C*Math.ceil(x[x.length-2]/2),k=_,E="",A="b, r, c",D=2;D<x.length-1;D++)k*=x[x.length-D-1],E=`
      int b`+D+" = index / "+k+`;
      index -= b`+D+" * "+k+`;
    `+E,A="b"+D+", "+A;return`
    ivec`+x.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+E+`

      int b = index / `+_+`;
      index -= b * `+_+`;

      int r = 2 * (index / `+C+`);
      int c = imod(index, `+C+`) * 2;

      return ivec`+x.length+"("+A+`);
    }
  `}(h,p)}var v,y,m,g,b}(t.logicalShape,l),a=function(h){return`
    void setOutput(vec4 val) {
      `+h.output+` = val;
    }
  `}(c)):(i=function(h,p){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(m,g){return g[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+g[1]+`.0);
      }
    `:g[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+g[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      return resTexRC.x * `+g[1]+` + resTexRC.y;
    }
  `}(0,p);case 2:return function(m,g){return qt(m,g)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+g[0]+", "+g[1]+`));
      }
    `:m[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+g[0]+", "+g[1]+`));
        int index = resTexRC.x * `+g[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:m[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+g[0]+", "+g[1]+`));
        int index = resTexRC.x * `+g[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;
      int r = index / `+m[1]+`;
      int c = index - r * `+m[1]+`;
      return ivec2(r, c);
    }
  `}(h,p);case 3:return v=p,y=Ba(["r","c","d"],h),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;
      `+y+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(m,g){var b=Ba(["r","c","d","d2"],m);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;
      `+b+`
      return ivec4(r, c, d, d2);
    }
  `}(h,p);case 5:return function(m,g){var b=Ba(["r","c","d","d2","d3"],m);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+g[0]+`,
                             `+g[1]+`));

      int index = resTexRC.x * `+g[1]+` + resTexRC.y;

      `+b+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(h,p);case 6:return function(m,g){var b=Ba(["r","c","d","d2","d3","d4"],m);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;

      `+b+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(h,p);default:throw new Error(h.length+"-D output sampling is not yet supported")}var v,y}(t.logicalShape,l),a=function(h){return`
    void setOutput(float val) {
      `+h.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(f+=zne),[f,d,a,s,i,u,n].join(`
`)}function Rs(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+o+"() {return "+r+";}";var i=n.shapeInfo.texShape,a=i[0],s=i[1];if(a===1&&s===1)return`
      float `+o+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=n.shapeInfo.texShape,l=u[0],c=u[1],d=wa(r);return`
    float `+o+`() {
      vec2 uv = uvFromFlat(`+l+", "+c+", "+d+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 1:return function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+o+`(int index) {
        `+_s(n)+`
      }
    `;var i=n.shapeInfo.texShape,a=i[0],s=i[1];if(s===1&&a===1)return`
      float `+o+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=wa(r);return s===1?`
      float `+o+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+a+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:a===1?`
      float `+o+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+o+`(int index) {
      vec2 uv = uvFromFlat(`+a+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 2:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=n.shapeInfo.texShape;if(a!=null&&qt(r,a)){var s=a[0],u=a[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `}var l=Aa(r),c=l.newShape,d=l.keptDims,f=c;if(f.length<r.length){var h=Ps(n,f);return`
      `+Rs(h)+`
      float `+i+`(int row, int col) {
        return `+i+"("+Is(["row","col"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+_s(n)+`
      }
    `;var p=a[0],v=a[1],y=wa(o);return v===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+y+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+p+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `:p===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+y+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+v+`.0, 0.5);
      return sampleTexture(`+o+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+y+`;
    vec2 uv = uvFromFlat(`+p+", "+v+`, index);
    return sampleTexture(`+o+`, uv);
  }
`}(e);case 3:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[1]*r[2],s=r[2],u=Aa(r),l=u.newShape,c=u.keptDims,d=l;if(d.length<r.length){var f=Ps(n,d);return`
        `+Rs(f)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+Is(["row","col","depth"],c)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+a+", "+s+`, 1)));
        `+_s(n)+`
      }
    `;var h=n.shapeInfo.texShape,p=h[0],v=h[1],y=n.shapeInfo.flatOffset;if(v===a&&y==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+v+".0, "+p+`.0);
          return sampleTexture(`+o+`, uv);
        }
      `;if(v===s&&y==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+v+".0, "+p+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `;var m=wa(o);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+a+" + col * "+s+" + depth + "+m+`;
        vec2 uv = uvFromFlat(`+p+", "+v+`, index);
        return sampleTexture(`+o+`, uv);
      }
  `}(e);case 4:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[3],s=r[2]*a,u=r[1]*s,l=Aa(r),c=l.newShape,d=l.keptDims;if(c.length<r.length){var f=Ps(n,c);return`
      `+Rs(f)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+Is(["row","col","depth","depth2"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+a+`, 1)));
        `+_s(n)+`
      }
    `;var h=n.shapeInfo.flatOffset,p=n.shapeInfo.texShape,v=p[0],y=p[1];if(y===u&&h==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+v+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(y===a&&h==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+v+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var m=wa(o);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+a+` + depth2;
      vec2 uv = uvFromFlat(`+v+", "+y+", index + "+m+`);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);case 5:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=r[4],s=r[3]*a,u=r[2]*s,l=r[1]*u,c=Aa(r),d=c.newShape,f=c.keptDims;if(d.length<r.length){var h=Ps(n,d);return`
      `+Rs(h)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+Is(["row","col","depth","depth2","depth3"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+a+`)) +
          depth3;
        `+_s(n)+`
      }
    `;var p=n.shapeInfo.flatOffset,v=n.shapeInfo.texShape,y=v[0],m=v[1];if(m===l&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+m+".0, "+y+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(m===a&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+m+".0, "+y+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var g=wa(o);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+a+" + depth3 + "+g+`;
      vec2 uv = uvFromFlat(`+y+", "+m+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);case 6:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,i="get"+o.charAt(0).toUpperCase()+o.slice(1),a=Aa(r),s=a.newShape,u=a.keptDims;if(s.length<r.length){var l=Ps(n,s);return`
      `+Rs(l)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+Is(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var c=r[5],d=r[4]*c,f=r[3]*d,h=r[2]*f,p=r[1]*h;if(n.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+p+", "+h+", "+f+", "+d+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+_s(n)+`
      }
    `;var v=n.shapeInfo.flatOffset,y=n.shapeInfo.texShape,m=y[0],g=y[1];if(g===p&&v==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+h+", "+f+", "+d+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(g===c&&v==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var b=wa(o);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+p+" + col * "+h+" + depth * "+f+` +
          depth2 * `+d+" + depth3 * "+c+" + depth4 + "+b+`;
      vec2 uv = uvFromFlat(`+m+", "+g+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function uO(e){var t,n,r;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=vn(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return function(o){var i=o.name,a="get"+i.charAt(0).toUpperCase()+i.slice(1),s=o.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=vn();return`
    vec4 `+a+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+i+`, uv);
    }
  `}(e);case 2:return function(o){var i=o.shapeInfo.logicalShape,a=o.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=o.shapeInfo.texShape,l=u[0],c=u[1],d=vn();if(u!=null&&qt(i,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);

        return `+d.texture2D+"("+a+`, uv);
      }
    `;var f=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],h=Math.ceil(i[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+h+", "+f[0]+", "+f[1]+`, row, col);
      return `+d.texture2D+"("+a+`, uv);
    }
  `}(e);case 3:return function(o){var i=o.shapeInfo.logicalShape,a=o.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=o.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(i[0]===1){var c=i.slice(1),d=Ps(o,c);return`
        `+uO(d)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+Is(["b","row","col"],[1,2])+`);
        }
      `}var f=l[0],h=l[1],p=Math.ceil(i[2]/2),v=p*Math.ceil(i[1]/2),y=vn();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+f+", "+h+", "+v+", "+p+`, b, row, col);
      return `+y.texture2D+"("+a+`, uv);
    }
  `}(e);default:return function(o){for(var i=o.shapeInfo.logicalShape,a=i.length,s=o.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=o.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],d=c[0],f=c[1],h=Math.ceil(i[a-1]/2),p=h*Math.ceil(i[a-2]/2),v="int b, int row, int col",y="b * "+p+" + (row / 2) * "+h+" + (col / 2)",m=2;m<a-1;m++)v="int b"+m+", "+v,p*=i[a-m-1],y="b"+m+" * "+p+" + "+y;var g=vn();return`
    vec4 `+u+"("+v+`) {
      int index = `+y+`;
      int texR = index / `+f+`;
      int texC = index - texR * `+f+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+f+", "+d+`);
      return `+g.texture2D+"("+s+`, uv);
    }
  `}(e)}}var Bne=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Lne=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$ne=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,zne=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function wa(e){return"offset"+e}function _s(e){var t=e.name,n=de(e.shapeInfo.logicalShape);return n<2?"return "+t+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function tt(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function Ps(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Is(e,t){return t.map(function(n){return e[n]}).join(", ")}var Wne=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,P(e.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var o=e[e.length-1],i=Math.ceil(o/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var a,s,u=this.outputShape,l=u.length,c=tt(l),d=Fn("coords",l);if(i===1){var f=tt(s=l+1);a=`
        `+f+" sourceLocR = "+f+"("+d.join()+`, 0);
        ++`+d[l-1]+`;
        `+f+" sourceLocG = "+f+"("+d.join()+`, 0);
        ++`+d[l-2]+`;
        `+f+" sourceLocA = "+f+"("+d.join()+`, 0);
        --`+d[l-1]+`;
        `+f+" sourceLocB = "+f+"("+d.join()+`, 0);
        --`+d[l-2]+";"}else s=l,a=`
        `+c+` sourceLocR = coords;
        ++`+d[l-1]+`;
        `+c+` sourceLocG = coords;
        ++`+d[l-2]+`;
        `+c+` sourceLocA = coords;
        --`+d[l-1]+`;
        `+c+` sourceLocB = coords;
        --`+d[l-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),p="."+h[s-1],v=h.map(function(_){return"int "+_}),y=Fn("sourceLocR",s-1).concat("inIdx.r"),m=Fn("sourceLocG",s-1).concat("inIdx.g"),g=Fn("sourceLocB",s-1).concat("inIdx.b"),b=Fn("sourceLocA",s-1).concat("inIdx.a"),x=n==="max"?"greaterThan":"lessThan",w=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+m.join()+`),
                             getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+b.join()+")));",S=`vec4(
            getAChannel(`+y.join()+`),
            hasNextCol ? getAChannel(`+m.join()+`) : 0.,
            hasNextRow ? getAChannel(`+g.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+b.join()+") : 0.)",C=r?"":`
      float getBestIndicesAChannel(`+v.join()+`) {
        return getChannel(getBestIndicesA(`+h.join()+`),
                                          vec2(`+h.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+v.join()+`) {
        return getChannel(getA(`+h.join()+`),
                               vec2(`+h.slice(-2).join()+`));
      }
      `+C+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+d[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+d[l-2]+" < "+(u[l-2]-1)+`;
        `+a+`
        ivec4 srcIdx = ivec4(sourceLocR`+p+", sourceLocG"+p+`,
          sourceLocB`+p+", sourceLocA"+p+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+S+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+w+`
          vec4 candidate = `+S+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+x+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},Vne=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.top,c=u-1-e.padInfo.left,d=1/(t*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+c+`);
      const float avgMultiplier = float(`+d+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+a+`) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},jne=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=c-1-e.padInfo.front,p=d-1-e.padInfo.top,v=f-1-e.padInfo.left,y=1/(t*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+p+", "+v+`);
      const float avgMultiplier = float(`+y+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+o+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+d+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+f+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Une=function(e,t,n,r,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Pe(e,t),Pe(e,n);var a="0.0";r!=null&&(Pe(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";o!=null&&(Pe(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+a+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},Hne=function(e,t,n,r,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Pe(e,t),Pe(e,n);var a="vec4(0.0)";r!=null&&(Pe(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";o!=null&&(Pe(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+a+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},Gne="return areal * breal - aimag * bimag;",qne="return areal * bimag + aimag * breal;",RE=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Pe(t,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},n0="return a + b;",r0="return a - b;",PE="return a * b;",lO="return (a < 0.) ? b * a : a;",xt=function(e,t,n){this.variableNames=["A","B"],this.outputShape=Pe(t,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},cO=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Ko=function(e,t,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Pe(t,n);var o=this.outputShape.length,i="";if(r)if(o===0||de(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+tt(o)+` coords = getOutputCoords();
        `,o===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var a=Fn("coords",o);i+=`
            bool nextRowOutOfBounds =
              (`+a[o-2]+" + 1) >= "+this.outputShape[o-2]+`;
            bool nextColOutOfBounds =
              (`+a[o-1]+" + 1) >= "+this.outputShape[o-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},Kne=function(){function e(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(o,i){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(i,"maxVal")),o.gl.uniform1f(r.minLoc,t),o.gl.uniform1f(r.maxLoc,n)}},e}(),Xne=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(o,i){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(i,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(i,"maxVal")),o.gl.uniform1f(r.minLoc,t),o.gl.uniform1f(r.maxLoc,n)}},e}(),Yne=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},Qne=function(e){this.outputShape=[],this.outputShape=Hu(e,1),this.variableNames=e.map(function(s,u){return"T"+u});var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var o=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var i=t.length,a=t[t.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+a+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},Jne=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Hu(e,t);var n=this.outputShape,r=n.length,o=tt(r),i=Fn("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(function(y,m){return"T"+m});var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];var l=a[t],c=a.slice(-2),d=a.join(),f="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+d+"), vec2("+c.join()+`));
        }`;for(u=1;u<s.length;u++){var h=s[u-1];f+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+Ff(a,l,h)+`),
            vec2(`+Ff(c,l,h)+`));
        }`}var p=s.length,v=s[s.length-1];f+=`
        return getChannel(
          getT`+p+"("+Ff(a,l,v)+`),
          vec2(`+Ff(c,l,v)+"));",this.userCode=`
      float getValue(`+a.map(function(y){return"int "+y})+`) {
        `+f+`
      }

      void main() {
        `+o+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[r-1]+" = "+i[r-1]+` + 1;
        if (`+i[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[r-2]+" = "+i[r-2]+` + 1;
        if (`+i[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[r-1]+" = "+i[r-1]+` - 1;
        if (`+i[r-2]+" < "+n[r-2]+` &&
            `+i[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function Ff(e,t,n){var r=e.indexOf(t);return e.map(function(o,i){return i===r?o+" - "+n:o}).join()}var Zne=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},ere=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=e.dataFormat==="channelsLast",a=t-1-e.padInfo.top,s=n-1-e.padInfo.left,u=i?1:2,l=i?2:3,c=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},tre=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+o+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+i+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+a+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},nre=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+o+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},rre=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},ore=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},IE=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.padInfo.top,i=e.padInfo.left,a=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,f=4*Math.floor(e.inChannels/4),h=e.inChannels%4,p=e.dataFormat==="channelsLast",v=p?1:2,y=p?2:3,m=p?3:1,g="",b="";n&&(g=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,b="result = activation(result);");var x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const ivec2 strides = ivec2(`+a+", "+s+`);
      const ivec2 pads = ivec2(`+o+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+m+`];

        ivec2 xRCCorner =
            ivec2(coords[`+v+"], coords["+y+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+f+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+p+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(h===1)+`) {

              if (`+p+`) {
                dotProd +=
                    getX(batch, xR, xC, `+f+`) *
                    getW(wR, wC, `+f+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+f+`, xR, xC) *
                    getW(wR, wC, `+f+`, d2);
              }

            } else if (`+(h===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2)
              );

              if (`+p+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(h===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+f+`, d2),
                getW(wR, wC, `+f+` + 1, d2),
                getW(wR, wC, `+f+` + 2, d2)
              );

              if (`+p+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+f+`),
                  getX(batch, xR, xC, `+f+` + 1),
                  getX(batch, xR, xC, `+f+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+f+`, xR, xC),
                  getX(batch, `+f+` + 1, xR, xC),
                  getX(batch, `+f+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+x+`
        `+b+`
        setOutput(result);
      }
    `},ire=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,f=e.filterWidth,h=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+o+", "+i+", "+a+`);
      const ivec3 pads = ivec3(`+t+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+f+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+h+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(p===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+h+`) *
                  getW(wF, wR, wC, `+h+`, d2);
              } else if (`+(p===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(p===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1),
                  getX(batch, xF, xR, xC, `+h+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2),
                  getW(wF, wR, wC, `+h+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},AE=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.inHeight,i=e.inWidth,a=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=e.outChannels/e.inChannels,v="",y="";n&&(v=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,y="result = activation(result);");var m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+v+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+p+`;
        int q = d2 - d1 * `+p+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+f+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+o+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+m+`
        `+y+`
        setOutput(result);
      }
    `},DE=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var o=e.inHeight,i=e.inWidth,a=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,f=e.filterHeight,h=e.filterWidth,p=h,v="int xR; int xC; int xCOffset;",y=0;y<f;y++)for(var m=0;m<h;m++)v+=`
          vec4 xTexelR`+y+"C"+2*m+` = vec4(0.);
          vec4 wR`+y+"C"+m+` = vec4(0.);
          vec4 xR`+y+"C"+m+" = vec4(0.);";for(y=0;y<f;y++)for(var g=0;g<p;g++){if(v+=`
          xR = xRCorner + `+y*c+`;
          xC = xCCorner + `+(m=2*g)*d+`;
        `,l===1){if(m<h&&(v+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+y+"C"+m+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+y+"C"+m+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+y+"C"+m+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+y+"C"+m+" = vec4(previous.zw, xTexelR"+y+"C"+m+`.xy);
                } else {
                  xR`+y+"C"+m+" = vec4(0, 0, xTexelR"+y+"C"+m+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+o+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+y+"C"+m+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+y+"C"+m+` = vec4(0.);
                }

                xR`+y+"C"+m+" = xTexelR"+y+"C"+m+`;
              `,m+1<h)){var b=s%2==0?RM(d):d;d%2==0&&s%2==1||d%2!=0&&s%2!=1?(v+=`
                  xCOffset = xC + `+s%2+" + "+b+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+y+"C"+(m+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,d>1&&(v+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+o+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+y+"C"+m+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+y+"C"+m+` = vec4(0.);
                    }
                  `),v+=`
                  xR`+y+"C"+(m+1)+` = vec4(
                    xTexelR`+y+"C"+m+".zw, xTexelR"+y+"C"+(m+2)+`.xy);
                `):v+=`
                  xCOffset = xC + `+b+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+y+"C"+(m+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+y+"C"+(m+1)+" = xTexelR"+y+"C"+(m+2)+`;
                `}}else m<h&&(v+=`
              if(xR >= 0 && xR < `+o+`) {
            `,s%2==1?(v+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+y+"C"+m+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+y+"C"+m+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+y+"C"+(m+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+y+"C"+(m+2)+` = vec4(0.);
                }

                xR`+y+"C"+m+` = vec4(
                  xTexelR`+y+"C"+m+".zw, xTexelR"+y+"C"+(m+2)+`.zw);
              `,m+1<h&&(v+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+y+"C"+(m+1)+" = vec4(xTexelR"+y+"C"+(m+2)+`.xy, final.xy);
                `)):(v+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+y+"C"+m+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+y+"C"+m+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+y+"C"+(m+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+y+"C"+(m+2)+` = vec4(0.);
                }

                xR`+y+"C"+m+` = vec4(
                  xTexelR`+y+"C"+m+".xy, xTexelR"+y+"C"+(m+2)+`.xy);
              `,m+1<h&&(v+=`
                  xR`+y+"C"+(m+1)+` = vec4(
                    xTexelR`+y+"C"+m+".zw, xTexelR"+y+"C"+(m+2)+`.zw);
                `)),v+="}");m<h&&(v+=`
            vec4 wTexelR`+y+"C"+m+" = getW("+y+", "+m+`, d1, q);
            wR`+y+"C"+m+" = vec4(wTexelR"+y+"C"+m+".xz, wTexelR"+y+"C"+m+`.xz);
          `,m+1<h&&(v+=`
              vec4 wTexelR`+y+"C"+(m+1)+" = getW("+y+", "+(m+1)+`, d1, q);
              wR`+y+"C"+(m+1)+` =
                vec4(wTexelR`+y+"C"+(m+1)+".xz, wTexelR"+y+"C"+(m+1)+".xz);"))}for(y=0;y<f;y++)for(m=0;m<h;m++)v+="dotProd += xR"+y+"C"+m+" * wR"+y+"C"+m+";";var x="",w="";n&&(x=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,w="result = activation(result);");var S=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+v+`

        vec4 result = dotProd;
        `+S+`
        `+w+`
        setOutput(result);
      }
    `},are=function(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],a=e[1],s=e[2],u=e[3],l=t[0],c=n[0],d=n[1];this.outputShape=[l,c,d,u];var f=r==="bilinear"?1:0,h=[a-1+".0",s-1+".0"],p=h[0],v=h[1],y=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],m=y[0],g=y[1],b=y[2],x=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],w=x[0],S=x[1],C=x[2];this.userCode=`
      const float height_ratio = float(`+m+`);
      const float width_ratio = float(`+w+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+g+`;
        float width_scale = `+S+`;

        float in_y = `+b+`;
        if( in_y < 0.0 || in_y > `+p+` ) {
          setOutput(float(`+o+`));
          return;
        }
        float in_x = `+C+`;
        if( in_x < 0.0 || in_x > `+v+` ) {
          setOutput(float(`+o+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+f+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},sre=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,o=e[e.length-1],i=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+o+" -i - 1;":"return i;")+`
      }

      void main() {
        `+tt(r)+` coords = getOutputCoords();
        int end = `+ME(r,"coords")+`;
        float val = 0.0;
        for (int i = `+o+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+ME(r,"coords")+` = idx;
          val += getX(`+function(a,s){if(a===1)return""+s;if(a===2)return s+".x, "+s+".y";if(a===3)return s+".x, "+s+".y, "+s+".z";if(a===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+a+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function ME(e,t){if(e===1)return""+t;if(e===2)return t+".y";if(e===3)return t+".z";if(e===4)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var ure=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Jc.DENSE;var t=lc(e),n=vn();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Ba(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},lre=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Jc.DENSE;var t=lc(e),n=vn();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Ba(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},cre=function(){function e(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),dre=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},fre=function(e){this.variableNames=["A"],this.outTexUsage=ir.DOWNLOAD;var t=vn();this.outputShape=e,this.userCode=`
      `+sO+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},hre=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=ir.DOWNLOAD;var t=vn();this.outputShape=e,this.userCode=`
      `+sO+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},pre=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=vn(),o=t[0],i=t[1];this.outputShape=e;var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      `+Xx(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+o+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+a+`, 0., 0., 0.);
      }
    `},vre=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=vn(),o=t[0],i=t[1];this.outputShape=e;var a="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;a+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+e[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+e[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+o+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+Xx(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+a+`

        `+r.output+" = "+s+`;
      }
    `},mre="return real * expR - imag * expI;",gre="return real * expI + imag * expR;",OE=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+o+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},yre=function(){function e(t,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,o){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(o,"value")),r.gl.uniform1f(n.valueLoc,t)}},e}(),bre=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var o=tt(this.rank),i=function(a,s){var u=a.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],d=0;d<a.length;d++)d===s?c.push("int(getIndices("+l[d]+"))"):c.push(""+l[d]);return c.join()}(e,n);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},xre=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=tt(t.length),o=tt(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+o+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function wre(e,t){var n=vn();return mte(e,t,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function Sre(e,t){return wte(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Cre(e,t){return Ste(e,t,new Uint16Array([0,1,2,2,1,3]))}function Ad(e,t,n,r,o,i,a){_te(n,r);var s=Cte(e,t),u=e.TEXTURE_2D;return fe(e,t,function(){return e.bindTexture(u,s)}),fe(e,t,function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),fe(e,t,function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),fe(e,t,function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)}),fe(e,t,function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)}),fe(e,t,function(){return e.texImage2D(u,0,o,n,r,0,i,a,null)}),fe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),s}function _re(e,t,n,r,o){var i=Kv(n,r);return Ad(e,t,i[0],i[1],o.internalFormatFloat,o.textureFormatFloat,e.FLOAT)}function Ere(e,t,n,r,o){var i=Kv(n,r);return Ad(e,t,i[0],i[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function kre(e,t,n,r,o){var i=Kv(n,r);return Ad(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function Tre(e,t,n,r,o){var i=Id(n,r);return Ad(e,t,i[0],i[1],o.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function Rre(e,t,n,r,o){var i=Id(n,r);return Ad(e,t,i[0],i[1],o.internalFormatPackedHalfFloat,e.RGBA,o.textureTypeHalfFloat)}function Pre(e,t,n,r){return fe(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),wE(e,t,n,"clipSpacePos",r,3,20,0)&&wE(e,t,n,"uv",r,2,20,12)}function Ire(e,t,n,r,o,i,a){var s,u,l;fe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),i instanceof Uint8Array?(s=new Uint8Array(r*o*4),u=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(r*o*4),u=e.FLOAT,l=a.internalFormatPackedFloat),s.set(i),fe(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,l,r,o,0,e.RGBA,u,s)}),fe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function Are(e,t,n,r){fe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),r.data instanceof Uint8Array?fe(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):fe(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),fe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function Dre(e,t,n,r,o){var i=e.createBuffer();fe(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)});var a=16*n*r;return fe(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)}),fe(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),fe(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),i}function Mre(e,t,n){var r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function Ore(e,t,n,r,o){var i=Kv(n,r),a=i[0],s=i[1],u=new Uint8Array(n*r*4);return fe(e,t,function(){return e.readPixels(0,0,a,s,o.downloadTextureFormat,e.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function Nre(e,t,n,r,o,i,a,s){var u=e,l=new Float32Array(function(c,d){var f=Id(c,d);return f[0]*f[1]*4}(i,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function Fre(e,t,n,r){var o=new Float32Array(n*r*4);return fe(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,o)}),o}var Bre=function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Y().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,dte(n,t)):this.gl=Wo(n);var r="WEBGL_color_buffer_float";if(Y().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Df(this.gl,this.debug,"OES_texture_float"),Mr(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Df(this.gl,this.debug,"OES_texture_half_float");else if(Y().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Mr(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Df(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Y().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Mr(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Mr(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Sre(this.gl,this.debug),this.indexBuffer=Cre(this.gl,this.debug),this.framebuffer=Ete(this.gl,this.debug),this.textureConfig=$x(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Y().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;fe(n,this.debug,function(){return n.finish()}),fe(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),fe(n,this.debug,function(){return n.deleteFramebuffer(t.framebuffer)}),fe(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),fe(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),fe(n,this.debug,function(){return n.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,n){return this.throwIfDisposed(),_re(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,n){return this.throwIfDisposed(),Ere(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,n){return this.throwIfDisposed(),kre(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,n){this.throwIfDisposed(),Are(this.gl,this.debug,t,n)},e.prototype.uploadDenseMatrixToTexture=function(t,n,r,o){this.throwIfDisposed(),Ire(this.gl,this.debug,t,n,r,o,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,n){return this.throwIfDisposed(),Rre(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,n){return this.throwIfDisposed(),Tre(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var n=this;this.throwIfDisposed(),this.outputTexture===t&&(SE(this.gl,this.debug,this.framebuffer),this.outputTexture=null),fe(this.gl,this.debug,function(){return n.gl.deleteTexture(t)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,n,r){var o=this;return this.downloadMatrixDriver(t,function(){return Ore(o.gl,o.debug,n,r,o.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(t,n,r,o,i,a){return Nre(this.gl,t,0,0,0,i,a,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,n){return Mre(this.gl,t,n)},e.prototype.createBufferFromTexture=function(t,n,r){this.bindTextureToFrameBuffer(t);var o=Dre(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var n,r,o=this;if(Y().getBool("WEBGL_FENCE_API_ENABLED")){var i=t,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=function(){var s=i.clientWaitSync(a,0,0);return s===i.ALREADY_SIGNALED||s===i.CONDITION_SATISFIED},n=a}else Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return o.isQueryAvailable(n,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},e.prototype.downloadMatrixFromPackedTexture=function(t,n,r){var o=this;return this.downloadMatrixDriver(t,function(){return Fre(o.gl,o.debug,n,r)})},e.prototype.createProgram=function(t){this.throwIfDisposed();var n=this.gl,r=gte(n,this.debug,t),o=wre(n,this.debug),i=bte(n,this.debug);return fe(n,this.debug,function(){return n.attachShader(i,o)}),fe(n,this.debug,function(){return n.attachShader(i,r)}),xte(n,this.debug,i),this.debug&&Jg(n,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=Pre(n,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(t){var n=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&fe(this.gl,this.debug,function(){return n.gl.deleteProgram(t)})},e.prototype.setProgram=function(t){var n=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&Jg(this.gl,this.debug,this.program),fe(this.gl,this.debug,function(){return n.gl.useProgram(t)})},e.prototype.getUniformLocation=function(t,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?Tte(this.gl,this.debug,t,n):Rte(this.gl,t,n)},e.prototype.getAttributeLocation=function(t,n){var r=this;return this.throwIfDisposed(),fe(this.gl,this.debug,function(){return r.gl.getAttribLocation(t,n)})},e.prototype.getUniformLocationNoThrow=function(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)},e.prototype.setInputMatrixTexture=function(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),Pte(this.gl,this.debug,this.program,t,n,r)},e.prototype.setOutputMatrixTexture=function(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)},e.prototype.setOutputPackedMatrixTexture=function(t,n,r){this.throwIfDisposed();var o=Id(n,r),i=o[0],a=o[1];this.setOutputMatrixTextureDriver(t,i,a)},e.prototype.setOutputMatrixWriteRegion=function(t,n,r,o){this.setOutputMatrixWriteRegionDriver(r,t,o,n)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&Jg(this.gl,this.debug,this.program),Mf(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),fe(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),fe(this.gl,this.debug,function(){return t.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Df(this.gl,this.debug,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.createQuery();return t.beginQuery(n.TIME_ELAPSED_EXT,r),r}var o=this.getQueryTimerExtensionWebGL1(),i=o.createQueryEXT();return o.beginQueryEXT(o.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(t){return le(this,void 0,void 0,function(){var n=this;return ce(this,function(r){switch(r.label){case 0:return[4,vE(function(){return n.disposed||n.isQueryAvailable(t,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(t,Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(t,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}var o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(t,o.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(t,n){if(n===0)return!0;if(n===2){var r=this.gl,o=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(o=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,o.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(t){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return t.isFencePassed()},function(){return r()})})},e.prototype.pollItems=function(){for(var t=function(r){for(var o=0;o<r.length&&r[o]();++o);return o-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=t;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,n){var r=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1||vE(function(){return r.pollItems(),r.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),Zg(this.gl,this.debug,t,this.framebuffer),this.debug&&Mf(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Zg(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Mf(this.gl)):SE(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,n){this.bindTextureToFrameBuffer(t);var r=n();return this.unbindTextureToFrameBuffer(),r},e.prototype.setOutputMatrixTextureDriver=function(t,n,r){this.throwIfDisposed();var o=this.gl;Zg(o,this.debug,t,this.framebuffer),this.debug&&Mf(o),this.outputTexture=t,fe(o,this.debug,function(){return o.viewport(0,0,n,r)}),fe(o,this.debug,function(){return o.scissor(0,0,n,r)})},e.prototype.setOutputMatrixWriteRegionDriver=function(t,n,r,o){var i=this;this.throwIfDisposed(),fe(this.gl,this.debug,function(){return i.gl.scissor(t,n,r,o)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function NE(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(n,r){var o=n.logicalShape,i=t[r],a=i.shape;if(!qt(o,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+o+" and "+a+" must match");if(!n.isUniform||!i.isUniform){var s=n.texShape,u=i.isUniform?null:i.texData.texShape;if(!qt(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}var Lre=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,o=n.inChannels,i=n.strideWidth,a=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,d=n.dataFormat,f=s.left,h=s.top,p=o*r,v=vn(),y=d==="channelsLast",m=y?0:1,g=y?1:2,b="",x=0;x<=1;x++)for(var w=0;w<=1;w++)b+=`
          blockIndex = rc.y + `+w+`;
          pos = rc.x + `+x+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+a+" - "+h+`;
            d0 = offsetY + `+c+" * (pos / "+p+`);

            if(d0 < `+t[m]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+i+". - "+f+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+p+".) / "+o+`.));

              if(d1 < `+t[g]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+o+`.));

                if (`+y+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*x+w)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*x+w)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+b+`

        `+v.output+` = result;
      }
    `},$re=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];var i,a=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";i=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+a+"; j <= "+a+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},zre=function(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+o+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+o+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},Wre=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,a=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";i=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+a+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+a+"; j <= "+a+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},Vre=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=o-1-e.padInfo.top,s=i-1-e.padInfo.left,u=o*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+o+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},jre=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.front,d=u-1-e.padInfo.top,f=l-1-e.padInfo.left,h=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+d+", "+f+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+o+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+a+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+h+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},o0=function(e,t,n,r,o,i,a){n===void 0&&(n=!1),r===void 0&&(r=!1),o===void 0&&(o=!1),i===void 0&&(i=null),a===void 0&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",p="";i&&(h=a?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,p="result = activation(result);");var v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+h+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+d[0]+" * "+f[0]+`);
          result += (`+d[1]+" * "+f[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+v+`

        `+p+`

        setOutput(result);
      }
    `},Ure=function(){function e(t,n,r){this.variableNames=["probs"],this.outputShape=[t,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,o){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(o,"seed")),r.gl.uniform1f(n.seedLoc,t)}},e}(),Hre=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},Gre=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=Fn("rc",t),r=tt(t),o=function(s,u,l){if(s===1)return"rc > "+u[0];for(var c="",d=s-2;d<s;d++)c+=l[d]+" >= "+u[d],d<s-1&&(c+="||");return c}(t,e,n),i=function(s,u,l,c){if(s===1)return"";var d=c.slice(-2);return`
    int r = `+d[0]+`;
    int c = `+d[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `}(t,e[e.length-1],e[e.length-2],n),a=function(s,u){var l=s.length,c=function(d,f){for(var h=[],p=0;p<=1;p++)for(var v=0;v<=1;v++){for(var y=(p===0?"r":"rp1")+", "+(v===0?"c":"cp1"),m=2;m<d;m++)y=f[f.length-1-m]+","+y;h.push(y)}return h}(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(e,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+o+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+a+`));
          }
        }
      `}},qre=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(u,l){return u[0]+e[l]+u[1]});var r=e.length,o=tt(r),i=t.map(function(u){return u[0]}).join(","),a=t.map(function(u,l){return u[0]+e[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+o+" start = "+o+"("+i+`);
      `+o+" end = "+o+"("+a+`);

      void main() {
        `+o+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+o+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+a+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},Kre=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(y,m){return y[0]+e[m]+y[1]});for(var r=e.length,o=tt(r),i=t.map(function(y){return y[0]}).join(","),a=t.map(function(y,m){return y[0]+e[m]}).join(","),s=Fn("rc",r),u=Fn("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+u.slice(-2).join()+")",d=[o+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],f=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",p=0,v=r===1?2:4;p<v;p++)h+=`
        `+d[p]+`
        if (`+f+`) {
          result[`+p+"] = float("+n+`);
        } else {
          `+o+` source = rc - start;
          result[`+p+"] = getChannel(getX("+u.join()+"), "+c+`);
        }
      `;h+=r===1?"} ":"}}",this.userCode=`
      const `+o+" start = "+o+"("+i+`);
      const `+o+" end = "+o+"("+a+`);

      void main() {
        `+o+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+h+`
        setOutput(result);
      }
    `},i0=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=e.padInfo.top,d=e.padInfo.left;this.outputShape=e.outShape;var f=t==="avg",h="0.0";if(f||(h="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+o+", "+i+`);
        const ivec2 pads = ivec2(`+c+", "+d+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var p=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(p="avgValue / count");var v=4*Math.floor(r/4),y=r%4,m=`
      if (`+f+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+o+", "+i+`);
      const ivec2 pads = ivec2(`+c+", "+d+`);
      const float initializationValue = `+h+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+h+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+a+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+v+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+m+`
          }

          int xC = xCCorner + `+v+`;
          if (`+(y===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+m+`
          } else if (`+(y===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+m+`
          } else if (`+(y===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+m+`
          }
        }
        setOutput(`+p+`);
      }
    `}},a0=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=e.padInfo.front,p=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;var y=t==="avg",m="0.0";if(y||(m="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+o+", "+i+", "+a+`);
        const ivec3 pads = ivec3(`+h+", "+p+", "+v+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+d+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+f+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+d+" * "+f+` +
                      wR * `+f+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var g=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(g="avgValue / count");var b=4*Math.floor(r/4),x=r%4,w=`
      if (`+y+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+o+", "+i+", "+a+`);
      const ivec3 pads = ivec3(`+h+", "+p+", "+v+`);
      const float initializationValue = `+m+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+m+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+d+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+b+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+w+`
            }

            int xC = xCCorner + `+b+`;
            if (`+(x===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+w+`
            } else if (`+(x===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+w+`
            } else if (`+(x===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+w+`
            }
          }
          setOutput(`+g+`);
        }
      }
    `}},Xre=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=Math.ceil(o/n);this.outputShape=[r,i];var a="0.0",s="";t==="prod"?a="1.0":t==="min"?(a="1.0 / 1e-20",s="min"):t==="max"&&(a="-1.0 / 1e-20",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?u="sumValue":t==="prod"?u="prodValue":t==="all"?u="allValue":t==="any"&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,d=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,f="vec4";t==="all"?(a="1.0",d=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):t==="any"&&(a="0.0",d=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");var h="";o%n>0&&(h=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+a+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+a+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+d+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===2)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+d+`
        } else if (`+(c===3)+`) {
          `+f+" values = "+f+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+d+`
        }
        setOutput(`+u+`);
      }
    `},Yre=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+=`
        `+o+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Ba(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+Xx(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+n+`

        setOutput(result);
      }
    `},Qre=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],i=r[2],a=e.shape,s=a[1],u=a[2],l=[n&&s>1?o-1:o,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],f=l[1]/c[1],h=1/d,p=1/f,v=2*Math.ceil(h)+2,y=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+v+`);
        const int winWidth = int(`+y+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(o-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},Jre=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],i=e[1],a=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?a-1:a],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},Zre=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=e[0],i=e[1],a=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?a-1:a],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+a+`.0,
                                     `+a+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},eoe=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],i=r[2],a=e.shape,s=a[1],u=a[2],l=[n&&s>1?o-1:o,n&&u>1?i-1:i],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],f=l[1]/c[1],h=1/d,p=1/f,v=2*Math.ceil(h)+2,y=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+d+`);
        const float widthScale = float(`+f+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+v+`);
        const int winWidth = int(`+y+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},toe=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],i=e[1],a=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?i-1:i,r&&n>1?a-1:a],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},noe=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,n!==1){var r=e.map(function(i,a){return function(s){return t.indexOf(s)!==-1&&e[s]!==1?e[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(a)}).join(","),o=tt(n);this.userCode=`
      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},roe=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=Fn("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],i=r[n-2]+" + 1 < "+this.outputShape[n-2],a=tt(n);function s(u){var l=e.map(function(c,d){return function(f,h){return t.indexOf(f)!==-1&&e[f]!==1?e[f]+" - "+h[f]+" - 1":""+h[f]}(d,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+o+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+a+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return s(u)}(r.slice())+`;
          if(`+o+`){
            result.g = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",s(u)}(r.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(u){return u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            if(`+o+`) {
              result.a = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},FE=function(e,t,n,r,o,i,a){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=tt(o.length),u=tt(i.length),l="";n===1?l="i":n===2&&(l="i, j");var c="getIndices("+l+")",d="";r===1?d="i":r===2&&(d="i, coords[1]");var f="getUpdates("+d+")",h=t>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+o+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+h+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+f+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},ooe=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=e.numSegments,a=i*Math.ceil(o/n);this.outputShape=[r,a];var s=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,c="";o%n>0&&(c=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `);var d="";o%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+d+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},ioe=function(e,t,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)o="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<t.length;u++)s.push(""+i[u]),u<e&&a.push(""+i[u]);r=a.join(),o=s.join()}var l=tt(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+o+`));
        } else {
          setOutput(getB(`+o+`));
        }
      }
    `},aoe=function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=tt(this.rank),o="uniform int start["+this.rank+"];",i=function(a){if(a===1)return"sourceLoc";if(a<=6)return s0.slice(0,a).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+a+" is not yet supported")}(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+t.map(function(a,s){return"sourceLoc."+s0[s]+" = start["+s+"] + coords."+s0[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+o+`
      void main() {
        `+n+`
        setOutput(getSource(`+i+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e}(),s0=["x","y","z","w","u","v"],soe=function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=tt(this.rank),r=Fn("coords",this.rank),o=Fn("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+o.slice(-2).join()+")",a="getChannel(getSource("+o.join()+"), "+i+")",s=`
      result.x = `+a+`;
      if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+o[this.rank-1]+`;
        result.y = `+a+`;
        --`+o[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+o[this.rank-2]+`;
        result.z = `+a+`;
        if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+o[this.rank-1]+`;
          result.w = `+a+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+t.map(function(c,d){return"start["+d+"]"}).join()+");":t.map(function(c,d){return o[d]+" = "+r[d]+" + start["+d+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e}(),uoe=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=tt(n.length),i=tt(n.length),a="";if(r===1)a="coords * strides + begin";else{var s=0;a=n.map(function(u,l){return s++,n.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+o+" begin = "+o+"("+e+`);
      `+o+" strides = "+o+"("+t+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+a+`));
      }
    `},loe=function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(t,n,r){var o,i=BE(n,r),a=LE(t,i,r);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return this.numUsedTextures++,this.log(),i===rr.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===rr.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===rr.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===rr.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===rr.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[a].push(o),o},e.prototype.releaseTexture=function(t,n,r,o){if(this.freeTextures!=null){var i=LE(n,BE(r,o),o);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[i],s=a.indexOf(t);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(s,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){t.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(o){t.gpgpu.deleteMatrixTexture(o)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function BE(e,t){if(e===ir.UPLOAD)return rr.PACKED_2X2_FLOAT32;if(e===ir.RENDER||e==null)return function(n){return Y().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?rr.PACKED_2X2_FLOAT32:rr.UNPACKED_FLOAT32:n?rr.PACKED_2X2_FLOAT16:rr.UNPACKED_FLOAT16}(t);if(e===ir.DOWNLOAD||e===ir.PIXELS)return rr.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function LE(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var coe=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var o=tt(this.rank),i=function(a){var s=a.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+a[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],c=0;c<a.length;c++)l.push("imod("+u[c]+", "+a[c]+")");return l.join()}(e);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},doe=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var o=tt(this.rank),i=function(a){var s=a.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),c=0;c<a.length;c++)l[a[c]]=u[c];return l.join()}(t);this.userCode=`
    void main() {
      `+o+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},foe=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=tt(this.rank),i=aO("rc",this.rank),a=new Array(this.rank);for(r=0;r<t.length;r++)a[t[r]]=i[r];var s="vec2("+a.slice(-2).join()+")",u="++"+i[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+a.join()+"), "+s+")";this.userCode=`
    void main() {
      `+o+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `},Yx=1.7580993408473768,Qx=1.0507009873554805,ke=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},io="if (isnan(x)) return x;",hoe="return x;",$E="return abs(x);",dO=io+`
  return (x < 0.0) ? 0.0 : x;
`,fO=io+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,hO="return (x >= 0.0) ? x : (exp(x) - 1.0);",poe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+Yx+`;
  float scale = `+Qx+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,zE="return -x;",WE="return ceil(x);",VE="return floor(x);",jE="return exp(x);",UE="return exp(x) - 1.0;",voe=io+`
  return sin(x);
`,moe=io+`
  return cos(x);
`,goe=io+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,yoe=io+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,boe=io+`
  return atan(x);
`,xoe=io+"return log(x + sqrt(x * x + 1.0));",woe=io+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,Soe=io+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Bf="return x;",Coe="return x;",pO=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,vO=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mO=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Rl=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},_oe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=Fn("rc",t),r=tt(t),o=function(s,u){if(s===1)return"rc";for(var l="",c=0;c<s;c++)l+=u[c],c<s-1&&(l+=",");return l}(t,n),i=n.slice(-2),a=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+o+`);

        setOutput(getChannel(packedInput, `+a+`));
      }
    `},Lf={};function $f(e,t){if(t===void 0&&(t=!1),e==="linear")return t?Coe:hoe;if(e==="relu")return t?pO:dO;if(e==="elu")return t?mO:hO;if(e==="relu6")return t?vO:fO;if(e==="prelu")return t?cO:lO;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var Eoe=600,koe=function(e){function t(n){var r,o=e.call(this)||this;if(o.pendingRead=new WeakMap,o.pendingDisposal=new WeakSet,o.dataRefCount=new WeakMap,o.numBytesInGPU=0,o.uploadWaitMs=0,o.downloadWaitMs=0,o.warnedAboutMemory=!1,o.pendingDeletes=0,o.disposed=!1,!Y().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var i=Wo(Y().getNumber("WEBGL_VERSION"));o.binaryCache=((r=Y().getNumber("WEBGL_VERSION"))in Lf||(Lf[r]={}),Lf[r]),o.gpgpu=new Bre(i),o.canvas=i.canvas,o.gpgpuCreatedLocally=!0}else o.gpgpu=n,o.binaryCache={},o.gpgpuCreatedLocally=!1,o.canvas=n.gl.canvas;return o.textureManager=new loe(o.gpgpu),o.numMBBeforeWarning=Y().global.screen==null?1024:Y().global.screen.height*Y().global.screen.width*window.devicePixelRatio*Eoe/1024/1024,o.texData=new QM(o,z),o}return oo(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(n,r,o){if(Y().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:r,dtype:o,values:n,usage:ir.UPLOAD}),i},t.prototype.move=function(n,r,o,i){if(Y().getBool("DEBUG")&&this.checkNumericalProblems(r),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:o,dtype:i,values:r,usage:ir.UPLOAD})},t.prototype.readSync=function(n){var r=this.texData.get(n),o=r.values,i=r.dtype,a=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var c=void 0;c=l?new Rl(u,Bf):new ke(u,Bf);var d=this.runWebGLProgram(c,[{dataId:n,shape:u,dtype:i}],i),f=this.readSync(d.dataId);return this.disposeData(d.dataId),f}if(o!=null)return this.convertAndCacheOnCPU(n);if(i==="string")return o;var h,p,v=this.activeTimers!=null;return v&&(h=vo()),i==="complex64"?p=g1(a.real.dataSync(),a.imag.dataSync()):p=this.getValuesFromTexture(n),v&&(this.downloadWaitMs+=vo()-h),this.convertAndCacheOnCPU(n,p)},t.prototype.read=function(n){return le(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,d,f,h,p,v,y,m,g,b,x,w,S,C,_;return ce(this,function(k){switch(k.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(E){return r.push(E)})];if(o=this.texData.get(n),i=o.values,a=o.shape,s=o.slice,u=o.dtype,l=o.complexTensors,c=o.isPacked,s!=null)return d=void 0,d=c?new Rl(a,Bf):new ke(a,Bf),f=this.runWebGLProgram(d,[{dataId:n,shape:a,dtype:u}],u),h=this.read(f.dataId),this.disposeData(f.dataId),[2,h];if(i!=null)return[2,this.convertAndCacheOnCPU(n)];if(!Y().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Y().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return p=null,u!=="complex64"&&Y().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(n),y=this.texData.get(v.dataId),p=(_=this.gpgpu).createBufferFromTexture.apply(_,[y.texture].concat(lc(a)))),this.pendingRead.set(n,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:k.sent(),k.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return g=k.sent(),b=g[0],x=g[1],m=g1(b,x),[3,5];case 4:p==null?m=this.getValuesFromTexture(n):(w=de(a),m=this.gpgpu.downloadFloat32MatrixFromBuffer(p,w)),k.label=5;case 5:return v!=null&&this.disposeData(v.dataId),S=this.convertAndCacheOnCPU(n,m),C=this.pendingRead.get(n),this.pendingRead.delete(n),C.forEach(function(E){return E(S)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,S]}})})},t.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var o=n[r];if(!pte(o))throw Y().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+o+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+o+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(n){var r,o=this.texData.get(n),i=o.shape,a=o.dtype,s=o.isPacked,u=de(i);if(Y().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(n),c=this.texData.get(l.dataId),d=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(lc(i))).subarray(0,u);return this.disposeData(l.dataId),d}var f=Y().getBool("WEBGL_PACK")&&s===!0,h=f?e0(i):i,p=f?new hre(h):new fre(h),v=this.runWebGLProgram(p,[{shape:h,dtype:a,dataId:n}],"float32"),y=this.texData.get(v.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(y.texture,y.texShape[0],y.texShape[1]).subarray(0,u);return this.disposeData(v.dataId),m},t.prototype.time=function(n){return le(this,void 0,void 0,function(){var r,o,i,a,s,u,l;return ce(this,function(c){switch(c.label){case 0:return r=this.activeTimers,o=[],i=!1,this.programTimersStack==null?(this.programTimersStack=o,i=!0):this.activeTimers.push(o),this.activeTimers=o,n(),a=ju(this.activeTimers.map(function(d){return d.query})).filter(function(d){return d!=null}),s=ju(this.activeTimers.map(function(d){return d.name})).filter(function(d){return d!=null}),this.activeTimers=r,i&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(a)]:[3,2];case 1:return l=c.sent(),u.kernelMs=Kee(l),u.getExtraProfileInfo=function(){return l.map(function(d,f){return{name:s[f],ms:d}}).map(function(d){return d.name+": "+d.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:vo(),endMs:null}},t.prototype.endTimer=function(n){return Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=vo(),n)},t.prototype.getQueryTime=function(n){return le(this,void 0,void 0,function(){var r;return ce(this,function(o){return Y().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]})})},t.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},t.prototype.releaseGPUData=function(n){var r=this.texData.get(n),o=r.texture,i=r.dtype,a=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,c=l&&l.origDataId||n,d=this.dataRefCount.get(c);d>1?this.dataRefCount.set(c,d-1):(this.dataRefCount.delete(c),o!=null&&(this.numBytesInGPU-=this.computeBytes(a,i),this.textureManager.releaseTexture(o,a,s,u)));var f=this.texData.get(n);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null},t.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},t.prototype.getDataInfo=function(n){return this.texData.get(n)},t.prototype.getCPUBackend=function(){return Y().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=z.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(n,r){var o=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every(function(i){return o.texData.get(i.dataId).texture==null&&i.size<r})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(n,r){var o=this.makeOutput(n.shape,"complex64");return this.texData.get(o.dataId).complexTensors={real:z.keep(n.clone()),imag:z.keep(r.clone())},o},t.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,o){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,o);if(de(o)===0)return rn([],o,n.dtype);var i=this.texData.get(n.dataId).isPacked,a=XM(n.shape,r,o);if(i||!a){var s=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new soe(o):new aoe(o),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,u)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,o)},t.prototype.shallowSlice=function(n,r,o){var i=this.texData.get(n.dataId),a=this.makeOutput(o,n.dtype),s=this.texData.get(a.dataId);Object.assign(s,i),s.shape=o,s.dtype=n.dtype;var u=YM(r,n.strides);i.slice&&(u+=i.slice.flatOffset),s.slice={flatOffset:u,origDataId:i.slice&&i.slice.origDataId||n.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),a},t.prototype.stridedSlice=function(n,r,o,i){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,o,i);var a=Ux(r,o,i);if(a.some(function(u){return u===0}))return rn([],a);var s=new uoe(r,i,a);return this.compileAndRun(s,[n])},t.prototype.reverse=function(n,r){var o=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new roe(n.shape,r):new noe(n.shape,r);return this.compileAndRun(o,[n])},t.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var o=n.map(function(h){return Ir(h)}),i=n.map(function(h){return wo(h)});return en(this.concat(o,r),this.concat(i,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>Y().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(n.length/2),s=this.concat(n.slice(0,a),r),u=this.concat(n.slice(a),r);return this.concat([s,u],r)}if(Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var l=new Jne(n.map(function(h){return h.shape}),r);return this.compileAndRun(l,n)}var c=Hu(n.map(function(h){return h.shape}),r),d=n.map(function(h){return h.as2D(-1,de(h.shape.slice(r)))}),f=new Qne(d.map(function(h){return h.shape}));return this.compileAndRun(f,d).reshape(c)},t.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(Y().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,zE,n.dtype);var r=new ke(n.shape,zE);return this.compileAndRun(r,[n])},t.prototype.batchMatMul=function(n,r,o,i){var a=o?n.shape[2]:n.shape[1],s=i?r.shape[1]:r.shape[2],u=o?n.shape[1]:n.shape[2],l=n.shape[0];if((a===1||s===1)&&u>1e3){o&&(n=n.transpose([0,2,1])),i&&(r=r.transpose([0,2,1]));var c=s===1?n:n.as3D(l,u,1),d=s===1?2:1,f=s===1?r.as3D(l,1,u):r;return this.multiply(c,f).sum(d,!0)}var h=tn(n.dtype,r.dtype),p=new o0(n.shape,[l,a,s],o,i);return this.compileAndRun(p,[n,r],h)},t.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,i=n.transposeA,a=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=i?r.shape[2]:r.shape[1],d=a?o.shape[1]:o.shape[2],f=r.shape[0],h=tn(r.dtype,o.dtype),p=s!=null,v=l!=null,y=u?$f(u,!0):null,m=new o0(r.shape,[f,c,d],i,a,p,y,v),g=[r,o];return s&&g.push(s),l&&g.push(l),this.compileAndRun(m,g,h)},t.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var o=this.texData.get(n.dataId),i=this.texData.get(r.dataId),a=new RE(Gne,n.shape,r.shape),s=new RE(qne,n.shape,r.shape),u=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag),this.makeComplexComponentTensorInfo(r,i.complexTensors.real),this.makeComplexComponentTensorInfo(r,i.complexTensors.imag)],l=this.compileAndRun(a,u),c=this.compileAndRun(s,u),d=this.complex(l,c);return l.dispose(),c.dispose(),d}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,PE,n.dtype);var f=new xt(PE,n.shape,r.shape);return this.compileAndRun(f,[n,r],n.dtype)},t.prototype.batchNormalization=function(n,r,o,i,a,s){var u=[n,r,o],l=null;s!=null&&(l=s.shape,u.push(s));var c=null;if(a!=null&&(c=a.shape,u.push(a)),Y().getBool("WEBGL_PACK_NORMALIZATION")){var d=new Hne(n.shape,r.shape,o.shape,l,c,i);return this.compileAndRun(d,u)}var f=new Une(n.shape,r.shape,o.shape,l,c,i);return this.compileAndRun(f,u)},t.prototype.localResponseNormalization4D=function(n,r,o,i,a){var s=Y().getBool("WEBGL_PACK_NORMALIZATION")?new Wre(n.shape,r,o,i,a):new $re(n.shape,r,o,i,a);return this.compileAndRun(s,[n])},t.prototype.LRNGrad=function(n,r,o,i,a,s,u){var l=new zre(r.shape,i,a,s,u);return this.compileAndRun(l,[r,o,n])},t.prototype.tile=function(n,r){if(n.dtype==="string"){var o=this.readSync(n.dataId).map(function(a){return Cp(a)});return oO(Ee(n.shape,n.dtype,o),r)}var i=new coe(n.shape,r);return this.compileAndRun(i,[n])},t.prototype.pad=function(n,r,o){var i=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Kre(n.shape,r,o):new qre(n.shape,r,o);return this.compileAndRun(i,[n])},t.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var o=Y().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new foe(n.shape,r):new doe(n.shape,r);return this.compileAndRun(o,[n])},t.prototype.gather=function(n,r,o){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,o);var i=new bre(n.shape,r.size,o);return this.compileAndRun(i,[n,r])},t.prototype.batchToSpaceND=function(n,r,o){P(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(d,f){return d*f}),a=Pp(n.shape,r,i),s=Ip(a.length,r.length),u=Ap(n.shape,r,i),l=HM(o,r.length),c=GM(u,o,r.length);return n.reshape(a).transpose(s).reshape(u).slice(l,c)},t.prototype.spaceToBatchND=function(n,r,o){P(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=r.reduce(function(f,h){return f*h}),a=[[0,0]];a.push.apply(a,o);for(var s=1+r.length;s<n.shape.length;++s)a.push([0,0]);var u=n.pad(a),l=Pp(u.shape,r,i,!1),c=Ip(l.length,r.length,!1),d=Ap(u.shape,r,i,!1);return u.reshape(l).transpose(c).reshape(d)},t.prototype.reduce=function(n,r,o){var i=n.shape[0],a=n.shape[1],s=t0(a),u=new Xre({windowSize:s,inSize:a,batchSize:i},r),l=this.compileAndRun(u,[n],o);return l.shape[1]===1?l:this.reduce(l,r,o)},t.prototype.argReduce=function(n,r,o){o===void 0&&(o=null);var i=n.shape[0],a=n.shape[1];o!=null&&(i=o.shape[0],a=o.shape[1]);var s=t0(a),u=new Nne({windowSize:s,inSize:a,batchSize:i},r,o==null),l=[n];o!=null&&l.push(o);var c=this.compileAndRun(u,l,"int32");return c.shape[1]===1?c:this.argReduce(n,r,c)},t.prototype.argReducePacked=function(n,r,o){o===void 0&&(o=null);var i=o!=null?o.shape:n.shape,a=t0(i[i.length-1]),s=new Wne(i,a,r,o==null),u=o==null?[n]:[n,o],l=this.compileAndRun(s,u,"int32");return l.rank===n.rank?this.argReducePacked(n,r,l):l},t.prototype.sum=function(n,r){tr("sum",r,n.rank);var o=fn(n.shape,r),i=o[0],a=de(o[1]),s=n.as2D(-1,a),u=qg(n.dtype);return this.reduce(s,"sum",u).reshape(i)},t.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var o=fn(n.shape,r),i=o[0],a=de(o[1]),s=n.as2D(-1,a),u=qg(n.dtype);return this.reduce(s,"prod",u).reshape(i)},t.prototype.unsortedSegmentSum=function(n,r,o){var i=0,a=Vo([i],n.rank),s=n;a!=null&&(s=n.transpose(a),i=jo(1,n.rank)[0]);var u=function(h,p,v){for(var y=[],m=h.length,g=0;g<m;g++)g!==p?y.push(h[g]):y.push(v);return y}(s.shape,i,o),l=de([s.shape[i]]),c=s.as2D(-1,l),d=qg(n.dtype),f=this.segOpCompute(c,"unsortedSegmentSum",r,d,o).reshape(u);return a!=null&&(f=f.transpose(zx(a))),f},t.prototype.segOpCompute=function(n,r,o,i,a){var s=n.shape[0],u=n.shape[1],l=function(f,h){var p,v=!1;for(f<=KM?(p=f,v=!0):p=u1(f,Math.floor(Math.sqrt(f)));!v;)p>h||p===f?v=!0:p=u1(f,p+1);return p}(u,a),c=new ooe({windowSize:l,inSize:u,batchSize:s,numSegments:a}),d=this.compileAndRun(c,[n,o],i);return d.shape[1]===a?d:(o=Rp(0,a).tile([u/l]),this.segOpCompute(d,r,o,i,a))},t.prototype.argMinMaxReduce=function(n,r,o){var i=[r];if(tr("arg"+o.charAt(0).toUpperCase()+o.slice(1),i,n.rank),!Y().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var a=fn(n.shape,i),s=a[0],u=de(a[1]),l=n.as2D(-1,u);return this.argReduce(l,o).reshape(s)}return this.argReducePacked(n,o)},t.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},t.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},t.prototype.cumsum=function(n,r,o,i){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var a=new sre(n.shape,o,i);return this.compileAndRun(a,[n])},t.prototype.equal=function(n,r){if(Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var o=new xt("return float(a == b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.notEqual=function(n,r){if(Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var o=new xt("return float(a != b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var o=new xt("return float(a < b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.lessEqual=function(n,r){if(Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var o=new xt("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var o=new xt("return float(a > b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.greaterEqual=function(n,r){if(Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var o=new xt("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.logicalNot=function(n){var r=new ke(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},t.prototype.logicalAnd=function(n,r){if(Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var o=new xt("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.logicalOr=function(n,r){if(Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var o=new xt("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.select=function(n,r,o){var i=new ioe(n.rank,r.shape,r.rank);return this.compileAndRun(i,[n,r,o],tn(r.dtype,o.dtype))},t.prototype.where=function(n){kp("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return Kx(n.shape,r)},t.prototype.topk=function(n,r,o){return iO(n.dataSync(),n.shape,n.dtype,r)},t.prototype.min=function(n,r){tr("min",r,n.rank);var o=fn(n.shape,r),i=o[0],a=de(o[1]),s=n.as2D(-1,a);return this.reduce(s,"min",s.dtype).reshape(i)},t.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var o=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ko(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new xt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.mod=function(n,r){var o=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ko(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new xt(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);tr("max",r,n.rank);var o=fn(n.shape,r),i=o[0],a=de(o[1]),s=n.as2D(-1,a);return this.reduce(s,"max",s.dtype).reshape(i)},t.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var o=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ko(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new xt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.all=function(n,r){tr("all",r,n.rank);var o=fn(n.shape,r),i=o[0],a=de(o[1]),s=n.as2D(-1,a);return this.reduce(s,"all",s.dtype).reshape(i)},t.prototype.any=function(n,r){tr("any",r,n.rank);var o=fn(n.shape,r),i=o[0],a=de(o[1]),s=n.as2D(-1,a);return this.reduce(s,"any",s.dtype).reshape(i)},t.prototype.realDivide=function(n,r){if(Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var o=new xt(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(o,[n,r],"float32")},t.prototype.floorDiv=function(n,r){if(Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var o=new xt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(o,[n,r],"int32")},t.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,n0);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var o=tn(n.dtype,r.dtype);if(Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,n0,o);var i=new xt(n0,n.shape,r.shape);return this.compileAndRun(i,[n,r],o)},t.prototype.packedUnaryOp=function(n,r,o){var i=new Rl(n.shape,r);return this.compileAndRun(i,[n],o)},t.prototype.packedBinaryOp=function(n,r,o,i,a){a===void 0&&(a=!1);var s=new Ko(o,n.shape,r.shape,a);return this.compileAndRun(s,[n,r],i)},t.prototype.complexSeparableBinaryOp=function(n,r,o){var i=this,a=this.texData.get(n.dataId),s=this.texData.get(r.dataId),u=[[a.complexTensors.real,s.complexTensors.real],[a.complexTensors.imag,s.complexTensors.imag]].map(function(f){var h=f[0],p=f[1],v=i.makeComplexComponentTensorInfo(n,h),y=i.makeComplexComponentTensorInfo(r,p),m=new xt(o,n.shape,r.shape);return i.compileAndRun(m,[v,y],tn(h.dtype,p.dtype))}),l=u[0],c=u[1],d=this.complex(l,c);return l.dispose(),c.dispose(),d},t.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},t.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>Y().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),o=this.addN(n.slice(0,r)),i=this.addN(n.slice(r));return this.addN([o,i])}var a=n.map(function(l){return l.dtype}).reduce(function(l,c){return tn(l,c)}),s=n.map(function(l){return l.shape}),u=Y().getBool("WEBGL_PACK")?new One(n[0].shape,s):new Mne(n[0].shape,s);return this.compileAndRun(u,n,a)},t.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,r0);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var o=tn(n.dtype,r.dtype);if(Y().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,r0,n.dtype);var i=new xt(r0,n.shape,r.shape);return this.compileAndRun(i,[n,r],o)},t.prototype.pow=function(n,r){var o=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ko(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new xt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),i=tn(n.dtype,r.dtype);return this.compileAndRun(o,[n,r],i)},t.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(Y().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,WE,n.dtype);var r=new ke(n.shape,WE);return this.compileAndRun(r,[n])},t.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(Y().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,VE,n.dtype);var r=new ke(n.shape,VE);return this.compileAndRun(r,[n])},t.prototype.sign=function(n){var r=new ke(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},t.prototype.isNaN=function(n){var r=new ke(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isInf=function(n){var r=new ke(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isFinite=function(n){var r=new ke(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.round=function(n){var r=new ke(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},t.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(Y().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,jE,n.dtype);var r=new ke(n.shape,jE);return this.compileAndRun(r,[n])},t.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(Y().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,UE,n.dtype);var r=new ke(n.shape,UE);return this.compileAndRun(r,[n])},t.prototype.softmax=function(n,r){var o=Wt([r],n.shape),i=this.max(n,o),a=qn(i.shape,o),s=this.subtract(n,i.reshape(a)),u=this.exp(s),l=this.sum(u,o).reshape(a);return this.realDivide(u,l)},t.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(Y().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new ke(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},t.prototype.log1p=function(n){var r=new ke(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},t.prototype.sqrt=function(n){var r=new ke(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},t.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new ke(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},t.prototype.reciprocal=function(n){var r=new ke(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},t.prototype.relu=function(n){var r;return r=Y().getBool("WEBGL_PACK")?new Rl(n.shape,pO):new ke(n.shape,dO),this.compileAndRun(r,[n])},t.prototype.relu6=function(n){var r;return r=Y().getBool("WEBGL_PACK")?new Rl(n.shape,vO):new ke(n.shape,fO),this.compileAndRun(r,[n])},t.prototype.prelu=function(n,r){var o=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ko(cO,n.shape,r.shape):new xt(lO,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.elu=function(n){if(Y().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,mO,n.dtype);var r=new ke(n.shape,hO);return this.compileAndRun(r,[n])},t.prototype.eluDer=function(n,r){var o=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ko(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new xt("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.selu=function(n){var r=new ke(n.shape,poe);return this.compileAndRun(r,[n])},t.prototype.int=function(n){var r=new ke(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},t.prototype.clip=function(n,r,o){var i,a=(i=Y().getBool("WEBGL_PACK_CLIP")?new Xne(n.shape):new Kne(n.shape)).getCustomSetupFunc(r,o);return this.compileAndRun(i,[n],null,a)},t.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(Y().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,$E,n.dtype);var r=new ke(n.shape,$E);return this.compileAndRun(r,[n])},t.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),o=new Yne(n.shape),i=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(o,i)},t.prototype.sigmoid=function(n){var r=new ke(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},t.prototype.softplus=function(n){var r=new ke(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},t.prototype.sin=function(n){var r=new ke(n.shape,voe);return this.compileAndRun(r,[n])},t.prototype.cos=function(n){var r=new ke(n.shape,moe);return this.compileAndRun(r,[n])},t.prototype.tan=function(n){var r=new ke(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},t.prototype.asin=function(n){var r=new ke(n.shape,goe);return this.compileAndRun(r,[n])},t.prototype.acos=function(n){var r=new ke(n.shape,yoe);return this.compileAndRun(r,[n])},t.prototype.atan=function(n){var r=new ke(n.shape,boe);return this.compileAndRun(r,[n])},t.prototype.atan2=function(n,r){var o=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ko(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new xt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.sinh=function(n){var r=new ke(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.cosh=function(n){var r=new ke(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.tanh=function(n){var r=new ke(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},t.prototype.asinh=function(n){var r=new ke(n.shape,xoe);return this.compileAndRun(r,[n])},t.prototype.acosh=function(n){var r=new ke(n.shape,woe);return this.compileAndRun(r,[n])},t.prototype.atanh=function(n){var r=new ke(n.shape,Soe);return this.compileAndRun(r,[n])},t.prototype.erf=function(n){var r=new ke(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},t.prototype.step=function(n,r){var o=new ke(n.shape,function(i){return i===void 0&&(i=0),io+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(r));return this.compileAndRun(o,[n])},t.prototype.conv2dByMatMul=function(n,r,o,i,a,s){var u=n.shape,l=this.texData.get(n.dataId),c=o.inChannels,d=u[0]*u[1]*u[2],f=o.outChannels,h=o.dataFormat==="channelsLast",p=(d===1||f===1)&&c>1e3,v=u[2]%2!=0&&!!l.isPacked;if(p||!Y().getBool("WEBGL_LAZILY_UNPACK")||!Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!v){var y=h?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],m=this.reshape(n,[1,y,o.inChannels]),g=this.reshape(r,[1,o.inChannels,o.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:g,transposeA:!1,transposeB:!1,bias:i,activation:a,preluActivationWeights:s}),o.outShape)}var b=h?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),x={dataId:n.dataId,shape:[1,b,o.inChannels],dtype:n.dtype},w=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,P(Nf(l.shape,x.shape),function(){return"packed reshape "+l.shape+" to "+x.shape+" isn't free"});var S=this.reshape(r,[1,o.inChannels,o.outChannels]),C=this.fusedBatchMatMul({a:x,b:S,transposeA:!1,transposeB:!1,bias:i,activation:a,preluActivationWeights:s}),_=this.texData.get(C.dataId);return P(_.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=w,_.shape=o.outShape,z.makeTensorFromDataId(C.dataId,o.outShape,C.dtype)},t.prototype.conv2dWithIm2Row=function(n,r,o,i,a,s){var u=o.filterWidth,l=o.filterHeight,c=o.inChannels,d=o.outWidth,f=o.outHeight,h=o.dataFormat==="channelsLast",p=u*l*c,v=f*d,y=[p,v],m=n.squeeze([0]),g=r.reshape([1,p,-1]),b=new Lre(y,m.shape,o),x=this.compileAndRun(b,[m]).reshape([1,y[0],y[1]]),w=i!=null,S=s!=null,C=a?$f(a,!0):null,_=new o0(x.shape,[1,v,o.outChannels],!0,!1,w,C,S),k=[x,g];i&&k.push(i),S&&k.push(s);var E=this.compileAndRun(_,k);return h?E.reshape([1,f,d,o.outChannels]):E.reshape([1,o.outChannels,f,d])},t.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,i=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(r,o,i,a,s,u);if(Y().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,o,i,a,s,u);var l=a!=null,c=u!=null,d=s?$f(s,!1):null,f=new IE(i,l,d,c),h=[r,o];return a&&h.push(a),u&&h.push(u),this.compileAndRun(f,h)},t.prototype.conv2d=function(n,r,o){if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,o);if(Y().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,o);var i=new IE(o);return this.compileAndRun(i,[n,r])},t.prototype.conv2dDerInput=function(n,r,o){var i=new ere(o);return this.compileAndRun(i,[n,r])},t.prototype.conv2dDerFilter=function(n,r,o){var i=new Zne(o);return this.compileAndRun(i,[n,r])},t.prototype.fusedDepthwiseConv2D=function(n){var r,o=n.input,i=n.filter,a=n.convInfo,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=Y().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,d=u?$f(u,c):null,f=[o,i],h=s!=null,p=l!=null;return h&&f.push(s),p&&f.push(l),c?(r=new DE(a,h,d,p),this.compileAndRun(r,f)):(r=new AE(a,h,d,p),this.compileAndRun(r,f))},t.prototype.depthwiseConv2D=function(n,r,o){var i;return Y().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1?(i=new DE(o),this.compileAndRun(i,[n,r])):(i=new AE(o),this.compileAndRun(i,[n,r]))},t.prototype.depthwiseConv2DDerInput=function(n,r,o){var i=new ore(o);return this.compileAndRun(i,[n,r])},t.prototype.depthwiseConv2DDerFilter=function(n,r,o){var i=new rre(o);return this.compileAndRun(i,[n,r])},t.prototype.conv3d=function(n,r,o){var i=new ire(o);return this.compileAndRun(i,[n,r])},t.prototype.conv3dDerInput=function(n,r,o){var i=new nre(o);return this.compileAndRun(i,[n,r])},t.prototype.conv3dDerFilter=function(n,r,o){var i=new tre(o);return this.compileAndRun(i,[n,r])},t.prototype.maxPool=function(n,r){var o=new i0(r,"max",!1);return this.compileAndRun(o,[n])},t.prototype.avgPool=function(n,r){var o=new i0(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},t.prototype.maxPoolBackprop=function(n,r,o,i){var a=new i0(i,"max",!0),s=this.compileAndRun(a,[r]),u=new Vre(i),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},t.prototype.avgPoolBackprop=function(n,r,o){var i=new Vne(o);return this.compileAndRun(i,[n],r.dtype)},t.prototype.cast=function(n,r){return eO(n,r,this)},t.prototype.unstack=function(n,r){for(var o=n.shape[r],i=new Array(n.rank-1),a=0,s=0;s<n.rank;s++)s!==r&&(i[a++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(o);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(i);return c},t.prototype.avgPool3d=function(n,r){var o=new a0(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},t.prototype.avgPool3dBackprop=function(n,r,o){var i=new jne(o);return this.compileAndRun(i,[n],r.dtype)},t.prototype.maxPool3d=function(n,r){var o=new a0(r,"max",!1);return this.compileAndRun(o,[n],"float32")},t.prototype.maxPool3dBackprop=function(n,r,o,i){var a=new a0(i,"max",!0),s=this.compileAndRun(a,[r]),u=new jre(i),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},t.prototype.reshape=function(n,r){var o=this.texData.get(n.dataId);if(o.isPacked&&!Nf(n.shape,r)&&(o.texture===null||!Nf(o.shape,r))){var i=this.packedReshape(n,r);return z.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return m1(n,r)},t.prototype.resizeBilinear=function(n,r,o,i){var a=Y().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Zre(n.shape,r,o,i):new Jre(n.shape,r,o,i);return this.compileAndRun(a,[n],"float32")},t.prototype.resizeBilinearBackprop=function(n,r,o){var i=new Qre(n,r,o);return this.compileAndRun(i,[n])},t.prototype.resizeNearestNeighbor=function(n,r,o,i){var a=new toe(n.shape,r,o,i);return this.compileAndRun(a,[n])},t.prototype.resizeNearestNeighborBackprop=function(n,r,o){var i=new eoe(n,r,o);return this.compileAndRun(i,[n])},t.prototype.multinomial=function(n,r,o,i){var a=r?n:yi(n),s=a.shape[0],u=a.shape[1],l=new Ure(s,u,o),c=l.getCustomSetupFunc(i);return this.compileAndRun(l,[a],"int32",c)},t.prototype.oneHot=function(n,r,o,i){var a=new Hre(n.size,r,o,i);return this.compileAndRun(a,[n])},t.prototype.diag=function(n){var r=new dre(n.size);return this.compileAndRun(r,[n])},t.prototype.nonMaxSuppression=function(n,r,o,i,a){return kp("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),Gx(n.dataSync(),r.dataSync(),o,i,a)},t.prototype.cropAndResize=function(n,r,o,i,a,s){var u=new are(n.shape,r.shape,i,a,s);return this.compileAndRun(u,[n,r,o],"float32")},t.prototype.depthToSpace=function(n,r,o){P(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var i=n.shape[0],a=o==="NHWC"?n.shape[1]:n.shape[2],s=o==="NHWC"?n.shape[2]:n.shape[3],u=o==="NHWC"?n.shape[3]:n.shape[1],l=a*r,c=s*r,d=u/(r*r),f=new cre(o==="NHWC"?[i,l,c,d]:[i,d,l,c],r,o);return this.compileAndRun(f,[n])},t.prototype.split=function(n,r,o){return rO(n,r,o)},t.prototype.scatterND=function(n,r,o){var i=Dp(0,n,o),a=i.sliceRank,s=i.numUpdates,u=i.sliceSize,l=i.strides,c=i.outputSize,d=[c/u,u],f=n.reshape([s,a]),h=r.reshape([s,u]);if(c===0)return m1(rn([]),o);var p=re(0),v=new FE(s,a,f.rank,h.rank,l,d);return this.compileAndRun(v,[h,f,p]).reshape(o)},t.prototype.sparseToDense=function(n,r,o,i){var a=Dp(0,n,o),s=a.sliceRank,u=a.numUpdates,l=a.strides,c=a.outputSize,d=new FE(u,s,n.rank,r.rank,l,[c,1]);return this.compileAndRun(d,[r,n,i]).reshape(o)},t.prototype.fft=function(n){return this.fftImpl(n,!1)},t.prototype.ifft=function(n){return this.fftImpl(n,!0)},t.prototype.fftImpl=function(n,r){var o=this.texData.get(n.dataId),i=new OE(mre,n.shape,r),a=new OE(gre,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag)],u=this.compileAndRun(i,s),l=this.compileAndRun(a,s),c=this.complex(u,l).as2D(n.shape[0],n.shape[1]);return u.dispose(),l.dispose(),c},t.prototype.gatherND=function(n,r){var o=r.shape,i=o[o.length-1],a=qM(n,r),s=a[0],u=a[1],l=a[2],c=a[3],d=r.reshape([u,i]),f=n.reshape([n.size/l,l]),h=new xre(i,c,[u,l]);return this.compileAndRun(h,[f,d]).reshape(s)},t.prototype.fill=function(n,r,o){if((o=o||Rd(r))==="string"){var i=Sp(o,de(n));return i.fill(r),z.makeTensor(i,n,o,this)}var a=new yre(n,r),s=a.getCustomSetupFunc(r);return this.compileAndRun(a,[],o,s)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},t.prototype.linspace=function(n,r,o){return tO(n,r,o)},t.prototype.makeTensorInfo=function(n,r){var o=this.write(null,n,r);return this.texData.get(o).usage=null,{dataId:o,shape:n,dtype:r}},t.prototype.makeOutput=function(n,r){var o=this.makeTensorInfo(n,r).dataId;return z.makeTensorFromDataId(o,n,r,this)},t.prototype.unpackTensor=function(n){var r=new _oe(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},t.prototype.packTensor=function(n){var r=new Gre(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},t.prototype.packedReshape=function(n,r){var o=[_p(n.shape)].concat(Ep(n.shape)),i={dtype:n.dtype,shape:o,dataId:n.dataId},a=[_p(r)].concat(Ep(r)),s=new Yre(a,o),u=this.runWebGLProgram(s,[i],n.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},t.prototype.decode=function(n){var r,o=this.texData.get(n),i=o.isPacked,a=o.shape,s=o.dtype,u=e0(a);return r=i?new lre(u):new ure(u),{dtype:s,shape:a,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:n}],s,null,!0).dataId}},t.prototype.runWebGLProgram=function(n,r,o,i,a){var s=this;a===void 0&&(a=!1);var u=this.makeTensorInfo(n.outputShape,o),l=this.texData.get(u.dataId);if(n.packedOutput&&(l.isPacked=!0),n.outPackingScheme===Jc.DENSE){var c=lc(n.outputShape);l.texShape=c.map(function(b){return 2*b})}if(n.outTexUsage!=null&&(l.usage=n.outTexUsage),de(u.shape)===0)return l.values=Yc(u.dtype,0),u;var d=[],f=r.map(function(b){if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var x=s.texData.get(b.dataId);if(x.texture==null){if(!n.packedInputs&&de(b.shape)<=Y().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:x.values};n.packedInputs&&(x.isPacked=!0,x.shape=b.shape)}else if(!!x.isPacked!=!!n.packedInputs)b=x.isPacked?s.unpackTensor(b):s.packTensor(b),d.push(b),x=s.texData.get(b.dataId);else if(x.isPacked&&!Nf(x.shape,b.shape)){var w=b,S=b.shape;b.shape=x.shape,b=s.packedReshape(b,S),d.push(b),x=s.texData.get(b.dataId),w.shape=S}return s.uploadToGPU(b.dataId),{shape:b.shape,texData:x,isUniform:!1}});this.uploadToGPU(u.dataId);var h,p={shape:u.shape,texData:l,isUniform:!1},v=function(b,x,w){var S="";x.concat(w).forEach(function(k){var E=k.texData!=null&&k.texData.slice!=null&&k.texData.slice.flatOffset>0,A=k.isUniform?"uniform":k.texData.texShape;S+=k.shape+"_"+A+"_"+E});var C=b.userCode,_=b.constructor.name;return _+="_"+S+"_"+C}(n,f,p),y=this.getAndSaveBinary(v,function(){return function(b,x,w,S){var C=x.userCode,_=w.map(function(O,F){var $={logicalShape:O.shape,texShape:O.isUniform?null:O.texData.texShape,isUniform:O.isUniform,isPacked:!O.isUniform&&O.texData.isPacked,flatOffset:null};return O.texData!=null&&O.texData.slice!=null&&O.texData.slice.flatOffset>0&&($.flatOffset=O.texData.slice.flatOffset),{name:x.variableNames[F],shapeInfo:$}}),k=_.map(function(O){return O.shapeInfo}),E={logicalShape:S.shape,texShape:S.texData.texShape,isUniform:!1,isPacked:S.texData.isPacked,flatOffset:null},A=Fne(_,E,C,x.packedInputs),D=b.createProgram(A),U=null,H=b.getUniformLocation(D,"NAN",!1);Y().getNumber("WEBGL_VERSION")===1&&(U=b.getUniformLocation(D,"INFINITY",!1));for(var B={},V=0;V<x.variableNames.length;V++){var M=x.variableNames[V];B[M]=b.getUniformLocation(D,M,!1),B["offset"+M]=b.getUniformLocation(D,"offset"+M,!1)}return{program:x,source:A,webGLProgram:D,uniformLocations:B,inShapeInfos:k,outShapeInfo:E,infLoc:U,nanLoc:H}}(s.gpgpu,n,f,p)}),m=this.activeTimers!=null;if(m&&(h=this.startTimer()),function(b,x,w,S,C){NE(x.inShapeInfos,w),NE([x.outShapeInfo],[S]);var _=S.texData.texture,k=S.texData.texShape;S.texData.isPacked?b.setOutputPackedMatrixTexture(_,k[0],k[1]):b.setOutputMatrixTexture(_,k[0],k[1]),b.setProgram(x.webGLProgram),Y().getNumber("WEBGL_VERSION")===1&&x.infLoc!==null&&b.gl.uniform1f(x.infLoc,1/0),x.nanLoc!==null&&b.gl.uniform1f(x.nanLoc,NaN),w.forEach(function(E,A){var D=x.program.variableNames[A],U=x.uniformLocations[D],H=x.uniformLocations["offset"+D];if(U!=null)if(E.isUniform)if(de(E.shape)<2)b.gl.uniform1f(U,E.uniformValues[0]);else{var B=E.uniformValues;B instanceof Float32Array||(B=new Float32Array(B)),b.gl.uniform1fv(U,B)}else E.texData.slice!=null&&H!=null&&b.gl.uniform1i(H,E.texData.slice.flatOffset),b.setInputMatrixTexture(E.texData.texture,U,A)}),C!=null&&C(b,x.webGLProgram),b.executeProgram()}(this.gpgpu,y,f,p,i),d.forEach(function(b){return s.disposeData(b.dataId)}),m&&(h=this.endTimer(h),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(h)})),!Y().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){var g=this.unpackTensor(u);return this.disposeData(u.dataId),g}return u},t.prototype.compileAndRun=function(n,r,o,i,a){a===void 0&&(a=!1),o=o||r[0].dtype;var s=this.runWebGLProgram(n,r,o,i,a);return z.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},t.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var n=this;this.disposed||(Y().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ie(function(){if(!Y().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=Y().getBool("DEBUG");Y().set("DEBUG",!1);var o=n.abs(re(1e-8)).dataSync()[0];if(Y().set("DEBUG",r),o>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(n){var r,o=this.texData.get(n),i=o.shape,a=o.dtype,s=o.values,u=o.texture,l=o.usage,c=o.isPacked;if(u==null){var d,f=this.activeTimers!=null;f&&(d=vo());var h=o.texShape;if(h==null&&(h=Dte(i,c),o.texShape=h),s!=null){var p=e0(i),v=void 0,y=h[1],m=h[0],g=s instanceof Uint8Array;c?(y=(r=Id(h[0],h[1]))[0],m=r[1],v=new vre(p,[m,y],g)):v=new pre(p,[m,y],g);var b=this.makeTensorInfo([m,y],a);this.texData.get(b.dataId).usage=g?ir.PIXELS:ir.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),y,m,s);var x=this.runWebGLProgram(v,[b],a,null,!0),w=this.texData.get(x.dataId);o.texture=w.texture,o.texShape=w.texShape,o.isPacked=w.isPacked,o.usage=w.usage,this.disposeData(b.dataId),this.texData.delete(x.dataId),o.values=null,f&&(this.uploadWaitMs+=vo()-d)}else{var S=this.acquireTexture(h,l,a,c);o.texture=S}}},t.prototype.convertAndCacheOnCPU=function(n,r){var o=this.texData.get(n),i=o.dtype;return this.releaseGPUData(n),r!=null&&(o.values=function(a,s){if(s==="float32"||s==="complex64")return a;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(a.length):new Uint8Array(a.length),l=0;l<u.length;++l)u[l]=Math.round(a[l]);return u}throw new Error("Unknown dtype "+s)}(r,i)),o.values},t.prototype.acquireTexture=function(n,r,o,i){if(this.numBytesInGPU+=this.computeBytes(n,o),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,i)},t.prototype.computeBytes=function(n,r){return n[0]*n[1]*PM(r)},t}(JM);FM()&&z.registerBackend("webgl",function(){return new koe},2);var Toe=N({square_:function(e){var t=R(e,"x","square"),n=[t];return z.runKernelFunc(function(r,o){return o([t]),r.square(t)},{x:t},null,"Square",{},n,[])}}),ed="SquaredDifference",gO=N({squaredDifference_:function(e,t){var n,r=R(e,"a","squaredDifference"),o=R(t,"b","squaredDifference");n=gt(r,o),r=n[0],o=n[1],Pe(r.shape,o.shape);var i={a:r,b:o},a=[r,o];return z.runKernelFunc(function(s,u){var l=s.squaredDifference(r,o);return u([r,o]),l},i,function(s,u){var l=u[0],c=u[1],d=re(2);return{a:function(){return s.mul(l.sub(c).mul(d))},b:function(){return s.mul(c.sub(l).mul(d))}}},ed,{},a,[])}}),Roe=N({abs_:function(e){var t=R(e,"x","abs");return t.dtype==="complex64"?z.runKernelFunc(function(n){return n.complexAbs(t)},{$x:t}):z.runKernelFunc(function(n,r){var o=n.abs(t);return r([t]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return n.mul(o.toFloat().step(-1))}}},"Abs")}}),Poe=N({acos_:function(e){var t=R(e,"x","acos");return z.runKernelFunc(function(n,r){var o=n.acos(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(re(1).sub(o.toFloat().square()).sqrt()).neg()}}})}}),Ioe=N({acosh_:function(e){var t=R(e,"x","acosh");return z.runKernelFunc(function(n,r){var o=n.acosh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(o.toFloat().square().sub(1).sqrt())}}})}}),Aoe=N({asin_:function(e){var t=R(e,"x","asin");return z.runKernelFunc(function(n,r){var o=n.asin(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(re(1).sub(o.toFloat().square()).sqrt())}}})}}),Doe=N({asinh_:function(e){var t=R(e,"x","asinh");return z.runKernelFunc(function(n,r){var o=n.asinh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(re(1).add(o.toFloat().square()).sqrt())}}})}}),Moe=N({atan_:function(e){var t=R(e,"x","atan");return z.runKernelFunc(function(n,r){var o=n.atan(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().square().add(1))}}})}}),Ooe=N({atanh_:function(e){var t=R(e,"x","atanh");return z.runKernelFunc(function(n,r){var o=n.atanh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(re(1).sub(o.toFloat().square()))}}})}}),Noe=N({ceil_:function(e){var t=R(e,"x","ceil");return z.runKernelFunc(function(n){return n.ceil(t)},{$x:t},function(n){return{$x:function(){return Be(n)}}})}}),Jx=N({clipByValue_:function(e,t,n){var r=R(e,"x","clipByValue");P(t<=n,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."});var o=[r],i={min:t,max:n};return z.runKernelFunc(function(a,s){var u=a.clip(r,t,n);return s([r]),u},{x:r},function(a,s){var u=s[0];return{x:function(){return a.where(u.greaterEqual(t).logicalAnd(u.lessEqual(n)),Be(a))}}},"ClipByValue",i,o)}}),Foe=N({cos_:function(e){var t=R(e,"x","cos"),n=[t];return z.runKernelFunc(function(r,o){var i=r.cos(t);return o([t]),i},{x:t},function(r,o){var i=o[0];return{x:function(){return i.toFloat().sin().neg().mul(r)}}},"Cos",{},n)}}),Boe=N({cosh_:function(e){var t=R(e,"x","cosh");return z.runKernelFunc(function(n,r){var o=n.cosh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().sinh().mulStrict(n)}}})}}),Loe=N({erf_:function(e){var t=R(e,"x","erf");return P(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=t.toFloat()),z.runKernelFunc(function(n,r){var o=n.erf(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),y1=N({exp_:function(e){var t=R(e,"x","exp");return z.runKernelFunc(function(n,r){var o=n.exp(t);return r([o]),o},{x:t},function(n,r){return{x:function(){return n.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),$oe=N({expm1_:function(e){var t=R(e,"x","expm1");return z.runKernelFunc(function(n,r){var o=n.expm1(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.exp())}}})}}),zoe=N({floor_:function(e){var t=R(e,"x","floor");return z.runKernelFunc(function(n){return n.floor(t)},{$x:t},function(n){return{$x:function(){return Be(n)}}})}}),Woe=N({log_:function(e){var t=R(e,"x","log"),n=[t];return z.runKernelFunc(function(r,o){var i=r.log(t);return o([t]),i},{x:t},function(r,o){var i=o[0];return{x:function(){return r.div(i.toFloat())}}},"Log",{},n)}}),Voe=N({log1p_:function(e){var t=R(e,"x","log1p");return z.runKernelFunc(function(n,r){var o=n.log1p(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.add(1))}}})}}),joe=N({logSigmoid_:function(e){var t=R(e,"x","logSigmoid");return z.runKernelFunc(function(n,r){var o=n.softplus(t.neg()).neg();return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.neg().sigmoid())}}})}}),Fp=N({neg_:function(e){var t=R(e,"x","neg"),n=[t];return z.runKernelFunc(function(r){return r.neg(t)},{x:t},function(r){return{x:function(){return r.neg()}}},"Neg",{},n)}}),Uoe=N({reciprocal_:function(e){var t=R(e,"x","reciprocal");return z.runKernelFunc(function(n,r){var o=n.reciprocal(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.square().neg())}}})}}),Hoe=N({round_:function(e){var t=R(e,"x","round");return z.runKernelFunc(function(n){return n.round(t)},{$x:t},function(n){return{$x:function(){return Be(n)}}})}}),yO=N({rsqrt_:function(e){var t=R(e,"x","rsqrt"),n=[t];return z.runKernelFunc(function(r,o){var i=r.rsqrt(t);return o([t]),i},{x:t},function(r,o){var i=o[0];return{x:function(){return r.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),bO=N({sigmoid_:function(e){var t=R(e,"x","sigmoid");return z.runKernelFunc(function(n,r){var o=n.sigmoid(t);return r([o]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return n.mul(o.mul(re(1).sub(o)))}}},"Sigmoid")}}),Goe=N({sign_:function(e){var t=R(e,"x","sign");return z.runKernelFunc(function(n){return n.sign(t)},{$x:t},function(n){return{$x:function(){return Be(n)}}})}}),qoe=N({isNaN_:function(e){var t=R(e,"x","isNaN");return z.runKernelFunc(function(n){return n.isNaN(t)},{$x:t},function(n){return{$x:function(){return Be(n)}}})}}),Koe=N({isInf_:function(e){var t=R(e,"x","isInf");return z.runKernelFunc(function(n){return n.isInf(t)},{$x:t},function(n){return{$x:function(){return Be(n)}}})}}),Xoe=N({isFinite_:function(e){var t=R(e,"x","isFinite");return z.runKernelFunc(function(n){return n.isFinite(t)},{$x:t},function(n){return{$x:function(){return Be(n)}}})}}),Yoe=N({sin_:function(e){var t=R(e,"x","sin"),n=[t];return z.runKernelFunc(function(r,o){var i=r.sin(t);return o([t]),i},{x:t},function(r,o){var i=o[0];return{x:function(){return i.toFloat().cos().mul(r)}}},"Sin",{},n)}}),Qoe=N({sinh_:function(e){var t=R(e,"x","sinh");return z.runKernelFunc(function(n,r){var o=n.sinh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().cosh().mulStrict(n)}}})}}),Joe=N({softplus_:function(e){var t=R(e,"x","softplus");return z.runKernelFunc(function(n,r){var o=n.softplus(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.sigmoid())}}})}}),Zoe=N({sqrt_:function(e){var t=R(e,"x","sqrt");return z.runKernelFunc(function(n,r){var o=n.sqrt(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().sqrt().mul(2))}}})}}),eie=N({step_:function(e,t){t===void 0&&(t=0);var n=R(e,"x","step");return z.runKernelFunc(function(r){return r.step(n,t)},{$x:n},function(r){return{$x:function(){return Be(r)}}})}}),tie=N({tan_:function(e){var t=R(e,"x","tan");return z.runKernelFunc(function(n,r){var o=n.tan(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.cos().square())}}})}}),nie=N({tanh_:function(e){var t=R(e,"x","tanh");return z.runKernelFunc(function(n,r){var o=n.tanh(t);return r([o]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return re(1).sub(o.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function xO(e,t,n,r,o,i){var a,s,u=R(e,"x","batchNorm"),l=R(t,"mean","batchNorm"),c=R(n,"variance","batchNorm");return o!=null&&(a=R(o,"scale","batchNorm")),r!=null&&(s=R(r,"offset","batchNorm")),P(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),P(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),P(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),a!=null&&P(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),s!=null&&P(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Dd(u,l,c,s,a,i)}function wO(e,t,n,r,o,i){var a,s,u=R(e,"x","batchNorm"),l=R(t,"mean","batchNorm"),c=R(n,"variance","batchNorm");return o!=null&&(a=R(o,"scale","batchNorm")),r!=null&&(s=R(r,"offset","batchNorm")),P(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),P(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),P(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),a!=null&&P(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),s!=null&&P(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Dd(u,l,c,s,a,i)}function SO(e,t,n,r,o,i){var a,s,u=R(e,"x","batchNorm"),l=R(t,"mean","batchNorm"),c=R(n,"variance","batchNorm");return o!=null&&(a=R(o,"scale","batchNorm")),r!=null&&(s=R(r,"offset","batchNorm")),P(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),P(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),P(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),a!=null&&P(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),s!=null&&P(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Dd(u,l,c,s,a,i)}function Dd(e,t,n,r,o,i){i==null&&(i=.001);var a,s,u,l=R(e,"x","batchNorm"),c=R(t,"mean","batchNorm"),d=R(n,"variance","batchNorm");o!=null&&(a=R(o,"scale","batchNorm")),r!=null&&(s=R(r,"offset","batchNorm")),P(c.rank===d.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),P(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),P(a==null||c.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var f=[l,c,d,a];return z.runKernelFunc(function(h,p){var v=h.batchNormalization(u,zf(c),zf(d),i,zf(a),zf(s));return p([l,c,d,a]),v},{x:l,mean:c,variance:d,scale:a,offset:s},function(h,p){var v=p,y=v[0],m=v[1],g=v[2],b=v[3],x=b??re(1),w=Lt(m.shape,u.shape),S=[];if(m.rank===1){for(var C=0;C<u.shape.length-1;++C)S.push(u.shape[C]);S.push(1)}var _=y.sub(m),k=h.mul(x),E=yO(g.add(re(i))),A=E.mul(E).mul(E).mul(re(-.5));return{x:function(){return m.rank===1?h.mul(yu(E.as4D(1,1,1,m.shape[0]),S)).mul(x).reshape(y.shape):h.mul(E).mul(x).reshape(y.shape)},mean:function(){var D=E.mul(re(-1)).mul(k);return m.rank===1&&(D=D.sum(w)),D.reshape(m.shape)},variance:function(){var D=A.mul(_).mul(k);return m.rank===1&&(D=D.sum(w)),D.reshape(m.shape)},scale:function(){var D=_.mul(E),U=h.mul(D);return m.rank===1&&(U=U.sum(w)),U.reshape(m.shape)},offset:function(){var D=h;return m.rank===1&&(D=D.sum(w)),D.reshape(m.shape)}}},"BatchNormalization",{varianceEpsilon:i},f).reshape(l.shape)}function zf(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function Qv(){BM("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var rie=N({batchNormalization2d_:function(e,t,n,r,o,i){return r===void 0&&(r=.001),Qv(),xO(e,t,n,i,o,r)}}),oie=N({batchNormalization3d_:function(e,t,n,r,o,i){return r===void 0&&(r=.001),Qv(),wO(e,t,n,i,o,r)}}),iie=N({batchNormalization4d_:function(e,t,n,r,o,i){return r===void 0&&(r=.001),Qv(),SO(e,t,n,i,o,r)}}),aie=N({batchNormalization_:function(e,t,n,r,o,i){return r===void 0&&(r=.001),Qv(),Dd(e,t,n,i,o,r)}}),CO=N({batchNorm_:Dd}),sie=N({batchNorm2d_:xO}),uie=N({batchNorm3d_:wO}),lie=N({batchNorm4d_:SO}),Jv=N({logicalAnd_:function(e,t){var n=R(e,"a","logicalAnd","bool"),r=R(t,"b","logicalAnd","bool");return Pe(n.shape,r.shape),z.runKernelFunc(function(o){return o.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),cie=N({logicalNot_:function(e){var t=R(e,"x","logicalNot","bool");return z.runKernelFunc(function(n){return n.logicalNot(t)},{$x:t})}}),_O=N({logicalOr_:function(e,t){var n=R(e,"a","logicalOr","bool"),r=R(t,"b","logicalOr","bool");return Pe(n.shape,r.shape),z.runKernelFunc(function(o){return o.logicalOr(n,r)},{$a:n,$b:r})}}),die=N({logicalXor_:function(e,t){var n=R(e,"a","logicalXor","bool"),r=R(t,"b","logicalXor","bool");return Pe(n.shape,r.shape),_O(e,t).logicalAnd(Jv(e,t).logicalNot())}}),ts=N({where_:function(e,t,n){var r=R(t,"a","where"),o=R(n,"b","where"),i=R(e,"condition","where","bool");return Xe(r.shape,o.shape,"Error in where: "),i.rank===1?P(i.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):Xe(i.shape,o.shape,"Error in where: "),z.runKernelFunc(function(a,s){var u=a.select(i,r,o);return s([i]),u},{$condition:i,$a:r,$b:o},function(a,s){var u=s[0];return{$condition:function(){return Be(u).toFloat()},$a:function(){return a.mul(u.cast(a.dtype))},$b:function(){return a.mul(u.logicalNot().cast(a.dtype))}}})}}),EO=function(e){return le(this,void 0,void 0,function(){var t,n,r;return ce(this,function(o){switch(o.label){case 0:return[4,(t=R(e,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=Kx(t.shape,n),e!==t&&t.dispose(),[2,r]}})})},Re=N({add_:function(e,t){var n,r=R(e,"a","add"),o=R(t,"b","add");n=gt(r,o),r=n[0],o=n[1];var i=Pe(r.shape,o.shape);return z.runKernelFunc(function(a){return a.add(r,o)},{a:r,b:o},function(a){return{a:function(){var s=a,u=Lt(r.shape,i);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=a,u=Lt(o.shape,i);return u.length>0&&(s=s.sum(u)),s.reshape(o.shape)}}},"Add")}}),fie=N({addN_:function(e){P(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),P(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(o,i){return R(o,"tensors"+i,"addN")}),n=t[0];t.forEach(function(o){if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(o){if(!qt(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return z.runKernelFunc(function(o){return o.addN(t)},r,function(o){var i={};return t.forEach(function(a,s){i[s]=function(){return o.clone()}}),i},"AddN")}}),hie=N({addStrict_:function(e,t){var n=R(e,"a","addStrict"),r=R(t,"b","addStrict");return Xe(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),pie=N({atan2_:function(e,t){var n,r=R(e,"a","atan2"),o=R(t,"b","atan2");n=gt(r,o),r=n[0],o=n[1];var i=Pe(r.shape,o.shape);return z.runKernelFunc(function(a,s){var u=a.atan2(r,o);return s([r,o]),u},{$a:r,$b:o},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=Re(u.square(),l.square()),d=a.mul(l.div(c)),f=Lt(u.shape,i);return f.length>0&&(d=d.sum(f)),d.reshape(u.shape)},$b:function(){var c=Re(u.square(),l.square()),d=Fp(a.mul(u.div(c))),f=Lt(l.shape,i);return f.length>0&&(d=d.sum(f)),d.reshape(l.shape)}}})}}),Yr=N({div_:function(e,t){var n,r=R(e,"a","div"),o=R(t,"b","div");if(n=gt(r,o),r=n[0],o=n[1],r.dtype==="int32"&&o.dtype==="int32")return kO(r,o);var i=Pe(r.shape,o.shape);return z.runKernelFunc(function(a,s){var u=a.realDivide(r,o);return s([r,o]),u},{a:r,b:o},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.div(l.toFloat()),d=Lt(u.shape,i);return d.length>0?c.sum(d).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),d=Lt(l.shape,i);d.length>0&&(c=c.sum(d).reshape(l.shape));var f=l.square();return c.div(f.toFloat()).neg()}}},"Div")}}),vie=N({divNoNan_:function(e,t){var n,r=R(e,"a","div"),o=R(t,"b","div");r=(n=gt(r,o))[0],o=n[1];var i=Yr(r,o),a=Be(i),s=o.equal(a);return ts(s,a,i)}}),mie=N({divStrict_:function(e,t){var n=R(e,"a","div"),r=R(t,"b","div");return Xe(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),kO=N({floorDiv_:function(e,t){var n,r=R(e,"a","floorDiv"),o=R(t,"b","floorDiv");n=gt(r,o),r=n[0],o=n[1];var i=Pe(r.shape,o.shape);return z.runKernelFunc(function(a,s){var u=a.floorDiv(r,o);return s([r,o]),u},{a:r,b:o},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.div(l.toFloat()),d=Lt(u.shape,i);return d.length>0?c.sum(d).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),d=Lt(l.shape,i);d.length>0&&(c=c.sum(d).reshape(l.shape));var f=l.square();return c.div(f.toFloat()).neg()}}},"FloorDiv")}}),Zx=N({maximum_:function(e,t){var n,r=R(e,"a","maximum"),o=R(t,"b","maximum");return n=gt(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),Pe(r.shape,o.shape),z.runKernelFunc(function(i,a){var s=i.maximum(r,o);return a([r,o]),s},{a:r,b:o},function(i,a){var s=a[0],u=a[1];return{a:function(){return i.mul(s.greaterEqual(u).toFloat())},b:function(){return i.mul(s.less(u).toFloat())}}},"Maximum")}}),gie=N({maximumStrict_:function(e,t){var n=R(e,"a","maximumStrict"),r=R(t,"b","maximumStrict");return Xe(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),TO=N({minimum_:function(e,t){var n,r=R(e,"a","minimum"),o=R(t,"b","minimum");return n=gt(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),Pe(r.shape,o.shape),z.runKernelFunc(function(i,a){var s=i.minimum(r,o);return a([r,o]),s},{a:r,b:o},function(i,a){var s=a[0],u=a[1];return{a:function(){return i.mul(s.lessEqual(u).toFloat())},b:function(){return i.mul(s.greater(u).toFloat())}}},"Minimum")}}),yie=N({minimumStrict_:function(e,t){var n=R(e,"a","minimumStrict"),r=R(t,"b","minimumStrict");return Xe(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),bie=N({mod_:function(e,t){var n,r=R(e,"a","mod"),o=R(t,"b","mod");n=gt(r,o),r=n[0],o=n[1];var i=Pe(r.shape,o.shape);return z.runKernelFunc(function(a,s){var u=a.mod(r,o);return s([r,o]),u},{$a:r,$b:o},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=Lt(u.shape,i);return c.length>0?a.sum(c).reshape(u.shape):a},$b:function(){var c=a.mul(u.div(l).floor().neg()),d=Lt(l.shape,i);return d.length>0?c.sum(d).reshape(l.shape):c}}})}}),xie=N({modStrict_:function(e,t){var n=R(e,"a","modStrict"),r=R(t,"b","modStrict");return Xe(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),gn=N({mul_:function(e,t){var n,r=R(e,"a","mul"),o=R(t,"b","mul");n=gt(r,o),r=n[0],o=n[1];var i=Pe(r.shape,o.shape);return z.runKernelFunc(function(a,s){var u=a.multiply(r,o);return s([r,o]),u},{a:r,b:o},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.mul(l.toFloat()),d=Lt(u.shape,i);return d.length>0?c.sum(d).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),d=Lt(l.shape,i);return d.length>0?c.sum(d).reshape(l.shape):c}}},"Mul")}}),wie=N({mulStrict_:function(e,t){var n=R(e,"a","mul"),r=R(t,"b","mul");return Xe(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Bp=N({pow_:function(e,t){var n,r=R(e,"base","pow"),o=R(t,"exp","pow");n=gt(r,o),r=n[0],o=n[1];var i=Pe(r.shape,o.shape),a=[r,o];return z.runKernelFunc(function(s,u){var l=s.pow(r,o);return u([r,o,l]),l},{a:r,b:o},function(s,u){var l=u[0],c=u[1],d=u[2];return{a:function(){var f=c.toFloat(),h=s.mul(f.mul(l.pow(f.sub(re(1))))),p=Lt(l.shape,i);return p.length>0&&(h=h.sum(p)),h.reshape(l.shape)},b:function(){var f=l.greater(0),h=l.log().where(f,Be(l)),p=s.mul(d.mul(h)),v=Lt(c.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(c.shape)}}},"Pow",{},a,[!0])}}),Sie=N({powStrict_:function(e,t){return Xe(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),Cie=N({squaredDifferenceStrict_:function(e,t){var n=R(e,"a","squaredDifferenceStrict"),r=R(t,"b","squaredDifferenceStrict");return Xe(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),$t=N({sub_:function(e,t){var n,r=R(e,"a","sub"),o=R(t,"b","sub");n=gt(r,o),r=n[0],o=n[1];var i=Pe(r.shape,o.shape);return z.runKernelFunc(function(a){return a.subtract(r,o)},{a:r,b:o},function(a){return{a:function(){var s=a,u=Lt(r.shape,i);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=a,u=Lt(o.shape,i);return u.length>0&&(s=s.sum(u)),s.neg().reshape(o.shape)}}},"Sub")}}),_ie=N({subStrict_:function(e,t){var n=R(e,"a","subStrict"),r=R(t,"b","subStrict");return Xe(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),RO=N({equal_:function(e,t){var n,r=R(e,"a","equal"),o=R(t,"b","equal");return n=gt(r,o),r=n[0],o=n[1],Pe(r.shape,o.shape),z.runKernelFunc(function(i){return i.equal(r,o)},{$a:r,$b:o})}}),Eie=N({equalStrict_:function(e,t){var n=R(e,"a","equalStrict"),r=R(t,"b","equalStrict");return Xe(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),kie=N({greater_:function(e,t){var n,r=R(e,"a","greater"),o=R(t,"b","greater");return n=gt(r,o),r=n[0],o=n[1],Pe(r.shape,o.shape),z.runKernelFunc(function(i){return i.greater(r,o)},{a:r,b:o},null,"Greater")}}),PO=N({greaterEqual_:function(e,t){var n,r=R(e,"a","greaterEqual"),o=R(t,"b","greaterEqual");return n=gt(r,o),r=n[0],o=n[1],Pe(r.shape,o.shape),z.runKernelFunc(function(i,a){var s=i.greaterEqual(r,o);return a([r,o]),s},{a:r,b:o},function(i,a){var s=a[0],u=a[1];return{a:function(){return Be(s)},b:function(){return Be(u)}}},"GreaterEqual")}}),Tie=N({greaterEqualStrict_:function(e,t){var n=R(e,"a","greaterEqualStrict"),r=R(t,"b","greaterEqualStrict");return Xe(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Rie=N({greaterStrict_:function(e,t){var n=R(e,"a","greaterStrict"),r=R(t,"b","greaterStrict");return Xe(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Pie=N({less_:function(e,t){var n,r=R(e,"a","less"),o=R(t,"b","less");return n=gt(r,o),r=n[0],o=n[1],Pe(r.shape,o.shape),z.runKernelFunc(function(i){return i.less(r,o)},{a:r,b:o},null,"Less")}}),Iie=N({lessEqual_:function(e,t){var n,r=R(e,"a","lessEqual"),o=R(t,"b","lessEqual");return n=gt(r,o),r=n[0],o=n[1],Pe(r.shape,o.shape),z.runKernelFunc(function(i,a){var s=i.lessEqual(r,o);return a([r,o]),s},{a:r,b:o},null,"LessEqual")}}),Aie=N({lessEqualStrict_:function(e,t){var n=R(e,"a","lessEqualStrict"),r=R(t,"b","lessEqualStrict");return Xe(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),Die=N({lessStrict_:function(e,t){var n=R(e,"a","lessStrict"),r=R(t,"b","lessStrict");return Xe(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Mie=N({notEqual_:function(e,t){var n,r=R(e,"a","notEqual"),o=R(t,"b","notEqual");return n=gt(r,o),r=n[0],o=n[1],Pe(r.shape,o.shape),z.runKernelFunc(function(i){return i.notEqual(r,o)},{a:r,b:o},null,"NotEqual")}}),Oie=N({notEqualStrict_:function(e,t){var n=R(e,"a","notEqualStrict"),r=R(t,"b","notEqualStrict");return Xe(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function HE(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function GE(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var ew=N({gather_:function(e,t,n){n===void 0&&(n=0);var r=R(e,"x","gather"),o=R(t,"indices","gather","int32");n=Wt(n,r.shape)[0];var i=function(a,s,u){for(var l=a.shape[u],c=[],d=1,f=1,h=0;h<u;h++)c.push(a.shape[h]),d*=a.shape[h];for(h=0;h<s.rank;h++)c.push(s.shape[h]);for(h=u+1;h<a.rank;h++)c.push(a.shape[h]),f*=a.shape[h];return{batchSize:d,sliceSize:f,dimSize:l,outputShape:c}}(r,o,n);return z.runKernelFunc(function(a,s){var u=a.gather(r,o.flatten(),n);return s([o]),u},{x:r,indices:o},function(a,s){var u=s[0];return{x:function(){var l=r.shape,c=u.size,d=l.slice(0,n),f=d.length,h=l.slice(n,l.length).slice(1),p=h.length,v=HE(0,f),y=HE(f+1,f+1+p),m=GE([d,[c],h]),g=a.reshape(m),b=u.reshape([c]),x=GE([[f],v,y]),w=g.transpose(x),S=IO(w,b,r.shape[n]),C=zx(x);return S=S.transpose(C)},indices:function(){return u}}},"Gather",{axis:n}).reshape(i.outputShape)}}),IO=N({unsortedSegmentSum_:function(e,t,n){var r=R(e,"x","unsortedSegmentSum"),o=R(t,"segmentIds","unsortedSegmentSum","int32");return P(St(n),function(){return"numSegments must be of dtype int"}),z.runKernelFunc(function(i,a){var s=i.unsortedSegmentSum(r,o,n);return a([o]),s},{$x:r},function(i,a){var s=a[0];return{$x:function(){return function(u,l){for(var c=Zx(l,Be(l)),d=ew(u,c),f=PO(l,re(0,"int32")),h=d.rank-f.rank,p=0;p<h;++p)f=Pr(f,p+1);f=Jv(f,tl(d.shape,"bool"));var v=Be(d);return ts(f,d,v)}(i,s)}}})}}),Nie=function(e,t,n){return le(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,d,f,h,p,v;return ce(this,function(y){switch(y.label){case 0:for(r=R(e,"tensor","boolMask"),o=R(t,"mask","boolMask","bool"),i=n??0,a=o.rank,s=r.shape,P(a>0,function(){return"mask cannot be scalar"}),Xe(s.slice(i,i+a),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=i;l<i+a;l++)u*=s[l];return c=s.slice(0,i).concat([u],s.slice(i+a)),d=r.reshape(c),f=o.reshape([-1]),[4,EO(f)];case 1:return h=y.sent(),p=h.squeeze([1]),v=ew(d,p,i),e!==r&&r.dispose(),t!==o&&o.dispose(),p.dispose(),d.dispose(),f.dispose(),h.dispose(),[2,v]}})})};function AO(e,t,n,r,o,i,a){i===void 0&&(i="NHWC"),P(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var s=e,u=t,l=!1;t.rank===3&&(l=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),P(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),P(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),P(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var c=i==="NHWC"?s[3]:s[1],d=i==="NHWC"?u.shape[3]:u.shape[1];P(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."}),P(d===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."}),a!=null&&P(St(o),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var f=Hx(i),h=ds(s,n.shape,r,1,o,a,!1,f),p=z.runKernelFunc(function(v,y){var m=v.conv2dDerInput(u,n,h);return y([n,u]),m},{dy4D:u,filter:n},function(v,y){var m=y[0],g=y[1];return{dy4D:function(){return Vr(v,m,r,o,i,1,a)},filter:function(){return tw(v,g,m.shape,r,o,i,a)}}});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function u0(e){var t=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(e),n=t[0],r=t[1],o=t[2];return n===1&&r===1&&o===1}function DO(e,t,n,r,o){P(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var i=e,a=t,s=!1;t.rank===4&&(s=!0,a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],l=a.shape[4];P(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),P(a.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),P(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),P(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),P(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."});var c=Op(i,n.shape,r,1,o),d=z.runKernelFunc(function(f){return f.conv3dDerInput(a,n,c)},{dy5D:a});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var Fie=N({conv1d_:function(e,t,n,r,o,i,a){o===void 0&&(o="NWC"),i===void 0&&(i=1);var s=R(e,"x","conv1d"),u=R(t,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),P(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),P(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),a!=null&&P(St(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),P(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),P(Kn(n,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"}),P(o==="NWC",function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."});var d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),f=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),h=Vr(f,d,[1,n],r,"NHWC",[1,i],a);return c?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),Vr=N({conv2d_:function(e,t,n,r,o,i,a){o===void 0&&(o="NHWC"),i===void 0&&(i=[1,1]);var s=R(e,"x","conv2d"),u=R(t,"filter","conv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),P(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),P(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),a!=null&&P(St(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=o==="NHWC"?l.shape[3]:l.shape[1];P(d===u.shape[2],function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+u.shape[2]+"."}),P(Kn(n,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"});var f=Hx(o),h=ds(l.shape,u.shape,n,i,r,a,!1,f),p=[u,l],v=z.runKernelFunc(function(y,m){var g=y.conv2d(l,u,h);return m([u,l]),g},{x:l,filter:u},function(y,m){var g=m,b=g[0],x=g[1];return P(Gu(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return MO(x.shape,y,b,n,r,o)},filter:function(){return tw(x,y,b.shape,n,r,o)}}},"Conv2D",h,p);return c?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),Bie=N({conv3d_:function(e,t,n,r,o,i){o===void 0&&(o="NDHWC"),i===void 0&&(i=[1,1,1]);var a=R(e,"x","conv3d"),s=R(t,"filter","conv3d"),u=a,l=!1;a.rank===4&&(l=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),P(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),P(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),P(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),P(function(f,h){return u0(f)||u0(h)}(n,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),P(o==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."});var c=Op(u.shape,s.shape,n,i,r),d=z.runKernelFunc(function(f,h){var p=f.conv3d(u,s,c);return h([u,s]),p},{x:u,$filter:s},function(f,h){P(u0(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var p=h[0],v=h[1];return{x:function(){return DO(p.shape,f,v,n,r)},$filter:function(){return function(y,m,g,b,x){var w=y;y.rank===4&&(w=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3]));var S=m;S.rank===4&&(S=m.as5D(1,m.shape[0],m.shape[1],m.shape[2],m.shape[3])),P(w.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+w.shape+"."}),P(S.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+S.shape+"."}),P(g.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+g+"."}),P(w.shape[4]===g[3],function(){return"Error in conv3dDerFilter: depth of input "+w.shape[4]+") must match input depth in filter ("+g[3]+"."}),P(S.shape[4]===g[4],function(){return"Error in conv3dDerFilter: depth of dy ("+S.shape[4]+") must match output depth for filter ("+g[4]+")."});var C=Op(w.shape,g,b,1,x);return z.runKernelFunc(function(_){return _.conv3dDerFilter(w,S,C)},{x5D:w,dy5D:S})}(p,f,v.shape,n,r)}}});return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),tw=N({conv2dDerFilter_:function(e,t,n,r,o,i,a){i===void 0&&(i="NHWC");var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=t;u.rank===3&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),P(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),P(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),P(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var l=i==="NHWC"?s.shape[3]:s.shape[1],c=i==="NHWC"?u.shape[3]:u.shape[1];P(l===n[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."}),P(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."}),a!=null&&P(St(o),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var d=Hx(i),f=ds(s.shape,n,r,1,o,a,!1,d);return z.runKernelFunc(function(h){return h.conv2dDerFilter(s,u,f)},{x4D:s,dy4D:u})}}),MO=N({conv2dDerInput_:AO}),Zv=N({depthwiseConv2d_:function(e,t,n,r,o,i,a){i===void 0&&(i=[1,1]);var s=R(e,"x","depthwiseConv2d"),u=R(t,"filter","depthwiseConv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),P(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),P(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),P(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),i==null&&(i=[1,1]),P(Kn(n,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),a!=null&&P(St(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var d=ds(l.shape,u.shape,n,i,r,a,!0),f=[l,u],h=z.runKernelFunc(function(p,v){var y=p.depthwiseConv2D(l,u,d);return v([l,u]),y},{x:l,filter:u},function(p,v){P(Gu(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var y=v[0],m=v[1];return{x:function(){return OO(y.shape,p,m,d)},filter:function(){return NO(y,p,m.shape,d)}}},"DepthwiseConv2dNative",d,f);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),OO=N({depthwiseConv2dDerInput_:function(e,t,n,r){var o=t,i=!1;t.rank===3&&(i=!0,o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=z.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return i?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),NO=N({depthwiseConv2dDerFilter_:function(e,t,n,r){var o=e;e.rank===3&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return i.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),z.runKernelFunc(function(a){return a.depthwiseConv2DDerFilter(o,i,r)},{x4D:o,dy4D:i})}}),nw=N({separableConv2d_:function(e,t,n,r,o,i,a){i===void 0&&(i=[1,1]),a===void 0&&(a="NHWC");var s=R(e,"x","separableConv2d"),u=R(t,"depthwiseFilter","separableConv2d"),l=R(n,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(s.rank===3&&(d=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");P(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),P(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),P(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),P(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),P(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var f=u.shape[2],h=u.shape[3];P(l.shape[2]===f*h,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*h+", but got "+l.shape[2]+"."});var p=Zv(c,u,r,o,a,i),v=Vr(p,l,1,"valid",a);return d?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),Lie=N({conv2dTranspose_:function(e,t,n,r,o,i){return AO(n,R(e,"x","conv2dTranspose"),R(t,"filter","conv2dTranspose"),r,o,"NHWC",i)}}),$ie=N({conv3dTranspose_:function(e,t,n,r,o){return DO(n,R(e,"x","conv3dTranspose"),R(t,"filter","conv3dTranspose"),r,o)}}),em=N({matMul_:function(e,t,n,r){var o;n===void 0&&(n=!1),r===void 0&&(r=!1);var i=R(e,"a","matMul"),a=R(t,"b","matMul");o=gt(i,a),i=o[0],a=o[1];var s=n?i.shape[i.rank-2]:i.shape[i.rank-1],u=r?a.shape[a.rank-1]:a.shape[a.rank-2],l=n?i.shape[i.rank-1]:i.shape[i.rank-2],c=r?a.shape[a.rank-2]:a.shape[a.rank-1],d=i.shape.slice(0,-2),f=a.shape.slice(0,-2),h=de(d),p=de(f);P(i.rank>=2&&a.rank>=2&&i.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+a.rank+"."}),P(qt(d,f),function(){return"Error in matMul: outer dimensions ("+d+") and ("+f+") of Tensors with shapes "+i.shape+" and "+a.shape+" must match."}),P(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+i.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var v=i.shape.slice(0,-2).concat([l,c]),y=n?i.as3D(h,s,l):i.as3D(h,l,s),m=r?a.as3D(p,c,u):a.as3D(p,u,c),g={transposeA:n,transposeB:r};return z.runKernelFunc(function(b,x){var w=b.batchMatMul(y,m,n,r);return x([y,m]),w},{a:y,b:m},function(b,x){var w=x,S=w[0],C=w[1];return n||r?!n&&r?{a:function(){return b.matMul(C,!1,!1)},b:function(){return b.matMul(S,!0,!1)}}:n&&!r?{a:function(){return C.matMul(b,!1,!0)},b:function(){return S.matMul(b,!1,!1)}}:{a:function(){return C.matMul(b,!0,!0)},b:function(){return b.matMul(S,!0,!0)}}:{a:function(){return b.matMul(C,!1,!0)},b:function(){return S.matMul(b,!0,!1)}}},"BatchMatMul",g).reshape(v)}}),zie=N({dot_:function(e,t){var n=R(e,"t1","dot"),r=R(t,"t2","dot");P(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var o=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];return P(o===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+i+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Wie=N({outerProduct_:function(e,t){var n=R(e,"v1","outerProduct"),r=R(t,"v2","outerProduct");return P(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Md=N({reverse_:function(e,t){var n=R(e,"x","reverse");if(n.rank===0)return n.clone();var r=Wt(t,n.shape);return z.runKernelFunc(function(o){return o.reverse(n,r)},{$x:n},function(o){return{$x:function(){return o.reverse(r)}}}).reshapeAs(n)}}),Vie=N({reverse1d_:function(e){var t=R(e,"x","reverse");return P(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),Md(t,0)}}),jie=N({reverse2d_:function(e,t){var n=R(e,"x","reverse");return P(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),Md(n,t)}}),Uie=N({reverse3d_:function(e,t){var n=R(e,"x","reverse");return P(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),Md(n,t)}}),Hie=N({reverse4d_:function(e,t){var n=R(e,"x","reverse");return P(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),Md(n,t)}});function FO(e,t,n,r,o,i){var a=R(e,"x","maxPool"),s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),r==null&&(r=[1,1]),P(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),P(Kn(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),i!=null&&P(St(o),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var l=Zc(s.shape,t,n,r,o,i);if(l.filterWidth===1&&l.filterHeight===1&&qt(l.inShape,l.outShape))return a.clone();var c=[s],d=z.runKernelFunc(function(f,h){var p=f.maxPool(s,l);return h([s,p]),p},{x:s},function(f,h){var p=h[0],v=h[1];return{x:function(){return function(y,m,g,b,x,w,S,C){var _=R(y,"dy","maxPoolBackprop"),k=R(m,"input","maxPoolBackprop"),E=R(g,"output","maxPoolBackprop");P(k.rank===_.rank,function(){return"Rank of input ("+k.rank+") does not match rank of dy ("+_.rank+")"}),w==null&&(w=[1,1]),P(Kn(x,w),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+w+"'"}),P(_.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+_.rank+"."}),P(k.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+k.rank+"."}),C!=null&&P(St(S),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+C+" but got pad "+S+"."});var A=Zc(k.shape,b,x,w,S,C);return z.runKernelFunc(function(D){return D.maxPoolBackprop(_,k,E,A)},{$dy:_,$input:k})}(f,p,v,t,n,r,o)}}},"MaxPool",l,c);return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function BO(e,t,n,r,o,i){var a=R(e,"x","avgPool","float32");r==null&&(r=[1,1]),P(Kn(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),P(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),i!=null&&P(St(o),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var l=Zc(s.shape,t,n,r,o,i);if(l.filterWidth===1&&l.filterHeight===1&&qt(l.inShape,l.outShape))return a.clone();var c=z.runKernelFunc(function(d){return d.avgPool(s,l)},{x:s},function(d){return{x:function(){return function(f,h,p,v,y,m){var g=R(f,"dy","avgPoolBackprop"),b=R(h,"input","avgPoolBackprop");P(b.rank===g.rank,function(){return"Rank of input ("+b.rank+") does not match rank of dy ("+g.rank+")"}),y==null&&(y=[1,1]),P(Kn(v,y),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+y+"'"});var x=b,w=g,S=!1;b.rank===3&&(S=!0,x=b.as4D(1,b.shape[0],b.shape[1],b.shape[2]),w=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),P(w.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+w.rank+"."}),P(x.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+x.rank+"."});var C=Zc(x.shape,p,v,y,m),_=z.runKernelFunc(function(k){return k.avgPoolBackprop(w,x,C)},{dy4D:w,input4D:x});return S?_.as3D(_.shape[1],_.shape[2],_.shape[3]):_}(d,s,t,n,r,o)}}},"AvgPool",l);return c=c.cast(a.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Ut=N({maxPool_:function(e,t,n,r,o){return FO(e,t,n,1,r,o)}}),Od=N({avgPool_:function(e,t,n,r,o){return BO(e,t,n,1,r,o)}}),Gie=N({pool_:function(e,t,n,r,o,i){o==null&&(o=[1,1]),i==null&&(i=1),r===0&&(r="valid");var a=R(e,"x","maxPool"),s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),P(Kn(i,o),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"});var l,c=Zc(s.shape,t,i,o,r),d=[c.dilationHeight,c.dilationWidth];l=r==="same"?function(x,w){var S=x.map(function(k,E){return k+(k-1)*(w[E]-1)}).map(function(k){return k-1}),C=S.map(function(k){return Math.floor(k/2)}),_=S.map(function(k,E){return k-C[E]});return S.map(function(k,E){return[C[E],_[E]]})}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var f=d[0]===1&&d[1]===1,h=function(x,w,S){var C=S.map(function(H){return H[0]}),_=S.map(function(H){return H[1]}),k=x.concat(C,_),E=w.map(function(H,B){return(H-k[B]%H)%H}),A=_.map(function(H,B){return H+E[B]}),D=w.map(function(H,B){return[C[B],A[B]]}),U=w.map(function(H,B){return[0,E[B]]});return[D,U]}([c.inHeight,c.inWidth],d,l),p=h[0],v=h[1],y=f?r:"valid",m=f?s:jM(s,d,p),g=(n==="avg"?function(){return BO(m,t,i,1,y)}:function(){return FO(m,t,i,1,y)})(),b=f?g:zM(g,d,v);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),qie=N({maxPool3d_:function(e,t,n,r,o,i,a){i===void 0&&(i="NDHWC");var s=R(e,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),P(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),P(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),P(Kn(n,a),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),o!=null&&P(St(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var c=Mp(u.shape,t,n,a,r,o,i),d=z.runKernelFunc(function(f,h){var p=f.maxPool3d(u,c);return h([u,p]),p},{x:u},function(f,h){var p=h[0],v=h[1];return{x:function(){return function(y,m,g,b,x,w,S,C){var _=R(y,"dy","maxPool3dBackprop"),k=R(m,"input","maxPool3dBackprop"),E=R(g,"output","maxPool3dBackprop"),A=_,D=k,U=E,H=!1;k.rank===4&&(H=!0,A=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3]),D=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),U=E.as5D(1,E.shape[0],E.shape[1],E.shape[2],E.shape[3])),P(A.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+A.rank+"."}),P(D.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+D.rank+"."}),P(U.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+U.rank+"."}),w==null&&(w=[1,1,1]),P(Kn(x,w),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+w+"'"}),C!=null&&P(St(S),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+C+" but got pad "+S+"."});var B=Mp(D.shape,b,x,w,S,C),V=z.runKernelFunc(function(M){return M.maxPool3dBackprop(A,D,U,B)},{dy5D:A,input5D:D});return H?V.as4D(V.shape[1],V.shape[2],V.shape[3],V.shape[4]):V}(f,p,v,t,n,a,r,o)}}});return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Kie=N({avgPool3d_:function(e,t,n,r,o,i,a){i===void 0&&(i="NDHWC");var s=R(e,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),P(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),P(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),P(Kn(n,a),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),o!=null&&P(St(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var c=Mp(u.shape,t,n,a,r,o,i),d=z.runKernelFunc(function(f){return f.avgPool3d(u,c)},{x:u},function(f){return{x:function(){return function(h,p,v,y,m,g,b){var x=R(h,"dy","avgPool3dBackprop"),w=R(p,"input","avgPool3dBackprop"),S=x,C=w,_=!1;w.rank===4&&(_=!0,S=x.as5D(1,x.shape[0],x.shape[1],x.shape[2],x.shape[3]),C=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3])),P(S.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+S.rank+"."}),P(C.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+C.rank+"."}),m==null&&(m=[1,1,1]),P(Kn(y,m),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+y+" and dilations '"+m+"'"}),b!=null&&P(St(g),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+b+" but got pad "+g+"."});var k=Mp(C.shape,v,y,m,g,b),E=z.runKernelFunc(function(A){return A.avgPool3dBackprop(S,C,k)},{dy5D:S,input5D:C});return _?E.as4D(E.shape[1],E.shape[2],E.shape[3],E.shape[4]):E}(f,u,t,n,a,r,o)}}});return d=d.cast(u.dtype),l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),No=N({slice_:function(e,t,n){var r,o,i=R(e,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof t=="number"?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach(function(u){P(u!==-1,function(){return"slice() does not support negative begin indexing."})}),o=(o=n==null?new Array(i.rank).fill(-1):typeof n=="number"?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map(function(u,l){return u>=0?u:(P(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."}),i.shape[l]-r[l])}),Sne(i,r,o);var a=i.shape,s={begin:r,size:o};return z.runKernelFunc(function(u){return u.slice(i,r,o)},{x:i},function(u){for(var l=[],c=0;c<u.rank;c++)l.push([r[c],a[c]-r[c]-o[c]]);return{x:function(){return u.pad(l)}}},"Slice",s)}}),Xie=N({slice1d_:function(e,t,n){var r=R(e,"x","slice1d");return P(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),No(r,[t],[n])}}),Yie=N({slice2d_:function(e,t,n){var r=R(e,"x","slice2d");return P(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),No(r,t,n)}}),LO=N({slice3d_:function(e,t,n){var r=R(e,"x","slice3d");return P(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),No(r,t,n)}}),Qie=N({slice4d_:function(e,t,n){var r=R(e,"x","slice4d");return P(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),No(r,t,n)}});function $O(e,t,n,r,o){return t.rank<n.rank&&(t=t.reshape(qn(t.shape,r))),e.rank<n.rank&&(e=e.reshape(qn(e.shape,r))),{x:function(){var i=e.mul(n.equal(t).cast(e.dtype));return o==null?i:i.transpose(o)}}}var Jie=N({all_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=R(e,"x","all","bool"),o=Wt(t,r.shape),i=o,a=Vo(i,r.rank);a!=null&&(r=r.transpose(a),i=jo(i.length,r.rank));var s=z.runKernelFunc(function(l){return l.all(r,i)},{$x:r});if(n){var u=qn(s.shape,o);return s.reshape(u)}return s}}),Zie=N({any_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=R(e,"x","any","bool"),o=Wt(t,r.shape),i=o,a=Vo(i,r.rank);a!=null&&(r=r.transpose(a),i=jo(i.length,r.rank));var s=z.runKernelFunc(function(l){return l.any(r,i)},{$x:r});if(n){var u=qn(s.shape,o);return s.reshape(u)}return s}}),eae=N({argMax_:function(e,t){t===void 0&&(t=0);var n=R(e,"x","argMax");t==null&&(t=0);var r=Wt(t,n.shape),o=Vo(r,n.rank);o!=null&&(n=n.transpose(o),r=jo(r.length,n.rank));var i={axis:r[0]},a=[n];return z.runKernelFunc(function(s,u){var l=s.argMax(n,r[0]);return u([n]),l},{x:n},function(s,u){var l=u[0];return{x:function(){return Be(l)}}},"ArgMax",i,a)}}),tae=N({argMin_:function(e,t){t===void 0&&(t=0);var n=R(e,"x","argMin");t==null&&(t=0);var r=Wt(t,n.shape),o=Vo(r,n.rank);return o!=null&&(n=n.transpose(o),r=jo(r.length,n.rank)),z.runKernelFunc(function(i,a){var s=i.argMin(n,r[0]);return a([n]),s},{$x:n},function(i,a){var s=a[0];return{$x:function(){return Be(s)}}})}}),nae=N({logSumExp_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=R(e,"x","logSumExp"),o=Wt(t,r.shape),i=r.max(o,!0),a=r.sub(i).exp().sum(o).log(),s=i.reshape(a.shape).add(a);if(n){var u=qn(s.shape,o);return s.reshape(u)}return s}}),tm=N({max_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=R(e,"x","max"),o=r,i=Wt(t,r.shape),a=i,s=Vo(a,r.rank);s!=null&&(r=r.transpose(s),a=jo(a.length,r.rank));var u=[r],l=z.runKernelFunc(function(d,f){var h=d.max(r,a);return f([o,h]),h},{x:r},function(d,f){return $O(d,f[1],f[0],i,s)},"Max",{axes:a},u,[!0]);if(n){var c=qn(l.shape,i);l=l.reshape(c)}return l}}),rae=N({mean_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=R(e,"x","mean"),o=Wt(t,r.shape),i=de(fn(r.shape,o)[1]);return Yv(function(a){var s=re(i);return{value:(s.dtype===a.dtype?a:a.cast(s.dtype)).div(s).sum(t,n),gradFunc:function(u){var l=a.shape.slice();return o.forEach(function(c){l[c]=1}),u.reshape(l).mul(tl(a.shape,"float32")).div(i)}}})(r)}}),oae=N({min_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=R(e,"x","min"),o=r,i=Wt(t,r.shape),a=i,s=Vo(a,r.rank);s!=null&&(r=r.transpose(s),a=jo(a.length,r.rank));var u=[r],l=z.runKernelFunc(function(d,f){var h=d.min(r,a);return f([o,h]),h},{x:r},function(d,f){return $O(d,f[1],f[0],i,s)},"Min",{axes:a},u,[!0]);if(n){var c=qn(l.shape,i);l=l.reshape(c)}return l}}),iae=N({moments_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=Wt(t,(e=R(e,"x","moments")).shape),o=e.mean(r,n),i=o.shape;n||(i=qn(o.shape,r));var a=e.toFloat().sub(o.reshape(i)).square();return{mean:o,variance:a.mean(r,n)}}}),zO=N({sum_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=R(e,"x","sum");r.dtype==="bool"&&(r=r.toInt());var o=Wt(t,r.shape);return Yv(function(i){var a=Vo(o,i.rank),s=o,u=i;a!=null&&(u=i.transpose(a),s=jo(s.length,i.rank));var l=function(h){var p=i.shape.slice();return o.forEach(function(v){p[v]=1}),h.reshape(p).mul(tl(i.shape,"float32"))},c={axes:s},d=z.runKernelFunc(function(h){return h.sum(u,s)},{x:u},function(h){return{x:function(){return l(h)}}},"Sum",c);if(n){var f=qn(d.shape,o);d=d.reshape(f)}return{value:d,gradFunc:l}})(r)}}),aae=N({prod_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=R(e,"x","prod");r.dtype==="bool"&&(r=r.toInt());var o=Wt(t,r.shape),i=Vo(o,r.rank),a=o,s=r;i!=null&&(s=r.transpose(i),a=jo(a.length,r.rank));var u=z.runKernelFunc(function(c){return c.prod(s,a)},{permutedX:s});if(n){var l=qn(u.shape,o);u=u.reshape(l)}return u}}),WO=N({elu_:function(e){var t=R(e,"x","elu");return z.runKernelFunc(function(n,r){var o=n.elu(t);return r([o]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return z.runKernelFunc(function(i){return i.eluDer(n,o)},{dy:n,y:o})}}})}}),sae=N({leakyRelu_:function(e,t){t===void 0&&(t=.2);var n=R(e,"x","leakyRelu");return Zx(re(t).mul(n),n)}}),VO=N({prelu_:function(e,t){var n=R(e,"x","prelu"),r=R(t,"alpha","prelu");return z.runKernelFunc(function(o,i){var a=o.prelu(n,r);return i([n,r]),a},{x:n,alpha:r},function(o,i){var a=i[0],s=i[1],u=a.greater(0);return{x:function(){return ts(u,o,o.mul(s))},alpha:function(){var l=ts(u,Be(o),o.mul(a)),c=Lt(s.shape,o.shape);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Prelu")}}),pt=N({relu_:function(e){var t=R(e,"x","relu");return t.dtype==="bool"?t.toInt():z.runKernelFunc(function(n,r){var o=n.relu(t);return r([t]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return n.mulStrict(o.step().toFloat())}}},"Relu")}}),jO=N({relu6_:function(e){var t=R(e,"x","relu6");return t.dtype==="bool"?t.toInt():z.runKernelFunc(function(n,r){var o=n.relu6(t);return r([t]),o},{x:t},function(n,r){var o=r[0],i=o.lessEqual(6).mul(o.step());return{x:function(){return n.mulStrict(i.toFloat())}}},"Relu6")}}),uae=N({selu_:function(e){var t=R(e,"x","selu");return z.runKernelFunc(function(n,r){var o=n.selu(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){var i=o.greater(re(0)),a=re(Yx),s=re(Qx),u=n.mul(s),l=n.mul(a).mul(o.toFloat().exp());return ts(i,u,l)}}})}}),sa=N({transpose_:function(e,t){var n=R(e,"x","transpose");if(t==null&&(t=n.shape.map(function(o,i){return i}).reverse()),P(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."}),t.forEach(function(o){P(o>=0&&o<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t})}),n.rank<=1)return n.clone();var r={perm:t};return z.runKernelFunc(function(o){return o.transpose(n,t)},{x:n},function(o){var i=zx(t);return{x:function(){return o.transpose(i)}}},"Transpose",r)}}),lae=N({localResponseNormalization_:function(e,t,n,r,o){t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5);var i=R(e,"x","localResponseNormalization");P(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),P(St(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var a=i,s=!1;i.rank===3&&(s=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var u=z.runKernelFunc(function(l,c){var d=l.localResponseNormalization4D(a,t,n,r,o);return c([a,d]),d},{x4D:a},function(l,c){var d=c[0],f=c[1];return{x4D:function(){return z.runKernelFunc(function(h){return h.LRNGrad(l,d,f,t,n,r,o)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),UO=N({norm_:function(e,t,n,r){t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var o=function s(u,l,c){if(c===void 0&&(c=null),u.rank===0)return u.abs();if(u.rank!==1&&c===null)return s(u.reshape([-1]),l,c);if(u.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(l===1)return u.abs().sum(c);if(l===1/0)return u.abs().max(c);if(l===-1/0)return u.abs().min(c);if(l==="euclidean"||l===2)return u.abs().pow(re(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(c)&&c.length===2){if(l===1)return u.abs().sum(c[0]).max(c[1]-1);if(l===1/0)return u.abs().sum(c[1]).max(c[0]);if(l===-1/0)return u.abs().sum(c[1]).min(c[0]);if(l==="fro"||l==="euclidean")return u.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+c)}(e=R(e,"x","norm"),t,n),i=o.shape;if(r){var a=Wt(n,e.shape);i=qn(o.shape,a)}return o.reshape(i)}}),cae=N({basicLSTMCell_:function(e,t,n,r,o,i){var a=R(e,"forgetBias","basicLSTMCell"),s=R(t,"lstmKernel","basicLSTMCell"),u=R(n,"lstmBias","basicLSTMCell"),l=R(r,"data","basicLSTMCell"),c=R(o,"c","basicLSTMCell"),d=R(i,"h","basicLSTMCell"),f=l.concat(d,1).matMul(s).add(u),h=f.shape[0],p=f.shape[1]/4,v=[h,p],y=f.slice([0,0],v),m=f.slice([0,p],v),g=f.slice([0,2*p],v),b=f.slice([0,3*p],v),x=y.sigmoid().mulStrict(m.tanh()).addStrict(c.mulStrict(a.add(g).sigmoid())),w=x.tanh().mulStrict(b.sigmoid());return[x,w]}}),dae=N({multiRNNCell_:function(e,t,n,r){for(var o=R(t,"data","multiRNNCell"),i=Tp(n,"c","multiRNNCell"),a=Tp(r,"h","multiRNNCell"),s=o,u=[],l=0;l<e.length;l++){var c=e[l](s,i[l],a[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var d=[],f=[];for(l=0;l<u.length;l+=2)d.push(u[l]),f.push(u[l+1]);return[d,f]}}),fae=N({movingAverage_:function(e,t,n,r,o){o===void 0&&(o=!0);var i=R(e,"v","movingAverage"),a=R(t,"x","movingAverage"),s=R(n,"decay","movingAverage");lte(i,a),P(qt(i.shape,a.shape),function(){return"Shape mismatch in v and x"});var u=re(1),l=u.sub(s),c=a.sub(i).mul(l);if(o){P(r!=null,function(){return"When using zeroDebias: true, step is required."});var d=R(r,"step","movingAverage");c=c.div(u.sub(Bp(s,d)))}return i.add(c)}}),hae=N({stridedSlice_:function(e,t,n,r,o,i,a,s,u){if(o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(t.length)),a!==0)throw new Error("ellipsis mask is not yet supported");var l=R(e,"x","stridedSlice"),c=EE(s),d=l.shape.slice();c.forEach(function(y){t[y]=0,n[y]=1,d.splice(y,0,1)}),l=l.reshape(d);for(var f=0;f<l.rank;f++)t[f]=Cne(o,t,r,l.shape,f),n[f]=_ne(i,n,r,l.shape,f),r[f]=r[f]||1;var h=EE(u);h.forEach(function(y){n[y]=t[y]+1,r[y]=1});var p=Ux(t,n,r),v=p.filter(function(y,m){return h.indexOf(m)===-1});return r.every(function(y){return y===1})?No(l,t,p).reshape(v):z.runKernelFunc(function(y){return y.stridedSlice(l,t,n,r)},{$x:l}).reshape(v)}}),pae=N({topk_:function(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!0);var r=R(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+t);var i=z.runKernelFunc(function(a){return a.topk(r,t,n)},{$x:r});return{values:i[0],indices:i[1]}}}),vae=N({scatterND_:function(e,t,n){var r=R(e,"indices","scatterND","int32"),o=R(t,"updates","scatterND");return wne(o,r,n),z.runKernelFunc(function(i){return i.scatterND(r,o,n)},{indices:r,updates:o},null,"ScatterNd",{shape:n})}}),rw=N({fft_:function(e){P(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return z.runKernelFunc(function(o){return o.fft(r)},{input:e}).reshape(e.shape)}}),Lp=N({ifft_:function(e){P(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return z.runKernelFunc(function(o){return o.ifft(r)},{input:e}).reshape(e.shape)}}),ow=N({rfft_:function(e,t){P(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var n,r=e.shape[e.shape.length-1],o=e.size/r;if(t!=null&&t<r){var i=e.shape.map(function(m){return 0}),a=e.shape.map(function(m){return m});a[e.shape.length-1]=t,n=e.slice(i,a),r=t}else if(t!=null&&t>r){var s=e.shape.map(function(m){return m});s[e.shape.length-1]=t-r,n=e.concat(it(s),e.shape.length-1),r=t}else n=e;var u=n.zerosLike(),l=en(n,u).as2D(o,r),c=rw(l),d=Math.floor(r/2)+1,f=Ir(c),h=wo(c),p=f.split([d,r-d],f.shape.length-1),v=h.split([d,r-d],h.shape.length-1),y=n.shape.slice();return y[n.shape.length-1]=d,en(p[0],v[0]).reshape(y)}}),HO=N({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),o=Lp(r);return Ir(o)}var i=[n,2*(t-1)],a=Ir(e).as2D(n,t),s=wo(e).as2D(n,t),u=a.slice([0,1],[n,t-2]).reverse(1),l=s.slice([0,1],[n,t-2]).reverse(1).mul(re(-1)),c=a.concat(u,1),d=s.concat(l,1);return r=en(c,d).as2D(i[0],i[1]),o=Lp(r),Ir(o)}}),mae=Object.freeze({fft:rw,ifft:Lp,rfft:ow,irfft:HO}),gae=N({sparseToDense_:function(e,t,n,r){r===void 0&&(r=0);var o=R(e,"sparseIndices","sparseToDense","int32"),i=R(t,"sparseValues","sparseToDense"),a=R(r,"defaultValue","sparseToDense",i.dtype);return function(s,u,l,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var d=s.rank>0?s.shape[0]:1,f=s.rank>1?s.shape[1]:1;if(l.length!==f)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+f+".");var h=u.size;if(u.rank!==0&&(u.rank!==1||h!==d))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+d+"]");if(u.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,i,n,a),z.runKernelFunc(function(s){return s.sparseToDense(o,i,n,a)},{$sparseIndices:o,$sparseValues:i,$defaultValue:a})}}),yae=N({gatherND_:function(e,t){var n=R(t,"indices","gatherND","int32"),r=R(e,"x","gatherND");return z.runKernelFunc(function(o){return o.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),bae=N({diag_:function(e){var t=R(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return z.runKernelFunc(function(r){return r.diag(t)},{$x:t}).reshape(n)}}),xae=N({dropout_:function(e,t,n,r){var o=R(e,"x","dropout");if(P(o.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."}),P(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),t===0)return e instanceof ft?o.clone():o;var i=function(u,l){if(l==null)return u.shape.slice();if(qt(u.shape,l))return l;if(u.shape.length===l.length){for(var c=[],d=0;d<u.shape.length;d++)l[d]==null&&u.shape[d]!=null?c.push(u.shape[d]):c.push(l[d]);return c}return l}(o,n),a=1-t,s=VM(i,0,1,"float32",r).add(a).floor().div(a);return o.mul(s)}});function GO(e,t,n){for(var r=1-e%2,o=new Float32Array(e),i=0;i<e;++i){var a=2*Math.PI*i/(e+r-1);o[i]=t-n*Math.cos(a)}return It(o,"float32")}var iw=N({hannWindow_:function(e){return GO(e,.5,.5)}}),qO=N({hammingWindow_:function(e){return GO(e,.54,.46)}}),aw=N({frame_:function(e,t,n,r,o){r===void 0&&(r=!1),o===void 0&&(o=0);for(var i=0,a=[];i+t<=e.size;)a.push(No(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=Ft([No(e,i,t-s),Mo([s],o)]);a.push(u),i+=n}return a.length===0?ea([],[0,t]):Ft(a).as2D(a.length,t)}}),KO=N({stft_:function(e,t,n,r,o){var i;o===void 0&&(o=iw),r==null&&(i=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var a=aw(e,t,n),s=gn(a,o(t)),u=[],l=0;l<a.shape[0];l++)u.push(ow(s.slice([l,0],[1,t]),r));return Ft(u)}}),wae=Object.freeze({hannWindow:iw,hammingWindow:qO,frame:aw,stft:KO}),mn,Sae=function(e,t,n){return n===void 0&&(n=1),le(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,d,f,h,p,v,y;return ce(this,function(m){switch(m.label){case 0:return r=R(e,"predictions","inTopK"),o=R(t,"targets","inTopK"),P(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),P(r.rank-1===o.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank}),Xe(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],P(n>0&&n<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n}),[4,r.data()];case 1:return a=m.sent(),[4,o.data()];case 2:for(s=m.sent(),u=[a.length/i,i],c=u[1],d=Yc("bool",l=u[0]),f=0;f<l;f++){for(h=f*c,p=a.subarray(h,h+c),v=[],y=0;y<p.length;y++)v.push({value:p[y],index:y});for(v.sort(function(g,b){return b.value-g.value}),d[f]=0,y=0;y<n;y++)if(v[y].index===s[f]){d[f]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),[2,rn(d,o.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(mn||(mn={}));var Cae=N({absoluteDifference_:function(e,t,n,r){r===void 0&&(r=mn.SUM_BY_NONZERO_WEIGHTS);var o=R(e,"labels","absoluteDifference"),i=R(t,"predictions","absoluteDifference"),a=null;n!=null&&(a=R(n,"weights","absoluteDifference")),Xe(o.shape,i.shape,"Error in absoluteDifference: ");var s=o.sub(i).abs();return bi(s,a,r)}}),bi=N({computeWeightedLoss_:function(e,t,n){n===void 0&&(n=mn.SUM_BY_NONZERO_WEIGHTS);var r=R(e,"losses","computeWeightedLoss"),o=null;t!=null&&(o=R(t,"weights","computeWeightedLoss"));var i=o==null?r:r.mul(o);if(n===mn.NONE)return i;if(n===mn.SUM)return i.sum();if(n===mn.MEAN){if(o==null)return i.mean();var a=r.size/o.size,s=i.sum().div(o.sum());return a>1?s.div(re(a)):s}if(n===mn.SUM_BY_NONZERO_WEIGHTS){if(o==null)return i.sum().div(re(r.size));var u=o.mul(tl(r.shape)).notEqual(re(0)).sum().toFloat();return i.sum().div(u)}throw Error("Unknown reduction: "+n)}}),_ae=N({cosineDistance_:function(e,t,n,r,o){o===void 0&&(o=mn.SUM_BY_NONZERO_WEIGHTS);var i=R(e,"labels","cosineDistance"),a=R(t,"predictions","cosineDistance"),s=null;r!=null&&(s=R(r,"weights","cosineDistance")),Xe(i.shape,a.shape,"Error in cosineDistance: ");var u=re(1).sub(i.mul(a).sum(n,!0));return bi(u,s,o)}}),Eae=N({hingeLoss_:function(e,t,n,r){r===void 0&&(r=mn.SUM_BY_NONZERO_WEIGHTS);var o=R(e,"labels","hingeLoss"),i=R(t,"predictions","hingeLoss"),a=null;n!=null&&(a=R(n,"weights","hingeLoss")),Xe(o.shape,i.shape,"Error in hingeLoss: ");var s=re(1);o=re(2).mul(o).sub(s);var u=s.sub(o.mul(i)).relu();return bi(u,a,r)}}),kae=N({huberLoss_:function(e,t,n,r,o){r===void 0&&(r=1),o===void 0&&(o=mn.SUM_BY_NONZERO_WEIGHTS);var i=R(e,"labels","huberLoss"),a=R(t,"predictions","huberLoss"),s=null;n!=null&&(s=R(n,"weights","huberLoss")),Xe(i.shape,a.shape,"Error in huberLoss: ");var u=re(r),l=a.sub(i).abs(),c=TO(l,u),d=l.sub(c),f=re(.5).mul(c.square()).add(u.mul(d));return bi(f,s,o)}}),Tae=N({logLoss_:function(e,t,n,r,o){r===void 0&&(r=1e-7),o===void 0&&(o=mn.SUM_BY_NONZERO_WEIGHTS);var i=R(e,"labels","logLoss"),a=R(t,"predictions","logLoss"),s=null;n!=null&&(s=R(n,"weights","logLoss")),Xe(i.shape,a.shape,"Error in logLoss: ");var u=re(1),l=re(r),c=i.mul(a.add(l).log()).neg().sub(u.sub(i).mul(u.sub(a).add(l).log()));return bi(c,s,o)}}),Rae=N({meanSquaredError_:function(e,t,n,r){r===void 0&&(r=mn.SUM_BY_NONZERO_WEIGHTS);var o=R(e,"labels","meanSquaredError"),i=R(t,"predictions","meanSquaredError"),a=null;n!=null&&(a=R(n,"weights","meanSquaredError")),Xe(o.shape,i.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(i);return bi(s,a,r)}}),Pae=N({sigmoidCrossEntropy_:function(e,t,n,r,o){r===void 0&&(r=0),o===void 0&&(o=mn.SUM_BY_NONZERO_WEIGHTS);var i=R(e,"multiClassLabels","sigmoidCrossEntropy"),a=R(t,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=R(n,"weights","sigmoidCrossEntropy")),Xe(i.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=re(r),l=re(1),c=re(.5);i=i.mul(l.sub(u)).add(c.mul(u))}var d=function(f,h){var p=R(f,"labels","sigmoidCrossEntropyWithLogits"),v=R(h,"logits","sigmoidCrossEntropyWithLogits");Xe(p.shape,v.shape,"Error in sigmoidCrossEntropyWithLogits: ");var y=v.relu(),m=v.mul(p),g=v.abs().neg().exp().log1p();return y.sub(m).add(g)}(i,a);return bi(d,s,o)}}),Iae=N({softmaxCrossEntropy_:function(e,t,n,r,o){r===void 0&&(r=0),o===void 0&&(o=mn.SUM_BY_NONZERO_WEIGHTS);var i=R(e,"onehotLabels","softmaxCrossEntropy"),a=R(t,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=R(n,"weights","softmaxCrossEntropy")),Xe(i.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var u=re(r),l=re(1),c=re(i.shape[1]);i=i.mul(l.sub(u)).add(u.div(c))}var d=function(f,h,p){if(p===void 0&&(p=-1),p===-1&&(p=h.rank-1),p!==h.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+h.rank+" and dim was "+p);return Yv(function(v,y,m){var g=y.logSumExp([p],!0),b=y.toFloat().sub(g);return m([v,b]),{value:b.mul(v).neg().sum([p]),gradFunc:function(x,w){var S=w[0],C=w[1],_=qn(x.shape,[p]);return[x.reshape(_).mul(S.toFloat().sub(C.exp())),x.reshape(_).mul(C.exp().sub(S.toFloat()))]}}})(f,h)}(i,a);return bi(d,s,o)}}),Aae=Object.freeze({get Reduction(){return mn},absoluteDifference:Cae,computeWeightedLoss:bi,cosineDistance:_ae,hingeLoss:Eae,huberLoss:kae,logLoss:Tae,meanSquaredError:Rae,sigmoidCrossEntropy:Pae,softmaxCrossEntropy:Iae});function qE(e,t){return t===void 0&&(t=!1),z.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],o=WM(n),i=e.clone(),a=ea([[1]],[1,1]),s=a.clone(),u=n>=r?r:n,l=function(d){var f,h=i,p=s,v=o;f=z.tidy(function(){var y=i.slice([d,d],[n-d,1]),m=y.norm(),g=i.slice([d,d],[1,1]),b=ea([[-1]]).where(g.greater(0),ea([[1]])),x=g.sub(b.mul(m)),w=y.div(x);s=w.shape[0]===1?a.clone():a.concat(w.slice([1,0],[w.shape[0]-1,w.shape[1]]),0);var S=b.matMul(x).div(m).neg(),C=i.slice([d,0],[n-d,r]),_=S.mul(s);if(d===0)i=C.sub(_.matMul(s.transpose().matMul(C)));else{var k=C.sub(_.matMul(s.transpose().matMul(C)));i=i.slice([0,0],[d,r]).concat(k,0)}var E=o.slice([0,d],[n,o.shape[1]-d]);if(d===0)o=E.sub(E.matMul(s).matMul(_.transpose()));else{var A=E.sub(E.matMul(s).matMul(_.transpose()));o=o.slice([0,0],[n,d]).concat(A,1)}return[s,i,o]}),s=f[0],i=f[1],o=f[2],Un([h,p,v])},c=0;c<u;++c)l(c);return!t&&n>r&&(o=o.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[o,i]})}var Dae=N({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=R(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,i=r.shape.slice(-2),a=i[0],s=i[1];if(!(t<=a))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+a+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=a),n<0&&(n=s);var u=Rp(0,a,1,"int32").reshape([-1,1]),l=Rp(0,s,1,"int32"),c=$t(u,l),d=Jv(c.lessEqual(re(+t,"int32")),c.greaterEqual(re(-n,"int32"))),f=it([a,s],r.dtype);return pr(Bt(r.reshape([-1,a,s])).map(function(h){return ts(d,h,f)})).reshape(o)}}),Mae=N({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,P(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=e[0].shape[0],r=function(u){P(e[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[u].shape[0]+" vs. "+n+")"})},o=1;o<e.length;++o)r(o)}else t=!0,e=Vx(e,e.shape[0],0).map(function(u){return UM(u,[0])});P(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var i=[],a=e,s=function(u){i.push(z.tidy(function(){var l=a[u];if(u>0)for(var c=0;c<u;++c){var d=zO(i[c].mulStrict(l)).mul(i[c]);l=l.sub(d)}return l.div(UO(l,"euclidean"))}))};for(o=0;o<e.length;++o)s(o);return t?pr(i,0):i}}),Oae=N({qr_:function(e,t){if(t===void 0&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return qE(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(a,s){return a*s}),r=Bt(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],i=[];return r.forEach(function(a){var s=qE(a,t),u=s[0],l=s[1];o.push(u),i.push(l)}),[pr(o,0).reshape(e.shape),pr(i,0).reshape(e.shape)]}}),Nae=Object.freeze({bandPart:Dae,gramSchmidt:Mae,qr:Oae});function nm(e,t,n,r,o,i){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),i==null&&(i=0);var a=e.shape[0];return n=Math.min(n,a),P(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),P(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),P(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),P(t.rank===1,function(){return"scores must be a 1D tensor"}),P(t.shape[0]===a,function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+t.shape[0]}),P(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}var Fae=N({resizeBilinear_:function(e,t,n){n===void 0&&(n=!1);var r=R(e,"images","resizeBilinear");P(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),P(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var o=r,i=!1;r.rank===3&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],s=t[1],u=z.runKernelFunc(function(l,c){return c([o]),l.resizeBilinear(o,a,s,n)},{x:o},function(l,c){return{x:function(){return z.runKernelFunc(function(d){return d.resizeBilinearBackprop(l,c[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:a,newWidth:s});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Bae=N({resizeNearestNeighbor_:function(e,t,n){n===void 0&&(n=!1);var r=R(e,"images","resizeNearestNeighbor");P(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),P(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),P(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var o=r,i=!1;r.rank===3&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],s=t[1],u=z.runKernelFunc(function(l,c){return c([o]),l.resizeNearestNeighbor(o,a,s,n)},{batchImages:o},function(l,c){return{batchImages:function(){return z.runKernelFunc(function(d){return d.resizeNearestNeighborBackprop(l,c[0],n)},{})}}});return i?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Lae=N({nonMaxSuppression_:function(e,t,n,r,o){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY);var i=R(e,"boxes","nonMaxSuppression"),a=R(t,"scores","nonMaxSuppression"),s=nm(i,a,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return z.runKernelFunc(function(l){return l.nonMaxSuppression(i,a,n,r,o)},{boxes:i,scores:a},null,"NonMaxSuppressionV3",u)}}),$ae=function(e,t,n,r,o){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),le(this,void 0,void 0,function(){var i,a,s,u,l,c,d;return ce(this,function(f){switch(f.label){case 0:return i=R(e,"boxes","nonMaxSuppressionAsync"),a=R(t,"scores","nonMaxSuppressionAsync"),s=nm(i,a,n,r,o),n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,[4,Promise.all([i.data(),a.data()])];case 1:return u=f.sent(),l=u[0],c=u[1],d=Gx(l,c,n,r,o),i!==e&&i.dispose(),a!==t&&a.dispose(),[2,d]}})})},zae=N({nonMaxSuppressionWithScore_:function(e,t,n,r,o,i){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var a=R(e,"boxes","nonMaxSuppression"),s=R(t,"scores","nonMaxSuppression"),u=nm(a,s,n,r,o,i),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:o=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},c=z.runKernel("NonMaxSuppressionV5",{boxes:a,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),Wae=function(e,t,n,r,o,i){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),le(this,void 0,void 0,function(){var a,s,u,l,c,d,f;return ce(this,function(h){switch(h.label){case 0:return a=R(e,"boxes","nonMaxSuppressionAsync"),s=R(t,"scores","nonMaxSuppressionAsync"),u=nm(a,s,n,r,o,i),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,i=u.softNmsSigma,[4,Promise.all([a.data(),s.data()])];case 1:return l=h.sent(),c=l[0],d=l[1],f=qx(c,d,n,r,o,i),a!==e&&a.dispose(),s!==t&&s.dispose(),[2,f]}})})},Vae=N({cropAndResize_:function(e,t,n,r,o,i){var a=R(e,"image","cropAndResize"),s=R(t,"boxes","cropAndResize","float32"),u=R(n,"boxInd","cropAndResize","int32");o=o||"bilinear",i=i||0;var l=s.shape[0];return P(a.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),P(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),P(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),P(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),P(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),P(o==="bilinear"||o==="nearest",function(){return"method must be bilinear or nearest, but was "+o}),z.runKernelFunc(function(c,d){return c.cropAndResize(a,s,u,r,o,i)},{images:a,boxes:s,boxInd:u},null,"CropAndResize",{method:o,extrapolationValue:i,cropSize:r})}}),sw=Object.freeze({resizeBilinear:Fae,resizeNearestNeighbor:Bae,nonMaxSuppression:Lae,nonMaxSuppressionAsync:$ae,nonMaxSuppressionWithScore:zae,nonMaxSuppressionWithScoreAsync:Wae,cropAndResize:Vae}),uw=function(e,t){return!(e>0)||t==="linear"},lw=function(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},cw=function(e,t){var n=t,r=Lt(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},dw=function(e,t,n){if(t==="linear")return e;if(t==="relu")return pt(e);if(t==="elu")return WO(e);if(t==="relu6")return jO(e);if(t==="prelu")return VO(e,n);throw new Error("Unknown fused activation "+t+".")},jae=N({fusedMatMul_:function(e){var t,n=e.a,r=e.b,o=e.transposeA,i=o!==void 0&&o,a=e.transposeB,s=a!==void 0&&a,u=e.bias,l=e.activation,c=l===void 0?"linear":l,d=e.preluActivationWeights;if(uw(z.state.gradientDepth,c)===!1){var f=em(n,r,i,s);return u!=null&&(f=Re(f,u)),dw(f,c,d)}var h=R(n,"a","fused matMul"),p=R(r,"b","fused matMul");t=gt(h,p),h=t[0],p=t[1];var v=i?h.shape[h.rank-2]:h.shape[h.rank-1],y=s?p.shape[p.rank-1]:p.shape[p.rank-2],m=i?h.shape[h.rank-1]:h.shape[h.rank-2],g=s?p.shape[p.rank-2]:p.shape[p.rank-1],b=h.shape.slice(0,-2),x=p.shape.slice(0,-2),w=de(b),S=de(x);P(h.rank>=2&&p.rank>=2&&h.rank===p.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+p.rank+"."}),P(qt(b,x),function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+x+") of Tensors with shapes "+h.shape+" and "+p.shape+" must match."}),P(v===y,function(){return"Error in fused matMul: inner shapes ("+v+") and ("+y+") of Tensors with shapes "+h.shape+" and "+p.shape+" and transposeA="+i+" and transposeB="+s+" must match."});var C,_,k=h.shape.slice(0,-2).concat([m,g]),E=i?h.as3D(w,v,m):h.as3D(w,m,v),A=s?p.as3D(S,g,y):p.as3D(S,y,g);u!=null&&Pe(k,(C=gt(C=R(u,"bias","fused matMul"),h)[0]).shape),d!=null&&(_=R(d,"prelu weights","fused matMul"));var D={a:E,b:A};u!=null&&(D.bias=C),d!=null&&(D.preluActivationWeights=_);var U=[E,A];return z.runKernelFunc(function(H,B){var V=H.fusedBatchMatMul({a:E,b:A,transposeA:i,transposeB:s,bias:C,activation:c,preluActivationWeights:_});return B([E,A,V]),V},D,function(H,B){var V=B[0],M=B[1],O=B[2],F=lw(H,O,c),$={};return u!=null&&($={bias:function(){return cw(C,F)}}),Object.assign(i||s?!i&&s?{a:function(){return F.matMul(M,!1,!1)},b:function(){return F.matMul(V,!0,!1)}}:i&&!s?{a:function(){return M.matMul(F,!1,!0)},b:function(){return V.matMul(F,!1,!1)}}:{a:function(){return M.matMul(F,!0,!0)},b:function(){return F.matMul(V,!0,!0)}}:{a:function(){return F.matMul(M,!1,!0)},b:function(){return V.matMul(F,!0,!1)}},$)},"_FusedMatMul",{transposeA:i,transposeB:s,activation:c},U,[!0]).reshape(k)}}),Uae=N({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,i=e.dataFormat,a=i===void 0?"NHWC":i,s=e.dilations,u=s===void 0?[1,1]:s,l=e.dimRoundingMode,c=e.bias,d=e.activation,f=d===void 0?"linear":d,h=e.preluActivationWeights;if(f=f||"linear",uw(z.state.gradientDepth,f)===!1){var p=Vr(t,n,r,o,a,u,l);return c!=null&&(p=Re(p,c)),dw(p,f,h)}var v=R(t,"x","conv2d"),y=R(n,"filter","conv2d"),m=v,g=!1;v.rank===3&&(g=!0,m=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),P(m.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+m.rank+"."}),P(y.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+y.rank+"."}),l!=null&&P(St(o),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+o+"."}),P(m.shape[3]===y.shape[2],function(){return"Error in conv2d: depth of input ("+m.shape[3]+") must match input depth for filter "+y.shape[2]+"."}),P(Kn(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),P(a==="NHWC",function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."});var b,x,w=ds(m.shape,y.shape,r,u,o,l);c!=null&&(b=gt(b=R(c,"bias","fused conv2d"),v)[0],Pe(w.outShape,b.shape)),h!=null&&(x=R(h,"prelu weights","fused conv2d"));var S={x:m,filter:y};c!=null&&(S.bias=b),h!=null&&(S.preluActivationWeights=x);var C=[y,m],_=z.runKernelFunc(function(k,E){var A=k.fusedConv2d({input:m,filter:y,convInfo:w,bias:b,activation:f,preluActivationWeights:x});return E([y,m,A]),A},S,function(k,E){var A=E,D=A[0],U=A[1],H=A[2],B=lw(k,H,f);P(Gu(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var V={};return c!=null&&(V={bias:function(){return cw(b,B)}}),Object.assign({x:function(){return MO(U.shape,B,D,r,o)},filter:function(){return tw(U,B,D.shape,r,o)}},V)},"FusedConv2D",{convInfo:w,activation:f},C,[!0]);return g?_.as3D(_.shape[1],_.shape[2],_.shape[3]):_}}),Hae=N({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,i=e.dataFormat,a=i===void 0?"NHWC":i,s=e.dilations,u=s===void 0?[1,1]:s,l=e.dimRoundingMode,c=e.bias,d=e.activation,f=d===void 0?"linear":d,h=e.preluActivationWeights;if(uw(z.state.gradientDepth,f)===!1){var p=Zv(t,n,r,o,a,u,l);return c!=null&&(p=Re(p,c)),dw(p,f,h)}var v=R(t,"x","depthwiseConv2d"),y=R(n,"filter","depthwiseConv2d"),m=v,g=!1;v.rank===3&&(g=!0,m=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),P(m.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+m.rank+"."}),P(y.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+y.rank+"."}),P(m.shape[3]===y.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+m.shape[3]+") must match the inChannels dimension in filter "+y.shape[2]+"."}),u==null&&(u=[1,1]),P(Kn(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),l!=null&&P(St(o),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+o+"."});var b,x,w=ds(m.shape,y.shape,r,u,o,l,!0);c!=null&&(b=gt(b=R(c,"bias","fused conv2d"),v)[0],Pe(w.outShape,b.shape)),h!=null&&(x=R(h,"prelu weights","fused depthwiseConv2d"));var S={x:m,filter:y};c!=null&&(S.bias=b),h!=null&&(S.preluActivationWeights=x);var C=[y,m],_=z.runKernelFunc(function(k,E){var A=k.fusedDepthwiseConv2D({input:m,filter:y,convInfo:w,bias:b,activation:f,preluActivationWeights:x});return E([y,m,A]),A},S,function(k,E){P(Gu(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var A=E[0],D=E[1],U=E[2],H=lw(k,U,f),B={};return c!=null&&(B={bias:function(){return cw(b,H)}}),Object.assign({x:function(){return OO(D.shape,H,A,w)},filter:function(){return NO(D,H,A.shape,w)}},B)},"FusedDepthwiseConv2D",{convInfo:w,activation:f},C,[!0]);return g?_.as3D(_.shape[1],_.shape[2],_.shape[3]):_}}),Gae=Object.freeze({matMul:jae,conv2d:Uae,depthwiseConv2d:Hae}),qae=Object.freeze({image:sw,linalg:Nae,losses:Aae,spectral:mae,fused:Gae,signal:wae,square:Toe,squaredDifference:gO,conv1d:Fie,conv2d:Vr,conv3d:Bie,depthwiseConv2d:Zv,separableConv2d:nw,conv2dTranspose:Lie,conv3dTranspose:$ie,op:N,batchNormalization2d:rie,batchNormalization3d:oie,batchNormalization4d:iie,batchNormalization:aie,batchNorm:CO,batchNorm2d:sie,batchNorm3d:uie,batchNorm4d:lie,booleanMaskAsync:Nie,complex:en,real:Ir,imag:wo,concat:Ft,concat1d:Gte,concat2d:qte,concat3d:Kte,concat4d:Xte,split:Vx,matMul:em,dot:zie,outerProduct:Wie,reverse:Md,reverse1d:Vie,reverse2d:jie,reverse3d:Uie,reverse4d:Hie,maxPool:Ut,avgPool:Od,pool:Gie,maxPool3d:qie,avgPool3d:Kie,slice:No,slice1d:Xie,slice2d:Yie,slice3d:LO,slice4d:Qie,abs:Roe,acos:Poe,acosh:Ioe,asin:Aoe,asinh:Doe,atan:Moe,atanh:Ooe,ceil:Noe,clipByValue:Jx,cos:Foe,cosh:Boe,erf:Loe,exp:y1,expm1:$oe,floor:zoe,log:Woe,log1p:Voe,logSigmoid:joe,neg:Fp,reciprocal:Uoe,round:Hoe,rsqrt:yO,sigmoid:bO,sign:Goe,isNaN:qoe,isInf:Koe,isFinite:Xoe,sin:Yoe,sinh:Qoe,softplus:Joe,sqrt:Zoe,step:eie,tan:tie,tanh:nie,all:Jie,any:Zie,argMax:eae,argMin:tae,logSumExp:nae,max:tm,mean:rae,min:oae,moments:iae,sum:zO,prod:aae,equal:RO,equalStrict:Eie,greater:kie,greaterEqual:PO,greaterEqualStrict:Tie,greaterStrict:Rie,less:Pie,lessEqual:Iie,lessEqualStrict:Aie,lessStrict:Die,notEqual:Mie,notEqualStrict:Oie,add:Re,addN:fie,addStrict:hie,atan2:pie,div:Yr,divNoNan:vie,divStrict:mie,floorDiv:kO,maximum:Zx,maximumStrict:gie,minimum:TO,minimumStrict:yie,mod:bie,modStrict:xie,mul:gn,mulStrict:wie,pow:Bp,powStrict:Sie,squaredDifferenceStrict:Cie,sub:$t,subStrict:_ie,elu:WO,leakyRelu:sae,prelu:VO,relu:pt,relu6:jO,selu:uae,logicalAnd:Jv,logicalNot:cie,logicalOr:_O,logicalXor:die,where:ts,whereAsync:EO,buffer:Ee,print:one,batchToSpaceND:zM,broadcastTo:ine,cast:ane,clone:sne,cumsum:une,depthToSpace:lne,expandDims:Pr,eye:WM,multinomial:cne,oneHot:p1,pad:cs,pad1d:dne,pad2d:fne,pad3d:hne,pad4d:pne,rand:vne,randomNormal:mne,randomGamma:gne,randomUniform:VM,reshape:Zr,spaceToBatchND:jM,squeeze:UM,stack:pr,tile:yu,truncatedNormal:yne,unstack:Bt,setdiff1dAsync:bne,fill:Mo,linspace:Hte,ones:tl,range:Rp,scalar:re,tensor:rn,tensor1d:It,tensor2d:ea,tensor3d:Wx,tensor4d:On,tensor5d:Vte,tensor6d:jte,variable:Ute,zeros:it,onesLike:$M,zerosLike:Be,transpose:sa,softmax:yi,logSoftmax:kne,localResponseNormalization:lae,norm:UO,gather:ew,unsortedSegmentSum:IO,basicLSTMCell:cae,multiRNNCell:dae,movingAverage:fae,stridedSlice:hae,topk:pae,scatterND:vae,fft:rw,ifft:Lp,rfft:ow,irfft:HO,sparseToDense:gae,gatherND:yae,diag:bae,dropout:xae,hannWindow:iw,hammingWindow:qO,frame:aw,stft:KO,inTopKAsync:Sae});function ee(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(n){n!=null&&P(n.dtype!=="complex64",function(){return t+" does not support complex64 tensors."})})}function l0(e,t,n,r){if(n==="linear")return e.linear(t);if(n==="relu")return e.relu(t);if(n==="elu")return e.elu(t);if(n==="relu6")return e.relu6(t);if(n==="prelu")return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var Kae=function(e){function t(){var n=e.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new QM(n,z),n}return oo(t,e),t.prototype.write=function(n,r,o){this.firstUse&&(this.firstUse=!1,Y().get("IS_NODE")&&kp(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:n,dtype:o}),i},t.prototype.move=function(n,r,o,i){this.data.set(n,{values:r,dtype:i})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(n){return le(this,void 0,void 0,function(){return ce(this,function(r){return[2,this.readSync(n)]})})},t.prototype.readSync=function(n){var r=this.data.get(n),o=r.dtype,i=r.complexTensors;return o==="complex64"?g1(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(n).values},t.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),o=r;if(n.dtype==="string")try{o=r.map(function(i){return Cp(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ee(n.shape,n.dtype,o)},t.prototype.makeOutput=function(n,r,o){var i=this.write(n,r,o);return z.makeTensorFromDataId(i,r,o,this)},t.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},t.prototype.time=function(n){return le(this,void 0,void 0,function(){var r;return ce(this,function(o){return r=vo(),n(),[2,{kernelMs:vo()-r}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(n,r){var o=this.makeOutput(null,n.shape,"complex64");return this.data.get(o.dataId).complexTensors={real:z.keep(n.clone()),imag:z.keep(r.clone())},o},t.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,o){if(ee(n,"slice"),XM(n.shape,r,o)){var i=YM(r,n.strides),a=de(o);return rn(this.readSync(n.dataId).subarray(i,i+a),o,n.dtype)}for(var s=Ee(o,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l).map(function(d,f){return d+r[f]});s.values[l]=u.get.apply(u,c)}return s.toTensor()},t.prototype.stridedSlice=function(n,r,o,i){ee(n,"stridedSlice");var a=Ux(r,o,i);if(a.some(function(h){return h===0}))return rn([],a);for(var s=Ee(a,n.dtype),u=this.bufferSync(n),l=0;l<s.size;l++){for(var c=s.indexToLoc(l),d=new Array(c.length),f=0;f<d.length;f++)d[f]=c[f]*i[f]+r[f];s.set.apply(s,[u.get.apply(u,d)].concat(c))}return s.toTensor()},t.prototype.diag=function(n){for(var r=this.readSync(n.dataId),o=Ee([n.size,n.size],n.dtype),i=o.values,a=0;a<r.length;a++)i[a*n.size+a]=r[a];return o.toTensor()},t.prototype.unstack=function(n,r){for(var o=n.shape[r],i=new Array(n.rank-1),a=0,s=0;s<n.rank;s++)s!==r&&(i[a++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(o);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(i);return c},t.prototype.reverse=function(n,r){ee(n,"reverse");for(var o=Ee(n.shape,n.dtype),i=this.bufferSync(n),a=function(u){var l=o.indexToLoc(u),c=l.slice();r.forEach(function(d){return c[d]=n.shape[d]-1-c[d]}),o.set.apply(o,[i.get.apply(i,c)].concat(l))},s=0;s<o.size;s++)a(s);return o.toTensor()},t.prototype.concat=function(n,r){var o=this;if(n[0].dtype==="complex64"){var i=n.map(function(h){return Ir(h)}),a=n.map(function(h){return wo(h)});return en(this.concat(i,r),this.concat(a,r))}var s=n.map(function(h){var p=de(h.shape.slice(r));return h.as2D(-1,p)}),u=Hu(s.map(function(h){return h.shape}),1),l=Ee(u,n[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach(function(h){l.set(o.readSync(h.dataId),c),c+=h.size})}else{var d=0;s.forEach(function(h){for(var p=o.readSync(h.dataId),v=0,y=0;y<h.shape[0];++y)for(var m=y*u[1]+d,g=0;g<h.shape[1];++g)l[m+g]=p[v++];d+=h.shape[1]})}var f=Hu(n.map(function(h){return h.shape}),r);return rn(l,f,n[0].dtype)},t.prototype.neg=function(n){return ee(n,"neg"),this.multiply(re(-1),n)},t.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,i,a,s){return{real:o+a,imag:i+s}}):this.broadcastedBinaryOp(n,r,tn(n.dtype,r.dtype),function(o,i){return o+i})},t.prototype.addN=function(n){var r=this;ee(n,"addN");for(var o=n.map(function(c){return r.readSync(c.dataId)}),i=Ee(n[0].shape,n[0].dtype),a=i.values,s=0;s<n.length;s++)for(var u=o[s],l=0;l<a.length;l++)a[l]+=u[l];return i.toTensor()},t.prototype.softmax=function(n,r){var o=Wt([r],n.shape),i=this.max(n,o),a=qn(i.shape,o),s=this.subtract(n,i.reshape(a)),u=this.exp(s),l=this.sum(u,o).reshape(a);return this.realDivide(u,l)},t.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,i,a,s){return{real:o-a,imag:i-s}}):this.broadcastedBinaryOp(n,r,tn(n.dtype,r.dtype),function(o,i){return o-i})},t.prototype.pow=function(n,r){return ee([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.pow(o,i)})},t.prototype.batchMatMul=function(n,r,o,i){ee([n,r],"matMul");for(var a=o?n.shape[1]:n.shape[2],s=o?n.shape[2]:n.shape[1],u=i?r.shape[1]:r.shape[2],l=n.shape[0],c=this.readSync(n.dataId),d=this.readSync(r.dataId),f=o?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],h=f[0],p=f[1],v=f[2],y=i?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],m=y[0],g=y[1],b=y[2],x=s*u,w=Ee([l,s,u],n.dtype),S=w.values,C=this.blockSize,_=0;_<l;_++)for(var k=0;k<s;k+=C)for(var E=0;E<u;E+=C)for(var A=0;A<a;A+=C)for(var D=Math.min(k+C,s),U=Math.min(E+C,u),H=Math.min(A+C,a),B=k;B<D;B++)for(var V=E;V<U;V++){for(var M=0,O=A;O<H;O++)M+=c[_*h+B*p+O*v]*d[O*m+V*g+_*b];S[_*x+(B*u+V)]+=M}return w.toTensor()},t.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,i=n.transposeA,a=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=this.batchMatMul(r,o,i,a);return s&&(c=this.add(c,s)),u&&(c=l0(this,c,u,l)),c},t.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,i,a,s){return{real:o*a-i*s,imag:o*s+i*a}}):this.broadcastedBinaryOp(n,r,tn(n.dtype,r.dtype),function(o,i){return o*i})},t.prototype.realDivide=function(n,r){return ee([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",function(o,i){return o/i})},t.prototype.floorDiv=function(n,r){return ee([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",function(o,i){return Math.floor(o/i)})},t.prototype.sum=function(n,r){ee(n,"sum"),tr("sum",r,n.rank);for(var o=fn(n.shape,r),i=o[0],a=o[1],s=it(i,tn(n.dtype,"int32")),u=de(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=0,p=0;p<u;++p)h+=c[f+p];l[d]=h}return s},t.prototype.prod=function(n,r){ee(n,"sum");for(var o=fn(n.shape,r),i=o[0],a=o[1],s=it(i,tn(n.dtype,"int32")),u=de(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=1,p=0;p<u;++p)h*=c[f+p];l[d]=h}return s},t.prototype.unsortedSegmentSum=function(n,r,o){ee(n,"unsortedSegmentSum");for(var i=[],a=n.rank-r.rank,s=0;s<a;++s)r=r.expandDims(s+1);for(s=0;s<o;++s){var u=re(s,"int32"),l=RO(u,r).asType("float32").mul(n).sum(0);i.push(l)}return pr(i)},t.prototype.argMin=function(n,r){ee(n,"argMin");var o=[r];tr("argMin",o,n.rank);for(var i=fn(n.shape,o),a=i[0],s=i[1],u=it(a,"int32"),l=de(s),c=this.readSync(u.dataId),d=this.readSync(n.dataId),f=0;f<c.length;++f){for(var h=f*l,p=d[h],v=0,y=0;y<l;++y){var m=d[h+y];m<p&&(p=m,v=y)}c[f]=v}return u},t.prototype.argMax=function(n,r){ee(n,"argMax");var o=[r];tr("argMax",o,n.rank);for(var i=fn(n.shape,o),a=i[0],s=i[1],u=it(a,"int32"),l=de(s),c=this.readSync(u.dataId),d=this.readSync(n.dataId),f=0;f<c.length;++f){for(var h=f*l,p=d[h],v=0,y=0;y<l;++y){var m=d[h+y];m>p&&(p=m,v=y)}c[f]=v}return u},t.prototype.cumsum=function(n,r,o,i){if(ee(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var a=tn(n.dtype,"int32"),s=it(n.shape,a),u=this.readSync(s.dataId),l=this.readSync(n.dataId),c=n.shape[n.rank-1],d=i?function(y,m){return y+c-m-1}:function(y,m){return y+m},f=0;f<l.length;f+=c)for(var h=0;h<c;h++){var p=d(f,h);if(h===0)u[p]=o?0:l[p];else{var v=d(f,h-1);u[p]=o?l[v]+u[v]:l[p]+u[v]}}return s},t.prototype.equal=function(n,r){return ee([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o===i?1:0})},t.prototype.notEqual=function(n,r){return ee([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o!==i?1:0})},t.prototype.less=function(n,r){return ee([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o<i?1:0})},t.prototype.lessEqual=function(n,r){return ee([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o<=i?1:0})},t.prototype.greater=function(n,r){return ee([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o>i?1:0})},t.prototype.greaterEqual=function(n,r){return ee([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o>=i?1:0})},t.prototype.logicalNot=function(n){ee(n,"logicalNot");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)o[i]=r[i]?0:1;return this.makeOutput(o,n.shape,"bool")},t.prototype.logicalAnd=function(n,r){return ee([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o&&i})},t.prototype.logicalOr=function(n,r){return ee([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",function(o,i){return o||i})},t.prototype.select=function(n,r,o){ee([n,r,o],"select");for(var i=this.readSync(n.dataId),a=this.readSync(r.dataId),s=this.readSync(o.dataId),u=it(r.shape,tn(r.dtype,o.dtype)),l=this.readSync(u.dataId),c=0,d=n.rank===0||n.rank>1||r.rank===1?1:de(r.shape.slice(1)),f=0;f<i.length;f++)for(var h=0;h<d;h++)i[f]===1?l[c++]=a[f]:l[c++]=s[f];return u},t.prototype.where=function(n){ee([n],"where");var r=this.readSync(n.dataId);return Kx(n.shape,r)},t.prototype.topk=function(n,r,o){return ee(n,"topk"),iO(this.readSync(n.dataId),n.shape,n.dtype,r)},t.prototype.min=function(n,r){ee(n,"min"),tr("min",r,n.rank);for(var o=fn(n.shape,r),i=o[0],a=o[1],s=it(i,n.dtype),u=de(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=c[f],p=0;p<u;++p){var v=c[f+p];v<h&&(h=v)}l[d]=h}return s},t.prototype.minimum=function(n,r){return ee([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.min(o,i)})},t.prototype.mod=function(n,r){return ee([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){var a=o%i;return o<0&&i<0||o>=0&&i>=0?a:(a+i)%i})},t.prototype.max=function(n,r){ee(n,"max"),tr("max",r,n.rank);for(var o=fn(n.shape,r),i=o[0],a=o[1],s=it(i,n.dtype),u=de(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=c[f],p=0;p<u;++p){var v=c[f+p];v>h&&(h=v)}l[d]=h}return s},t.prototype.maximum=function(n,r){return ee([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.max(o,i)})},t.prototype.all=function(n,r){ee(n,"all"),tr("all",r,n.rank);for(var o=fn(n.shape,r),i=o[0],a=o[1],s=it(i,n.dtype),u=de(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=c[f],p=0;p<u;++p){var v=c[f+p];h=h&&v}l[d]=h}return s},t.prototype.any=function(n,r){ee(n,"any"),tr("any",r,n.rank);for(var o=fn(n.shape,r),i=o[0],a=o[1],s=it(i,n.dtype),u=de(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),d=0;d<l.length;++d){for(var f=d*u,h=c[f],p=0;p<u;++p){var v=c[f+p];h=h||v}l[d]=h}return s},t.prototype.squaredDifference=function(n,r){return ee([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){var a=o-i;return a*a})},t.prototype.ceil=function(n){ee(n,"ceil");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.ceil(r[i]);return this.makeOutput(o,n.shape,"float32")},t.prototype.floor=function(n){ee(n,"floor");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.floor(r[i]);return this.makeOutput(o,n.shape,"float32")},t.prototype.sign=function(n){ee(n,"x");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)r[i]<0?o[i]=-1:r[i]>0?o[i]=1:o[i]=0;return this.makeOutput(o,n.shape,"float32")},t.prototype.isNaN=function(n){ee(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isNaN(r[i])&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},t.prototype.isInf=function(n){ee(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)Math.abs(r[i])===1/0&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},t.prototype.isFinite=function(n){ee(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),i=0;i<r.length;++i)Number.isFinite(r[i])&&(o[i]=1);return this.makeOutput(o,n.shape,"bool")},t.prototype.round=function(n){ee(n,"round");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=Math.floor(r[i]);r[i]-a<.5?o[i]=Math.floor(r[i]):r[i]-a>.5?o[i]=Math.ceil(r[i]):o[i]=a%2==0?a:a+1}return this.makeOutput(o,n.shape,"float32")},t.prototype.exp=function(n){ee(n,"exp");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.exp(r[i]);return this.makeOutput(o,n.shape,"float32")},t.prototype.expm1=function(n){ee(n,"expm1");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=Math.expm1(r[i]);return this.makeOutput(o,n.shape,"float32")},t.prototype.log=function(n){ee(n,"log");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=Math.log(a)}return this.makeOutput(o,n.shape,"float32")},t.prototype.log1p=function(n){ee(n,"log1p");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=Math.log1p(a)}return this.makeOutput(o,n.shape,"float32")},t.prototype.sqrt=function(n){ee(n,"sqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=Math.sqrt(a)}return this.makeOutput(o,n.shape,"float32")},t.prototype.rsqrt=function(n){ee(n,"rsqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i){var a=r[i];o[i]=1/Math.sqrt(a)}return this.makeOutput(o,n.shape,"float32")},t.prototype.reciprocal=function(n){ee(n,"reciprocal");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),i=0;i<r.length;++i)o[i]=1/r[i];return this.makeOutput(o,n.shape,"float32")},t.prototype.linear=function(n){return n},t.prototype.relu=function(n){ee(n,"relu");for(var r=it(n.shape,n.dtype),o=this.readSync(r.dataId),i=this.readSync(n.dataId),a=0;a<i.length;++a)o[a]=Math.max(0,i[a]);return r},t.prototype.relu6=function(n){ee(n,"relu");for(var r=it(n.shape,n.dtype),o=this.readSync(r.dataId),i=this.readSync(n.dataId),a=0;a<i.length;++a)o[a]=Math.min(Math.max(0,i[a]),6);return r},t.prototype.prelu=function(n,r){return ee([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return o<0?i*o:o})},t.prototype.elu=function(n){ee(n,"elu");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i){var a=o[i];r[i]=a>=0?a:Math.exp(a)-1}return this.makeOutput(r,n.shape,"float32")},t.prototype.eluDer=function(n,r){ee([n,r],"eluDer");for(var o=new Float32Array(r.size),i=this.readSync(r.dataId),a=this.readSync(n.dataId),s=0;s<i.length;++s){var u=i[s];o[s]=u>=1?a[s]:a[s]*(u+1)}return this.makeOutput(o,r.shape,"float32")},t.prototype.selu=function(n){ee(n,"selu");for(var r=Yx,o=Qx,i=new Float32Array(n.size),a=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];i[s]=u>=0?o*u:r*(Math.exp(u)-1)}return this.makeOutput(i,n.shape,"float32")},t.prototype.clip=function(n,r,o){ee(n,"clip");for(var i=new Float32Array(n.size),a=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];i[s]=u>o?o:u<r?r:u}return this.makeOutput(i,n.shape,"float32")},t.prototype.abs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.abs(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<n.size;++i){var a=o[2*i],s=o[2*i+1];r[i]=Math.hypot(a,s)}return this.makeOutput(r,n.shape,"float32")},t.prototype.int=function(n){ee(n,"int");for(var r=new Int32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=o[i];return this.makeOutput(r,n.shape,"int32")},t.prototype.sigmoid=function(n){ee(n,"sigmoid");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=1/(1+Math.exp(-o[i]));return this.makeOutput(r,n.shape,"float32")},t.prototype.softplus=function(n){ee(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,o=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var s=i[a]>-r,u=i[a]<r,l=Math.exp(i[a]),c=void 0;c=u?l:s?i[a]:Math.log(1+l),o[a]=c}return this.makeOutput(o,n.shape,"float32")},t.prototype.sin=function(n){ee(n,"sin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.sin(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cos=function(n){ee(n,"cos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.cos(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tan=function(n){ee(n,"tan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.tan(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asin=function(n){ee(n,"asin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.asin(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acos=function(n){ee(n,"acos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.acos(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan=function(n){ee(n,"atan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.atan(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan2=function(n,r){return ee([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,i){return Math.atan2(o,i)})},t.prototype.sinh=function(n){ee(n,"sinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.sinh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cosh=function(n){ee(n,"cosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.cosh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tanh=function(n){ee(n,"tanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Xee(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asinh=function(n){ee(n,"asinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.asinh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acosh=function(n){ee(n,"acosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.acosh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atanh=function(n){ee(n,"atanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i)r[i]=Math.atanh(o[i]);return this.makeOutput(r,n.shape,"float32")},t.prototype.erf=function(n){ee(n,"erf");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),i=0;i<o.length;++i){var a=Math.sign(o[i]),s=Math.abs(o[i]),u=1/(1+.3275911*s);r[i]=a*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},t.prototype.step=function(n,r){r===void 0&&(r=0),ee(n,"step");for(var o=new Float32Array(n.size),i=this.readSync(n.dataId),a=0;a<i.length;++a){var s=i[a];isNaN(s)?o[a]=NaN:o[a]=s>0?1:r}return this.makeOutput(o,n.shape,"float32")},t.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,i=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.conv2d(r,o,i);return a&&(l=this.add(l,a)),s&&(l=l0(this,l,s,u)),l},t.prototype.conv2d=function(n,r,o){ee([n,r],"conv2d");for(var i=o.filterHeight,a=o.filterWidth,s=o.dilationHeight,u=o.dilationWidth,l=o.padInfo.left,c=o.padInfo.top,d=o.dataFormat==="channelsLast",f=Ee(o.outShape,n.dtype),h=n.strides[0],p=d?n.strides[1]:n.strides[2],v=d?n.strides[2]:1,y=d?1:n.strides[1],m=f.strides[0],g=d?f.strides[1]:f.strides[2],b=d?f.strides[2]:1,x=d?1:f.strides[1],w=this.readSync(n.dataId),S=this.readSync(r.dataId),C=f.values,_=0;_<o.batchSize;++_)for(var k=_*h,E=_*m,A=0;A<o.outHeight;++A)for(var D=E+A*g,U=A*o.strideHeight-c,H=0;H<i;H++){var B=U+H*s;if(!(B<0||B>=o.inHeight))for(var V=H*r.strides[0],M=k+B*p,O=0;O<o.outWidth;++O)for(var F=D+O*b,$=O*o.strideWidth-l,G=0;G<a;G++){var Q=$+G*u;if(!(Q<0||Q>=o.inWidth))for(var J=M+Q*v,ne=V+G*r.strides[1],oe=0;oe<o.inChannels;++oe){for(var ae=w[J+oe*y],me=0;me<o.outChannels;++me)C[F+me*x]+=ae*S[ne+me];ne+=o.outChannels}}}return f.toTensor()},t.prototype.conv3d=function(n,r,o){for(var i=o.filterDepth,a=o.filterHeight,s=o.filterWidth,u=o.dilationDepth,l=o.dilationHeight,c=o.dilationWidth,d=o.padInfo.front,f=o.padInfo.left,h=o.padInfo.top,p=Ee(o.outShape,n.dtype),v=this.readSync(n.dataId),y=this.readSync(r.dataId),m=p.values,g=0;g<o.batchSize;++g)for(var b=g*n.strides[0],x=g*p.strides[0],w=0;w<o.outDepth;++w)for(var S=x+w*p.strides[1],C=w*o.strideDepth-d,_=0;_<i;_++){var k=C+_*u;if(!(k<0||k>=o.inDepth))for(var E=_*r.strides[0],A=b+k*n.strides[1],D=0;D<o.outHeight;++D)for(var U=S+D*p.strides[2],H=D*o.strideHeight-h,B=0;B<a;B++){var V=H+B*l;if(!(V<0||V>=o.inHeight))for(var M=E+B*r.strides[1],O=A+V*n.strides[2],F=0;F<o.outWidth;++F)for(var $=U+F*o.outChannels,G=F*o.strideWidth-f,Q=0;Q<s;Q++){var J=G+Q*c;if(!(J<0||J>=o.inWidth))for(var ne=M+Q*r.strides[2],oe=O+J*o.inChannels,ae=ne,me=0;me<o.inChannels;++me){for(var ve=v[oe+me],we=0;we<o.outChannels;++we)m[$+we]+=ve*y[ae+we];ae+=o.outChannels}}}}return p.toTensor()},t.prototype.conv2dDerInput=function(n,r,o){ee([n,r],"conv2dDerInput");for(var i=Ee(o.inShape,"float32"),a=i.values,s=this.readSync(n.dataId),u=this.readSync(r.dataId),l=r.strides,c=l[0],d=l[1],f=l[2],h=o.batchSize,p=o.filterHeight,v=o.filterWidth,y=o.inChannels,m=o.inHeight,g=o.inWidth,b=o.outChannels,x=o.outHeight,w=o.outWidth,S=o.strideHeight,C=o.strideWidth,_=o.dataFormat,k=p-1-o.padInfo.top,E=v-1-o.padInfo.left,A=_==="channelsLast",D=i.strides[0],U=A?i.strides[1]:i.strides[2],H=A?i.strides[2]:1,B=A?1:i.strides[1],V=n.strides[0],M=A?n.strides[1]:n.strides[2],O=A?n.strides[2]:1,F=A?1:n.strides[1],$=0;$<h;++$)for(var G=0;G<y;++G)for(var Q=0;Q<m;++Q)for(var J=Q-k,ne=Math.max(0,Math.ceil(J/S)),oe=Math.min(x,(p+J)/S),ae=0;ae<g;++ae){for(var me=ae-E,ve=Math.max(0,Math.ceil(me/C)),we=Math.min(w,(v+me)/C),De=0,ge=ne;ge<oe;++ge)for(var Ie=ge*S-J,_e=ve;_e<we;++_e)for(var ze=V*$+M*ge+O*_e,We=c*(p-1-Ie)+d*(v-1-(_e*C-me))+f*G,Ve=0;Ve<b;++Ve)De+=s[ze+F*Ve]*u[We+Ve];a[D*$+U*Q+H*ae+B*G]=De}return i.toTensor()},t.prototype.conv3dDerInput=function(n,r,o){for(var i=Ee(o.inShape,"float32"),a=i.values,s=i.strides,u=s[0],l=s[1],c=s[2],d=s[3],f=this.readSync(n.dataId),h=n.strides,p=h[0],v=h[1],y=h[2],m=h[3],g=this.readSync(r.dataId),b=r.strides,x=b[0],w=b[1],S=b[2],C=b[3],_=o.batchSize,k=o.filterDepth,E=o.filterHeight,A=o.filterWidth,D=o.inChannels,U=o.inDepth,H=o.inHeight,B=o.inWidth,V=o.outChannels,M=o.outDepth,O=o.outHeight,F=o.outWidth,$=o.strideDepth,G=o.strideHeight,Q=o.strideWidth,J=k-1-o.padInfo.front,ne=E-1-o.padInfo.top,oe=A-1-o.padInfo.left,ae=0;ae<_;++ae)for(var me=0;me<D;++me)for(var ve=0;ve<U;++ve)for(var we=ve-J,De=Math.max(0,Math.ceil(we/$)),ge=Math.min(M,(k+we)/$),Ie=0;Ie<H;++Ie)for(var _e=Ie-ne,ze=Math.max(0,Math.ceil(_e/G)),We=Math.min(O,(E+_e)/G),Ve=0;Ve<B;++Ve){for(var xn=Ve-oe,An=Math.max(0,Math.ceil(xn/Q)),Yt=Math.min(F,(A+xn)/Q),Dt=0,Vt=De;Vt<ge;++Vt)for(var sn=Vt*$-we,yt=ze;yt<We;++yt)for(var Xn=yt*G-_e,wn=An;wn<Yt;++wn)for(var Ci=p*ae+v*Vt+y*yt+m*wn,jr=x*(k-1-sn)+w*(E-1-Xn)+S*(A-1-(wn*Q-xn))+C*me,jt=0;jt<V;++jt)Dt+=f[Ci+jt]*g[jr+jt];a[u*ae+l*ve+c*Ie+d*Ve+me]=Dt}return i.toTensor()},t.prototype.conv2dDerFilter=function(n,r,o){ee([n,r],"conv2dDerFilter");for(var i=o.strideHeight,a=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=o.dataFormat==="channelsLast",c=Ee(o.filterShape,"float32"),d=o.padInfo.left,f=o.padInfo.top,h=this.bufferSync(n),p=this.bufferSync(r),v=0;v<s;++v)for(var y=Math.max(0,Math.ceil((f-v)/i)),m=Math.min(o.outHeight,(o.inHeight+f-v)/i),g=0;g<u;++g)for(var b=Math.max(0,Math.ceil((d-g)/a)),x=Math.min(o.outWidth,(o.inWidth+d-g)/a),w=0;w<o.inChannels;++w)for(var S=0;S<o.outChannels;++S){for(var C=0,_=0;_<o.batchSize;++_)for(var k=y;k<m;++k)for(var E=v+k*i-f,A=b;A<x;++A){var D=g+A*a-d;C+=l?h.get(_,E,D,w)*p.get(_,k,A,S):h.get(_,w,E,D)*p.get(_,S,k,A)}c.set(C,v,g,w,S)}return c.toTensor()},t.prototype.conv3dDerFilter=function(n,r,o){for(var i=o.strideDepth,a=o.strideHeight,s=o.strideWidth,u=o.filterDepth,l=o.filterHeight,c=o.filterWidth,d=Ee(o.filterShape,"float32"),f=d.values,h=d.strides,p=h[0],v=h[1],y=h[2],m=h[3],g=this.readSync(r.dataId),b=r.strides,x=b[0],w=b[1],S=b[2],C=b[3],_=this.readSync(n.dataId),k=n.strides,E=k[0],A=k[1],D=k[2],U=k[3],H=o.padInfo.front,B=o.padInfo.left,V=o.padInfo.top,M=0;M<u;++M)for(var O=Math.max(0,Math.ceil((H-M)/i)),F=Math.min(o.outDepth,(o.inDepth+H-M)/i),$=M*p,G=0;G<l;++G)for(var Q=Math.max(0,Math.ceil((V-G)/a)),J=Math.min(o.outHeight,(o.inHeight+V-G)/a),ne=G*v+$,oe=0;oe<c;++oe)for(var ae=Math.max(0,Math.ceil((B-oe)/s)),me=Math.min(o.outWidth,(o.inWidth+B-oe)/s),ve=oe*y+ne,we=0;we<o.inChannels;++we)for(var De=we*m+ve,ge=0;ge<o.outChannels;++ge){for(var Ie=0,_e=0;_e<o.batchSize;++_e)for(var ze=_e*E,We=_e*x,Ve=O;Ve<F;++Ve)for(var xn=(M+Ve*i-H)*A+ze,An=Ve*w+We,Yt=Q;Yt<J;++Yt)for(var Dt=(G+Yt*a-V)*D+xn,Vt=Yt*S+An,sn=ae;sn<me;++sn){var yt=sn*C+Vt;Ie+=_[(oe+sn*s-B)*U+Dt+we]*g[yt+ge]}f[De+ge]=Ie}return d.toTensor()},t.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,o=n.filter,i=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.depthwiseConv2D(r,o,i);return a&&(l=this.add(l,a)),s&&(l=l0(this,l,s,u)),l},t.prototype.depthwiseConv2D=function(n,r,o){ee([n,r],"depthwiseConv2D");for(var i=o.filterHeight,a=o.filterWidth,s=o.dilationHeight,u=o.dilationWidth,l=o.padInfo.left,c=o.padInfo.top,d=o.outChannels/o.inChannels,f=Ee(o.outShape,n.dtype),h=this.readSync(n.dataId),p=this.readSync(r.dataId),v=f.values,y=0;y<o.batchSize;++y)for(var m=y*n.strides[0],g=y*f.strides[0],b=0;b<o.outHeight;++b)for(var x=g+b*f.strides[1],w=b*o.strideHeight-l,S=0;S<i;++S){var C=w+S*s;if(!(C<0||C>=o.inHeight))for(var _=S*r.strides[0],k=m+C*n.strides[1],E=0;E<o.outWidth;++E)for(var A=x+E*f.strides[2],D=E*o.strideWidth-c,U=0;U<a;++U){var H=D+U*u;if(!(H<0||H>=o.inWidth))for(var B=_+U*r.strides[1],V=k+H*o.inChannels,M=A,O=B,F=0;F<o.inChannels;++F){for(var $=h[V+F],G=0;G<d;++G)v[M+G]+=$*p[O+G];M+=d,O+=d}}}return f.toTensor()},t.prototype.depthwiseConv2DDerInput=function(n,r,o){ee([n,r],"depthwiseConv2DDerInput");for(var i=Ee(o.inShape,"float32"),a=i.values,s=i.strides,u=s[0],l=s[1],c=s[2],d=this.readSync(n.dataId),f=n.strides,h=f[0],p=f[1],v=f[2],y=this.readSync(r.dataId),m=r.strides,g=m[0],b=m[1],x=m[2],w=o.batchSize,S=o.filterHeight,C=o.filterWidth,_=o.inChannels,k=o.inHeight,E=o.inWidth,A=o.outChannels,D=o.outHeight,U=o.outWidth,H=o.strideHeight,B=o.strideWidth,V=S-1-o.padInfo.top,M=C-1-o.padInfo.left,O=A/_,F=0;F<w;++F)for(var $=0;$<_;++$)for(var G=0;G<k;++G)for(var Q=G-V,J=Math.max(0,Math.ceil(Q/H)),ne=Math.min(D,(S+Q)/H),oe=0;oe<E;++oe){for(var ae=oe-M,me=Math.max(0,Math.ceil(ae/B)),ve=Math.min(U,(C+ae)/B),we=0,De=J;De<ne;++De)for(var ge=De*H-Q,Ie=me;Ie<ve;++Ie)for(var _e=h*F+p*De+v*Ie,ze=g*(S-1-ge)+b*(C-1-(Ie*B-ae))+x*$,We=0;We<O;++We)we+=d[_e+($*O+We)]*y[ze+We];a[u*F+l*G+c*oe+$]=we}return i.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(n,r,o){ee([n,r],"depthwiseConv2DDerFilter");for(var i=o.strideHeight,a=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=Ee(o.filterShape,"float32"),c=o.padInfo.left,d=o.padInfo.top,f=o.outChannels/o.inChannels,h=this.bufferSync(n),p=this.bufferSync(r),v=0;v<s;++v)for(var y=Math.max(0,Math.ceil((d-v)/i)),m=Math.min(o.outHeight,(o.inHeight+d-v)/i),g=0;g<u;++g)for(var b=Math.max(0,Math.ceil((c-g)/a)),x=Math.min(o.outWidth,(o.inWidth+c-g)/a),w=0;w<o.outChannels;++w){for(var S=Math.trunc(w/f),C=w%f,_=0,k=0;k<o.batchSize;++k)for(var E=y;E<m;++E)for(var A=v+E*i-d,D=b;D<x;++D){var U=g+D*a-c;_+=h.get(k,A,U,S)*p.get(k,E,D,w)}l.set(_,v,g,S,C)}return l.toTensor()},t.prototype.tile=function(n,r){return ee(n,"tile"),oO(this.bufferSync(n),r)},t.prototype.pad=function(n,r,o){ee(n,"pad");var i=r.map(function(f,h){return f[0]+n.shape[h]+f[1]}),a=r.map(function(f){return f[0]}),s=this.bufferSync(n),u=Ee(i,n.dtype);o!==0&&u.values.fill(o);for(var l=0;l<n.size;l++){var c=s.indexToLoc(l),d=c.map(function(f,h){return f+a[h]});u.set.apply(u,[s.get.apply(s,c)].concat(d))}return u.toTensor()},t.prototype.transpose=function(n,r){ee(n,"transpose");for(var o=new Array(n.rank),i=0;i<o.length;i++)o[i]=n.shape[r[i]];var a=this.readSync(n.dataId),s=Ee(o,n.dtype),u=this.bufferSync(n);for(i=0;i<n.size;++i){for(var l=u.indexToLoc(i),c=new Array(l.length),d=0;d<c.length;d++)c[d]=l[r[d]];var f=s.locToIndex(c);s.values[f]=a[i]}return s.toTensor()},t.prototype.gather=function(n,r,o){ee([n,r],"gather");var i=n.shape.slice(),a=this.readSync(r.dataId);i[o]=a.length;for(var s=Ee(i,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l),d=c.slice();d[o]=a[c[o]];var f=u.locToIndex(d);s.values[l]=u.values[f]}return s.toTensor()},t.prototype.batchToSpaceND=function(n,r,o){ee([n],"batchToSpaceND");var i=r.reduce(function(d,f){return d*f}),a=Pp(n.shape,r,i),s=Ip(a.length,r.length),u=Ap(n.shape,r,i),l=HM(o,r.length),c=GM(u,o,r.length);return n.reshape(a).transpose(s).reshape(u).slice(l,c)},t.prototype.spaceToBatchND=function(n,r,o){ee([n],"spaceToBatchND");var i=r.reduce(function(f,h){return f*h}),a=[[0,0]];a.push.apply(a,o);for(var s=1+r.length;s<n.shape.length;++s)a.push([0,0]);var u=n.pad(a),l=Pp(u.shape,r,i,!1),c=Ip(l.length,r.length,!1),d=Ap(u.shape,r,i,!1);return u.reshape(l).transpose(c).reshape(d)},t.prototype.pool=function(n,r,o){ee(n,"pool");for(var i=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=r.padInfo.top,f=r.padInfo.left,h=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(n.dataId),v=Ee(r.outShape,n.dtype),y=v.values,m=r.outShape[1]*r.outShape[2]*r.outShape[3],g=r.outShape[2]*r.outShape[3],b=r.outShape[3],x=0;x<r.batchSize;++x)for(var w=x*m,S=x*n.strides[0],C=0;C<r.inChannels;++C)for(var _=0;_<r.outHeight;++_)for(var k=_*i-d,E=Math.max(0,k),A=Math.min(r.inHeight,l+k),D=w+_*g,U=0;U<r.outWidth;++U){for(var H=U*a-f,B=Math.max(0,H),V=Math.min(r.inWidth,c+H),M=h,O=0,F=0,$=E;$<A;$+=s){for(var G=S+$*n.strides[1],Q=B;Q<V;Q+=u){var J=p[G+Q*n.strides[2]+C];o==="max"&&J>M?M=J:o==="avg"&&(O+=J,F++)}if(isNaN(M))break}y[D+U*b+C]=o==="avg"?O/F:M}return v.toTensor()},t.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},t.prototype.maxPoolPositions=function(n,r){for(var o=Ee(r.outShape,"int32"),i=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=r.padInfo.top,f=r.padInfo.left,h=this.bufferSync(n),p=0;p<r.batchSize;++p)for(var v=0;v<r.inChannels;++v)for(var y=0;y<r.outHeight;++y){for(var m=y*i-d,g=m;g<0;)g+=s;for(var b=Math.min(r.inHeight,l+m),x=0;x<r.outWidth;++x){for(var w=x*a-f,S=w;S<0;)S+=u;for(var C=Math.min(r.inWidth,c+w),_=Number.NEGATIVE_INFINITY,k=-1,E=g;E<b;E+=s)for(var A=E-m,D=S;D<C;D+=u){var U=D-w,H=h.get(p,E,D,v);H>_&&(_=H,k=A*c+U)}o.set(k,p,y,x,v)}}return o.toTensor()},t.prototype.maxPoolBackprop=function(n,r,o,i){ee([r,o],"maxPoolBackprop");for(var a=this.maxPoolPositions(r,i),s=i.strideHeight,u=i.strideWidth,l=i.dilationHeight,c=i.dilationWidth,d=i.effectiveFilterHeight,f=i.effectiveFilterWidth,h=f-1-i.padInfo.left,p=d-1-i.padInfo.top,v=Ee(r.shape,"float32"),y=this.bufferSync(a),m=this.bufferSync(n),g=0;g<i.batchSize;++g)for(var b=0;b<i.inChannels;++b)for(var x=0;x<i.inHeight;++x)for(var w=0;w<i.inWidth;++w){for(var S=x-p,C=w-h,_=0,k=0;k<d;k+=l){var E=(S+k)/s;if(!(E<0||E>=i.outHeight||Math.floor(E)!==E))for(var A=0;A<f;A+=c){var D=(C+A)/u;if(!(D<0||D>=i.outWidth||Math.floor(D)!==D)){var U=d*f-1-y.get(g,E,D,b)===k*f+A?1:0;U!==0&&(_+=m.get(g,E,D,b)*U)}}}v.set(_,g,x,w,b)}return v.toTensor()},t.prototype.avgPoolBackprop=function(n,r,o){ee([n,r],"avgPoolBackprop");for(var i=o.strideHeight,a=o.strideWidth,s=o.filterHeight,u=o.filterWidth,l=o.dilationHeight,c=o.dilationWidth,d=o.effectiveFilterHeight,f=o.effectiveFilterWidth,h=f-1-o.padInfo.left,p=d-1-o.padInfo.top,v=Ee(r.shape,"float32"),y=1/(s*u),m=this.bufferSync(n),g=0;g<o.batchSize;++g)for(var b=0;b<o.inChannels;++b)for(var x=0;x<o.inHeight;++x)for(var w=0;w<o.inWidth;++w){for(var S=x-p,C=w-h,_=0,k=0;k<d;k+=l){var E=(S+k)/i;if(!(E<0||E>=o.outHeight||Math.floor(E)!==E))for(var A=0;A<f;A+=c){var D=(C+A)/a;D<0||D>=o.outWidth||Math.floor(D)!==D||(_+=m.get(g,E,D,b))}}v.set(_*y,g,x,w,b)}return v.toTensor()},t.prototype.pool3d=function(n,r,o){ee(n,"pool3d");for(var i=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.front,v=r.padInfo.top,y=r.padInfo.left,m=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=this.readSync(n.dataId),b=Ee(r.outShape,n.dtype),x=b.values,w=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],S=r.outShape[2]*r.outShape[3]*r.outShape[4],C=r.outShape[3]*r.outShape[4],_=r.outShape[4],k=0;k<r.batchSize;++k)for(var E=k*w,A=k*n.strides[0],D=0;D<r.inChannels;++D)for(var U=0;U<r.outDepth;++U){for(var H=U*i-p,B=H;B<0;)B+=u;for(var V=Math.min(r.inDepth,d+H),M=E+U*S,O=0;O<r.outHeight;++O){for(var F=O*a-v,$=F;$<0;)$+=l;for(var G=Math.min(r.inHeight,f+F),Q=M+O*C,J=0;J<r.outWidth;++J){for(var ne=J*s-y,oe=ne;oe<0;)oe+=c;for(var ae=Math.min(r.inWidth,h+ne),me=Q+J*_,ve=m,we=0,De=0,ge=B;ge<V;ge+=u){for(var Ie=A+ge*n.strides[1],_e=$;_e<G;_e+=l){for(var ze=Ie+_e*n.strides[2],We=oe;We<ae;We+=c){var Ve=g[ze+We*n.strides[3]+D];if(o==="max"&&Ve>ve?ve=Ve:o==="avg"&&(we+=Ve,De++),isNaN(ve))break}if(isNaN(ve))break}if(isNaN(ve))break}x[me+D]=o==="avg"?we/De:ve}}}return b.toTensor()},t.prototype.avgPool3d=function(n,r){return ee(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(n,r,o){ee([n,r],"avgPool3dBackprop");for(var i=o.strideDepth,a=o.strideHeight,s=o.strideWidth,u=o.filterDepth,l=o.filterHeight,c=o.filterWidth,d=o.dilationDepth,f=o.dilationHeight,h=o.dilationWidth,p=o.effectiveFilterDepth,v=o.effectiveFilterHeight,y=o.effectiveFilterWidth,m=p-1-o.padInfo.front,g=y-1-o.padInfo.left,b=v-1-o.padInfo.top,x=Ee(r.shape,"float32"),w=1/(u*l*c),S=this.bufferSync(n),C=0;C<o.batchSize;++C)for(var _=0;_<o.inChannels;++_)for(var k=0;k<o.inDepth;++k)for(var E=0;E<o.inHeight;++E)for(var A=0;A<o.inWidth;++A){for(var D=k-m,U=E-b,H=A-g,B=0,V=0;V<p;V+=d){var M=(D+V)/i;if(!(M<0||M>=o.outDepth||Math.floor(M)!==M))for(var O=0;O<v;O+=f){var F=(U+O)/a;if(!(F<0||F>=o.outHeight||Math.floor(F)!==F))for(var $=0;$<y;$+=h){var G=(H+$)/s;G<0||G>=o.outWidth||Math.floor(G)!==G||(B+=S.get(C,M,F,G,_))}}}x.set(B*w,C,k,E,A,_)}return x.toTensor()},t.prototype.maxPool3d=function(n,r){return ee(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},t.prototype.maxPool3dPositions=function(n,r){for(var o=Ee(r.outShape,"int32"),i=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,f=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.front,v=r.padInfo.top,y=r.padInfo.left,m=this.bufferSync(n),g=0;g<r.batchSize;++g)for(var b=0;b<r.inChannels;++b)for(var x=0;x<r.outDepth;++x){for(var w=x*i-p,S=w;S<0;)S+=u;for(var C=Math.min(r.inDepth,d+w),_=0;_<r.outHeight;++_){for(var k=_*a-v,E=k;E<0;)E+=l;for(var A=Math.min(r.inHeight,f+k),D=0;D<r.outWidth;++D){for(var U=D*s-y,H=U;H<0;)H+=c;for(var B=Math.min(r.inWidth,h+U),V=Number.NEGATIVE_INFINITY,M=-1,O=S;O<C;O+=u)for(var F=O-w,$=E;$<A;$+=l)for(var G=$-k,Q=H;Q<B;Q+=c){var J=Q-U,ne=m.get(g,O,$,Q,b);ne>=V&&(V=ne,M=F*f*h+G*f+J)}o.set(M,g,x,_,D,b)}}}return o.toTensor()},t.prototype.maxPool3dBackprop=function(n,r,o,i){ee([r,o],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(r,i),s=i.strideDepth,u=i.strideHeight,l=i.strideWidth,c=i.dilationDepth,d=i.dilationHeight,f=i.dilationWidth,h=i.effectiveFilterDepth,p=i.effectiveFilterHeight,v=i.effectiveFilterWidth,y=h-1-i.padInfo.front,m=v-1-i.padInfo.left,g=p-1-i.padInfo.top,b=Ee(r.shape,"float32"),x=this.bufferSync(a),w=this.bufferSync(n),S=0;S<i.batchSize;++S)for(var C=0;C<i.inChannels;++C)for(var _=0;_<i.inDepth;++_)for(var k=0;k<i.inHeight;++k)for(var E=0;E<i.inWidth;++E){for(var A=_-y,D=k-g,U=E-m,H=0,B=0;B<h;B+=c){var V=(A+B)/s;if(!(V<0||V>=i.outDepth||Math.floor(V)!==V))for(var M=0;M<p;M+=d){var O=(D+M)/u;if(!(O<0||O>=i.outHeight||Math.floor(O)!==O))for(var F=0;F<v;F+=f){var $=(U+F)/l;if(!($<0||$>=i.outWidth||Math.floor($)!==$)){var G=h*p*v-1-x.get(S,V,O,$,C)===B*p*v+M*v+F?1:0;G!==0&&(H+=w.get(S,V,O,$,C)*G)}}}}b.set(H,S,_,k,E,C)}return b.toTensor()},t.prototype.cast=function(n,r){return eO(n,r,this)},t.prototype.reshape=function(n,r){return m1(n,r)},t.prototype.avgPool=function(n,r){return ee(n,"avgPool"),this.pool(n,r,"avg").toFloat()},t.prototype.resizeBilinear=function(n,r,o,i){ee(n,"resizeBilinear");for(var a=n.shape,s=a[0],u=a[1],l=a[2],c=a[3],d=this.readSync(n.dataId),f=new Float32Array(de([s,r,o,c])),h=[i&&r>1?u-1:u,i&&o>1?l-1:l],p=[i&&r>1?r-1:r,i&&o>1?o-1:o],v=0,y=h[0]/p[0],m=h[1]/p[1],g=0;g<s;g++)for(var b=0;b<r;b++)for(var x=y*b,w=Math.floor(x),S=x-w,C=Math.min(u-1,Math.ceil(x)),_=g*n.strides[0]+w*n.strides[1],k=g*n.strides[0]+C*n.strides[1],E=0;E<o;E++)for(var A=m*E,D=Math.floor(A),U=A-D,H=Math.min(l-1,Math.ceil(A)),B=_+D*n.strides[2],V=k+D*n.strides[2],M=_+H*n.strides[2],O=k+H*n.strides[2],F=0;F<c;F++){var $=d[B+F],G=d[V+F],Q=$+(d[M+F]-$)*U,J=Q+(G+(d[O+F]-G)*U-Q)*S;f[v++]=J}return rn(f,[s,r,o,c])},t.prototype.resizeBilinearBackprop=function(n,r,o){ee([n,r],"resizeBilinearBackprop");for(var i=r.shape,a=i[0],s=i[1],u=i[2],l=i[3],c=n.shape,d=c[1],f=c[2],h=new Float32Array(a*s*u*l),p=[o&&d>1?s-1:s,o&&f>1?u-1:u],v=[o&&d>1?d-1:d,o&&f>1?f-1:f],y=p[0]/v[0],m=p[1]/v[1],g=this.readSync(n.dataId),b=0,x=0;x<a;x++)for(var w=x*r.strides[0],S=0;S<d;S++)for(var C=S*y,_=Math.floor(C),k=Math.min(Math.ceil(C),s-1),E=w+_*r.strides[1],A=w+k*r.strides[1],D=C-_,U=1-D,H=0;H<f;H++)for(var B=H*m,V=Math.floor(B),M=Math.min(Math.ceil(B),u-1),O=B-V,F=1-O,$=E+V*r.strides[2],G=E+M*r.strides[2],Q=A+V*r.strides[2],J=A+M*r.strides[2],ne=U*F,oe=U*O,ae=D*F,me=D*O,ve=0;ve<l;ve++){var we=g[b++];h[$+ve]+=we*ne,h[G+ve]+=we*oe,h[Q+ve]+=we*ae,h[J+ve]+=we*me}return On(h,[a,u,s,l],r.dtype)},t.prototype.resizeNearestNeighbor=function(n,r,o,i){ee(n,"resizeNearestNeighbor");for(var a=n.shape,s=a[0],u=a[1],l=a[2],c=a[3],d=this.readSync(n.dataId),f=new Float32Array(s*r*o*c),h=[i&&r>1?u-1:u,i&&o>1?l-1:l],p=[i&&r>1?r-1:r,i&&o>1?o-1:o],v=h[0]/p[0],y=h[1]/p[1],m=0,g=0;g<s;g++)for(var b=g*n.strides[0],x=0;x<r;x++)for(var w=v*x,S=b+Math.min(u-1,i?Math.round(w):Math.floor(w))*n.strides[1],C=0;C<o;C++)for(var _=y*C,k=S+Math.min(l-1,i?Math.round(_):Math.floor(_))*n.strides[2],E=0;E<c;E++){var A=d[k+E];f[m++]=A}return rn(f,[s,r,o,c],n.dtype)},t.prototype.resizeNearestNeighborBackprop=function(n,r,o){ee([n,r],"resizeNearestNeighborBackprop");for(var i=r.shape,a=i[0],s=i[1],u=i[2],l=i[3],c=n.shape,d=c[1],f=c[2],h=new Float32Array(a*s*u*l),p=this.readSync(n.dataId),v=[o&&d>1?s-1:s,o&&f>1?u-1:u],y=[o&&d>1?d-1:d,o&&f>1?f-1:f],m=v[0]/y[0],g=v[1]/y[1],b=1/m,x=1/g,w=2*Math.ceil(b)+2,S=2*Math.ceil(x)+2,C=0;C<a;C++)for(var _=C*r.strides[0],k=0;k<s;k++)for(var E=_+k*r.strides[1],A=Math.floor(k*b),D=Math.floor(A-w/2),U=0;U<u;U++)for(var H=E+U*r.strides[2],B=Math.floor(U*x),V=Math.floor(B-S/2),M=0;M<l;M++){for(var O=0,F=0;F<w;F++){var $=F+D;if(!($<0||$>=d)){var G=_+$*n.strides[1],Q=$*m;if(k===Math.min(s-1,o?Math.round(Q):Math.floor(Q)))for(var J=0;J<S;J++){var ne=J+V;if(!(ne<0||ne>=f)){var oe=G+ne*n.strides[2],ae=ne*g;U===Math.min(u-1,o?Math.round(ae):Math.floor(ae))&&(O+=p[oe+M])}}}}h[H+M]=O}return On(h,r.shape,r.dtype)},t.prototype.batchNormalization=function(n,r,o,i,a,s){ee([n,r,o,a,s],"batchNorm");for(var u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=this.readSync(o.dataId),d=a?this.readSync(a.dataId):new Float32Array([1]),f=s?this.readSync(s.dataId):new Float32Array([0]),h=new Float32Array(u.length),p=f.length,v=d.length,y=c.length,m=l.length,g=0,b=0,x=0,w=0,S=0;S<u.length;++S)h[S]=f[g++]+(u[S]-l[b++])*d[x++]/Math.sqrt(c[w++]+i),g>=p&&(g=0),b>=m&&(b=0),x>=v&&(x=0),w>=y&&(w=0);return On(h,n.shape)},t.prototype.localResponseNormalization4D=function(n,r,o,i,a){ee(n,"localResponseNormalization4D");var s=n.shape[3],u=s-1,l=this.readSync(n.dataId),c=n.size,d=new Float32Array(c);function f(y){for(var m=y%s,g=y-m+Math.max(0,m-r),b=y-m+Math.min(m+r,u),x=0;g<=b;g++){var w=l[g];x+=w*w}return x}for(var h=0;h<c;h++){var p=f(h),v=l[h]*Math.pow(o+i*p,-a);d[h]=v}return On(d,n.shape)},t.prototype.LRNGrad=function(n,r,o,i,a,s,u){ee(n,"LRNGrad");for(var l=n.shape[3],c=this.readSync(n.dataId),d=this.readSync(r.dataId),f=this.readSync(o.dataId),h=new Float32Array(n.size),p=n.size,v=0;v<p;v++){for(var y=v%l,m=v-y+Math.max(0,y-i),g=v-y+Math.min(l,y+i+1),b=0,x=m;x<g;x++)b+=Math.pow(d[x],2);for(b=s*b+a,x=m;x<g;x++){var w=-2*s*u*d[x]*f[v]/b;v===x&&(w+=Math.pow(b,-u)),w*=c[v],h[x]+=w}}return On(h,n.shape)},t.prototype.multinomial=function(n,r,o,i){ee(n,"multinomial");for(var a=r?n:yi(n),s=a.shape[0],u=a.shape[1],l=it([s,o],"int32"),c=this.readSync(l.dataId),d=this.readSync(a.dataId),f=0;f<s;++f){var h=f*u,p=new Float32Array(u-1);p[0]=d[h];for(var v=1;v<p.length;++v)p[v]=p[v-1]+d[h+v];for(var y=Xv(i.toString()),m=f*o,g=0;g<o;++g){var b=y();c[m+g]=p.length;for(var x=0;x<p.length;x++)if(b<p[x]){c[m+g]=x;break}}}return l},t.prototype.oneHot=function(n,r,o,i){ee(n,"oneHot");var a=new Float32Array(n.size*r);a.fill(i);for(var s=this.readSync(n.dataId),u=0;u<n.size;++u)s[u]>=0&&s[u]<r&&(a[u*r+s[u]]=o);return ea(a,[n.size,r],"int32")},t.prototype.nonMaxSuppression=function(n,r,o,i,a){return ee(n,"nonMaxSuppression"),Gx(this.readSync(n.dataId),this.readSync(r.dataId),o,i,a)},t.prototype.fft=function(n){return this.fftBatch(n,!1)},t.prototype.ifft=function(n){return this.fftBatch(n,!0)},t.prototype.fftBatch=function(n,r){for(var o=n.shape[0],i=n.shape[1],a=Ee(n.shape,"float32"),s=Ee(n.shape,"float32"),u=Ir(n).as2D(o,i),l=wo(n).as2D(o,i),c=0;c<o;c++)for(var d=u.slice([c,0],[1,i]),f=l.slice([c,0],[1,i]),h=en(d,f),p=this.readSync(this.fftImpl(h,r).dataId),v=0;v<i;v++){var y=kE(p,v);a.values[c*i+v]=y.real,s.values[c*i+v]=y.imag}return en(a.toTensor(),s.toTensor()).as2D(o,i)},t.prototype.fftImpl=function(n,r){var o=n.as1D(),i=o.size;if(this.isExponentOf2(i)){var a=this.fftRadix2(o,i,r).as2D(n.shape[0],n.shape[1]);return r&&(a=en(Ir(a).div(re(i)),wo(a).div(re(i)))),a}var s=this.readSync(n.dataId),u=function(l){for(var c=new Float32Array(l.length/2),d=new Float32Array(l.length/2),f=0;f<l.length;f+=2)c[f/2]=l[f],d[f/2]=l[f+1];return{real:c,imag:d}}(this.fourierTransformByMatmul(s,i,r));return en(u.real,u.imag).as2D(n.shape[0],n.shape[1])},t.prototype.isExponentOf2=function(n){return(n&n-1)==0},t.prototype.fftRadix2=function(n,r,o){if(r===1)return n;var i=this.readSync(n.dataId),a=r/2,s=function(m){for(var g=Math.ceil(m.length/4),b=new Float32Array(g),x=new Float32Array(g),w=0;w<m.length;w+=4)b[Math.floor(w/4)]=m[w],x[Math.floor(w/4)]=m[w+1];return{real:b,imag:x}}(i),u=en(s.real,s.imag).as1D(),l=function(m){for(var g=Math.floor(m.length/4),b=new Float32Array(g),x=new Float32Array(g),w=2;w<m.length;w+=4)b[Math.floor(w/4)]=m[w],x[Math.floor(w/4)]=m[w+1];return{real:b,imag:x}}(i),c=en(l.real,l.imag).as1D();u=this.fftRadix2(u,a,o),c=this.fftRadix2(c,a,o);var d=function(m,g){for(var b=new Float32Array(m/2),x=new Float32Array(m/2),w=0;w<Math.ceil(m/2);w++){var S=(g?2:-2)*Math.PI*(w/m);b[w]=Math.cos(S),x[w]=Math.sin(S)}return{real:b,imag:x}}(r,o),f=en(d.real,d.imag).mul(c),h=u.add(f),p=u.sub(f),v=Ir(h).concat(Ir(p)),y=wo(h).concat(wo(p));return en(v,y).as1D()},t.prototype.fourierTransformByMatmul=function(n,r,o){for(var i=new Float32Array(2*r),a=0;a<r;a++){for(var s=0,u=0,l=0;l<r;l++){var c=Rne(a*l,r,o),d=kE(n,l);s+=d.real*c.real-d.imag*c.imag,u+=d.real*c.imag+d.imag*c.real}o&&(s/=r,u/=r),Tne(i,s,u,a)}return i},t.prototype.depthToSpace=function(n,r,o){P(o==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+o}),P(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var i=n.shape[0],a=n.shape[1],s=n.shape[2],u=n.shape[3],l=a*r,c=s*r,d=u/(r*r),f=this.readSync(n.dataId),h=new Float32Array(i*l*c*d),p=0,v=0;v<i;++v)for(var y=0;y<l;++y)for(var m=Math.floor(y/r),g=y%r,b=0;b<c;++b)for(var x=Math.floor(b/r),w=(g*r+b%r)*d,S=0;S<d;++S){var C=S+w+u*(x+s*(m+a*v));h[p++]=f[C]}return On(h,[i,l,c,d])},t.prototype.broadcastedBinaryOp=function(n,r,o,i){var a=Pe(n.shape,r.shape),s=Ee(a,o),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=Vi(n.shape,a),d=Vi(r.shape,a),f=s.values;if(c.length+d.length===0)for(var h=0;h<f.length;++h)f[h]=i(u[h%u.length],l[h%l.length]);else{var p=this.bufferSync(n),v=this.bufferSync(r),y=function(m){var g=s.indexToLoc(m),b=g.slice(-n.rank);c.forEach(function(C){return b[C]=0});var x=p.locToIndex(b),w=g.slice(-r.rank);d.forEach(function(C){return w[C]=0});var S=v.locToIndex(w);f[m]=i(u[x],l[S])};for(h=0;h<f.length;++h)y(h)}return s.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(n,r,o){var i=Pe(n.shape,r.shape),a=Ee(i,"float32"),s=Ee(i,"float32"),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=Vi(n.shape,i),d=Vi(r.shape,i),f=a.values,h=s.values;if(c.length+d.length===0)for(var p=0;p<f.length;p++){var v=p%u.length,y=p%l.length,m=o(u[2*v],u[2*v+1],l[2*y],l[2*y+1]);f[p]=m.real,h[p]=m.imag}else{var g=this.bufferSync(this.data.get(n.dataId).complexTensors.real),b=this.bufferSync(this.data.get(r.dataId).complexTensors.real),x=function(w){var S=a.indexToLoc(w),C=S.slice(-n.rank);c.forEach(function(D){return C[D]=0});var _=g.locToIndex(C),k=S.slice(-r.rank);d.forEach(function(D){return k[D]=0});var E=b.locToIndex(k),A=o(u[2*_],u[2*_+1],l[2*E],l[2*E+1]);f[w]=A.real,h[w]=A.imag};for(p=0;p<f.length;p++)x(p)}return this.complex(a.toTensor(),s.toTensor())},t.prototype.split=function(n,r,o){return rO(n,r,o)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(n,r,o,i,a,s){for(var u=n.shape,l=u[0],c=u[1],d=u[2],f=u[3],h=r.shape[0],p=i[0],v=i[1],y=Ee([h,p,v,f],"float32"),m=this.readSync(r.dataId),g=this.readSync(o.dataId),b=this.readSync(n.dataId),x=n.strides,w=y.strides,S=0;S<h;S++){var C=4*S,_=m[C],k=m[C+1],E=m[C+2],A=m[C+3],D=g[S];if(!(D>=l))for(var U=p>1?(E-_)*(c-1)/(p-1):0,H=v>1?(A-k)*(d-1)/(v-1):0,B=0;B<p;B++){var V=p>1?_*(c-1)+B*U:.5*(_+E)*(c-1);if(V<0||V>c-1)for(var M=0;M<v;M++)for(var O=0;O<f;O++){var F=O+M*w[2]+B*w[1]+S*w[0];y.values[F]=s}else if(a==="bilinear"){var $=Math.floor(V),G=Math.ceil(V),Q=V-$;for(M=0;M<v;M++)if((ge=v>1?k*(d-1)+M*H:.5*(k+A)*(d-1))<0||ge>d-1)for(O=0;O<f;O++)F=O+M*w[2]+B*w[1]+S*w[0],y.values[F]=s;else{var J=Math.floor(ge),ne=Math.ceil(ge),oe=ge-J;for(O=0;O<f;O++){var ae=b[F=O+J*x[2]+$*x[1]+D*x[0]],me=b[F=O+ne*x[2]+$*x[1]+D*x[0]],ve=b[F=O+J*x[2]+G*x[1]+D*x[0]],we=ae+(me-ae)*oe,De=ve+(b[F=O+ne*x[2]+G*x[1]+D*x[0]]-ve)*oe;F=O+M*w[2]+B*w[1]+S*w[0],y.values[F]=we+(De-we)*Q}}}else for(M=0;M<v;++M){var ge;if((ge=v>1?k*(d-1)+M*H:.5*(k+A)*(d-1))<0||ge>d-1)for(O=0;O<f;O++)F=O+M*w[2]+B*w[1]+S*w[0],y.values[F]=s;else{var Ie=Math.round(ge),_e=Math.round(V);for(O=0;O<f;O++){var ze=O+Ie*x[2]+_e*x[1]+D*x[0],We=O+M*w[2]+B*w[1]+S*w[0];y.values[We]=b[ze]}}}}}return y.toTensor()},t.prototype.sparseToDense=function(n,r,o,i){var a=Dp(0,n,o),s=a.sliceRank,u=a.numUpdates,l=a.sliceSize,c=a.strides,d=a.outputSize;return this.scatter(n,r,o,d,l,u,s,c,i,!1)},t.prototype.gatherND=function(n,r){var o=r.shape,i=o[o.length-1],a=qM(n,r),s=a[0],u=a[1],l=a[2],c=a[3];if(u===0)return rn([],s,n.dtype);for(var d=new Qc([u,l],n.dtype),f=this.readSync(r.dataId),h=this.readSync(n.dataId),p=0;p<u;p++){for(var v=[],y=0,m=0;m<i;m++){var g=f[p*i+m];y+=g*c[m],v.push(g)}if(y<0||y>=n.size/l)throw new Error("Invalid indices: "+v+" does not index into "+n.shape);for(var b=0;b<l;b++)d.values[p*l+b]=h[y*l+b]}return d.toTensor().reshape(s)},t.prototype.scatterND=function(n,r,o){var i=Dp(0,n,o),a=i.sliceRank,s=i.numUpdates,u=i.sliceSize,l=i.strides,c=i.outputSize,d=re(0);return this.scatter(n,r,o,c,u,s,a,l,d,!0)},t.prototype.fill=function(n,r,o){var i=Sp(o=o||Rd(r),de(n));return i.fill(r),z.makeTensor(i,n,o,this)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){var r=Sp(n.dtype,de(n.shape));return this.makeOutput(r,n.shape,n.dtype)},t.prototype.linspace=function(n,r,o){return tO(n,r,o)},t.prototype.scatter=function(n,r,o,i,a,s,u,l,c,d){var f=[i/a,a],h=this.readSync(n.dataId),p=this.readSync(r.dataId);if(i===0)return rn([],o,r.dtype);var v=new Qc(f,r.dtype);v.values.fill(this.readSync(c.dataId)[0]);for(var y=0;y<s;y++){for(var m=[],g=0,b=0;b<u;b++){var x=h[y*u+b];m.push(x),g+=x*l[b]}if(g<0||g>=i/a)throw new Error("Invalid indices: "+m+" does not index into "+o);for(var w=0;w<a;w++)d?v.values[g*a+w]+=p[y*a+w]:v.values[g*a+w]=r.rank===0?p[0]:p[y*a+w]}return v.toTensor().reshape(o)},t}(JM);z.registerBackend("cpu",function(){return new Kae},1);for(var c0=0,KE=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t,i=o.boxes,a=o.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,f=n;ee(i,"NonMaxSuppressionWithScore");var h=qx(f.data.get(i.dataId).values,f.data.get(a.dataId).values,u,l,c,d);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n;ee(r,"square");for(var i=o.data.get(r.dataId).values,a=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];a[s]=u*u}return{dataId:o.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:ed,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,i=r.b,a=n;ee([o,i],ed);var s=a.data.get(o.dataId).values,u=a.data.get(i.dataId).values,l=function(f,h,p,v,y,m){var g=Pe(f,h),b=g.length,x=Do(g),w=Yc(y,de(g)),S=f.length,C=h.length,_=Do(f),k=Do(h),E=Vi(f,g),A=Vi(h,g);if(E.length+A.length===0)for(var D=0;D<w.length;++D)w[D]=m(p[D%p.length],v[D%v.length]);else{var U=function(H){var B=ote(H,b,x),V=B.slice(-S);E.forEach(function($){return V[$]=0});var M=gE(V,S,_),O=B.slice(-C);A.forEach(function($){return O[$]=0});var F=gE(O,C,k);w[H]=m(p[M],v[F])};for(D=0;D<w.length;++D)U(D)}return[w,g]}(o.shape,i.shape,s,u,o.dtype,function(f,h){var p=f-h;return p*p}),c=l[0],d=l[1];return{dataId:a.write(c,d,o.dtype),shape:d,dtype:o.dtype}}}];c0<KE.length;c0++)kM(KE[c0]);var Es,Xae=function(e){this.variableNames=["A"];var t=vn(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},Yae=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=vn(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var d0=0,XE=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.pixels,i=r.numChannels,a=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,u=a?[o.videoWidth,o.videoHeight]:[o.width,o.height],l=u[0],c=u[1],d=[c,l],f=[c,l,i];(s||a)&&(Es==null&&(Es=document.createElement("canvas").getContext("2d")),Es.canvas.width=l,Es.canvas.height=c,Es.drawImage(o,0,0,l,c),o=Es.canvas);var h=n.makeTensorInfo(d,"int32");n.texData.get(h.dataId).usage=ir.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),o);var p=Y().getBool("WEBGL_PACK")?new Yae(f):new Xae(f),v=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),v}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;kp("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=t,i=o.boxes,a=o.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,f=n,h=qx(f.readSync(i.dataId),f.readSync(a.dataId),u,l,c,d);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n,i=new ke(r.shape,"return x * x;");return o.runWebGLProgram(i,[r],r.dtype)}},{kernelName:ed,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,i=r.b,a=n,s=Y().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ko("return (a - b) * (a - b);",o.shape,i.shape):new xt("return (a - b) * (a - b);",o.shape,i.shape);return a.compileAndRun(s,[o,i])}}];d0<XE.length;d0++)kM(XE[d0]);for(var f0=0,YE=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:ed,gradFunc:function(e,t){var n=t[0],r=t[1],o=re(2);return{a:function(){return gn(e,gn(o,$t(n,r)))},b:function(){return gn(e,gn(o,$t(r,n)))}}}}];f0<YE.length;f0++)qee(YE[f0]);var Qae=function(){function e(){}return e.prototype.fetch=function(t,n){return fetch(t,n)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return new TextDecoder(n).decode(t)},e}();Y().get("IS_BROWSER")&&Y().setPlatform("browser",new Qae);var h0,Jae=function(){return require("node-fetch")},Zae=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,n){return Y().global.fetch!=null?Y().global.fetch(t,n):(h0==null&&(h0=Jae()),h0(t,n))},e.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)},e}();Y().get("IS_NODE")&&Y().setPlatform("node",new Zae);var b1={float32:4,int32:4,uint16:2,uint8:1,bool:1},$p=4;function XO(e,t){for(var n={},r=0,o=function(s){var u=s.name,l=s.dtype,c=s.shape,d=de(c),f=void 0;if("quantization"in s){var h=s.quantization;if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+h.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var p=b1[h.dtype],v=e.slice(r,r+d*p),y=h.dtype==="uint8"?new Uint8Array(v):new Uint16Array(v);if(l==="float32")f=Float32Array.from(y,function(S){return S*h.scale+h.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);f=Int32Array.from(y,function(S){return Math.round(S*h.scale+h.min)})}r+=d*p}else if(l==="string"){var m=de(s.shape);f=[];for(var g=0;g<m;g++){var b=new Uint32Array(e.slice(r,r+$p))[0];r+=$p;var x=new Uint8Array(e.slice(r,r+b));f.push(x),r+=b}}else{var w=b1[l];if(v=e.slice(r,r+d*w),l==="float32")f=new Float32Array(v);else if(l==="int32")f=new Int32Array(v);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);f=new Uint8Array(v)}r+=d*w}n[u]=rn(f,c,l)},i=0,a=t;i<a.length;i++)o(a[i]);return n}function ese(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach(function(i){if(t+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var r=new Uint8Array(t),o=0;return n.forEach(function(i){r.set(new Uint8Array(i.buffer),o),o+=i.byteLength}),r.buffer}var x1=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function QE(e){return x1?Buffer.byteLength(e):new Blob([e]).size}function fw(e){var t=0;e.forEach(function(o){t+=o.byteLength});var n=new Uint8Array(t),r=0;return e.forEach(function(o){n.set(new Uint8Array(o),r),r+=o.byteLength}),n.buffer}function JE(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Nd(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:QE(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:QE(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var ar=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var o=[];return(n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(i){var a=i(t,r);a!==null&&o.push(a)}),o},e}(),xu="://",ta=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,n){P(t!=null,function(){return"scheme must not be undefined or null."}),t.endsWith(xu)&&(t=t.slice(0,t.indexOf(xu))),P(t.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();P(r.managers[t]==null,function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=n},e.getManager=function(t){var n=this.getInstance().managers[t];if(n==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return n},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function Th(e){if(e.indexOf(xu)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+ta.getSchemes().join(","));return{scheme:e.split(xu)[0],path:e.split(xu)[1]}}function ZE(e,t,n){return n===void 0&&(n=!1),le(this,void 0,void 0,function(){var r,o,i,a,s,u,l,c,d;return ce(this,function(f){switch(f.label){case 0:return P(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),P((r=ar.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),P(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),o=r[0],P((i=ar.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),P(i.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),a=i[0],s=Th(e).scheme,u=Th(e).path,l=s===Th(e).scheme,[4,o.load()];case 1:return c=f.sent(),n&&l?[4,ta.getManager(s).removeModel(u)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[4,a.save(c)];case 4:return d=f.sent(),!n||l?[3,6]:[4,ta.getManager(s).removeModel(u)];case 5:f.sent(),f.label=6;case 6:return[2,d.modelArtifactsInfo]}})})}var La="models_store",ji="model_info_store";function YO(){if(!Y().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function w1(e){var t=e.result;t.createObjectStore(La,{keyPath:"modelPath"}),t.createObjectStore(ji,{keyPath:"modelPath"})}var wu=function(){function e(t){if(this.indexedDB=YO(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return le(this,void 0,void 0,function(){return ce(this,function(n){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},e.prototype.load=function(){return le(this,void 0,void 0,function(){return ce(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(t,n){var r=this;return new Promise(function(o,i){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return w1(a)},a.onsuccess=function(){var s=a.result;if(n==null){var u=s.transaction(La,"readonly"),l=u.objectStore(La).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),i(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));o(l.result.modelArtifacts)},l.onerror=function(v){return s.close(),i(l.error)},u.oncomplete=function(){return s.close()}}else{var c,d=Nd(n),f=s.transaction(ji,"readwrite"),h=f.objectStore(ji),p=h.put({modelPath:r.modelPath,modelArtifactsInfo:d});p.onsuccess=function(){var v=(c=s.transaction(La,"readwrite")).objectStore(La).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:d});v.onsuccess=function(){return o({modelArtifactsInfo:d})},v.onerror=function(y){var m=(h=f.objectStore(ji)).delete(r.modelPath);m.onsuccess=function(){return s.close(),i(v.error)},m.onerror=function(g){return s.close(),i(v.error)}}},p.onerror=function(v){return s.close(),i(p.error)},f.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},a.onerror=function(s){return i(a.error)}})},e.URL_SCHEME="indexeddb://",e}(),ek=function(e){return Y().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(wu.URL_SCHEME)?(t=e.slice(wu.URL_SCHEME.length),new wu(t)):null;var t};ar.registerSaveRouter(ek),ar.registerLoadRouter(ek);var tse=function(){function e(){this.indexedDB=YO()}return e.prototype.listModels=function(){return le(this,void 0,void 0,function(){var t=this;return ce(this,function(n){return[2,new Promise(function(r,o){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return w1(i)},i.onsuccess=function(){var a=i.result,s=a.transaction(ji,"readonly"),u=s.objectStore(ji).getAll();u.onsuccess=function(){for(var l={},c=0,d=u.result;c<d.length;c++){var f=d[c];l[f.modelPath]=f.modelArtifactsInfo}r(l)},u.onerror=function(l){return a.close(),o(u.error)},s.oncomplete=function(){return a.close()}},i.onerror=function(a){return o(i.error)}})]})})},e.prototype.removeModel=function(t){return le(this,void 0,void 0,function(){var n=this;return ce(this,function(r){var o;return t=(o=t).startsWith(wu.URL_SCHEME)?o.slice(wu.URL_SCHEME.length):o,[2,new Promise(function(i,a){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return w1(s)},s.onsuccess=function(){var u,l=s.result,c=l.transaction(ji,"readwrite"),d=c.objectStore(ji),f=d.get(t);f.onsuccess=function(){if(f.result==null)return l.close(),a(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var h=d.delete(t),p=function(){var v=(u=l.transaction(La,"readwrite")).objectStore(La).delete(t);v.onsuccess=function(){return i(f.result.modelArtifactsInfo)},v.onerror=function(y){return a(f.error)}};h.onsuccess=p,h.onerror=function(v){return p(),l.close(),a(f.error)}},f.onerror=function(h){return l.close(),a(f.error)},c.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return a(s.error)}})]})})},e}();if(Y().getBool("IS_BROWSER"))try{ta.registerManager(wu.URL_SCHEME,new tse)}catch{}var Zo="/",As="tensorflowjs_models",QO="info",nse="model_topology",rse="weight_specs",ose="weight_data",ise="model_metadata";function JO(e){return{info:[As,e,QO].join(Zo),topology:[As,e,nse].join(Zo),weightSpecs:[As,e,rse].join(Zo),weightData:[As,e,ose].join(Zo),modelMetadata:[As,e,ise].join(Zo)}}function ase(e){var t=e.split(Zo);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Zo)}var Su=function(){function e(t){if(!Y().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=JO(this.modelPath)}return e.prototype.save=function(t){return le(this,void 0,void 0,function(){var n,r,o;return ce(this,function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),o=Nd(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(a){if(x1)return Buffer.from(a).toString("base64");for(var s=new Uint8Array(a),u="",l=0,c=s.length;l<c;l++)u+=String.fromCharCode(s[l]);return btoa(u)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:o}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return le(this,void 0,void 0,function(){var t,n,r,o,i,a,s;return ce(this,function(u){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=o,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(a=JSON.parse(i),n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,n.userDefinedMetadata=a.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(l){if(x1){var c=Buffer.from(l,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var d=atob(l),f=new Uint8Array(d.length),h=0;h<d.length;++h)f.set([d.charCodeAt(h)],h);return f.buffer}(s),[2,n]})})},e.URL_SCHEME="localstorage://",e}(),tk=function(e){return Y().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Su.URL_SCHEME)?(t=e.slice(Su.URL_SCHEME.length),new Su(t)):null;var t};ar.registerSaveRouter(tk),ar.registerLoadRouter(tk);var sse=function(){function e(){P(Y().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),P(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return le(this,void 0,void 0,function(){var t,n,r,o,i,a;return ce(this,function(s){for(t={},n=As+Zo,r=Zo+QO,o=0;o<this.LS.length;++o)(i=this.LS.key(o)).startsWith(n)&&i.endsWith(r)&&(a=ase(i),t[a]=JSON.parse(this.LS.getItem(i)));return[2,t]})})},e.prototype.removeModel=function(t){return le(this,void 0,void 0,function(){var n,r;return ce(this,function(o){var i;if(t=(i=t).startsWith(Su.URL_SCHEME)?i.slice(Su.URL_SCHEME.length):i,n=JO(t),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+t+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},e}();if(Y().getBool("IS_BROWSER"))try{ta.registerManager(Su.URL_SCHEME,new sse)}catch{}var use="model",lse=".json",cse=".weights.bin";function nk(e){return new Promise(function(t){return setTimeout(t)}).then(e)}var p0=function(){function e(t){if(!Y().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),t!=null&&t.length!==0||(t=use),this.modelTopologyFileName=t+lse,this.weightDataFileName=t+cse}return e.prototype.save=function(t){return le(this,void 0,void 0,function(){var n,r,o,i,a,s;return ce(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},i=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),(a=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=i,[4,nk(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),t.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,nk(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:Nd(t)}]}})})},e.URL_SCHEME="downloads://",e}(),dse=function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return e.prototype.load=function(){return le(this,void 0,void 0,function(){var t,n,r=this;return ce(this,function(o){return t=this.files[0],n=this.files.slice(1),[2,new Promise(function(i,a){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),c=l.modelTopology;if(c!=null){n.length===0&&i({modelTopology:c});var d=l.weightsManifest;if(d!=null){var f;try{f=r.checkManifestAndWeightFiles(d,n)}catch(y){return void a(y)}var h=[],p=[],v=[];d.forEach(function(y){y.paths.forEach(function(m){p.push(m),v.push(null)}),h.push.apply(h,y.weights)}),d.forEach(function(y){y.paths.forEach(function(m){var g=new FileReader;g.onload=function(b){var x=b.target.result,w=p.indexOf(m);v[w]=x,v.indexOf(null)===-1&&i({modelTopology:c,weightSpecs:h,weightData:fw(v),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},g.onerror=function(b){return a("Failed to weights data from file of path '"+m+"'.")},g.readAsArrayBuffer(f[m])})})}else a(new Error("weightManifest field is missing from file "+t.name))}else a(new Error("modelTopology field is missing from file "+t.name))},s.onerror=function(u){return a("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(t)})]})})},e.prototype.checkManifestAndWeightFiles=function(t,n){for(var r=[],o=n.map(function(u){return JE(u.name)}),i={},a=0,s=t;a<s.length;a++)s[a].paths.forEach(function(u){var l=JE(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),o.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");i[u]=n[o.indexOf(l)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return i},e}();function rk(e,t,n,r){(function(i){P(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(e),function(i,a){P(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),P(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+a}),P(a>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+a})}(n=n??0,r=r??1);var o=0;return Promise.all(e.map(function(i){return i.then(function(a){var s=n+ ++o/e.length*(r-n);return t(s),a}),i}))}function ZO(e,t){return le(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c;return ce(this,function(d){switch(d.label){case 0:return t==null&&(t={}),n=t.fetchFunc==null?Y().platform.fetch:t.fetchFunc,r=e.map(function(f){return n(f,t.requestInit,{isBinary:!0})}),o=0,i=.5,t.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return a=d.sent(),[3,4];case 2:return[4,rk(r,t.onProgress,o,i)];case 3:a=d.sent(),d.label=4;case 4:return s=a.map(function(f){return f.arrayBuffer()}),u=.5,l=1,t.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=d.sent(),[3,8];case 6:return[4,rk(s,t.onProgress,u,l)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}})})}function ok(e){var t=this;return function(n,r,o){return r===void 0&&(r=""),le(t,void 0,void 0,function(){var i,a,s,u,l,c,d,f,h,p;return ce(this,function(v){switch(v.label){case 0:if(i=n.map(function(){return!1}),a={},s=o!=null?o.map(function(){return!1}):[],u=[],n.forEach(function(y,m){var g=0;y.weights.forEach(function(b){var x="quantization"in b?b.quantization.dtype:b.dtype,w=b1[x]*de(b.shape),S=function(){i[m]=!0,a[m]==null&&(a[m]=[]),a[m].push({manifestEntry:b,groupOffset:g,sizeBytes:w})};o!=null?o.forEach(function(C,_){C===b.name&&(S(),s[_]=!0)}):S(),u.push(b.name),g+=w})}),!s.every(function(y){return y}))throw l=o.filter(function(y,m){return!s[m]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return c=i.reduce(function(y,m,g){return m&&y.push(g),y},[]),d=[],c.forEach(function(y){n[y].paths.forEach(function(m){var g=r+(r.endsWith("/")?"":"/")+m;d.push(g)})}),[4,e(d)];case 1:return f=v.sent(),h={},p=0,c.forEach(function(y){for(var m=n[y].paths.length,g=0,b=0;b<m;b++)g+=f[p+b].byteLength;for(var x=new ArrayBuffer(g),w=new Uint8Array(x),S=0,C=0;C<m;C++){var _=new Uint8Array(f[p+C]);w.set(_,S),S+=_.byteLength}a[y].forEach(function(k){var E=XO(x.slice(k.groupOffset,k.groupOffset+k.sizeBytes),[k.manifestEntry]);for(var A in E)h[A]=E[A]}),p+=m}),[2,h]}})})}}ar.registerSaveRouter(function(e){return Y().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(p0.URL_SCHEME)?function(t){return t===void 0&&(t="model"),new p0(t)}(e.slice(p0.URL_SCHEME.length)):null});var eN=function(){function e(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(P(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=Y().platform.fetch,P(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&P(t.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return e.prototype.save=function(t){return le(this,void 0,void 0,function(){var n,r,o,i;return ce(this,function(a){switch(a.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(o)],{type:"application/json"}),"model.json"),t.weightData!=null&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((i=a.sent()).ok)return[2,{modelArtifactsInfo:Nd(t),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},e.prototype.load=function(){return le(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u,l,c,d,f;return ce(this,function(h){switch(h.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=h.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");h.label=2;case 2:return h.trys.push([2,4,,5]),[4,t.json()];case 3:return n=h.sent(),[3,5];case 4:throw h.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(o=n.modelTopology,i=n.weightsManifest,a=n.generatedBy,s=n.convertedBy,u=n.format,l=n.userDefinedMetadata,o==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:f=h.sent(),c=f[0],d=f[1],h.label=7;case 7:return[2,{modelTopology:o,weightSpecs:c,weightData:d,userDefinedMetadata:l,generatedBy:a,convertedBy:s,format:u}]}})})},e.prototype.loadWeights=function(t){return le(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c,d,f;return ce(this,function(h){switch(h.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(p){var v=p.lastIndexOf("/"),y=p.lastIndexOf("?"),m=p.substring(0,v),g=y>v?p.substring(y):"";return[m+"/",g]}(n),o=r[0],i=r[1],a=this.weightPathPrefix||o,s=[],u=0,l=t;u<l.length;u++)c=l[u],s.push.apply(s,c.weights);return d=[],t.forEach(function(p){p.paths.forEach(function(v){d.push(a+v+i)})}),[4,ZO(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=h.sent(),[2,[s,fw(f)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function S1(e){return e.match(eN.URL_SCHEME_REGEX)!=null}var ik=function(e,t){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(n){return S1(n)}):S1(e))?C1(e,{onProgress:t}):null};function C1(e,t){return new eN(e,t)}ar.registerSaveRouter(ik),ar.registerLoadRouter(ik);var v0=function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return le(this,void 0,void 0,function(){return ce(this,function(t){return[2,this.modelArtifacts]})})},e}(),fse=function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return le(this,void 0,void 0,function(){return ce(this,function(n){return[2,this.saveHandler(t)]})})},e}(),tN=Object.freeze({browserFiles:function(e){return new dse(e)},browserHTTPRequest:function(e,t){return C1(e,t)},concatenateArrayBuffers:fw,decodeWeights:XO,encodeWeights:function(e,t){return le(this,void 0,void 0,function(){var n,r,o,i,a,s=this;return ce(this,function(u){switch(u.label){case 0:for(n=[],r=[],o=Array.isArray(e)?e.map(function(l){return l.name}):Object.keys(e),i=function(l){var c=o[l],d=Array.isArray(e)?e[l].tensor:e[c];if(d.dtype!=="float32"&&d.dtype!=="int32"&&d.dtype!=="bool"&&d.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+d.dtype);var f={name:c,shape:d.shape,dtype:d.dtype};if(d.dtype==="string"){var h=new Promise(function(p){return le(s,void 0,void 0,function(){var v,y,m,g,b,x,w;return ce(this,function(S){switch(S.label){case 0:return[4,d.bytes()];case 1:for(v=S.sent(),y=v.reduce(function(C,_){return C+_.length},0)+$p*v.length,m=new Uint8Array(y),g=0,b=0;b<v.length;b++)x=v[b],w=new Uint8Array(new Uint32Array([x.length]).buffer),m.set(w,g),g+=$p,m.set(x,g),g+=x.length;return p(m),[2]}})})});r.push(h)}else r.push(d.data());t!=null&&(f.group=t),n.push(f)},a=0;a<o.length;++a)i(a);return[4,Promise.all(r)];case 1:return[2,{data:ese(u.sent()),specs:n}]}})})},fromMemory:function(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new v0(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new v0({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new v0({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return ar.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:Nd,getSaveHandlers:function(e){return ar.getSaveHandlers(e)},http:C1,isHTTPScheme:S1,loadWeights:function(e,t,n,r){return t===void 0&&(t=""),le(this,void 0,void 0,function(){return ce(this,function(o){return[2,ok(function(i){return ZO(i,{requestInit:r})})(e,t,n)]})})},registerLoadRouter:function(e){return ar.registerLoadRouter(e)},registerSaveRouter:function(e){return ar.registerSaveRouter(e)},weightsLoaderFactory:ok,withSaveHandler:function(e){return new fse(e)},copyModel:function(e,t){return le(this,void 0,void 0,function(){return ce(this,function(n){return[2,ZE(e,t,!1)]})})},listModels:function(){return le(this,void 0,void 0,function(){var e,t,n,r,o,i,a;return ce(this,function(s){switch(s.label){case 0:e=ta.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(o=r[n],[4,ta.getManager(o).listModels()]):[3,4];case 2:for(a in i=s.sent())t[o+xu+a]=i[a];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return le(this,void 0,void 0,function(){return ce(this,function(n){return[2,ZE(e,t,!0)]})})},removeModel:function(e){return le(this,void 0,void 0,function(){var t;return ce(this,function(n){return t=Th(e),[2,ta.getManager(t.scheme).removeModel(t.path)]})})}}),ks;N({confusionMatrix_:function(e,t,n){var r=R(e,"labels","confusionMatrix"),o=R(t,"predictions","confusionMatrix");P(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),P(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),P(o.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+o.rank}),P(r.shape[0]===o.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."}),P(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var i=p1(r.asType("int32"),n),a=p1(o.asType("int32"),n);return i.transpose().matMul(a).asType("int32")}});var hse=N({fromPixels_:function(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,i=!1,a=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);a=!0}if(o&&o&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(EM("FromPixels",z.backendName)!=null)return z.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,u,l=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=l[0],d=l[1];if(a?s=e.getContext("2d").getImageData(0,0,c,d).data:r||n?s=e.data:(i||o)&&(ks==null&&(ks=document.createElement("canvas").getContext("2d")),ks.canvas.width=c,ks.canvas.height=d,ks.drawImage(e,0,0,c,d),s=ks.getImageData(0,0,c,d).data),t===4)u=new Int32Array(s);else{var f=c*d;u=new Int32Array(f*t);for(var h=0;h<f;h++)for(var p=0;p<t;++p)u[h*t+p]=s[4*h+p]}return Wx(u,[d,c,t],"int32")}}),hw=Object.freeze({toPixels:function(e,t){return le(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c,d,f,h,p,v,y,m,g,b,x,w,S,C,_;return ce(this,function(k){switch(k.label){case 0:if(n=R(e,"img","toPixels"),e instanceof ft||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],i=r[1],(a=n.rank===2?1:n.shape[2])>4||a===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,n.data()];case 1:return s=k.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=k.sent(),d=c[0],f=c[1],h=d[0],p=f[0],u.dispose(),l.dispose(),n.dtype==="float32"){if(h<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+p+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+p+"].")}for(v=n.dtype==="float32"?255:1,y=new Uint8ClampedArray(i*o*4),m=0;m<o*i;++m)g=void 0,b=void 0,x=void 0,w=void 0,a===1?(g=s[m]*v,b=s[m]*v,x=s[m]*v,w=255):a===3?(g=s[3*m]*v,b=s[3*m+1]*v,x=s[3*m+2]*v,w=255):a===4&&(g=s[4*m]*v,b=s[4*m+1]*v,x=s[4*m+2]*v,w=s[4*m+3]*v),y[(S=4*m)+0]=Math.round(g),y[S+1]=Math.round(b),y[S+2]=Math.round(x),y[S+3]=Math.round(w);return t!=null&&(t.width=i,t.height=o,C=t.getContext("2d"),_=new ImageData(y,i,o),C.putImageData(_,0,0)),n!==e&&n.dispose(),[2,y]}})})},fromPixels:hse}),pse=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,n){return new t(n)},e}(),vse=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function fs(e){P(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),P(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),P(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),vse.register(e)}var hs=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return oo(t,e),t.prototype.minimize=function(n,r,o){r===void 0&&(r=!1);var i=this.computeGradients(n,o),a=i.value,s=i.grads;if(o!=null){var u=o.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(u)}else this.applyGradients(s);return Un(s),r?a:(a.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(n,r){return Ene(n,r)},t.prototype.dispose=function(){this.iterations_!=null&&Un(this.iterations_)},t.prototype.saveIterations=function(){return le(this,void 0,void 0,function(){return ce(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:re(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){return ce(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){return ce(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(n){return le(this,void 0,void 0,function(){var r;return ce(this,function(o){switch(o.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=o.sent()[0],[2,n.slice(1)]}})})},t}(pse);Object.defineProperty(hs,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var mse=function(e){function t(n,r,o){o===void 0&&(o=null);var i=e.call(this)||this;return i.learningRate=n,i.rho=r,i.epsilon=o,i.accumulatedGrads=[],i.accumulatedUpdates=[],o==null&&(i.epsilon=z.backend.epsilon()),i}return oo(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=z.registeredVariables[o];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:o+"/accum_grad",variable:ie(function(){return Be(a).variable(!1)})}),r.accumulatedUpdates[i]==null&&(r.accumulatedUpdates[i]={originalName:o+"/accum_var",variable:ie(function(){return Be(a).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[o];if(s!=null){var u=r.accumulatedGrads[i].variable,l=r.accumulatedUpdates[i].variable;ie(function(){var c=u.mul(r.rho).add(s.square().mul(1-r.rho)),d=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),f=l.mul(r.rho).add(d.square().mul(1-r.rho));u.assign(c),l.assign(f);var h=d.mul(-r.learningRate).add(a);a.assign(h)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Un(this.accumulatedGrads.map(function(n){return n.variable})),Un(this.accumulatedUpdates.map(function(n){return n.variable})))},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){var n;return ce(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){var r;return ce(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},t.className="Adadelta",t}(hs);fs(mse);var gse=function(e){function t(n,r){r===void 0&&(r=.1);var o=e.call(this)||this;return o.learningRate=n,o.initialAccumulatorValue=r,o.accumulatedGrads=[],o}return oo(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=z.registeredVariables[o];r.accumulatedGrads[i]==null&&(r.accumulatedGrads[i]={originalName:o+"/accumulator",variable:ie(function(){return Mo(a.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[o];if(s!=null){var u=r.accumulatedGrads[i].variable;ie(function(){var l=u.add(s.square());u.assign(l);var c=s.div(l.add(z.backend.epsilon()).sqrt()).mul(-r.learningRate).add(a);a.assign(c)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&Un(this.accumulatedGrads.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){return ce(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){return ce(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},t.className="Adagrad",t}(hs);fs(gse);var yse=function(e){function t(n,r,o,i){i===void 0&&(i=null);var a=e.call(this)||this;return a.learningRate=n,a.beta1=r,a.beta2=o,a.epsilon=i,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],ie(function(){a.accBeta1=re(r).variable(),a.accBeta2=re(o).variable()}),i==null&&(a.epsilon=z.backend.epsilon()),a}return oo(t,e),t.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);ie(function(){var i=$t(1,r.accBeta1),a=$t(1,r.accBeta2);o.forEach(function(s,u){var l=z.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:ie(function(){return Be(l).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:ie(function(){return Be(l).variable(!1)})});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var d=r.accumulatedFirstMoment[u].variable,f=r.accumulatedSecondMoment[u].variable,h=d.mul(r.beta1).add(c.mul(1-r.beta1)),p=f.mul(r.beta2).add(c.square().mul(1-r.beta2)),v=h.div(i),y=p.div(a);d.assign(h),f.assign(p);var m=v.div(y.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(m)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Un(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&Un(this.accumulatedSecondMoment.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){var n;return ce(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){var r,o=this;return ce(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),ie(function(){o.accBeta1.assign(Bp(o.beta1,o.iterations_+1)),o.accBeta2.assign(Bp(o.beta2,o.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},t.className="Adam",t}(hs);fs(yse);var bse=function(e){function t(n,r,o,i,a){i===void 0&&(i=null),a===void 0&&(a=0);var s=e.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=o,s.epsilon=i,s.decay=a,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],ie(function(){s.iteration=re(0).variable(),s.accBeta1=re(r).variable()}),i==null&&(s.epsilon=z.backend.epsilon()),s}return oo(t,e),t.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n);ie(function(){var i=$t(1,r.accBeta1),a=Yr(-r.learningRate,r.iteration.mul(r.decay).add(1));o.forEach(function(s,u){var l=z.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:Be(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:Be(l).variable(!1)});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var d=r.accumulatedFirstMoment[u].variable,f=r.accumulatedWeightedInfNorm[u].variable,h=d.mul(r.beta1).add(c.mul(1-r.beta1)),p=f.mul(r.beta2),v=c.abs(),y=p.maximum(v);d.assign(h),f.assign(y);var m=a.div(i).mul(h.div(y.add(r.epsilon))).add(l);l.assign(m)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Un(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&Un(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){return ce(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){return ce(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},t.className="Adamax",t}(hs);fs(bse);var nN=function(e){function t(n){var r=e.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return oo(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=Array.isArray(n)?n[i].tensor:n[o];if(a!=null){var s=z.registeredVariables[o];ie(function(){var u=r.c.mul(a).add(s);s.assign(u)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=$te(re(-n))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){return ce(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){return ce(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(n,r){return new n(r.learningRate)},t.className="SGD",t}(hs);fs(nN);var xse=function(e){function t(n,r,o){o===void 0&&(o=!1);var i=e.call(this,n)||this;return i.learningRate=n,i.momentum=r,i.useNesterov=o,i.accumulations=[],i.m=re(i.momentum),i}return oo(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=z.registeredVariables[o];r.accumulations[i]==null&&(r.accumulations[i]={originalName:o+"/momentum",variable:ie(function(){return Be(a).variable(!1)})});var s=r.accumulations[i].variable,u=Array.isArray(n)?n[i].tensor:n[o];u!=null&&ie(function(){var l,c=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(c.mul(r.m))).add(a):r.c.mul(c).add(a),s.assign(c),a.assign(l)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Un(this.accumulations.map(function(n){return n.variable}))},t.prototype.setMomentum=function(n){this.momentum=n},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){return ce(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){return ce(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},t.className="Momentum",t}(nN);fs(xse);var wse=function(e){function t(n,r,o,i,a){r===void 0&&(r=.9),o===void 0&&(o=0),i===void 0&&(i=null),a===void 0&&(a=!1);var s=e.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=o,s.epsilon=i,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=a,i==null&&(s.epsilon=z.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return oo(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,i){var a=z.registeredVariables[o];r.accumulatedMeanSquares[i]==null&&(r.accumulatedMeanSquares[i]={originalName:o+"/rms",variable:ie(function(){return Be(a).variable(!1)})}),r.accumulatedMoments[i]==null&&(r.accumulatedMoments[i]={originalName:o+"/momentum",variable:ie(function(){return Be(a).variable(!1)})}),r.accumulatedMeanGrads[i]==null&&r.centered&&(r.accumulatedMeanGrads[i]={originalName:o+"/mg",variable:ie(function(){return Be(a).variable(!1)})});var s=Array.isArray(n)?n[i].tensor:n[o];if(s!=null){var u=r.accumulatedMeanSquares[i].variable,l=r.accumulatedMoments[i].variable;ie(function(){var c=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var d=r.accumulatedMeanGrads[i].variable,f=d.mul(r.decay).add(s.mul(1-r.decay)),h=l.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(f.square().add(r.epsilon)).sqrt()));u.assign(c),d.assign(f),l.assign(h);var p=a.sub(h);a.assign(p)}else{var v=u.mul(r.decay).add(s.square().mul(1-r.decay));h=l.mul(r.momentum).add(s.mul(r.learningRate).div(v.add(r.epsilon).sqrt())),u.assign(v),l.assign(h),p=a.sub(h),a.assign(p)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Un(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Un(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&Un(this.accumulatedMoments.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return le(this,void 0,void 0,function(){var n;return ce(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},t.prototype.setWeights=function(n){return le(this,void 0,void 0,function(){var r;return ce(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},t.className="RMSProp",t}(hs);fs(wse);ft.prototype.squaredDifference=function(e){return gO(this,e)},X=qae;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _1=function(e,t){return _1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},_1(e,t)};function Ce(e,t){_1(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var pn=function(){return pn=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pn.apply(this,arguments)};function he(e,t,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(c){try{l(r.next(c))}catch(d){a(d)}}function u(c){try{l(r.throw(c))}catch(d){a(d)}}function l(c){c.done?i(c.value):o(c.value).then(s,u)}l((r=r.apply(e,t||[])).next())})}function pe(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=l[0]&2?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],o=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function dc(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}var Cu=function(){function e(t,n){if(!qa(t)||!qa(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:n}));this._width=t,this._height=n}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function rm(e,t){return e instanceof ft&&e.shape.length===t}function Sse(e){return rm(e,2)}function om(e){return rm(e,3)}function na(e){return rm(e,4)}function Cse(e){return e%1!==0}function ak(e){return e%2===0}function _se(e,t){t===void 0&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function sk(e){return e&&e.width&&e.height}function Ese(e,t){var n=e.width,r=e.height,o=t/Math.max(r,n);return new Cu(Math.round(n*o),Math.round(r*o))}function pw(e){return e.reduce(function(t,n){return t.add(n)},new qe(0,0)).div(new qe(e.length,e.length))}function td(e,t,n){return Array(e).fill(0).map(function(r,o){return t+o*n})}function qa(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function uk(e){return qa(e)&&0<=e&&e<=1}var qe=function(){function e(t,n){this._x=t,this._y=n}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),ua=function(){function e(t,n){n===void 0&&(n=!0);var r=t||{},o=[r.left,r.top,r.right,r.bottom].every(qa),i=[r.x,r.y,r.width,r.height].every(qa);if(!i&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var a=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=a[0],u=a[1],l=a[2],c=a[3];e.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=c}return e.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(qa)},e.assertIsValidBox=function(t,n,r){if(r===void 0&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new qe(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new qe(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new qe(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new qe(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(a){return Math.round(a)}),n=t[0],r=t[1],o=t[2],i=t[3];return new e({x:n,y:r,width:o,height:i})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(a){return Math.floor(a)}),n=t[0],r=t[1],o=t[2],i=t[3];return new e({x:n,y:r,width:o,height:i})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,o=t.width,i=t.height,a=Math.abs(o-i);return o<i&&(n-=a/2,o+=a),i<o&&(r-=a/2,i+=a),new e({x:n,y:r,width:o,height:i})},e.prototype.rescale=function(t){var n=sk(t)?t.width:t,r=sk(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n],o=r[0],i=r[1],a=r[2],s=r[3];return new e({x:o,y:i,width:a,height:s})},e.prototype.clipAtImageBorders=function(t,n){var r=this,o=r.x,i=r.y,a=r.right,s=r.bottom,u=Math.max(o,0),l=Math.max(i,0),c=a-u,d=s-l,f=Math.min(c,t-u),h=Math.min(d,n-l);return new e({x:u,y:l,width:f,height:h}).floor()},e.prototype.shift=function(t,n){var r=this,o=r.width,i=r.height,a=this.x+t,s=this.y+n;return new e({x:a,y:s,width:o,height:i})},e.prototype.padAtBorders=function(t,n){var r=this.width+1,o=this.height+1,i=1,a=1,s=r,u=o,l=this.left,c=this.top,d=this.right,f=this.bottom;return d>n&&(s=-d+n+r,d=n),f>t&&(u=-f+t+o,f=t),l<1&&(u=2-l,l=1),c<1&&(u=2-c,c=1),{dy:a,edy:u,dx:i,edx:s,y:c,ey:f,x:l,ex:d,w:r,h:o}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),im=function(e){Ce(t,e);function t(n,r,o,i,a){return a===void 0&&(a=!1),e.call(this,{left:n,top:r,right:o,bottom:i},a)||this}return t}(ua),rN=function(){function e(t,n,r,o,i){this._imageDims=new Cu(i.width,i.height),this._score=t,this._classScore=n,this._className=r,this._box=new ua(o).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new ua(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),Uo=function(e){Ce(t,e);function t(n,r,o){return e.call(this,n,n,"",r,o)||this}return t.prototype.forSize=function(n,r){var o=e.prototype.forSize.call(this,n,r),i=o.score,a=o.relativeBox,s=o.imageDims;return new t(i,a,s)},t}(rN);function kse(e,t,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),o=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=r*o;return n?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function Tse(e){var t=e.map(function(s){return s.x}),n=e.map(function(s){return s.y}),r=t.reduce(function(s,u){return u<s?u:s},1/0),o=n.reduce(function(s,u){return u<s?u:s},1/0),i=t.reduce(function(s,u){return s<u?u:s},0),a=n.reduce(function(s,u){return s<u?u:s},0);return new im(r,o,i,a)}function nd(e,t,n,r){r===void 0&&(r=!0);for(var o=t.map(function(s,u){return{score:s,boxIndex:u}}).sort(function(s,u){return s.score-u.score}).map(function(s){return s.boxIndex}),i=[],a=function(){var s=o.pop();i.push(s);for(var u=o,l=[],c=0;c<u.length;c++){var d=u[c],f=e[s],h=e[d];l.push(kse(f,h,r))}o=o.filter(function(p,v){return l[v]<=n})};o.length>0;)a();return i}function Fd(e,t){return ie(function(){var n=t[0],r=t[1],o=t[2],i=Mo(dc(e.shape.slice(0,3),[1]),n),a=Mo(dc(e.shape.slice(0,3),[1]),r),s=Mo(dc(e.shape.slice(0,3),[1]),o),u=Ft([i,a,s],3);return $t(e,u)})}function Rse(e,t){return t===void 0&&(t=!1),ie(function(){var n=e.shape.slice(1),r=n[0],o=n[1];if(r===o)return e;var i=Math.abs(r-o),a=Math.round(i*(t?.5:1)),s=r>o?2:1,u=function(h){var p=e.shape.slice();return p[s]=h,Mo(p,0)},l=u(a),c=i-l.shape[s],d=t&&c?u(c):null,f=[d,e,l].filter(function(h){return!!h}).map(function(h){return h.toFloat()});return Ft(f,s)})}function m0(e){return 1/(1+Math.exp(-e))}var vw=function(e){Ce(t,e);function t(n,r,o,i,a){return a===void 0&&(a=!1),e.call(this,{x:n,y:r,width:o,height:i},a)||this}return t}(ua),Pse=.5,Ise=.43,Ase=.45,zp=function(){function e(t,n,r){r===void 0&&(r=new qe(0,0));var o=n.width,i=n.height;this._imgDims=new Cu(o,i),this._shift=r,this._positions=t.map(function(a){return a.mul(new qe(o,i)).add(r)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new qe(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(n){return n.sub(t._shift).div(new qe(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new this.constructor(this.relativePositions,{width:t,height:n})},e.prototype.shiftBy=function(t,n){return new this.constructor(this.relativePositions,this._imgDims,new qe(t,n))},e.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},e.prototype.align=function(t,n){if(n===void 0&&(n={}),t){var r=t instanceof Uo?t.box.floor():new ua(t);return this.shiftBy(r.x,r.y).align(null,n)}var o=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),i=o.useDlibAlignment,a=o.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(a)},e.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),n=t[0],r=t[1],o=t[2],i=function(d){return o.sub(d).magnitude()},a=(i(n)+i(r))/2,s=Math.floor(a/Ase),u=pw(t),l=Math.floor(Math.max(0,u.x-Pse*s)),c=Math.floor(Math.max(0,u.y-Ise*s));return new vw(l,c,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+c))},e.prototype.alignMinBbox=function(t){var n=Tse(this.positions);return n.pad(n.width*t,n.height*t)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),Dse=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],pw([n[3],n[4]])]},t}(zp),Mse=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(pw)},t}(zp),lk=function(){function e(t,n){this._label=t,this._distance=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+_se(this.distance)+")":"")},e}(),ck=function(e){Ce(t,e);function t(n,r){var o=e.call(this,n)||this;return o._label=r,o}return t.assertIsValidLabeledBox=function(n,r){if(ua.assertIsValidBox(n,r),!qa(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(ua),Wf=function(){function e(t,n){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},e.fromJSON=function(t){var n=t.descriptors.map(function(r){return new Float32Array(r)});return new e(t.label,n)},e}();(function(e){Ce(t,e);function t(n,r,o,i){var a=e.call(this,n,r)||this;return a._score=o,a._classScore=i,a}return t.assertIsValidPredictedBox=function(n,r){if(ck.assertIsValidLabeledBox(n,r),!uk(n.score)||!uk(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t})(ck);function Ose(e){return e.detection instanceof Uo}function mw(e,t){var n={detection:t};return Object.assign({},e,n)}function oN(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function iN(e){var t="";if(!e)try{e=require("fs")}catch(r){t=r.toString()}var n=e?function(r){return new Promise(function(o,i){e.readFile(r,function(a,s){return a?i(a):o(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:n}}function aN(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,n=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},o=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=iN();return pn({Canvas:e||function(){function a(){}return a}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function a(){}return a}(),Image:t||function(){function a(){}return a}(),ImageData:global.ImageData||function(){function a(){}return a}(),Video:global.HTMLVideoElement||function(){function a(){}return a}(),createCanvasElement:n,createImageElement:r,fetch:o},i)}function sN(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function uN(){return typeof global=="object"&&typeof require=="function"&&typeof WN<"u"&&typeof process<"u"&&!!process.version}var Mt;function Nse(){if(!Mt)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Mt}function E1(e){Mt=e}function gw(){sN()&&E1(oN()),uN()&&E1(aN())}function Fse(e){if(Mt||gw(),!Mt)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=t===void 0?Mt.Canvas:t,r=e.Image,o=r===void 0?Mt.Image:r;Mt.Canvas=n,Mt.Image=o,Mt.createCanvasElement=e.createCanvasElement||function(){return new n},Mt.createImageElement=e.createImageElement||function(){return new o},Mt.ImageData=e.ImageData||Mt.ImageData,Mt.Video=e.Video||Mt.Video,Mt.fetch=e.fetch||Mt.fetch,Mt.readFile=e.readFile||Mt.readFile}var bn={getEnv:Nse,setEnv:E1,initialize:gw,createBrowserEnv:oN,createFileSystem:iN,createNodejsEnv:aN,monkeyPatch:Fse,isBrowser:sN,isNodejs:uN};gw();function lN(e){return!bn.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function ns(e){var t=bn.getEnv(),n=t.Canvas,r=t.CanvasRenderingContext2D;if(e instanceof r)return e;var o=lN(e);if(!(o instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=o.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var dk;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(dk||(dk={}));function cN(e){var t=bn.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function Bse(e){return new Promise(function(t,n){if(e instanceof bn.getEnv().Canvas||cN(e))return t();function r(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",o),t(i))}function o(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",r),i.currentTarget.removeEventListener("error",o),n(i))}e.addEventListener("load",r),e.addEventListener("error",o)})}function dN(e){var t=bn.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new Cu(e.naturalWidth,e.naturalHeight):e instanceof r?new Cu(e.videoWidth,e.videoHeight):new Cu(e.width,e.height)}function am(e){var t=e.width,n=e.height,r=bn.getEnv().createCanvasElement,o=r();return o.width=t,o.height=n,o}function yw(e,t){var n=bn.getEnv().ImageData;if(!(e instanceof n)&&!cN(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||dN(e),o=r.width,i=r.height,a=am({width:o,height:i});return e instanceof n?ns(a).putImageData(e,0,0):ns(a).drawImage(e,0,0,o,i),a}function Lse(e,t){return he(this,void 0,void 0,function(){var n,r,o,i,a,s;return pe(this,function(u){switch(u.label){case 0:return n=t||bn.getEnv().createCanvasElement(),r=e.shape.slice(na(e)?1:0),o=r[0],i=r[1],a=r[2],s=ie(function(){return e.as3D(o,i,a).toInt()}),[4,hw.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}})})}function fk(e){var t=bn.getEnv(),n=t.Image,r=t.Canvas,o=t.Video;return e instanceof n||e instanceof r||e instanceof o}function $se(e,t,n){n===void 0&&(n=!1);var r=bn.getEnv(),o=r.Image,i=r.Canvas;if(!(e instanceof o||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var a=dN(e),s=t/Math.max(a.height,a.width),u=s*a.width,l=s*a.height,c=am({width:t,height:t}),d=e instanceof i?e:yw(e),f=Math.abs(u-l)/2,h=n&&u<l?f:0,p=n&&l<u?f:0;return ns(c).drawImage(d,h,p,u,l),c}var Wp=function(){function e(t,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=n,this._batchSize=t.length,t.forEach(function(o,i){if(om(o)){r._imageTensors[i]=o,r._inputDimensions[i]=o.shape;return}if(na(o)){var a=o.shape[0];if(a!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+a+" passed, but not supported in input array");r._imageTensors[i]=o,r._inputDimensions[i]=o.shape.slice(1);return}var s=o instanceof bn.getEnv().Canvas?o:yw(o);r._canvases[i]=s,r._inputDimensions[i]=[s.height,s.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var t=this;return td(this.batchSize,0,1).map(function(n,r){return t.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},e.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},e.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},e.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},e.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(t),r=this.getInputHeight(t);return Ese({width:n,height:r},this.inputSize)},e.prototype.toBatchTensor=function(t,n){var r=this;return n===void 0&&(n=!0),this._inputSize=t,ie(function(){var o=td(r.batchSize,0,1).map(function(a){var s=r.getInput(a);if(s instanceof ft){var u=na(s)?s:s.expandDims();return u=Rse(u,n),(u.shape[1]!==t||u.shape[2]!==t)&&(u=sw.resizeBilinear(u,[t,t])),u.as3D(t,t,3)}if(s instanceof bn.getEnv().Canvas)return hw.fromPixels($se(s,t,n));throw new Error("toBatchTensor - at batchIdx "+a+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),i=pr(o.map(function(a){return a.toFloat()})).as4D(r.batchSize,t,t,3);return i})},e}();function Kt(e){return he(this,void 0,void 0,function(){var t,n,r;return pe(this,function(o){switch(o.label){case 0:if(e instanceof Wp)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return n=function(i){return Array.isArray(e)?" at input index "+i+":":""},r=t.map(lN),r.forEach(function(i,a){if(!fk(i)&&!om(i)&&!na(i))throw typeof t[a]=="string"?new Error("toNetInput -"+n(a)+" string passed, but could not resolve HTMLElement for element id "+t[a]):new Error("toNetInput -"+n(a)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(na(i)){var s=i.shape[0];if(s!==1)throw new Error("toNetInput -"+n(a)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(i){return fk(i)&&Bse(i)}))];case 1:return o.sent(),[2,new Wp(r,Array.isArray(e))]}})})}function bw(e,t){return he(this,void 0,void 0,function(){var n,r,o,i,a,s,u;return pe(this,function(l){switch(l.label){case 0:return n=bn.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,Kt(e)];case 1:if(o=l.sent(),o.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=o.getInput(0),i instanceof n?(a=i,[3,4]):[3,2];case 2:return[4,Lse(i)];case 3:a=l.sent(),l.label=4;case 4:r=a,l.label=5;case 5:return s=ns(r),u=t.map(function(c){return c instanceof Uo?c.forSize(r.width,r.height).box.floor():c}).map(function(c){return c.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(c){var d=c.x,f=c.y,h=c.width,p=c.height,v=am({width:h,height:p});return ns(v).putImageData(s.getImageData(d,f,h,p),0,0),v})]}})})}function xw(e,t){return he(this,void 0,void 0,function(){return pe(this,function(n){if(!om(e)&&!na(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(na(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,ie(function(){var r=e.shape.slice(na(e)?1:0),o=r[0],i=r[1],a=r[2],s=t.map(function(l){return l instanceof Uo?l.forSize(i,o).box:l}).map(function(l){return l.clipAtImageBorders(i,o)}),u=s.map(function(l){var c=l.x,d=l.y,f=l.width,h=l.height;return LO(e.as3D(o,i,a),[d,c,0],[h,f,a])});return u})]})})}function zse(e,t){return he(this,void 0,void 0,function(){var n,r;return pe(this,function(o){switch(o.label){case 0:return n=bn.getEnv().fetch,[4,n(e,t)];case 1:if(r=o.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function Wse(e){return he(this,void 0,void 0,function(){return pe(this,function(t){switch(t.label){case 0:return[4,zse(e)];case 1:return[2,t.sent().json()]}})})}function fN(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");var o=e.split("/").filter(function(s){return s}),i=e.endsWith(".json")?o[o.length-1]:n,a=r+(e.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return a=e.startsWith("/")?"/"+a:a,{modelBaseUri:a,manifestUri:a==="/"?"/"+i:a+"/"+i}}function Vse(e,t){return he(this,void 0,void 0,function(){var n,r,o,i;return pe(this,function(a){switch(a.label){case 0:return n=fN(e,t),r=n.manifestUri,o=n.modelBaseUri,[4,Wse(r)];case 1:return i=a.sent(),[2,tN.loadWeights(i,o)]}})})}var xi=function(){function e(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(t){var n=this.traversePropertyPath(t),r=n.obj,o=n.objProp;return r[o]},e.prototype.reassignParamFromPath=function(t,n){var r=this.traversePropertyPath(t),o=r.obj,i=r.objProp;o[i].dispose(),o[i]=n},e.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:t.getParamFromPath(r)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof Uu})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof Uu)})},e.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(n){var r=n.path,o=n.tensor;t.reassignParamFromPath(r,o.variable())})},e.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(n){var r=n.path,o=n.tensor,i=rn(o.dataSync());o.dispose(),t.reassignParamFromPath(r,i)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(n){if(t&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var n=t.tensor;return Array.from(n.dataSync())}).reduce(function(t,n){return t.concat(n)}))},e.prototype.load=function(t){return he(this,void 0,void 0,function(){return pe(this,function(n){switch(n.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return n.sent(),[2]}})})},e.prototype.loadFromUri=function(t){return he(this,void 0,void 0,function(){var n;return pe(this,function(r){switch(r.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,Vse(t,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},e.prototype.loadFromDisk=function(t){return he(this,void 0,void 0,function(){var n,r,o,i,a,s,u,l,c,d;return pe(this,function(f){switch(f.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=bn.getEnv().readFile,r=fN(t,this.getDefaultModelName()),o=r.manifestUri,i=r.modelBaseUri,a=function(h){return Promise.all(h.map(function(p){return n(p).then(function(v){return v.buffer})}))},s=tN.weightsLoaderFactory(a),c=(l=JSON).parse,[4,n(o)];case 1:return u=c.apply(l,[f.sent().toString()]),[4,s(u,i)];case 2:return d=f.sent(),this.loadFromWeightMap(d),[2]}})})},e.prototype.loadFromWeightMap=function(t){var n=this.extractParamsFromWeigthMap(t),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},e.prototype.extractWeights=function(t){var n=this.extractParams(t),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},e.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=t.split("/").reduce(function(i,a){if(!i.nextObj.hasOwnProperty(a))throw new Error("traversePropertyPath - object does not have property "+a+", for path "+t);return{obj:i.nextObj,objProp:a,nextObj:i.nextObj[a]}},{nextObj:this.params}),r=n.obj,o=n.objProp;if(!r||!o||!(r[o]instanceof ft))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:r,objProp:o}},e}();function sr(e,t,n){return ie(function(){var r=nw(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=Re(r,t.bias),r})}function g0(e,t,n){return n===void 0&&(n=!1),ie(function(){var r=pt(n?Re(Vr(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):sr(e,t.conv0,[2,2])),o=sr(r,t.conv1,[1,1]),i=pt(Re(r,o)),a=sr(i,t.conv2,[1,1]);return pt(Re(r,Re(o,a)))})}function Vf(e,t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),ie(function(){var o=pt(n?Re(Vr(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):sr(e,t.conv0,r?[2,2]:[1,1])),i=sr(o,t.conv1,[1,1]),a=pt(Re(o,i)),s=sr(a,t.conv2,[1,1]),u=pt(Re(o,Re(i,s))),l=sr(u,t.conv3,[1,1]);return pt(Re(o,Re(i,Re(s,l))))})}function no(e,t,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),ie(function(){var o=Re(Vr(e,t.filters,[1,1],n),t.bias);return r?pt(o):o})}function wi(e,t){Object.keys(e).forEach(function(n){t.some(function(r){return r.originalPath===n})||e[n].dispose()})}function sm(e,t){return function(n,r,o,i){var a=On(e(n*r*o*o),[o,o,n,r]),s=It(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:a,bias:s}}}function ww(e,t){return function(n,r,o){var i=ea(e(n*r),[n,r]),a=It(e(r));return t.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:i,bias:a}}}var hN=function(){function e(t,n,r){this.depthwise_filter=t,this.pointwise_filter=n,this.bias=r}return e}();function Sw(e,t){return function(n,r,o){var i=On(e(9*n),[3,3,n,1]),a=On(e(n*r),[1,1,n,r]),s=It(e(r));return t.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new hN(i,a,s)}}function Cw(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),o=e(t+"/bias",1);return new hN(n,r,o)}}function ma(e,t){return function(n,r,o){var i=e[n];if(!rm(i,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+i);return t.push({originalPath:n,paramPath:o||n}),i}}function Si(e){var t=e;function n(o){var i=t.slice(0,o);return t=t.slice(o),i}function r(){return t}return{extractWeights:n,getRemainingWeights:r}}function pN(e,t){var n=sm(e,t),r=Sw(e,t);function o(a,s,u,l){l===void 0&&(l=!1);var c=l?n(a,s,3,u+"/conv0"):r(a,s,u+"/conv0"),d=r(s,s,u+"/conv1"),f=r(s,s,u+"/conv2");return{conv0:c,conv1:d,conv2:f}}function i(a,s,u,l){l===void 0&&(l=!1);var c=o(a,s,u,l),d=c.conv0,f=c.conv1,h=c.conv2,p=r(s,s,u+"/conv3");return{conv0:d,conv1:f,conv2:h,conv3:p}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:i}}function jse(e){var t=[],n=Si(e),r=n.extractWeights,o=n.getRemainingWeights,i=pN(r,t).extractDenseBlock4Params,a=i(3,32,"dense0",!0),s=i(32,64,"dense1"),u=i(64,128,"dense2"),l=i(128,256,"dense3");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:a,dense1:s,dense2:u,dense3:l}}}function vN(e){return function(t){var n=e(t+"/filters",4),r=e(t+"/bias",1);return{filters:n,bias:r}}}function mN(e,t){var n=ma(e,t),r=vN(n),o=Cw(n);function i(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):o(s+"/conv0"),c=o(s+"/conv1"),d=o(s+"/conv2");return{conv0:l,conv1:c,conv2:d}}function a(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):o(s+"/conv0"),c=o(s+"/conv1"),d=o(s+"/conv2"),f=o(s+"/conv3");return{conv0:l,conv1:c,conv2:d,conv3:f}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:a}}function Use(e){var t=[],n=mN(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return wi(e,t),{params:r,paramMappings:t}}var gN=function(e){Ce(t,e);function t(){return e.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return ie(function(){var o=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],a=Fd(o,i).div(re(255)),s=Vf(a,r.dense0,!0);return s=Vf(s,r.dense1),s=Vf(s,r.dense2),s=Vf(s,r.dense3),s=Od(s,[7,7],[2,2],"valid"),s})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(n){return Use(n)},t.prototype.extractParams=function(n){return jse(n)},t}(xi);function _o(e,t){return ie(function(){return Re(em(e,t.weights),t.bias)})}function Hse(e,t,n){var r=[],o=Si(e),i=o.extractWeights,a=o.getRemainingWeights,s=ww(i,r),u=s(t,n,"fc");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:r,params:{fc:u}}}function Gse(e){var t=[],n=ma(e,t);function r(i){var a=n(i+"/weights",2),s=n(i+"/bias",1);return{weights:a,bias:s}}var o={fc:r("fc")};return wi(e,t),{params:o,paramMappings:t}}function yN(e){var t={},n={};return Object.keys(e).forEach(function(r){var o=r.startsWith("fc")?n:t;o[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var bN=function(e){Ce(t,e);function t(n,r){var o=e.call(this,n)||this;return o._faceFeatureExtractor=r,o}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return ie(function(){var i=n instanceof Wp?r.faceFeatureExtractor.forwardInput(n):n;return _o(i.as2D(i.shape[0],-1),o.fc)})},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,i=r.paramMappings;this._params=o,this._paramMappings=i},t.prototype.extractClassifierParams=function(n){return Hse(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(n){var r=yN(n),o=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),Gse(i)},t.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),o=this.getClassifierChannelsOut(),i=o*r+o,a=n.slice(0,n.length-i),s=n.slice(n.length-i);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(s)},t}(xi),hk=["neutral","happy","sad","angry","fearful","disgusted","surprised"],qse=function(){function e(t){var n=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);hk.forEach(function(r,o){n[r]=t[o]})}return e.prototype.asSortedArray=function(){var t=this;return hk.map(function(n){return{expression:n,probability:t[n]}}).sort(function(n,r){return r.probability-n.probability})},e}(),Kse=function(e){Ce(t,e);function t(n){return n===void 0&&(n=new gN),e.call(this,"FaceExpressionNet",n)||this}return t.prototype.forwardInput=function(n){var r=this;return ie(function(){return yi(r.runNet(n))})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.predictExpressions=function(n){return he(this,void 0,void 0,function(){var r,o,i,a,s=this;return pe(this,function(u){switch(u.label){case 0:return[4,Kt(n)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return o=u.sent(),[4,Promise.all(Bt(o).map(function(l){return he(s,void 0,void 0,function(){var c;return pe(this,function(d){switch(d.label){case 0:return[4,l.data()];case 1:return c=d.sent(),l.dispose(),[2,c]}})})}))];case 3:return i=u.sent(),o.dispose(),a=i.map(function(l){return new qse(l)}),[2,r.isBatchInput?a:a[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(bN);function xN(e,t){var n={expressions:t};return Object.assign({},e,n)}function Xse(e){return Ose(e)&&e.landmarks instanceof zp&&e.unshiftedLandmarks instanceof zp&&e.alignedRect instanceof Uo}function _w(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),o=r.align(),i=e.detection.imageDims,a=new Uo(e.detection.score,o.rescale(i.reverse()),i),s={landmarks:r,unshiftedLandmarks:t,alignedRect:a};return Object.assign({},e,s)}function Yse(e,t){var n=sm(e,t),r=Sw(e,t);function o(a,s,u){var l=r(a,s,u+"/separable_conv0"),c=r(s,s,u+"/separable_conv1"),d=n(a,s,1,u+"/expansion_conv");return{separable_conv0:l,separable_conv1:c,expansion_conv:d}}function i(a,s){var u=r(a,a,s+"/separable_conv0"),l=r(a,a,s+"/separable_conv1"),c=r(a,a,s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:o,extractMainBlockParams:i}}function Qse(e,t){var n=[],r=Si(e),o=r.extractWeights,i=r.getRemainingWeights,a=Yse(o,n),s=a.extractConvParams,u=a.extractSeparableConvParams,l=a.extractReductionBlockParams,c=a.extractMainBlockParams,d=s(3,32,3,"entry_flow/conv_in"),f=l(32,64,"entry_flow/reduction_block_0"),h=l(64,128,"entry_flow/reduction_block_1"),p={conv_in:d,reduction_block_0:f,reduction_block_1:h},v={};td(t,0,1).forEach(function(b){v["main_block_"+b]=c(128,"middle_flow/main_block_"+b)});var y=l(128,256,"exit_flow/reduction_block"),m=u(256,512,"exit_flow/separable_conv"),g={reduction_block:y,separable_conv:m};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:p,middle_flow:v,exit_flow:g}}}function Jse(e,t){var n=ma(e,t),r=vN(n),o=Cw(n);function i(s){var u=o(s+"/separable_conv0"),l=o(s+"/separable_conv1"),c=r(s+"/expansion_conv");return{separable_conv0:u,separable_conv1:l,expansion_conv:c}}function a(s){var u=o(s+"/separable_conv0"),l=o(s+"/separable_conv1"),c=o(s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:i,extractMainBlockParams:a}}function Zse(e,t){var n=[],r=Jse(e,n),o=r.extractConvParams,i=r.extractSeparableConvParams,a=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=o("entry_flow/conv_in"),l=a("entry_flow/reduction_block_0"),c=a("entry_flow/reduction_block_1"),d={conv_in:u,reduction_block_0:l,reduction_block_1:c},f={};td(t,0,1).forEach(function(y){f["main_block_"+y]=s("middle_flow/main_block_"+y)});var h=a("exit_flow/reduction_block"),p=i("exit_flow/separable_conv"),v={reduction_block:h,separable_conv:p};return wi(e,n),{params:{entry_flow:d,middle_flow:f,exit_flow:v},paramMappings:n}}function wN(e,t,n){return Re(Vr(e,t.filters,n,"same"),t.bias)}function y0(e,t,n){n===void 0&&(n=!0);var r=n?pt(e):e;return r=sr(r,t.separable_conv0,[1,1]),r=sr(pt(r),t.separable_conv1,[1,1]),r=Ut(r,[3,3],[2,2],"same"),r=Re(r,wN(e,t.expansion_conv,[2,2])),r}function eue(e,t){var n=sr(pt(e),t.separable_conv0,[1,1]);return n=sr(pt(n),t.separable_conv1,[1,1]),n=sr(pt(n),t.separable_conv2,[1,1]),n=Re(n,e),n}var tue=function(e){Ce(t,e);function t(n){var r=e.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return t.prototype.forwardInput=function(n){var r=this,o=this.params;if(!o)throw new Error("TinyXception - load model before inference");return ie(function(){var i=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],s=Fd(i,a).div(re(256)),u=pt(wN(s,o.entry_flow.conv_in,[2,2]));return u=y0(u,o.entry_flow.reduction_block_0,!1),u=y0(u,o.entry_flow.reduction_block_1),td(r._numMainBlocks,0,1).forEach(function(l){u=eue(u,o.middle_flow["main_block_"+l])}),u=y0(u,o.exit_flow.reduction_block),u=pt(sr(u,o.exit_flow.separable_conv,[1,1])),u})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(n){return Zse(n,this._numMainBlocks)},t.prototype.extractParams=function(n){return Qse(n,this._numMainBlocks)},t}(xi);function nue(e){var t=[],n=Si(e),r=n.extractWeights,o=n.getRemainingWeights,i=ww(r,t),a=i(512,1,"fc/age"),s=i(512,2,"fc/gender");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{fc:{age:a,gender:s}}}}function rue(e){var t=[],n=ma(e,t);function r(i){var a=n(i+"/weights",2),s=n(i+"/bias",1);return{weights:a,bias:s}}var o={fc:{age:r("fc/age"),gender:r("fc/gender")}};return wi(e,t),{params:o,paramMappings:t}}var Vp;(function(e){e.FEMALE="female",e.MALE="male"})(Vp||(Vp={}));var oue=function(e){Ce(t,e);function t(n){n===void 0&&(n=new tue(2));var r=e.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return ie(function(){var i=n instanceof Wp?r.faceFeatureExtractor.forwardInput(n):n,a=Od(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),s=_o(a,o.fc.age).as1D(),u=_o(a,o.fc.gender);return{age:s,gender:u}})},t.prototype.forwardInput=function(n){var r=this;return ie(function(){var o=r.runNet(n),i=o.age,a=o.gender;return{age:i,gender:yi(a)}})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.predictAgeAndGender=function(n){return he(this,void 0,void 0,function(){var r,o,i,a,s,u,l=this;return pe(this,function(c){switch(c.label){case 0:return[4,Kt(n)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return o=c.sent(),i=Bt(o.age),a=Bt(o.gender),s=i.map(function(d,f){return{ageTensor:d,genderTensor:a[f]}}),[4,Promise.all(s.map(function(d){var f=d.ageTensor,h=d.genderTensor;return he(l,void 0,void 0,function(){var p,v,y,m,g;return pe(this,function(b){switch(b.label){case 0:return[4,f.data()];case 1:return p=b.sent()[0],[4,h.data()];case 2:return v=b.sent()[0],y=v>.5,m=y?Vp.MALE:Vp.FEMALE,g=y?v:1-v,f.dispose(),h.dispose(),[2,{age:p,gender:m,genderProbability:g}]}})})}))];case 3:return u=c.sent(),o.age.dispose(),o.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,i=r.paramMappings;this._params=o,this._paramMappings=i},t.prototype.extractClassifierParams=function(n){return nue(n)},t.prototype.extractParamsFromWeigthMap=function(n){var r=yN(n),o=r.featureExtractorMap,i=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),rue(i)},t.prototype.extractParams=function(n){var r=1539,o=n.slice(0,n.length-r),i=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(i)},t}(xi),SN=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcess=function(n,r,o){var i=o.map(function(s){var u=s.width,l=s.height,c=r/Math.max(l,u);return{width:u*c,height:l*c}}),a=i.length;return ie(function(){var s=function(f,h){return pr([Mo([68],f),Mo([68],h)],1).as2D(1,136).as1D()},u=function(f,h){var p=i[f],v=p.width,y=p.height;return h(v,y)?Math.abs(v-y)/2:0},l=function(f){return u(f,function(h,p){return h<p})},c=function(f){return u(f,function(h,p){return p<h})},d=n.mul(Mo([a,136],r)).sub(pr(Array.from(Array(a),function(f,h){return s(l(h),c(h))}))).div(pr(Array.from(Array(a),function(f,h){return s(i[h].width,i[h].height)})));return d})},t.prototype.forwardInput=function(n){var r=this;return ie(function(){var o=r.runNet(n);return r.postProcess(o,n.inputSize,n.inputDimensions.map(function(i){var a=i[0],s=i[1];return{height:a,width:s}}))})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.detectLandmarks=function(n){return he(this,void 0,void 0,function(){var r,o,i,a=this;return pe(this,function(s){switch(s.label){case 0:return[4,Kt(n)];case 1:return r=s.sent(),o=ie(function(){return Bt(a.forwardInput(r))}),[4,Promise.all(o.map(function(u,l){return he(a,void 0,void 0,function(){var c,d,f,h,p;return pe(this,function(v){switch(v.label){case 0:return f=(d=Array).from,[4,u.data()];case 1:return c=f.apply(d,[v.sent()]),h=c.filter(function(y,m){return ak(m)}),p=c.filter(function(y,m){return!ak(m)}),[2,new Mse(Array(68).fill(0).map(function(y,m){return new qe(h[m],p[m])}),{height:r.getInputHeight(l),width:r.getInputWidth(l)})]}})})}))];case 2:return i=s.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(bN),CN=function(e){Ce(t,e);function t(n){return n===void 0&&(n=new gN),e.call(this,"FaceLandmark68Net",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(SN);function iue(e){var t=[],n=mN(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return wi(e,t),{params:r,paramMappings:t}}function aue(e){var t=[],n=Si(e),r=n.extractWeights,o=n.getRemainingWeights,i=pN(r,t).extractDenseBlock3Params,a=i(3,32,"dense0",!0),s=i(32,64,"dense1"),u=i(64,128,"dense2");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:a,dense1:s,dense2:u}}}var sue=function(e){Ce(t,e);function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return ie(function(){var o=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],a=Fd(o,i).div(re(255)),s=g0(a,r.dense0,!0);return s=g0(s,r.dense1),s=g0(s,r.dense2),s=Od(s,[14,14],[2,2],"valid"),s})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(n){return iue(n)},t.prototype.extractParams=function(n){return aue(n)},t}(xi),uue=function(e){Ce(t,e);function t(n){return n===void 0&&(n=new sue),e.call(this,"FaceLandmark68TinyNet",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(SN);(function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(CN);function lue(e,t){return Re(gn(e,t.weights),t.biases)}function Ew(e,t,n,r,o){o===void 0&&(o="same");var i=t.conv,a=i.filters,s=i.bias,u=Vr(e,a,n,o);return u=Re(u,s),u=lue(u,t.scale),r?pt(u):u}function cue(e,t){return Ew(e,t,[1,1],!0)}function _N(e,t){return Ew(e,t,[1,1],!1)}function EN(e,t){return Ew(e,t,[2,2],!0,"valid")}function due(e,t){function n(s,u,l){var c=e(s),d=c.length/(u*l*l);if(Cse(d))throw new Error("depth has to be an integer: "+d+", weights.length: "+c.length+", numFilters: "+u+", filterSize: "+l);return ie(function(){return sa(On(c,[u,d,l,l]),[2,3,1,0])})}function r(s,u,l,c){var d=n(s,u,l),f=It(e(u));return t.push({paramPath:c+"/filters"},{paramPath:c+"/bias"}),{filters:d,bias:f}}function o(s,u){var l=It(e(s)),c=It(e(s));return t.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:l,biases:c}}function i(s,u,l,c){var d=r(s,u,l,c+"/conv"),f=o(u,c+"/scale");return{conv:d,scale:f}}function a(s,u,l,c,d){d===void 0&&(d=!1);var f=i((d?.5:1)*s,u,l,c+"/conv1"),h=i(s,u,l,c+"/conv2");return{conv1:f,conv2:h}}return{extractConvLayerParams:i,extractResidualLayerParams:a}}function fue(e){var t=Si(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],i=due(n,o),a=i.extractConvLayerParams,s=i.extractResidualLayerParams,u=a(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),d=s(9216,32,3,"conv32_3"),f=s(36864,64,3,"conv64_down",!0),h=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),v=s(36864,64,3,"conv64_3"),y=s(147456,128,3,"conv128_down",!0),m=s(147456,128,3,"conv128_1"),g=s(147456,128,3,"conv128_2"),b=s(589824,256,3,"conv256_down",!0),x=s(589824,256,3,"conv256_1"),w=s(589824,256,3,"conv256_2"),S=s(589824,256,3,"conv256_down_out"),C=ie(function(){return sa(ea(n(256*128),[128,256]),[1,0])});if(o.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var _={conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:d,conv64_down:f,conv64_1:h,conv64_2:p,conv64_3:v,conv128_down:y,conv128_1:m,conv128_2:g,conv256_down:b,conv256_1:x,conv256_2:w,conv256_down_out:S,fc:C};return{params:_,paramMappings:o}}function hue(e,t){var n=ma(e,t);function r(a){var s=n(a+"/scale/weights",1),u=n(a+"/scale/biases",1);return{weights:s,biases:u}}function o(a){var s=n(a+"/conv/filters",4),u=n(a+"/conv/bias",1),l=r(a);return{conv:{filters:s,bias:u},scale:l}}function i(a){return{conv1:o(a+"/conv1"),conv2:o(a+"/conv2")}}return{extractConvLayerParams:o,extractResidualLayerParams:i}}function pue(e){var t=[],n=hue(e,t),r=n.extractConvLayerParams,o=n.extractResidualLayerParams,i=r("conv32_down"),a=o("conv32_1"),s=o("conv32_2"),u=o("conv32_3"),l=o("conv64_down"),c=o("conv64_1"),d=o("conv64_2"),f=o("conv64_3"),h=o("conv128_down"),p=o("conv128_1"),v=o("conv128_2"),y=o("conv256_down"),m=o("conv256_1"),g=o("conv256_2"),b=o("conv256_down_out"),x=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!Sse(x))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+x);var w={conv32_down:i,conv32_1:a,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:d,conv64_3:f,conv128_down:h,conv128_1:p,conv128_2:v,conv256_down:y,conv256_1:m,conv256_2:g,conv256_down_out:b,fc:x};return wi(e,t),{params:w,paramMappings:t}}function uo(e,t){var n=cue(e,t.conv1);return n=_N(n,t.conv2),n=Re(n,e),n=pt(n),n}function jf(e,t){var n=EN(e,t.conv1);n=_N(n,t.conv2);var r=Od(e,2,2,"valid"),o=it(r.shape),i=r.shape[3]!==n.shape[3],a=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(a){var s=dc(n.shape);s[1]=1;var u=it(s);n=Ft([n,u],1);var l=dc(n.shape);l[2]=1;var c=it(l);n=Ft([n,c],2)}return r=i?Ft([r,o],3):r,n=Re(r,n),n=pt(n),n}var vue=function(e){Ce(t,e);function t(){return e.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return ie(function(){var o=n.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],a=Fd(o,i).div(re(256)),s=EN(a,r.conv32_down);s=Ut(s,3,2,"valid"),s=uo(s,r.conv32_1),s=uo(s,r.conv32_2),s=uo(s,r.conv32_3),s=jf(s,r.conv64_down),s=uo(s,r.conv64_1),s=uo(s,r.conv64_2),s=uo(s,r.conv64_3),s=jf(s,r.conv128_down),s=uo(s,r.conv128_1),s=uo(s,r.conv128_2),s=jf(s,r.conv256_down),s=uo(s,r.conv256_1),s=uo(s,r.conv256_2),s=jf(s,r.conv256_down_out);var u=s.mean([1,2]),l=em(u,r.fc);return l})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.computeFaceDescriptor=function(n){return he(this,void 0,void 0,function(){var r,o,i,a=this;return pe(this,function(s){switch(s.label){case 0:return[4,Kt(n)];case 1:return r=s.sent(),o=ie(function(){return Bt(a.forwardInput(r))}),[4,Promise.all(o.map(function(u){return u.data()}))];case 2:return i=s.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(n){return pue(n)},t.prototype.extractParams=function(n){return fue(n)},t}(xi);function kN(e,t){var n={descriptor:t};return Object.assign({},e,n)}function TN(e,t){var n={age:t};return Object.assign({},e,n)}function RN(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var PN=function(){function e(t){var n=t===void 0?{}:t,r=n.minFaceSize,o=n.scaleFactor,i=n.maxNumScales,a=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=o||.709,this._maxNumScales=i||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function mue(e,t){function n(u,l){var c=On(e(9*u),[3,3,u,1]),d=It(e(u)),f=It(e(u)),h=It(e(u)),p=It(e(u));return t.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:c,batch_norm_scale:d,batch_norm_offset:f,batch_norm_mean:h,batch_norm_variance:p}}function r(u,l,c,d,f){var h=On(e(u*l*c*c),[c,c,u,l]),p=It(e(l));return t.push({paramPath:d+"/filters"},{paramPath:d+"/"+(f?"batch_norm_offset":"bias")}),{filters:h,bias:p}}function o(u,l,c,d){var f=r(u,l,c,d,!0),h=f.filters,p=f.bias;return{filters:h,batch_norm_offset:p}}function i(u,l,c){var d=n(u,c+"/depthwise_conv"),f=o(u,l,1,c+"/pointwise_conv");return{depthwise_conv:d,pointwise_conv:f}}function a(){var u=o(3,32,3,"mobilenetv1/conv_0"),l=i(32,64,"mobilenetv1/conv_1"),c=i(64,128,"mobilenetv1/conv_2"),d=i(128,128,"mobilenetv1/conv_3"),f=i(128,256,"mobilenetv1/conv_4"),h=i(256,256,"mobilenetv1/conv_5"),p=i(256,512,"mobilenetv1/conv_6"),v=i(512,512,"mobilenetv1/conv_7"),y=i(512,512,"mobilenetv1/conv_8"),m=i(512,512,"mobilenetv1/conv_9"),g=i(512,512,"mobilenetv1/conv_10"),b=i(512,512,"mobilenetv1/conv_11"),x=i(512,1024,"mobilenetv1/conv_12"),w=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:l,conv_2:c,conv_3:d,conv_4:f,conv_5:h,conv_6:p,conv_7:v,conv_8:y,conv_9:m,conv_10:g,conv_11:b,conv_12:x,conv_13:w}}function s(){var u=o(1024,256,1,"prediction_layer/conv_0"),l=o(256,512,3,"prediction_layer/conv_1"),c=o(512,128,1,"prediction_layer/conv_2"),d=o(128,256,3,"prediction_layer/conv_3"),f=o(256,128,1,"prediction_layer/conv_4"),h=o(128,256,3,"prediction_layer/conv_5"),p=o(256,64,1,"prediction_layer/conv_6"),v=o(64,128,3,"prediction_layer/conv_7"),y=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),m=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),g=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),b=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),x=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),w=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),S=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),C=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),_=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),k=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),E=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),A=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),D={box_encoding_predictor:y,class_predictor:m},U={box_encoding_predictor:g,class_predictor:b},H={box_encoding_predictor:x,class_predictor:w},B={box_encoding_predictor:S,class_predictor:C},V={box_encoding_predictor:_,class_predictor:k},M={box_encoding_predictor:E,class_predictor:A};return{conv_0:u,conv_1:l,conv_2:c,conv_3:d,conv_4:f,conv_5:h,conv_6:p,conv_7:v,box_predictor_0:D,box_predictor_1:U,box_predictor_2:H,box_predictor_3:B,box_predictor_4:V,box_predictor_5:M}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:s}}function gue(e){var t=[],n=Si(e),r=n.extractWeights,o=n.getRemainingWeights,i=mue(r,t),a=i.extractMobilenetV1Params,s=i.extractPredictionLayerParams,u=a(),l=s(),c=Wx(r(5118*4),[1,5118,4]),d={extra_dim:c};if(t.push({paramPath:"output_layer/extra_dim"}),o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:d},paramMappings:t}}function yue(e,t){var n=ma(e,t);function r(l,c,d){var f=n(l+"/Conv2d_"+c+"_pointwise/weights",4,d+"/filters"),h=n(l+"/Conv2d_"+c+"_pointwise/convolution_bn_offset",1,d+"/batch_norm_offset");return{filters:f,batch_norm_offset:h}}function o(l){var c="mobilenetv1/conv_"+l,d="MobilenetV1/Conv2d_"+l+"_depthwise",f=c+"/depthwise_conv",h=c+"/pointwise_conv",p=n(d+"/depthwise_weights",4,f+"/filters"),v=n(d+"/BatchNorm/gamma",1,f+"/batch_norm_scale"),y=n(d+"/BatchNorm/beta",1,f+"/batch_norm_offset"),m=n(d+"/BatchNorm/moving_mean",1,f+"/batch_norm_mean"),g=n(d+"/BatchNorm/moving_variance",1,f+"/batch_norm_variance");return{depthwise_conv:{filters:p,batch_norm_scale:v,batch_norm_offset:y,batch_norm_mean:m,batch_norm_variance:g},pointwise_conv:r("MobilenetV1",l,h)}}function i(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}}function a(l,c){var d=n(l+"/weights",4,c+"/filters"),f=n(l+"/biases",1,c+"/bias");return{filters:d,bias:f}}function s(l){var c=a("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),d=a("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:c,class_predictor:d}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:u}}function bue(e){var t=[],n=yue(e,t),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!om(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var a={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:i}};return wi(e,t),{params:a,paramMappings:t}}function co(e,t,n){return ie(function(){var r=Vr(e,t.filters,n,"same");return r=Re(r,t.batch_norm_offset),Jx(r,0,6)})}var xue=.0010000000474974513;function wue(e,t,n){return ie(function(){var r=Zv(e,t.filters,n,"same");return r=CO(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,xue),Jx(r,0,6)})}function Sue(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}function Cue(e,t){return ie(function(){var n=null,r=co(e,t.conv_0,[2,2]),o=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(o.forEach(function(i,a){var s=a+1,u=Sue(s);r=wue(r,i.depthwise_conv,u),r=co(r,i.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function _ue(e,t,n,r,o){var i=e.shape[0],a=Math.min(n,i),s=t.map(function(c,d){return{score:c,boxIndex:d}}).filter(function(c){return c.score>o}).sort(function(c,d){return d.score-c.score}),u=function(c){return c<=r?1:0},l=[];return s.forEach(function(c){if(!(l.length>=a)){for(var d=c.score,f=l.length-1;f>=0;--f){var h=Eue(e,c.boxIndex,l[f]);if(h!==0&&(c.score*=u(h),c.score<=o))break}d===c.score&&l.push(c.boxIndex)}}),l}function Eue(e,t,n){var r=e.arraySync(),o=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),a=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),d=Math.max(r[n][1],r[n][3]),f=(a-o)*(s-i),h=(c-u)*(d-l);if(f<=0||h<=0)return 0;var p=Math.max(o,u),v=Math.max(i,l),y=Math.min(a,c),m=Math.min(s,d),g=Math.max(y-p,0)*Math.max(m-v,0);return g/(f+h-g)}function kue(e){var t=Bt(sa(e,[1,0])),n=[$t(t[2],t[0]),$t(t[3],t[1])],r=[Re(t[0],Yr(n[0],re(2))),Re(t[1],Yr(n[1],re(2)))];return{sizes:n,centers:r}}function Tue(e,t){var n=kue(e),r=n.sizes,o=n.centers,i=Bt(sa(t,[1,0])),a=Yr(gn(y1(Yr(i[2],re(5))),r[0]),re(2)),s=Re(gn(Yr(i[0],re(10)),r[0]),o[0]),u=Yr(gn(y1(Yr(i[3],re(5))),r[1]),re(2)),l=Re(gn(Yr(i[1],re(10)),r[1]),o[1]);return sa(pr([$t(s,a),$t(l,u),Re(s,a),Re(l,u)]),[1,0])}function Rue(e,t,n){return ie(function(){var r=e.shape[0],o=Tue(Zr(yu(n.extra_dim,[r,1,1]),[-1,4]),Zr(e,[-1,4]));o=Zr(o,[r,o.shape[0]/r,4]);var i=bO(No(t,[0,0,1],[-1,-1,-1])),a=No(i,[0,0,0],[-1,-1,1]);a=Zr(a,[r,a.shape[1]]);var s=Bt(o),u=Bt(a);return{boxes:s,scores:u}})}function Ts(e,t){return ie(function(){var n=e.shape[0],r=Zr(no(e,t.box_encoding_predictor),[n,-1,1,4]),o=Zr(no(e,t.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:o}})}function Pue(e,t,n){return ie(function(){var r=co(e,n.conv_0,[1,1]),o=co(r,n.conv_1,[2,2]),i=co(o,n.conv_2,[1,1]),a=co(i,n.conv_3,[2,2]),s=co(a,n.conv_4,[1,1]),u=co(s,n.conv_5,[2,2]),l=co(u,n.conv_6,[1,1]),c=co(l,n.conv_7,[2,2]),d=Ts(t,n.box_predictor_0),f=Ts(e,n.box_predictor_1),h=Ts(o,n.box_predictor_2),p=Ts(a,n.box_predictor_3),v=Ts(u,n.box_predictor_4),y=Ts(c,n.box_predictor_5),m=Ft([d.boxPredictionEncoding,f.boxPredictionEncoding,h.boxPredictionEncoding,p.boxPredictionEncoding,v.boxPredictionEncoding,y.boxPredictionEncoding],1),g=Ft([d.classPrediction,f.classPrediction,h.classPrediction,p.classPrediction,v.classPrediction,y.classPrediction],1);return{boxPredictions:m,classPredictions:g}})}var um=function(){function e(t){var n=t===void 0?{}:t,r=n.minConfidence,o=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=o||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),IN=function(e){Ce(t,e);function t(){return e.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return ie(function(){var o=n.toBatchTensor(512,!1).toFloat(),i=$t(gn(o,re(.007843137718737125)),re(1)),a=Cue(i,r.mobilenetv1),s=Pue(a.out,a.conv11,r.prediction_layer),u=s.boxPredictions,l=s.classPredictions;return Rue(u,l,r.output_layer)})},t.prototype.forward=function(n){return he(this,void 0,void 0,function(){var r;return pe(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),he(this,void 0,void 0,function(){var o,i,a,s,u,l,c,d,f,h,p,v,y,m,g,b,x,w,S,C,_;return pe(this,function(k){switch(k.label){case 0:return o=new um(r),i=o.maxResults,a=o.minConfidence,[4,Kt(n)];case 1:for(s=k.sent(),u=this.forwardInput(s),l=u.boxes,c=u.scores,d=l[0],f=c[0],h=1;h<l.length;h++)l[h].dispose(),c[h].dispose();return y=(v=Array).from,[4,f.data()];case 2:return p=y.apply(v,[k.sent()]),m=.5,g=_ue(d,p,i,m,a),b=s.getReshapedInputDimensions(0),x=s.inputSize,w=x/b.width,S=x/b.height,C=d.arraySync(),_=g.map(function(E){var A=[Math.max(0,C[E][0]),Math.min(1,C[E][2])].map(function(M){return M*S}),D=A[0],U=A[1],H=[Math.max(0,C[E][1]),Math.min(1,C[E][3])].map(function(M){return M*w}),B=H[0],V=H[1];return new Uo(p[E],new vw(B,D,V-B,U-D),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),d.dispose(),f.dispose(),[2,_]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(n){return bue(n)},t.prototype.extractParams=function(n){return gue(n)},t}(xi);(function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(IN);var Iue=.4,Aue=[new qe(.738768,.874946),new qe(2.42204,2.65704),new qe(4.30971,7.04493),new qe(10.246,4.59428),new qe(12.6868,11.8741)],Due=[new qe(1.603231,2.094468),new qe(6.041143,7.080126),new qe(2.882459,3.518061),new qe(4.266906,5.178857),new qe(9.041765,10.66308)],Mue=[117.001,114.697,97.404],Oue="tiny_yolov2_model",Nue="tiny_yolov2_separable_conv_model",Uf=function(e){return typeof e=="number"};function Fue(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!Uf(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return Uf(t.x)&&Uf(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(Uf)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function kw(e){return ie(function(){var t=gn(e,re(.10000000149011612));return Re(pt($t(e,t)),t)})}function Ai(e,t){return ie(function(){var n=cs(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Vr(n,t.conv.filters,[1,1],"valid"),n=$t(n,t.bn.sub),n=gn(n,t.bn.truediv),n=Re(n,t.conv.bias),kw(n)})}function Di(e,t){return ie(function(){var n=cs(e,[[0,0],[1,1],[1,1],[0,0]]);return n=nw(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=Re(n,t.bias),kw(n)})}function Bue(e,t){var n=sm(e,t);function r(a,s){var u=It(e(a)),l=It(e(a));return t.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:u,truediv:l}}function o(a,s,u){var l=n(a,s,3,u+"/conv"),c=r(s,u+"/bn");return{conv:l,bn:c}}var i=Sw(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:o,extractSeparableConvParams:i}}function Lue(e,t,n,r){var o=Si(e),i=o.extractWeights,a=o.getRemainingWeights,s=[],u=Bue(i,s),l=u.extractConvParams,c=u.extractConvWithBatchNormParams,d=u.extractSeparableConvParams,f;if(t.withSeparableConvs){var h=r[0],p=r[1],v=r[2],y=r[3],m=r[4],g=r[5],b=r[6],x=r[7],w=r[8],S=t.isFirstLayerConv2d?l(h,p,3,"conv0"):d(h,p,"conv0"),C=d(p,v,"conv1"),_=d(v,y,"conv2"),k=d(y,m,"conv3"),E=d(m,g,"conv4"),A=d(g,b,"conv5"),D=x?d(b,x,"conv6"):void 0,U=w?d(x,w,"conv7"):void 0,H=l(w||x||b,5*n,1,"conv8");f={conv0:S,conv1:C,conv2:_,conv3:k,conv4:E,conv5:A,conv6:D,conv7:U,conv8:H}}else{var h=r[0],p=r[1],v=r[2],y=r[3],m=r[4],g=r[5],b=r[6],x=r[7],w=r[8],S=c(h,p,"conv0"),C=c(p,v,"conv1"),_=c(v,y,"conv2"),k=c(y,m,"conv3"),E=c(m,g,"conv4"),A=c(g,b,"conv5"),D=c(b,x,"conv6"),U=c(x,w,"conv7"),H=l(w,5*n,1,"conv8");f={conv0:S,conv1:C,conv2:_,conv3:k,conv4:E,conv5:A,conv6:D,conv7:U,conv8:H}}if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:f,paramMappings:s}}function $ue(e,t){var n=ma(e,t);function r(s){var u=n(s+"/sub",1),l=n(s+"/truediv",1);return{sub:u,truediv:l}}function o(s){var u=n(s+"/filters",4),l=n(s+"/bias",1);return{filters:u,bias:l}}function i(s){var u=o(s+"/conv"),l=r(s+"/bn");return{conv:u,bn:l}}var a=Cw(n);return{extractConvParams:o,extractConvWithBatchNormParams:i,extractSeparableConvParams:a}}function zue(e,t){var n=[],r=$ue(e,n),o=r.extractConvParams,i=r.extractConvWithBatchNormParams,a=r.extractSeparableConvParams,s;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;s={conv0:t.isFirstLayerConv2d?o("conv0"):a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:u>7?a("conv6"):void 0,conv7:u>8?a("conv7"):void 0,conv8:o("conv8")}}else s={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:o("conv8")};return wi(e,n),{params:s,paramMappings:n}}var pk;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(pk||(pk={}));var Tw=function(){function e(t){var n=t===void 0?{}:t,r=n.inputSize,o=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=o||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),AN=function(e){Ce(t,e);function t(n){var r=e.call(this,"TinyYolov2")||this;return Fue(n),r._config=n,r}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(n,r){var o=Ai(n,r.conv0);return o=Ut(o,[2,2],[2,2],"same"),o=Ai(o,r.conv1),o=Ut(o,[2,2],[2,2],"same"),o=Ai(o,r.conv2),o=Ut(o,[2,2],[2,2],"same"),o=Ai(o,r.conv3),o=Ut(o,[2,2],[2,2],"same"),o=Ai(o,r.conv4),o=Ut(o,[2,2],[2,2],"same"),o=Ai(o,r.conv5),o=Ut(o,[2,2],[1,1],"same"),o=Ai(o,r.conv6),o=Ai(o,r.conv7),no(o,r.conv8,"valid",!1)},t.prototype.runMobilenet=function(n,r){var o=this.config.isFirstLayerConv2d?kw(no(n,r.conv0,"valid",!1)):Di(n,r.conv0);return o=Ut(o,[2,2],[2,2],"same"),o=Di(o,r.conv1),o=Ut(o,[2,2],[2,2],"same"),o=Di(o,r.conv2),o=Ut(o,[2,2],[2,2],"same"),o=Di(o,r.conv3),o=Ut(o,[2,2],[2,2],"same"),o=Di(o,r.conv4),o=Ut(o,[2,2],[2,2],"same"),o=Di(o,r.conv5),o=Ut(o,[2,2],[1,1],"same"),o=r.conv6?Di(o,r.conv6):o,o=r.conv7?Di(o,r.conv7):o,no(o,r.conv8,"valid",!1)},t.prototype.forwardInput=function(n,r){var o=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return ie(function(){var a=n.toBatchTensor(r,!1).toFloat();return a=o.config.meanRgb?Fd(a,o.config.meanRgb):a,a=a.div(re(256)),o.config.withSeparableConvs?o.runMobilenet(a,i):o.runTinyYolov2(a,i)})},t.prototype.forward=function(n,r){return he(this,void 0,void 0,function(){var o;return pe(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,Kt(n)];case 1:return[4,o.apply(this,[i.sent(),r])];case 2:return[2,i.sent()]}})})},t.prototype.detect=function(n,r){return r===void 0&&(r={}),he(this,void 0,void 0,function(){var o,i,a,s,u,l,c,d,f,h,p,v,y,m,g=this;return pe(this,function(b){switch(b.label){case 0:return o=new Tw(r),i=o.inputSize,a=o.scoreThreshold,[4,Kt(n)];case 1:return s=b.sent(),[4,this.forwardInput(s,i)];case 2:return u=b.sent(),l=ie(function(){return Bt(u)[0].expandDims()}),c={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(l,s.getReshapedInputDimensions(0),a)];case 3:return d=b.sent(),u.dispose(),l.dispose(),f=d.map(function(x){return x.box}),h=d.map(function(x){return x.score}),p=d.map(function(x){return x.classScore}),v=d.map(function(x){return g.config.classes[x.label]}),y=nd(f.map(function(x){return x.rescale(i)}),h,this.config.iouThreshold,!0),m=y.map(function(x){return new rN(h[x],p[x],v[x],f[x],c)}),[2,m]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(n){return zue(n,this.config)},t.prototype.extractParams=function(n){var r=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,o=r?r.length:void 0;if(o!==7&&o!==8&&o!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+o+" filterSizes in config");return Lue(n,this.config,this.boxEncodingSize,r)},t.prototype.extractBoxes=function(n,r,o){return he(this,void 0,void 0,function(){var i,a,s,u,l,c,d,f,h,p,v,y,m,g,b,x,w,S,C,_,k,E,A,D,U,H,B,V,M,O=this;return pe(this,function(F){switch(F.label){case 0:return i=r.width,a=r.height,s=Math.max(i,a),u=s/i,l=s/a,c=n.shape[1],d=this.config.anchors.length,f=ie(function(){var $=n.reshape([c,c,d,O.boxEncodingSize]),G=$.slice([0,0,0,0],[c,c,d,4]),Q=$.slice([0,0,0,4],[c,c,d,1]),J=O.withClassScores?yi($.slice([0,0,0,5],[c,c,d,O.config.classes.length]),3):re(0);return[G,Q,J]}),h=f[0],p=f[1],v=f[2],y=[],[4,p.array()];case 1:return m=F.sent(),[4,h.array()];case 2:g=F.sent(),b=0,F.label=3;case 3:if(!(b<c))return[3,12];x=0,F.label=4;case 4:if(!(x<c))return[3,11];w=0,F.label=5;case 5:return w<d?(S=m0(m[b][x][w][0]),!o||S>o?(C=(x+m0(g[b][x][w][0]))/c*u,_=(b+m0(g[b][x][w][1]))/c*l,k=Math.exp(g[b][x][w][2])*this.config.anchors[w].x/c*u,E=Math.exp(g[b][x][w][3])*this.config.anchors[w].y/c*l,A=C-k/2,D=_-E/2,U={row:b,col:x,anchor:w},this.withClassScores?[4,this.extractPredictedClass(v,U)]:[3,7]):[3,9]):[3,10];case 6:return M=F.sent(),[3,8];case 7:M={classScore:1,label:0},F.label=8;case 8:H=M,B=H.classScore,V=H.label,y.push(pn({box:new im(A,D,A+k,D+E),score:S,classScore:S*B,label:V},U)),F.label=9;case 9:return w++,[3,5];case 10:return x++,[3,4];case 11:return b++,[3,3];case 12:return h.dispose(),p.dispose(),v.dispose(),[2,y]}})})},t.prototype.extractPredictedClass=function(n,r){return he(this,void 0,void 0,function(){var o,i,a,s;return pe(this,function(u){switch(u.label){case 0:return o=r.row,i=r.col,a=r.anchor,[4,n.array()];case 1:return s=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,c){return s[o][i][a][c]}).map(function(l,c){return{classScore:l,label:c}}).reduce(function(l,c){return l.classScore>c.classScore?l:c})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(xi),Wue=function(e){Ce(t,e);function t(n){n===void 0&&(n=!0);var r=this,o=Object.assign({},{withSeparableConvs:n,iouThreshold:Iue,classes:["face"]},n?{anchors:Due,meanRgb:Mue}:{anchors:Aue,withClassScores:!0});return r=e.call(this,o)||this,r}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return he(this,void 0,void 0,function(){var o;return pe(this,function(i){switch(i.label){case 0:return[4,this.detect(n,r)];case 1:return o=i.sent(),[2,o.map(function(a){return new Uo(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?Nue:Oue},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t}(AN),DN=function(e){Ce(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return t}(Tw),Bd=function(){function e(){}return e.prototype.then=function(t){return he(this,void 0,void 0,function(){var n;return pe(this,function(r){switch(r.label){case 0:return n=t,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},e.prototype.run=function(){return he(this,void 0,void 0,function(){return pe(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e}();function lm(e,t,n,r,o){return o===void 0&&(o=function(i){var a=i.alignedRect;return a}),he(this,void 0,void 0,function(){var i,a,s,u,l;return pe(this,function(c){switch(c.label){case 0:return i=e.map(function(d){return Xse(d)?o(d):d.detection}),s=r,s?[3,5]:t instanceof ft?[4,xw(t,i)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,bw(t,i)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return a=s,[4,n(a)];case 6:return l=c.sent(),a.forEach(function(d){return d instanceof ft&&d.dispose()}),[2,l]}})})}function Rw(e,t,n,r,o){return he(this,void 0,void 0,function(){var i=this;return pe(this,function(a){return[2,lm([e],t,function(s){return he(i,void 0,void 0,function(){return pe(this,function(u){return[2,n(s[0])]})})},r,o)]})})}function Vue(e){return ie(function(){return pr(Bt(e,3).reverse(),3)})}var Hf=2,jp=12;function jue(e,t){var n=sm(e,t),r=ww(e,t);function o(l,c){var d=It(e(l));return t.push({paramPath:c}),d}function i(l,c,d){d===void 0&&(d=!1);var f=n(l[0],l[1],3,c+"/conv1"),h=o(l[1],c+"/prelu1_alpha"),p=n(l[1],l[2],3,c+"/conv2"),v=o(l[2],c+"/prelu2_alpha"),y=n(l[2],l[3],d?2:3,c+"/conv3"),m=o(l[3],c+"/prelu3_alpha");return{conv1:f,prelu1_alpha:h,conv2:p,prelu2_alpha:v,conv3:y,prelu3_alpha:m}}function a(){var l=i([3,10,16,32],"pnet"),c=n(32,2,1,"pnet/conv4_1"),d=n(32,4,1,"pnet/conv4_2");return pn(pn({},l),{conv4_1:c,conv4_2:d})}function s(){var l=i([3,28,48,64],"rnet",!0),c=r(576,128,"rnet/fc1"),d=o(128,"rnet/prelu4_alpha"),f=r(128,2,"rnet/fc2_1"),h=r(128,4,"rnet/fc2_2");return pn(pn({},l),{fc1:c,prelu4_alpha:d,fc2_1:f,fc2_2:h})}function u(){var l=i([3,32,64,64],"onet"),c=n(64,128,2,"onet/conv4"),d=o(128,"onet/prelu4_alpha"),f=r(1152,256,"onet/fc1"),h=o(256,"onet/prelu5_alpha"),p=r(256,2,"onet/fc2_1"),v=r(256,4,"onet/fc2_2"),y=r(256,10,"onet/fc2_3");return pn(pn({},l),{conv4:c,prelu4_alpha:d,fc1:f,prelu5_alpha:h,fc2_1:p,fc2_2:v,fc2_3:y})}return{extractPNetParams:a,extractRNetParams:s,extractONetParams:u}}function Uue(e){var t=Si(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],i=jue(n,o),a=i.extractPNetParams,s=i.extractRNetParams,u=i.extractONetParams,l=a(),c=s(),d=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:d},paramMappings:o}}function Hue(e,t){var n=ma(e,t);function r(c){var d=n(c+"/weights",4,c+"/filters"),f=n(c+"/bias",1);return{filters:d,bias:f}}function o(c){var d=n(c+"/weights",2),f=n(c+"/bias",1);return{weights:d,bias:f}}function i(c){return n(c,1)}function a(c){var d=r(c+"/conv1"),f=i(c+"/prelu1_alpha"),h=r(c+"/conv2"),p=i(c+"/prelu2_alpha"),v=r(c+"/conv3"),y=i(c+"/prelu3_alpha");return{conv1:d,prelu1_alpha:f,conv2:h,prelu2_alpha:p,conv3:v,prelu3_alpha:y}}function s(){var c=a("pnet"),d=r("pnet/conv4_1"),f=r("pnet/conv4_2");return pn(pn({},c),{conv4_1:d,conv4_2:f})}function u(){var c=a("rnet"),d=o("rnet/fc1"),f=i("rnet/prelu4_alpha"),h=o("rnet/fc2_1"),p=o("rnet/fc2_2");return pn(pn({},c),{fc1:d,prelu4_alpha:f,fc2_1:h,fc2_2:p})}function l(){var c=a("onet"),d=r("onet/conv4"),f=i("onet/prelu4_alpha"),h=o("onet/fc1"),p=i("onet/prelu5_alpha"),v=o("onet/fc2_1"),y=o("onet/fc2_2"),m=o("onet/fc2_3");return pn(pn({},c),{conv4:d,prelu4_alpha:f,fc1:h,prelu5_alpha:p,fc2_1:v,fc2_2:y,fc2_3:m})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:l}}function Gue(e){var t=[],n=Hue(e,t),r=n.extractPNetParams,o=n.extractRNetParams,i=n.extractONetParams,a=r(),s=o(),u=i();return wi(e,t),{params:{pnet:a,rnet:s,onet:u},paramMappings:t}}function k1(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}function que(e,t,n){for(var r=n[0],o=n[1],i=jp/e,a=[],s=Math.min(r,o)*i,u=0;s>=12;)a.push(i*Math.pow(t,u)),s=s*t,u+=1;return a}var Pw=function(e){Ce(t,e);function t(n,r,o,i){return e.call(this,{left:n,top:r,right:o,bottom:i},!0)||this}return t}(ua);function MN(e){return ie(function(){return gn($t(e,re(127.5)),re(.0078125))})}function _u(e,t){return ie(function(){return Re(pt(e),gn(t,Fp(pt(Fp(e)))))})}function Iw(e,t,n){return n===void 0&&(n=!1),ie(function(){var r=no(e,t.conv1,"valid");return r=_u(r,t.prelu1_alpha),r=Ut(r,n?[2,2]:[3,3],[2,2],"same"),r=no(r,t.conv2,"valid"),r=_u(r,t.prelu2_alpha),r=n?r:Ut(r,[3,3],[2,2],"valid"),r=no(r,t.conv3,"valid"),r=_u(r,t.prelu3_alpha),r})}function Kue(e,t){return ie(function(){var n=Iw(e,t,!0),r=no(n,t.conv4_1,"valid"),o=Pr(tm(r,3),3),i=yi($t(r,o),3),a=no(n,t.conv4_2,"valid");return{prob:i,regions:a}})}function Xue(e,t){return ie(function(){var n=k1(t,e.shape.slice(1)),r=n.height,o=n.width,i=sw.resizeBilinear(e,[r,o]),a=MN(i);return sa(a,[0,2,1,3])})}function Yue(e,t,n,r){for(var o=[],i=e.arraySync(),a=0;a<e.shape[0];a++)for(var s=0;s<e.shape[1];s++)i[a][s]>=r&&o.push(new qe(s,a));var u=o.map(function(l){var c=new im(Math.round((l.y*Hf+1)/n),Math.round((l.x*Hf+1)/n),Math.round((l.y*Hf+jp)/n),Math.round((l.x*Hf+jp)/n)),d=i[l.y][l.x],f=t.arraySync(),h=new Pw(f[l.y][l.x][0],f[l.y][l.x][1],f[l.y][l.x][2],f[l.y][l.x][3]);return{cell:c,score:d,region:h}});return u}function Que(e,t,n,r,o){o.stage1=[];var i=t.map(function(f){return ie(function(){var h={scale:f},p=Xue(e,f),v=Date.now(),y=Kue(p,r),m=y.prob,g=y.regions;h.pnet=Date.now()-v;var b=Bt(Bt(m,3)[1])[0],x=Bt(g)[0];return{scoresTensor:b,regionsTensor:x,scale:f,statsForScale:h}})}),a=i.map(function(f){var h=f.scoresTensor,p=f.regionsTensor,v=f.scale,y=f.statsForScale,m=Yue(h,p,v,n);if(h.dispose(),p.dispose(),!m.length)return o.stage1.push(y),[];var g=Date.now(),b=nd(m.map(function(x){return x.cell}),m.map(function(x){return x.score}),.5);return y.nms=Date.now()-g,y.numBoxes=b.length,o.stage1.push(y),b.map(function(x){return m[x]})}),s=a.reduce(function(f,h){return f.concat(h)},[]),u=[],l=[];if(s.length>0){var c=Date.now(),d=nd(s.map(function(f){return f.cell}),s.map(function(f){return f.score}),.7);o.stage1_nms=Date.now()-c,l=d.map(function(f){return s[f].score}),u=d.map(function(f){return s[f]}).map(function(f){var h=f.cell,p=f.region;return new im(h.left+p.left*h.width,h.top+p.top*h.height,h.right+p.right*h.width,h.bottom+p.bottom*h.height).toSquare().round()})}return{boxes:u,scores:l}}function ON(e,t,n){var r=n.width,o=n.height;return he(this,void 0,void 0,function(){var i,a,s,u=this;return pe(this,function(l){switch(l.label){case 0:return i=ns(e),[4,Promise.all(t.map(function(c){return he(u,void 0,void 0,function(){var d,f,h,p,v,y,m,g;return pe(this,function(b){return d=c.padAtBorders(e.height,e.width),f=d.y,h=d.ey,p=d.x,v=d.ex,y=p-1,m=f-1,g=i.getImageData(y,m,v-y,h-m),[2,bn.isNodejs()?yw(g):createImageBitmap(g)]})})}))];case 1:return a=l.sent(),s=[],a.forEach(function(c){var d=am({width:r,height:o}),f=ns(d);f.drawImage(c,0,0,r,o);for(var h=f.getImageData(0,0,r,o).data,p=[],v=0;v<h.length;v+=4)p.push(h[v+2]),p.push(h[v+1]),p.push(h[v]);s.push(p)}),[2,s.map(function(c){var d=ie(function(){var f=sa(On(c,[1,r,o,3]),[0,2,1,3]).toFloat();return MN(f)});return d})]}})})}function Jue(e,t){return ie(function(){var n=Iw(e,t),r=Zr(n,[n.shape[0],t.fc1.weights.shape[0]]),o=_o(r,t.fc1),i=_u(o,t.prelu4_alpha),a=_o(i,t.fc2_1),s=Pr(tm(a,1),1),u=yi($t(a,s),1),l=_o(i,t.fc2_2),c=Bt(u,1)[1];return{scores:c,regions:l}})}function Zue(e,t,n,r,o){return he(this,void 0,void 0,function(){var i,a,s,u,l,c,d,f,h,p,v,y,m,g;return pe(this,function(b){switch(b.label){case 0:return i=Date.now(),[4,ON(e,t,{width:24,height:24})];case 1:return a=b.sent(),o.stage2_extractImagePatches=Date.now()-i,i=Date.now(),s=a.map(function(x){var w=Jue(x,r);return x.dispose(),w}),o.stage2_rnet=Date.now()-i,u=s.length>1?Ft(s.map(function(x){return x.scores})):s[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[b.sent()]),u.dispose(),f=l.map(function(x,w){return{score:x,idx:w}}).filter(function(x){return x.score>n}).map(function(x){var w=x.idx;return w}),h=f.map(function(x){return t[x]}),p=f.map(function(x){return l[x]}),v=[],y=[],h.length>0&&(i=Date.now(),m=nd(h,p,.7),o.stage2_nms=Date.now()-i,g=m.map(function(x){var w=s[f[x]].regions.arraySync();return new Pw(w[0][0],w[0][1],w[0][2],w[0][3])}),y=m.map(function(x){return p[x]}),v=m.map(function(x,w){return h[x].calibrate(g[w])})),s.forEach(function(x){x.regions.dispose(),x.scores.dispose()}),[2,{boxes:v,scores:y}]}})})}function ele(e,t){return ie(function(){var n=Iw(e,t);n=Ut(n,[2,2],[2,2],"same"),n=no(n,t.conv4,"valid"),n=_u(n,t.prelu4_alpha);var r=Zr(n,[n.shape[0],t.fc1.weights.shape[0]]),o=_o(r,t.fc1),i=_u(o,t.prelu5_alpha),a=_o(i,t.fc2_1),s=Pr(tm(a,1),1),u=yi($t(a,s),1),l=_o(i,t.fc2_2),c=_o(i,t.fc2_3),d=Bt(u,1)[1];return{scores:d,regions:l,points:c}})}function tle(e,t,n,r,o){return he(this,void 0,void 0,function(){var i,a,s,u,l,c,d,f,h,p,v,y,m,g,b;return pe(this,function(x){switch(x.label){case 0:return i=Date.now(),[4,ON(e,t,{width:48,height:48})];case 1:return a=x.sent(),o.stage3_extractImagePatches=Date.now()-i,i=Date.now(),s=a.map(function(w){var S=ele(w,r);return w.dispose(),S}),o.stage3_onet=Date.now()-i,u=s.length>1?Ft(s.map(function(w){return w.scores})):s[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[x.sent()]),u.dispose(),f=l.map(function(w,S){return{score:w,idx:S}}).filter(function(w){return w.score>n}).map(function(w){var S=w.idx;return S}),h=f.map(function(w){var S=s[w].regions.arraySync();return new Pw(S[0][0],S[0][1],S[0][2],S[0][3])}),p=f.map(function(w,S){return t[w].calibrate(h[S])}),v=f.map(function(w){return l[w]}),y=[],m=[],g=[],p.length>0&&(i=Date.now(),b=nd(p,v,.7,!1),o.stage3_nms=Date.now()-i,y=b.map(function(w){return p[w]}),m=b.map(function(w){return v[w]}),g=b.map(function(w,S){return Array(5).fill(0).map(function(C,_){var k=s[w].points.arraySync();return new qe(k[0][_]*(y[S].width+1)+y[S].left,k[0][_+5]*(y[S].height+1)+y[S].top)})})),s.forEach(function(w){w.regions.dispose(),w.scores.dispose(),w.points.dispose()}),[2,{boxes:y,scores:m,points:g}]}})})}var nle=function(e){Ce(t,e);function t(){return e.call(this,"Mtcnn")||this}return t.prototype.load=function(n){return he(this,void 0,void 0,function(){return pe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,n)]})})},t.prototype.loadFromDisk=function(n){return he(this,void 0,void 0,function(){return pe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,n)]})})},t.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),he(this,void 0,void 0,function(){var o,i,a,s,u,l,c,d,f,h,p,v,y,m,g,b,x,w,S,C,_;return pe(this,function(k){switch(k.label){case 0:if(o=this.params,!o)throw new Error("Mtcnn - load model before inference");if(i=n.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},s=Date.now(),u=ie(function(){return Vue(Pr(hw.fromPixels(i)).toFloat())}),l=function(E){return u.dispose(),a.total=Date.now()-s,E},c=u.shape.slice(1),d=c[0],f=c[1],h=new PN(r),p=h.minFaceSize,v=h.scaleFactor,y=h.maxNumScales,m=h.scoreThresholds,g=h.scaleSteps,b=(g||que(p,v,[d,f])).filter(function(E){var A=k1(E,[d,f]);return Math.min(A.width,A.height)>jp}).slice(0,y),a.scales=b,a.pyramid=b.map(function(E){return k1(E,[d,f])}),x=Date.now(),[4,Que(u,b,m[0],o.pnet,a)];case 1:return w=k.sent(),a.total_stage1=Date.now()-x,w.boxes.length?(a.stage2_numInputBoxes=w.boxes.length,x=Date.now(),[4,Zue(i,w.boxes,m[1],o.rnet,a)]):[2,l({results:[],stats:a})];case 2:return S=k.sent(),a.total_stage2=Date.now()-x,S.boxes.length?(a.stage3_numInputBoxes=S.boxes.length,x=Date.now(),[4,tle(i,S.boxes,m[2],o.onet,a)]):[2,l({results:[],stats:a})];case 3:return C=k.sent(),a.total_stage3=Date.now()-x,_=C.boxes.map(function(E,A){return _w(mw({},new Uo(C.scores[A],new vw(E.left/f,E.top/d,E.width/f,E.height/d),{height:d,width:f})),new Dse(C.points[A].map(function(D){return D.sub(new qe(E.left,E.top)).div(new qe(E.width,E.height))}),{width:E.width,height:E.height}))}),[2,l({results:_,stats:a})]}})})},t.prototype.forward=function(n,r){return r===void 0&&(r={}),he(this,void 0,void 0,function(){var o;return pe(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,Kt(n)];case 1:return[4,o.apply(this,[i.sent(),r])];case 2:return[2,i.sent().results]}})})},t.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),he(this,void 0,void 0,function(){var o;return pe(this,function(i){switch(i.label){case 0:return o=this.forwardInput,[4,Kt(n)];case 1:return[2,o.apply(this,[i.sent(),r])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(n){return Gue(n)},t.prototype.extractParams=function(n){return Uue(n)},t}(xi),rle=.4,ole=[new qe(1.603231,2.094468),new qe(6.041143,7.080126),new qe(2.882459,3.518061),new qe(4.266906,5.178857),new qe(9.041765,10.66308)],ile=[117.001,114.697,97.404],ale=function(e){Ce(t,e);function t(){var n=this,r={withSeparableConvs:!0,iouThreshold:rle,classes:["face"],anchors:ole,meanRgb:ile,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=e.call(this,r)||this,n}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return he(this,void 0,void 0,function(){var o;return pe(this,function(i){switch(i.label){case 0:return[4,this.detect(n,r)];case 1:return o=i.sent(),[2,o.map(function(a){return new Uo(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t}(AN),ur={ssdMobilenetv1:new IN,tinyFaceDetector:new ale,tinyYolov2:new Wue,mtcnn:new nle,faceLandmark68Net:new CN,faceLandmark68TinyNet:new uue,faceRecognitionNet:new vue,faceExpressionNet:new Kse,ageGenderNet:new oue},NN=function(e){Ce(t,e);function t(n,r,o){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.extractedFaces=o,i}return t}(Bd),Aw=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r,o=this;return pe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,lm(n,this.input,function(a){return he(o,void 0,void 0,function(){return pe(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(u){return ur.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,n.map(function(a,s){return xN(a,r[s])})]}})})},t.prototype.withAgeAndGender=function(){return new Nw(this,this.input)},t}(NN),Dw=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r;return pe(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,Rw(n,this.input,function(i){return ur.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return r=o.sent(),[2,xN(n,r)]}})})},t.prototype.withAgeAndGender=function(){return new Fw(this,this.input)},t}(NN),Mw=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new Bw(this,this.input)},t.prototype.withFaceDescriptors=function(){return new $w(this,this.input)},t}(Aw),Ow=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new Lw(this,this.input)},t.prototype.withFaceDescriptor=function(){return new zw(this,this.input)},t}(Dw),FN=function(e){Ce(t,e);function t(n,r,o){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.extractedFaces=o,i}return t}(Bd),Nw=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r,o=this;return pe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,lm(n,this.input,function(a){return he(o,void 0,void 0,function(){return pe(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(u){return ur.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=i.sent(),[2,n.map(function(a,s){var u=r[s],l=u.age,c=u.gender,d=u.genderProbability;return TN(RN(a,c,d),l)})]}})})},t.prototype.withFaceExpressions=function(){return new Aw(this,this.input)},t}(FN),Fw=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r,o,i,a;return pe(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,Rw(n,this.input,function(u){return ur.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=s.sent(),o=r.age,i=r.gender,a=r.genderProbability,[2,TN(RN(n,i,a),o)]}})})},t.prototype.withFaceExpressions=function(){return new Dw(this,this.input)},t}(FN),Bw=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new Mw(this,this.input)},t.prototype.withFaceDescriptors=function(){return new $w(this,this.input)},t}(Nw),Lw=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new Ow(this,this.input)},t.prototype.withFaceDescriptor=function(){return new zw(this,this.input)},t}(Fw),BN=function(e){Ce(t,e);function t(n,r){var o=e.call(this)||this;return o.parentTask=n,o.input=r,o}return t}(Bd),$w=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r;return pe(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,lm(n,this.input,function(i){return Promise.all(i.map(function(a){return ur.faceRecognitionNet.computeFaceDescriptor(a)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=o.sent(),[2,r.map(function(i,a){return kN(n[a],i)})]}})})},t.prototype.withFaceExpressions=function(){return new Mw(this,this.input)},t.prototype.withAgeAndGender=function(){return new Bw(this,this.input)},t}(BN),zw=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r;return pe(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,Rw(n,this.input,function(i){return ur.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=o.sent(),[2,kN(n,r)]}})})},t.prototype.withFaceExpressions=function(){return new Ow(this,this.input)},t.prototype.withAgeAndGender=function(){return new Lw(this,this.input)},t}(BN),LN=function(e){Ce(t,e);function t(n,r,o){var i=e.call(this)||this;return i.parentTask=n,i.input=r,i.useTinyLandmarkNet=o,i}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?ur.faceLandmark68TinyNet:ur.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(Bd),sle=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r,o,i,a,s=this;return pe(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return n=u.sent(),r=n.map(function(l){return l.detection}),this.input instanceof ft?[4,xw(this.input,r)]:[3,3];case 2:return i=u.sent(),[3,5];case 3:return[4,bw(this.input,r)];case 4:i=u.sent(),u.label=5;case 5:return o=i,[4,Promise.all(o.map(function(l){return s.landmarkNet.detectLandmarks(l)}))];case 6:return a=u.sent(),o.forEach(function(l){return l instanceof ft&&l.dispose()}),[2,n.map(function(l,c){return _w(l,a[c])})]}})})},t.prototype.withFaceExpressions=function(){return new Mw(this,this.input)},t.prototype.withAgeAndGender=function(){return new Bw(this,this.input)},t.prototype.withFaceDescriptors=function(){return new $w(this,this.input)},t}(LN),ule=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r,o,i,a;return pe(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof ft?[4,xw(this.input,[r])]:[3,3]):[2];case 2:return i=s.sent(),[3,5];case 3:return[4,bw(this.input,[r])];case 4:i=s.sent(),s.label=5;case 5:return o=i,[4,this.landmarkNet.detectLandmarks(o[0])];case 6:return a=s.sent(),o.forEach(function(u){return u instanceof ft&&u.dispose()}),[2,_w(n,a)]}})})},t.prototype.withFaceExpressions=function(){return new Ow(this,this.input)},t.prototype.withAgeAndGender=function(){return new Lw(this,this.input)},t.prototype.withFaceDescriptor=function(){return new zw(this,this.input)},t}(LN),$N=function(e){Ce(t,e);function t(n,r){r===void 0&&(r=new um);var o=e.call(this)||this;return o.input=n,o.options=r,o}return t}(Bd),zN=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r,o,i;return pe(this,function(a){switch(a.label){case 0:return n=this,r=n.input,o=n.options,o instanceof PN?[4,ur.mtcnn.forward(r,o)]:[3,2];case 1:return[2,a.sent().map(function(s){return s.detection})];case 2:if(i=o instanceof DN?function(s){return ur.tinyFaceDetector.locateFaces(s,o)}:o instanceof um?function(s){return ur.ssdMobilenetv1.locateFaces(s,o)}:o instanceof Tw?function(s){return ur.tinyYolov2.locateFaces(s,o)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(r)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return he(n,void 0,void 0,function(){var o;return pe(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return o=i.sent(),[2,r(o.map(function(a){return mw({},a)}))]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new sle(this.runAndExtendWithFaceDetections(),this.input,n)},t.prototype.withFaceExpressions=function(){return new Aw(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new Nw(this.runAndExtendWithFaceDetections(),this.input)},t}($N);(function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return he(this,void 0,void 0,function(){var n,r;return pe(this,function(o){switch(o.label){case 0:return[4,new zN(this.input,this.options)];case 1:return n=o.sent(),r=n[0],n.forEach(function(i){i.score>r.score&&(r=i)}),[2,r]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return he(n,void 0,void 0,function(){var o;return pe(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return o=i.sent(),[2,r(o?mw({},o):void 0)]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new ule(this.runAndExtendWithFaceDetection(),this.input,n)},t.prototype.withFaceExpressions=function(){return new Dw(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new Fw(this.runAndExtendWithFaceDetection(),this.input)},t})($N);function lle(e,t){return t===void 0&&(t=new um),new zN(e,t)}function cle(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map(function(o,i){return o-r[i]}).reduce(function(o,i){return o+Math.pow(i,2)},0))}(function(){function e(t,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(t)?t:[t];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var o=1,i=function(){return"person "+o++};this._labeledDescriptors=r.map(function(a){if(a instanceof Wf)return a;if(a instanceof Float32Array)return new Wf(i(),[a]);if(a.descriptor&&a.descriptor instanceof Float32Array)return new Wf(i(),[a.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(t,n){return n.map(function(r){return cle(r,t)}).reduce(function(r,o){return r+o},0)/(n.length||1)},e.prototype.matchDescriptor=function(t){var n=this;return this.labeledDescriptors.map(function(r){var o=r.descriptors,i=r.label;return new lk(i,n.computeMeanDistance(t,o))}).reduce(function(r,o){return r.distance<o.distance?r:o})},e.prototype.findBestMatch=function(t){var n=this.matchDescriptor(t);return n.distance<this.distanceThreshold?n:new lk("unknown",n.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},e.fromJSON=function(t){var n=t.labeledDescriptors.map(function(r){return Wf.fromJSON(r)});return new e(n,t.distanceThreshold)},e})();const dle=()=>{const e=T.useRef(),[t,n]=T.useState(Wg.javascript),[r,o]=T.useState("javascript"),[i,a]=T.useState("vs-dark"),[s,u]=T.useState(14),l=T.useRef(),[c,d]=T.useState(null),[f,h]=T.useState(!1),[p,v]=T.useState(0),[y,m]=T.useState(null),[g,b]=T.useState(!0),[x,w]=T.useState(0),[S,C]=T.useState(!1),_=aA(),[k,E]=T.useState(!0);T.useEffect(()=>((async()=>{try{const $=await navigator.mediaDevices.getUserMedia({video:!0});l.current.srcObject=$;const G=new MediaRecorder($);d(G),await ur.tinyFaceDetector.loadFromUri("/models"),b(!0)}catch($){console.error("Error accessing the camera: ",$),b(!1),_({title:"Error",description:"Failed to access the camera.",status:"error",duration:5e3,isClosable:!0})}})(),()=>{l.current&&l.current.srcObject&&l.current.srcObject.getTracks().forEach(G=>G.stop())}),[_]),T.useEffect(()=>{const F=()=>{if(document.hidden){w(G=>G+.5);const $=setInterval(()=>{v(G=>G+1)},1e3);m($)}else w($=>$+.5),clearInterval(y),m(null)};return document.addEventListener("visibilitychange",F),()=>{document.removeEventListener("visibilitychange",F),clearInterval(y)}},[y]),T.useEffect(()=>{const F=$=>{($.key==="PrintScreen"||$.ctrlKey&&$.shiftKey&&$.key==="S"||$.metaKey&&$.shiftKey&&$.key==="S"||$.metaKey&&$.shiftKey&&($.key==="3"||$.key==="4"))&&(C(!0),_({title:"Screenshot Attempt Detected",description:"Screenshots are not allowed.",status:"error",duration:3e3,isClosable:!0}),$.preventDefault())};return window.addEventListener("keydown",F),()=>{window.removeEventListener("keydown",F)}},[_]);const A=()=>{l.current&&l.current.srcObject&&(l.current.srcObject.getTracks().forEach($=>$.stop()),l.current.srcObject=null),b(!1),_({title:"Camera Stopped",description:"Camera access has been stopped.",status:"success",duration:5e3,isClosable:!0})},D=(F,$)=>{e.current=F,F.focus(),F.addCommand($.KeyMod.CtrlCmd|$.KeyCode.KeyC,()=>{_({title:"Copy Disabled",description:"Copying is disabled in the editor.",status:"warning",duration:3e3,isClosable:!0,position:"top-center"})}),F.addCommand($.KeyMod.CtrlCmd|$.KeyCode.KeyV,()=>{_({title:"Paste Disabled",description:"Pasting is disabled in the editor.",status:"warning",duration:3e3,isClosable:!0})})},U=F=>{o(F),n(Wg[F])},H=(F,$)=>{F.languages.registerCompletionItemProvider($,{provideCompletionItems:()=>{let G=[];switch($){case"javascript":G=[{label:"console.log",kind:F.languages.CompletionItemKind.Function,insertText:"console.log('${1:}')",insertTextRules:F.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Log to console"}];break;case"python":G=[{label:"print",kind:F.languages.CompletionItemKind.Function,insertText:"print('${1:}')",insertTextRules:F.languages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:"Print to console"}];break;default:G=[]}return{suggestions:G}}})},B=F=>{a(F.target.value)},V=F=>{u(parseInt(F.target.value))};T.useEffect(()=>{const $=setInterval(async()=>{try{const G=l.current;if(G){const Q=await lle(G,new DN);E(Q.length>0),Q.length||_({title:"No Face Detected",description:"Please make sure your face is visible in the video.",status:"warning",duration:3e3,isClosable:!0})}}catch(G){console.error("Error detecting face:",G),E(!1),_({title:"Error",description:"Failed to detect face.",status:"error",duration:5e3,isClosable:!0})}},1e3);return()=>clearInterval($)},[_]);const M=A_({base:"80px",md:"150px"}),O=A_({base:!0,md:!1});return L.jsxs(Rr,{p:4,position:"relative",children:[S&&L.jsx(Rr,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"10",children:L.jsx(bo,{fontSize:"2xl",color:"red.500",children:"Screenshot Attempt Detected"})}),!g&&L.jsx(bo,{color:"red.500",mb:4,children:"Please Turn your Camera."}),g&&L.jsx(wZ,{children:L.jsx(Rr,{position:"absolute",top:"20px",right:"20px",bg:"gray.800",borderRadius:"md",p:1,children:L.jsx("video",{ref:l,autoPlay:!0,style:{width:M,borderRadius:"8px"}})})}),L.jsxs(xh,{spacing:8,flexDirection:O?"column":"row",children:[L.jsx(qy,{align:"stretch",justifyContent:"flex-start",flex:1,children:L.jsx(bo,{textAlign:"left",children:"**DSA Question:** Find the missing number in an array containing integers from 1 to n. One number is missing from the array. Write a function to find the missing number. Example: Input: [1, 2, 4, 6, 3, 7, 8] Output: 5"})}),L.jsx(Rr,{flex:1,width:O?"100%":"auto",children:L.jsxs(qy,{spacing:4,align:"stretch",children:[L.jsxs(xh,{flexWrap:"wrap",children:[L.jsx(_Z,{language:r,onSelect:U}),L.jsx(vk,{value:i,onChange:B,options:[{value:"vs-dark",label:"Dark Theme"},{value:"vs-light",label:"Light Theme"}],width:"150px",mr:4}),L.jsx(vk,{value:s,onChange:V,options:[{value:14,label:"14px"},{value:16,label:"16px"},{value:18,label:"18px"}],width:"120px"})]}),L.jsx(Rr,{bg:"gray.800",borderRadius:"md",p:4,position:"relative",children:L.jsx(NJ,{options:{minimap:{enabled:!1},fontSize:s,wordWrap:"on",suggest:{showWords:!0,showMethods:!0,showFunctions:!0}},height:"50vh",theme:i,language:r,defaultValue:Wg[r],onMount:(F,$)=>{D(F,$),H($,r)},value:t,onChange:F=>n(F)})}),L.jsx(Rr,{children:L.jsx(jee,{editorRef:e,language:r})})]})})]}),L.jsxs(xh,{spacing:4,mt:4,flexWrap:"wrap",children:[L.jsx(Bu,{isDisabled:f||!g,colorScheme:"green",children:"Start Recording"}),L.jsx(Bu,{onClick:A,colorScheme:"red",children:"Stop Camera Access"})]}),L.jsxs(bo,{mt:4,children:["Inactive Time: ",p," seconds"]}),L.jsxs(bo,{mt:4,children:["Tab Changes: ",x]})]})},vk=({value:e,onChange:t,options:n,...r})=>L.jsx(FD,{value:e,onChange:t,...r,children:n.map(o=>L.jsx("option",{value:o.value,children:o.label},o.value))});function fle(){return L.jsx(Rr,{minH:"100vh",bg:"#0f0a19",color:"gray.500",px:6,py:8,children:L.jsx(dle,{})})}const hle=gU({config:{initialColorMode:"dark",useSystemColorMode:!1}});b0.createRoot(document.getElementById("root")).render(L.jsx(lr.StrictMode,{children:L.jsx(N7,{theme:hle,children:L.jsx(fle,{})})}))});export default ple();
