import{i as fe}from"./state-local-BBNhjlcY.js";import{r as c,W as C}from"./react-jFCOF4Hn.js";import"./cookie-BUjw_IJ9.js";function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ee(Object(r),!0).forEach(function(n){de(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ge(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function pe(e,t){if(e==null)return{};var r=ge(e,t),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ve(e,t){return he(e)||me(e,t)||we(e,t)||be()}function he(e){if(Array.isArray(e))return e}function me(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,o=!1,a=void 0;try{for(var d=e[Symbol.iterator](),m;!(n=(m=d.next()).done)&&(r.push(m.value),!(t&&r.length===t));n=!0);}catch(y){o=!0,a=y}finally{try{!n&&d.return!=null&&d.return()}finally{if(o)throw a}}return r}}function we(e,t){if(e){if(typeof e=="string")return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return re(e,t)}}function re(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function be(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Me={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function ye(e){return function t(){for(var r=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return o.length>=e.length?e.apply(this,o):function(){for(var d=arguments.length,m=new Array(d),y=0;y<d;y++)m[y]=arguments[y];return t.apply(r,[].concat(o,m))}}}function Oe(e){return{}.toString.call(e).includes("Object")}function je(e){return e||ne("configIsRequired"),Oe(e)||ne("configType"),e.urls?(Ee(),{paths:{vs:e.urls.monacoBase}}):e}function Ee(){console.warn(oe.deprecation)}function Se(e,t){throw new Error(e[t]||e.default)}var oe={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},ne=ye(Se)(oe),Pe={config:je},Ie=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return function(o){return r.reduceRight(function(a,d){return d(a)},o)}};function ie(e,t){return Object.keys(t).forEach(function(r){t[r]instanceof Object&&e[r]&&Object.assign(t[r],ie(e[r],t[r]))}),te(te({},e),t)}var Re={type:"cancelation",msg:"operation is manually canceled"};function K(e){var t=!1,r=new Promise(function(n,o){e.then(function(a){return t?o(Re):n(a)}),e.catch(o)});return r.cancel=function(){return t=!0},r}var Le=fe.create({config:Me,isInitialized:!1,resolve:null,reject:null,monaco:null}),ae=ve(Le,2),N=ae[0],q=ae[1];function Ce(e){var t=Pe.config(e),r=t.monaco,n=pe(t,["monaco"]);q(function(o){return{config:ie(o.config,n),monaco:r}})}function Ae(){var e=N(function(t){var r=t.monaco,n=t.isInitialized,o=t.resolve;return{monaco:r,isInitialized:n,resolve:o}});if(!e.isInitialized){if(q({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),K(Q);if(window.monaco&&window.monaco.editor)return ce(window.monaco),e.resolve(window.monaco),K(Q);Ie(Ve,xe)(_e)}return K(Q)}function Ve(e){return document.body.appendChild(e)}function De(e){var t=document.createElement("script");return e&&(t.src=e),t}function xe(e){var t=N(function(n){var o=n.config,a=n.reject;return{config:o,reject:a}}),r=De("".concat(t.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=t.reject,r}function _e(){var e=N(function(r){var n=r.config,o=r.resolve,a=r.reject;return{config:n,resolve:o,reject:a}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(r){ce(r),e.resolve(r)},function(r){e.reject(r)})}function ce(e){N().monaco||q({monaco:e})}function ze(){return N(function(e){var t=e.monaco;return t})}var Q=new Promise(function(e,t){return q({resolve:e,reject:t})}),$={config:Ce,init:Ae,__getMonacoInstance:ze},Ne={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},X=Ne,Te={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},ke=Te;function We({children:e}){return C.createElement("div",{style:ke.container},e)}var Ue=We,$e=Ue;function qe({width:e,height:t,isEditorReady:r,loading:n,_ref:o,className:a,wrapperProps:d}){return C.createElement("section",{style:{...X.wrapper,width:e,height:t},...d},!r&&C.createElement($e,null,n),C.createElement("div",{ref:o,style:{...X.fullWidth,...!r&&X.hide},className:a}))}var Fe=qe,ue=c.memo(Fe);function He(e){c.useEffect(e,[])}var Z=He;function Be(e,t,r=!0){let n=c.useRef(!0);c.useEffect(n.current||!r?()=>{n.current=!1}:e,t)}var M=Be;function z(){}function L(e,t,r,n){return Ge(e,n)||Ye(e,t,r,n)}function Ge(e,t){return e.editor.getModel(le(e,t))}function Ye(e,t,r,n){return e.editor.createModel(t,r,n?le(e,n):void 0)}function le(e,t){return e.Uri.parse(t)}function Je({original:e,modified:t,language:r,originalLanguage:n,modifiedLanguage:o,originalModelPath:a,modifiedModelPath:d,keepCurrentOriginalModel:m=!1,keepCurrentModifiedModel:y=!1,theme:j="light",loading:T="Loading...",options:O={},height:F="100%",width:H="100%",className:B,wrapperProps:G={},beforeMount:Y=z,onMount:J=z}){let[w,A]=c.useState(!1),[S,p]=c.useState(!0),v=c.useRef(null),g=c.useRef(null),V=c.useRef(null),h=c.useRef(J),l=c.useRef(Y),P=c.useRef(!1);Z(()=>{let i=$.init();return i.then(s=>(g.current=s)&&p(!1)).catch(s=>(s==null?void 0:s.type)!=="cancelation"&&console.error("Monaco initialization: error:",s)),()=>v.current?D():i.cancel()}),M(()=>{if(v.current&&g.current){let i=v.current.getOriginalEditor(),s=L(g.current,e||"",n||r||"text",a||"");s!==i.getModel()&&i.setModel(s)}},[a],w),M(()=>{if(v.current&&g.current){let i=v.current.getModifiedEditor(),s=L(g.current,t||"",o||r||"text",d||"");s!==i.getModel()&&i.setModel(s)}},[d],w),M(()=>{let i=v.current.getModifiedEditor();i.getOption(g.current.editor.EditorOption.readOnly)?i.setValue(t||""):t!==i.getValue()&&(i.executeEdits("",[{range:i.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),i.pushUndoStop())},[t],w),M(()=>{var i,s;(s=(i=v.current)==null?void 0:i.getModel())==null||s.original.setValue(e||"")},[e],w),M(()=>{let{original:i,modified:s}=v.current.getModel();g.current.editor.setModelLanguage(i,n||r||"text"),g.current.editor.setModelLanguage(s,o||r||"text")},[r,n,o],w),M(()=>{var i;(i=g.current)==null||i.editor.setTheme(j)},[j],w),M(()=>{var i;(i=v.current)==null||i.updateOptions(O)},[O],w);let k=c.useCallback(()=>{var E;if(!g.current)return;l.current(g.current);let i=L(g.current,e||"",n||r||"text",a||""),s=L(g.current,t||"",o||r||"text",d||"");(E=v.current)==null||E.setModel({original:i,modified:s})},[r,t,o,e,n,a,d]),W=c.useCallback(()=>{var i;!P.current&&V.current&&(v.current=g.current.editor.createDiffEditor(V.current,{automaticLayout:!0,...O}),k(),(i=g.current)==null||i.editor.setTheme(j),A(!0),P.current=!0)},[O,j,k]);c.useEffect(()=>{w&&h.current(v.current,g.current)},[w]),c.useEffect(()=>{!S&&!w&&W()},[S,w,W]);function D(){var s,E,I,x;let i=(s=v.current)==null?void 0:s.getModel();m||((E=i==null?void 0:i.original)==null||E.dispose()),y||((I=i==null?void 0:i.modified)==null||I.dispose()),(x=v.current)==null||x.dispose()}return C.createElement(ue,{width:H,height:F,isEditorReady:w,loading:T,_ref:V,className:B,wrapperProps:G})}var Ke=Je,at=c.memo(Ke);function Qe(){let[e,t]=c.useState($.__getMonacoInstance());return Z(()=>{let r;return e||(r=$.init(),r.then(n=>{t(n)})),()=>r==null?void 0:r.cancel()}),e}var ct=Qe;function Xe(e){let t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}var Ze=Xe,U=new Map;function et({defaultValue:e,defaultLanguage:t,defaultPath:r,value:n,language:o,path:a,theme:d="light",line:m,loading:y="Loading...",options:j={},overrideServices:T={},saveViewState:O=!0,keepCurrentModel:F=!1,width:H="100%",height:B="100%",className:G,wrapperProps:Y={},beforeMount:J=z,onMount:w=z,onChange:A,onValidate:S=z}){let[p,v]=c.useState(!1),[g,V]=c.useState(!0),h=c.useRef(null),l=c.useRef(null),P=c.useRef(null),k=c.useRef(w),W=c.useRef(J),D=c.useRef(),i=c.useRef(n),s=Ze(a),E=c.useRef(!1),I=c.useRef(!1);Z(()=>{let u=$.init();return u.then(f=>(h.current=f)&&V(!1)).catch(f=>(f==null?void 0:f.type)!=="cancelation"&&console.error("Monaco initialization: error:",f)),()=>l.current?se():u.cancel()}),M(()=>{var f,b,_,R;let u=L(h.current,e||n||"",t||o||"",a||r||"");u!==((f=l.current)==null?void 0:f.getModel())&&(O&&U.set(s,(b=l.current)==null?void 0:b.saveViewState()),(_=l.current)==null||_.setModel(u),O&&((R=l.current)==null||R.restoreViewState(U.get(a))))},[a],p),M(()=>{var u;(u=l.current)==null||u.updateOptions(j)},[j],p),M(()=>{!l.current||n===void 0||(l.current.getOption(h.current.editor.EditorOption.readOnly)?l.current.setValue(n):n!==l.current.getValue()&&(I.current=!0,l.current.executeEdits("",[{range:l.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),l.current.pushUndoStop(),I.current=!1))},[n],p),M(()=>{var f,b;let u=(f=l.current)==null?void 0:f.getModel();u&&o&&((b=h.current)==null||b.editor.setModelLanguage(u,o))},[o],p),M(()=>{var u;m!==void 0&&((u=l.current)==null||u.revealLine(m))},[m],p),M(()=>{var u;(u=h.current)==null||u.editor.setTheme(d)},[d],p);let x=c.useCallback(()=>{var u;if(!(!P.current||!h.current)&&!E.current){W.current(h.current);let f=a||r,b=L(h.current,n||e||"",t||o||"",f||"");l.current=(u=h.current)==null?void 0:u.editor.create(P.current,{model:b,automaticLayout:!0,...j},T),O&&l.current.restoreViewState(U.get(f)),h.current.editor.setTheme(d),m!==void 0&&l.current.revealLine(m),v(!0),E.current=!0}},[e,t,r,n,o,a,j,T,O,d,m]);c.useEffect(()=>{p&&k.current(l.current,h.current)},[p]),c.useEffect(()=>{!g&&!p&&x()},[g,p,x]),i.current=n,c.useEffect(()=>{var u,f;p&&A&&((u=D.current)==null||u.dispose(),D.current=(f=l.current)==null?void 0:f.onDidChangeModelContent(b=>{I.current||A(l.current.getValue(),b)}))},[p,A]),c.useEffect(()=>{if(p){let u=h.current.editor.onDidChangeMarkers(f=>{var _;let b=(_=l.current.getModel())==null?void 0:_.uri;if(b&&f.find(R=>R.path===b.path)){let R=h.current.editor.getModelMarkers({resource:b});S==null||S(R)}});return()=>{u==null||u.dispose()}}return()=>{}},[p,S]);function se(){var u,f;(u=D.current)==null||u.dispose(),F?O&&U.set(a,l.current.saveViewState()):(f=l.current.getModel())==null||f.dispose(),l.current.dispose()}return C.createElement(ue,{width:H,height:B,isEditorReady:p,loading:y,_ref:P,className:G,wrapperProps:Y})}var tt=et,rt=c.memo(tt),ut=rt;export{at as DiffEditor,rt as Editor,ut as default,$ as loader,ct as useMonaco};
